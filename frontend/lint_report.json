
> frontend@0.0.0 lint
> eslint . --format json

[{"filePath":"R:\\webplot\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\api\\axios.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\AccordionMenu.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[51,58],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Plus, Minus, ChevronRight } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AccordionItem = ({ item, isOpen, onClick }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div style={{ marginBottom: '16px' }}>\r\n            <motion.button\r\n                initial={false}\r\n                onClick={onClick}\r\n                style={{\r\n                    width: '100%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '16px 24px',\r\n                    borderRadius: '16px',\r\n                    background: isOpen ? 'var(--input-bg)' : 'transparent',\r\n                    border: '1.5px solid var(--gold-border)',\r\n                    color: 'var(--text-primary)',\r\n                    cursor: 'pointer',\r\n                    fontSize: '15px',\r\n                    fontWeight: isOpen ? '900' : '800',\r\n                    transition: 'all 0.3s ease',\r\n                    textAlign: 'left',\r\n                    outline: 'none',\r\n                    boxShadow: isOpen ? '0 10px 25px rgba(0,0,0,0.1)' : 'none'\r\n                }}\r\n                whileHover={{ scale: 1.02, backgroundColor: 'var(--input-bg)' }}\r\n                whileTap={{ scale: 0.98 }}\r\n            >\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <div style={{\r\n                        color: isOpen ? 'var(--gold)' : 'var(--text-muted)',\r\n                        transition: 'color 0.3s'\r\n                    }}>\r\n                        {item.icon}\r\n                    </div>\r\n                    <span>{item.title}</span>\r\n                </div>\r\n\r\n                <div style={{\r\n                    width: '24px',\r\n                    height: '24px',\r\n                    borderRadius: '50%',\r\n                    background: isOpen ? 'var(--gold)' : 'var(--input-bg)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    color: isOpen ? '#000' : 'var(--text-muted)',\r\n                    marginTop: '2px', // optical alignment\r\n                    border: '1.5px solid var(--gold-border)'\r\n                }}>\r\n                    {isOpen ? <Minus size={14} /> : <Plus size={14} />}\r\n                </div>\r\n            </motion.button>\r\n\r\n            <AnimatePresence initial={false}>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        initial=\"collapsed\"\r\n                        animate=\"open\"\r\n                        exit=\"collapsed\"\r\n                        variants={{\r\n                            open: { opacity: 1, height: \"auto\", marginTop: 12 },\r\n                            collapsed: { opacity: 0, height: 0, marginTop: 0 }\r\n                        }}\r\n                        transition={{ duration: 0.3, ease: [0.04, 0.62, 0.23, 0.98] }}\r\n                        style={{ overflow: 'hidden' }}\r\n                    >\r\n                        <div style={{\r\n                            background: 'var(--bg-secondary)',\r\n                            borderRadius: '16px',\r\n                            border: '1.5px solid var(--border-color)',\r\n                            padding: '10px',\r\n                            boxShadow: 'inset 0 2px 10px rgba(0,0,0,0.05)'\r\n                        }}>\r\n                            {item.subItems && item.subItems.map((sub, idx) => (\r\n                                <motion.div\r\n                                    key={idx}\r\n                                    initial={{ opacity: 0, x: -10 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    transition={{ delay: idx * 0.05 }}\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        navigate(sub.path);\r\n                                    }}\r\n                                    style={{\r\n                                        padding: '12px 18px',\r\n                                        borderRadius: '10px',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'space-between',\r\n                                        color: 'var(--text-primary)',\r\n                                        fontSize: '14px',\r\n                                        fontWeight: '900',\r\n                                        marginBottom: idx === item.subItems.length - 1 ? 0 : '6px',\r\n                                        transition: 'all 0.2s',\r\n                                        borderBottom: '1px solid var(--gold-border)'\r\n                                    }}\r\n                                    onMouseOver={(e) => {\r\n                                        e.currentTarget.style.background = 'var(--gold-glow)';\r\n                                        e.currentTarget.style.color = 'var(--text-primary)';\r\n                                        e.currentTarget.style.paddingLeft = '22px';\r\n                                    }}\r\n                                    onMouseOut={(e) => {\r\n                                        e.currentTarget.style.background = 'transparent';\r\n                                        e.currentTarget.style.color = 'var(--text-secondary)';\r\n                                        e.currentTarget.style.paddingLeft = '18px';\r\n                                    }}\r\n                                >\r\n                                    <span>{sub.label}</span>\r\n                                    <ChevronRight size={14} color=\"var(--gold)\" />\r\n                                </motion.div>\r\n                            ))}\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AccordionMenu = ({ items }) => {\r\n    const [expanded, setExpanded] = useState(false);\r\n\r\n    return (\r\n        <div style={{ width: '100%', maxWidth: '400px' }}>\r\n            {items.map((item) => (\r\n                <AccordionItem\r\n                    key={item.id}\r\n                    item={item}\r\n                    isOpen={expanded === item.id}\r\n                    onClick={() => setExpanded(expanded === item.id ? false : item.id)}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AccordionMenu;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\BackgroundCarousel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\BentoCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\BottomNav.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\BranchSwitcher.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[185,192],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useBranch } from '../context/BranchContext';\r\nimport { MapPin, ChevronDown, Check } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst BranchSwitcher = () => {\r\n    const { branches, currentBranch, switchBranch } = useBranch();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    // Close on click outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    if (!branches || branches.length === 0) return null;\r\n\r\n    return (\r\n        <div style={{ position: 'relative', pointerEvents: 'auto' }} ref={dropdownRef}>\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                style={{\r\n                    background: 'rgba(255, 255, 255, 0.03)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    borderRadius: '50px',\r\n                    padding: '8px 16px',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '10px',\r\n                    color: '#fff',\r\n                    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                    boxShadow: '0 4px 15px rgba(0, 0, 0, 0.2)',\r\n                    backdropFilter: 'blur(10px)',\r\n                    WebkitBackdropFilter: 'blur(10px)'\r\n                }}\r\n                onMouseOver={(e) => {\r\n                    e.currentTarget.style.background = 'rgba(255, 255, 255, 0.08)';\r\n                    e.currentTarget.style.borderColor = 'rgba(176, 141, 87, 0.4)';\r\n                }}\r\n                onMouseOut={(e) => {\r\n                    if (!isOpen) {\r\n                        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.03)';\r\n                        e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n                    }\r\n                }}\r\n            >\r\n                <div style={{\r\n                    background: 'linear-gradient(135deg, #b08d57 0%, #8a6d43 100%)',\r\n                    borderRadius: '50%',\r\n                    padding: '4px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center'\r\n                }}>\r\n                    <MapPin size={14} color=\"#fff\" />\r\n                </div>\r\n                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start' }}>\r\n                    <span style={{ fontSize: '9px', color: '#b08d57', fontWeight: '800', textTransform: 'uppercase', letterSpacing: '1px', lineHeight: '1' }}>Branch</span>\r\n                    <span style={{ fontSize: '13px', fontWeight: '700', color: '#fff' }}>{currentBranch?.name || 'Select Branch'}</span>\r\n                </div>\r\n                <ChevronDown size={14} color=\"#94a3b8\" style={{ transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.3s' }} />\r\n            </button>\r\n\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                        animate={{ opacity: 1, y: 5, scale: 1 }}\r\n                        exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                        transition={{ duration: 0.2, cubicBezier: [0.4, 0, 0.2, 1] }}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: '100%',\r\n                            left: 0,\r\n                            width: '240px',\r\n                            background: 'rgba(15, 23, 42, 0.95)',\r\n                            backdropFilter: 'blur(25px)',\r\n                            WebkitBackdropFilter: 'blur(25px)',\r\n                            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                            borderRadius: '16px',\r\n                            padding: '8px',\r\n                            boxShadow: '0 15px 50px rgba(0, 0, 0, 0.6)',\r\n                            zIndex: 2001,\r\n                            overflow: 'hidden',\r\n                            marginTop: '5px'\r\n                        }}\r\n                    >\r\n                        <div style={{ padding: '8px 12px', fontSize: '10px', fontWeight: '800', color: '#64748b', textTransform: 'uppercase', letterSpacing: '1px' }}>\r\n                            Switch Location\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                            {branches.map(branch => (\r\n                                <button\r\n                                    key={branch.id}\r\n                                    onClick={() => {\r\n                                        switchBranch(branch.id);\r\n                                        setIsOpen(false);\r\n                                    }}\r\n                                    style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'space-between',\r\n                                        width: '100%',\r\n                                        padding: '10px 12px',\r\n                                        borderRadius: '10px',\r\n                                        background: currentBranch?.id === branch.id ? 'rgba(176, 141, 87, 0.1)' : 'transparent',\r\n                                        border: 'none',\r\n                                        cursor: 'pointer',\r\n                                        color: currentBranch?.id === branch.id ? '#b08d57' : '#e2e8f0',\r\n                                        fontSize: '13px',\r\n                                        fontWeight: currentBranch?.id === branch.id ? '700' : '500',\r\n                                        transition: 'all 0.2s',\r\n                                        textAlign: 'left'\r\n                                    }}\r\n                                    onMouseOver={(e) => {\r\n                                        if (currentBranch?.id !== branch.id) {\r\n                                            e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\r\n                                        }\r\n                                    }}\r\n                                    onMouseOut={(e) => {\r\n                                        if (currentBranch?.id !== branch.id) {\r\n                                            e.currentTarget.style.background = 'transparent';\r\n                                        }\r\n                                    }}\r\n                                >\r\n                                    <span>{branch.name}</span>\r\n                                    {currentBranch?.id === branch.id && <Check size={14} />}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BranchSwitcher;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\EliteCommandTerminal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[105,112],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  227 |     const [mounted, setMounted] = useState(false);\n  228 |     useEffect(() => {\n> 229 |         setMounted(true);\n      |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  230 |         return () => setMounted(false);\n  231 |     }, []);\n  232 |","line":229,"column":9,"nodeType":null,"endLine":229,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Terminal, X, ChevronRight, Shield, ShieldCheck, Cpu } from 'lucide-react';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst EliteCommandTerminal = ({ isOpen, onClose }) => {\r\n    const { user } = useAuth();\r\n    const [input, setInput] = useState('');\r\n    const [history, setHistory] = useState([\r\n        { type: 'info', text: 'ELITE COMMAND TERMINAL v1.0.4' },\r\n        { type: 'info', text: 'ESTABLISHING SECURE PROTOCOLS...' },\r\n        { type: 'success', text: 'CONNECTION ENCRYPTED. ACCESS GRANTED.' },\r\n        { type: 'info', text: 'TYPE \"HELP\" FOR LIST OF OPERATIONAL COMMANDS.' },\r\n    ]);\r\n    const scrollRef = useRef(null);\r\n    const inputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && inputRef.current) {\r\n            inputRef.current.focus();\r\n        }\r\n    }, [isOpen]);\r\n\r\n    useEffect(() => {\r\n        if (scrollRef.current) {\r\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n        }\r\n    }, [history]);\r\n\r\n    const handleCommand = (cmd) => {\r\n        const cleanCmd = cmd.trim().toLowerCase();\r\n        if (!cleanCmd) return;\r\n\r\n        const newLog = { type: 'cmd', text: `> ${cmd}` };\r\n        setHistory(prev => [...prev, newLog]);\r\n\r\n        let response = { type: 'error', text: `COMMAND NOT RECOGNIZED: \"${cleanCmd}\"` };\r\n\r\n        if (cleanCmd === 'help') {\r\n            response = { type: 'info', text: 'AVAILABLE COMMANDS: HELP, STATUS, LOGS, CLEAR, EXIT, ACCESS, SYSTEM' };\r\n        } else if (cleanCmd === 'status') {\r\n            response = { type: 'info', text: 'SYSTEM STATUS: ALL CORE MODULES OPERATIONAL. LATENCY: 14ms.' };\r\n        } else if (cleanCmd === 'clear') {\r\n            setHistory([]);\r\n            setInput('');\r\n            return;\r\n        } else if (cleanCmd === 'exit') {\r\n            onClose();\r\n            setInput('');\r\n            return;\r\n        } else if (cleanCmd === 'logs') {\r\n            response = { type: 'info', text: 'FETCHING RECENT ACCESS LOGS... [RADHIR: OK] [RUCHIKA: OK] [AFSAR: OK]' };\r\n        } else if (cleanCmd === 'access') {\r\n            response = { type: 'success', text: `USER: ${user?.username.toUpperCase()} | LEVEL: ${['radhir', 'ruchika', 'afsar'].includes(user?.username.toLowerCase()) ? 'ELITE-ALPHA' : 'STANDARD-OPERATIVE'}` };\r\n        } else if (cleanCmd === 'system') {\r\n            response = { type: 'info', text: 'VERSION: Elite Shine ERP Pre-Alpha 9 | ARCH: Django/React | DB: PostgreSQL' };\r\n        }\r\n\r\n        setTimeout(() => {\r\n            setHistory(prev => [...prev, response]);\r\n        }, 100);\r\n\r\n        setInput('');\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter') {\r\n            handleCommand(input);\r\n        } else if (e.key === 'Escape') {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <Portal>\r\n            <div className=\"terminal-overlay\" onClick={onClose}>\r\n                <motion.div\r\n                    initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                    animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                    exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                    className=\"terminal-window\"\r\n                    onClick={(e) => e.stopPropagation()}\r\n                >\r\n                    <div className=\"terminal-header\">\r\n                        <div className=\"header-left\">\r\n                            <Terminal size={14} className=\"terminal-icon\" />\r\n                            <span>ELITE_TERMINAL_XP_9</span>\r\n                        </div>\r\n                        <div className=\"header-controls\">\r\n                            <X size={16} onClick={onClose} className=\"close-btn\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"terminal-body\" ref={scrollRef}>\r\n                        {history.map((item, idx) => (\r\n                            <div key={idx} className={`terminal-line line-${item.type}`}>\r\n                                {item.text}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"terminal-footer\">\r\n                        <ChevronRight size={14} className=\"prompt-icon\" />\r\n                        <input\r\n                            ref={inputRef}\r\n                            type=\"text\"\r\n                            value={input}\r\n                            onChange={(e) => setInput(e.target.value)}\r\n                            onKeyDown={handleKeyDown}\r\n                            spellCheck=\"false\"\r\n                            autoComplete=\"off\"\r\n                        />\r\n                    </div>\r\n                </motion.div>\r\n\r\n                <style>{`\r\n                    .terminal-overlay {\r\n                        position: fixed;\r\n                        inset: 0;\r\n                        background: rgba(0, 0, 0, 0.4);\r\n                        backdrop-filter: blur(4px);\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        z-index: 10001;\r\n                        pointer-events: auto;\r\n                    }\r\n                    .terminal-window {\r\n                        width: 700px;\r\n                        height: 450px;\r\n                        background: #050505;\r\n                        border: 1px solid #b08d57;\r\n                        border-radius: 12px;\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        box-shadow: 0 0 50px rgba(176,141,87,0.2), 0 20px 60px rgba(0,0,0,0.8);\r\n                        overflow: hidden;\r\n                        font-family: 'JetBrains Mono', 'Fira Code', monospace;\r\n                    }\r\n                    .terminal-header {\r\n                        padding: 10px 15px;\r\n                        background: #111;\r\n                        border-bottom: 1px solid rgba(176,141,87,0.2);\r\n                        display: flex;\r\n                        justify-content: space-between;\r\n                        align-items: center;\r\n                        color: #b08d57;\r\n                        font-size: 11px;\r\n                        font-weight: 800;\r\n                        letter-spacing: 1px;\r\n                        text-transform: uppercase;\r\n                    }\r\n                    .header-left {\r\n                        display: flex;\r\n                        align-items: center;\r\n                        gap: 10px;\r\n                    }\r\n                    .terminal-icon {\r\n                        animation: pulse 2s infinite;\r\n                    }\r\n                    @keyframes pulse {\r\n                        0% { opacity: 0.5; }\r\n                        50% { opacity: 1; }\r\n                        100% { opacity: 0.5; }\r\n                    }\r\n                    .close-btn {\r\n                        cursor: pointer;\r\n                        opacity: 0.6;\r\n                    }\r\n                    .close-btn:hover {\r\n                        opacity: 1;\r\n                        color: #ff4444;\r\n                    }\r\n                    .terminal-body {\r\n                        flex: 1;\r\n                        padding: 20px;\r\n                        overflow-y: auto;\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        gap: 8px;\r\n                    }\r\n                    .terminal-line {\r\n                        font-size: 13px;\r\n                        line-height: 1.5;\r\n                        word-break: break-all;\r\n                    }\r\n                    .line-info { color: #8492a6; }\r\n                    .line-success { color: #10b981; }\r\n                    .line-error { color: #ff5f56; }\r\n                    .line-cmd { color: #b08d57; font-weight: 800; }\r\n                    \r\n                    .terminal-footer {\r\n                        padding: 15px 20px;\r\n                        background: #0a0a0a;\r\n                        display: flex;\r\n                        align-items: center;\r\n                        gap: 10px;\r\n                        border-top: 1px solid rgba(255,255,255,0.05);\r\n                    }\r\n                    .prompt-icon {\r\n                        color: #b08d57;\r\n                    }\r\n                    .terminal-footer input {\r\n                        flex: 1;\r\n                        background: transparent;\r\n                        border: none;\r\n                        outline: none;\r\n                        color: #fff;\r\n                        font-family: inherit;\r\n                        font-size: 14px;\r\n                    }\r\n                    \r\n                    .terminal-body::-webkit-scrollbar { width: 4px; }\r\n                    .terminal-body::-webkit-scrollbar-track { background: transparent; }\r\n                    .terminal-body::-webkit-scrollbar-thumb { background: rgba(176,141,87,0.2); border-radius: 10px; }\r\n                `}</style>\r\n            </div>\r\n        </Portal>\r\n    );\r\n};\r\n\r\n// Helper for Portal rendering\r\nconst Portal = ({ children }) => {\r\n    const [mounted, setMounted] = useState(false);\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        return () => setMounted(false);\r\n    }, []);\r\n\r\n    if (!mounted) return null;\r\n\r\n    return ReactDOM.createPortal(children, document.body);\r\n};\r\n\r\nexport default EliteCommandTerminal;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\FloatingDock.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[74,82],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from \"react\";\r\nimport { AnimatePresence, motion, useMotionValue, useSpring, useTransform } from \"framer-motion\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { ChevronUp } from \"lucide-react\";\r\n\r\n/**\r\n * Floating Dock Component\r\n * Adapts the provided design to standard CSS/Inline styles and Lucide React.\r\n * Uses framer-motion for animations.\r\n */\r\n\r\nexport const FloatingDock = ({ items, desktopStyle, mobileStyle }) => {\r\n    return (\r\n        <>\r\n            <FloatingDockDesktop items={items} style={desktopStyle} />\r\n            <FloatingDockMobile items={items} style={mobileStyle} />\r\n        </>\r\n    );\r\n};\r\n\r\nconst FloatingDockMobile = ({ items, style }) => {\r\n    const [open, setOpen] = useState(false);\r\n    return (\r\n        <div style={{ position: 'relative', display: 'block', ...style }} className=\"mobile-dock\">\r\n            <AnimatePresence>\r\n                {open && (\r\n                    <motion.div\r\n                        layoutId=\"nav\"\r\n                        style={{\r\n                            position: 'absolute',\r\n                            bottom: '100%',\r\n                            marginBottom: '16px',\r\n                            left: '50%',\r\n                            transform: 'translateX(-50%)', // Center horizontally\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: '12px',\r\n                            alignItems: 'center',\r\n                            background: 'rgba(10, 12, 16, 0.8)',\r\n                            backdropFilter: 'blur(12px)',\r\n                            padding: '12px',\r\n                            borderRadius: '24px',\r\n                            border: '1px solid rgba(255,255,255,0.1)'\r\n                        }}\r\n                    >\r\n                        {items.map((item, idx) => (\r\n                            <motion.div\r\n                                key={item.title}\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{\r\n                                    opacity: 0,\r\n                                    y: 10,\r\n                                    transition: { delay: idx * 0.05 },\r\n                                }}\r\n                                transition={{ delay: (items.length - 1 - idx) * 0.05 }}\r\n                            >\r\n                                <Link\r\n                                    to={item.href}\r\n                                    key={item.title}\r\n                                    style={{\r\n                                        display: 'flex',\r\n                                        height: '40px',\r\n                                        width: '40px',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        borderRadius: '50%',\r\n                                        background: 'rgba(255, 255, 255, 0.05)',\r\n                                        color: '#b08d57'\r\n                                    }}\r\n                                >\r\n                                    <div style={{ width: '20px', height: '20px' }}>{item.icon}</div>\r\n                                </Link>\r\n                            </motion.div>\r\n                        ))}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n            <button\r\n                onClick={() => setOpen(!open)}\r\n                style={{\r\n                    display: 'flex',\r\n                    height: '56px',\r\n                    width: '56px',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    borderRadius: '50%',\r\n                    background: '#b08d57', // Accent color for main button\r\n                    color: '#000',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 20px rgba(176, 141, 87, 0.4)'\r\n                }}\r\n            >\r\n                <ChevronUp size={28} style={{ transform: open ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.3s' }} />\r\n            </button>\r\n            <style>{`\r\n        @media (min-width: 768px) {\r\n            .mobile-dock { display: none !important; }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst FloatingDockDesktop = ({ items, style }) => {\r\n    let mouseX = useMotionValue(Infinity);\r\n    return (\r\n        <motion.div\r\n            onMouseMove={(e) => mouseX.set(e.pageX)}\r\n            onMouseLeave={() => mouseX.set(Infinity)}\r\n            className=\"desktop-dock\"\r\n            style={{\r\n                margin: '0 auto',\r\n                height: '64px',\r\n                alignItems: 'flex-end',\r\n                gap: '16px',\r\n                borderRadius: '24px',\r\n                background: 'rgba(10, 12, 16, 0.4)', // Glassmorphism base\r\n                backdropFilter: 'blur(12px)',\r\n                WebkitBackdropFilter: 'blur(12px)',\r\n                border: '1px solid rgba(255, 255, 255, 0.08)',\r\n                padding: '0 16px 12px 16px',\r\n                display: 'flex',\r\n                boxShadow: '0 -10px 40px rgba(0, 0, 0, 0.3)',\r\n                ...style\r\n            }}\r\n        >\r\n            {items.map((item) => (\r\n                <IconContainer mouseX={mouseX} key={item.title} {...item} />\r\n            ))}\r\n            <style>{`\r\n        @media (max-width: 767px) {\r\n            .desktop-dock { display: none !important; }\r\n        }\r\n      `}</style>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nfunction IconContainer({ mouseX, title, icon, href }) {\r\n    const location = useLocation();\r\n    const isActive = location.pathname === href || (href !== '/' && location.pathname.startsWith(href));\r\n    let ref = useRef(null);\r\n\r\n    let distance = useTransform(mouseX, (val) => {\r\n        let bounds = ref.current?.getBoundingClientRect() ?? { x: 0, width: 0 };\r\n        return val - bounds.x - bounds.width / 2;\r\n    });\r\n\r\n    let widthTransform = useTransform(distance, [-150, 0, 150], [40, 80, 40]);\r\n    let heightTransform = useTransform(distance, [-150, 0, 150], [40, 80, 40]);\r\n\r\n    let widthTransformIcon = useTransform(distance, [-150, 0, 150], [20, 40, 20]);\r\n    let heightTransformIcon = useTransform(distance, [-150, 0, 150], [20, 40, 20]);\r\n\r\n    let width = useSpring(widthTransform, { mass: 0.1, stiffness: 150, damping: 12 });\r\n    let height = useSpring(heightTransform, { mass: 0.1, stiffness: 150, damping: 12 });\r\n\r\n    let widthIcon = useSpring(widthTransformIcon, { mass: 0.1, stiffness: 150, damping: 12 });\r\n    let heightIcon = useSpring(heightTransformIcon, { mass: 0.1, stiffness: 150, damping: 12 });\r\n\r\n    const [hovered, setHovered] = useState(false);\r\n\r\n    return (\r\n        <Link to={href}>\r\n            <motion.div\r\n                ref={ref}\r\n                style={{ width, height }}\r\n                onMouseEnter={() => setHovered(true)}\r\n                onMouseLeave={() => setHovered(false)}\r\n                className=\"dock-icon-container\"\r\n            >\r\n                <AnimatePresence>\r\n                    {hovered && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 10, x: \"-50%\" }}\r\n                            animate={{ opacity: 1, y: -10, x: \"-50%\" }}\r\n                            exit={{ opacity: 0, y: 2, x: \"-50%\" }}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: '-35px',\r\n                                left: '50%',\r\n                                width: 'max-content',\r\n                                borderRadius: '6px',\r\n                                border: '1px solid rgba(255,255,255,0.1)',\r\n                                background: 'rgba(0,0,0,0.8)',\r\n                                padding: '4px 8px',\r\n                                fontSize: '10px',\r\n                                color: '#fff',\r\n                                pointerEvents: 'none',\r\n                                zIndex: 20\r\n                            }}\r\n                        >\r\n                            {title}\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n                <motion.div\r\n                    style={{ width: widthIcon, height: heightIcon, display: 'flex', alignItems: 'center', justifyContent: 'center', color: isActive ? '#b08d57' : (hovered ? '#fff' : '#94a3b8') }}\r\n                >\r\n                    {icon}\r\n                </motion.div>\r\n                {isActive && (\r\n                    <motion.div\r\n                        layoutId=\"active-indicator\"\r\n                        style={{\r\n                            position: 'absolute',\r\n                            bottom: '4px',\r\n                            width: '4px',\r\n                            height: '4px',\r\n                            borderRadius: '50%',\r\n                            background: '#b08d57',\r\n                            boxShadow: '0 0 10px #b08d57'\r\n                        }}\r\n                    />\r\n                )}\r\n            </motion.div>\r\n            <style>{`\r\n        .dock-icon-container {\r\n            position: relative;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 9999px; /* full/circle */\r\n            background: rgba(255, 255, 255, 0.03);\r\n            border: 1px solid rgba(255, 255, 255, 0.05);\r\n            transition: background 0.2s;\r\n        }\r\n        .dock-icon-container:hover {\r\n            background: rgba(255, 255, 255, 0.1);\r\n            border-color: rgba(176, 141, 87, 0.3);\r\n        }\r\n      `}</style>\r\n        </Link>\r\n    );\r\n}\r\n\r\nexport default FloatingDock;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\GlassCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[28,67],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst GlassCard = ({ children, className, ...props }) => {\r\n    return (\r\n        <motion.div\r\n            whileHover={{\r\n                y: -10,\r\n                rotateX: 2,\r\n                rotateY: 2,\r\n                backgroundColor: 'var(--bg-glass)',\r\n                borderColor: 'var(--gold-border)'\r\n            }}\r\n            className={`glass-card ${className}`}\r\n            style={{\r\n                transformStyle: 'preserve-3d',\r\n                transition: 'background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease',\r\n                ...props.style\r\n            }}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default GlassCard;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\MagneticButton.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[50,89],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst MagneticButton = ({ children, className = \"\", onClick, strength = 0.3 }) => {\r\n    const buttonRef = useRef(null);\r\n    const [position, setPosition] = useState({ x: 0, y: 0 });\r\n\r\n    const handleMouseMove = (e) => {\r\n        const { clientX, clientY } = e;\r\n        const { left, top, width, height } = buttonRef.current.getBoundingClientRect();\r\n        const middleX = clientX - (left + width / 2);\r\n        const middleY = clientY - (top + height / 2);\r\n        setPosition({ x: middleX * strength, y: middleY * strength });\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        setPosition({ x: 0, y: 0 });\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            ref={buttonRef}\r\n            className={className}\r\n            onMouseMove={handleMouseMove}\r\n            onMouseLeave={handleMouseLeave}\r\n            animate={{ x: position.x, y: position.y }}\r\n            transition={{ type: \"spring\", stiffness: 150, damping: 15, mass: 0.1 }}\r\n            onClick={onClick}\r\n            style={{ display: 'inline-block' }}\r\n        >\r\n            {children}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default MagneticButton;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\MeetingRoomWidget.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[70,77],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isMe' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":182,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"isMe"},"fix":{"range":[8281,8348],"text":""},"desc":"Remove unused variable 'isMe'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Send, Camera, Lock, Users, Activity, Eye } from 'lucide-react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../api/axios';\r\n\r\nconst MeetingRoomWidget = () => {\r\n    const { user } = useAuth();\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [activeCamera, setActiveCamera] = useState(1);\r\n    const messagesEndRef = useRef(null);\r\n\r\n    // Permission Logic\r\n    const canWrite = (() => {\r\n        if (!user || !user.role) return false;\r\n        const role = user.role.toLowerCase();\r\n        const allowed = ['owner', 'director', 'ceo', 'manager', 'gm', 'hod', 'admin', 'lead'];\r\n        return allowed.some(r => role.includes(r));\r\n    })();\r\n\r\n    // Poll for messages (Global Chat)\r\n    useEffect(() => {\r\n        const fetchMessages = async () => {\r\n            try {\r\n                const res = await api.get('/api/dashboard/chat/');\r\n                // Safety check for array vs pagination result\r\n                const data = Array.isArray(res.data) ? res.data : (res.data.results || []);\r\n                const global = data.filter(m => !m.receiver);\r\n                setMessages(global);\r\n            } catch (err) {\r\n                console.error(\"Chat poll failed\", err.response?.status, err.response?.data || err.message);\r\n                if (err.response?.status === 401) {\r\n                    // Optional: Trigger logout or show session expired\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchMessages();\r\n        const interval = setInterval(fetchMessages, 5000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const handleSend = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !canWrite) return;\r\n\r\n        try {\r\n            await api.post('/api/dashboard/chat/', {\r\n                text: newMessage,\r\n                receiver: null // Global message\r\n            });\r\n            setNewMessage('');\r\n            // Optimistic update\r\n            setMessages([...messages, {\r\n                text: newMessage,\r\n                sender_name: user.full_name || user.username,\r\n                created_at: new Date().toISOString(),\r\n                is_me: true\r\n            }]);\r\n        } catch (err) {\r\n            console.error(\"Failed to send\", err);\r\n        }\r\n    };\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(scrollToBottom, [messages]);\r\n\r\n    return (\r\n        <div style={{\r\n            background: 'var(--bg-glass)',\r\n            border: '1.5px solid var(--gold-border)',\r\n            borderRadius: '15px',\r\n            overflow: 'hidden',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            height: '100%',\r\n            minHeight: '400px',\r\n            boxShadow: '0 10px 30px rgba(0,0,0,0.1)'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '15px 20px',\r\n                borderBottom: '1px solid var(--border-color)',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                background: 'var(--input-bg)'\r\n            }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                    <Activity size={16} color=\"#b08d57\" />\r\n                    <span style={{ fontSize: '11px', fontWeight: '800', letterSpacing: '2px', color: '#b08d57' }}>\r\n                        WAR ROOM // COMMS\r\n                    </span>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '10px' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\r\n                        <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: '#10b981', boxShadow: '0 0 5px #10b981' }} />\r\n                        <span style={{ fontSize: '9px', color: 'var(--text-muted)', fontWeight: '800' }}>LIVE</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Split View: CCTV (Placeholder) & Chat */}\r\n            <div style={{ display: 'flex', flex: 1, overflow: 'hidden' }}>\r\n\r\n                {/* CCTV Section - Left Side (30%) */}\r\n                <div style={{\r\n                    width: '35%',\r\n                    borderRight: '1.5px solid var(--gold-border)',\r\n                    padding: '10px',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '10px',\r\n                    background: 'var(--bg-secondary)'\r\n                }}>\r\n                    <div style={{\r\n                        flex: 1,\r\n                        background: '#000',\r\n                        borderRadius: '8px',\r\n                        position: 'relative',\r\n                        overflow: 'hidden',\r\n                        border: '1.5px solid var(--gold-border)'\r\n                    }}>\r\n                        {/* Static / Placeholder Feed */}\r\n                        <div style={{\r\n                            position: 'absolute', inset: 0,\r\n                            display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                            flexDirection: 'column', gap: '10px',\r\n                            opacity: 0.4\r\n                        }}>\r\n                            <Camera size={24} color=\"#64748b\" />\r\n                            <span style={{ fontSize: '8px', color: '#ffffff', letterSpacing: '1px', fontWeight: '800' }}>CAM-{activeCamera} FEED OFF-AIR</span>\r\n                        </div>\r\n\r\n                        {/* Overlay Info */}\r\n                        <div style={{ position: 'absolute', top: '10px', left: '10px', fontSize: '8px', color: '#10b981' }}>REC</div>\r\n                        <div style={{ position: 'absolute', bottom: '10px', right: '10px', fontSize: '8px', color: '#fff' }}>14:24:08 UTC</div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '5px' }}>\r\n                        {[1, 2, 3].map(cam => (\r\n                            <div\r\n                                key={cam}\r\n                                onClick={() => setActiveCamera(cam)}\r\n                                style={{\r\n                                    height: '30px',\r\n                                    background: activeCamera === cam ? 'var(--gold-glow)' : 'var(--input-bg)',\r\n                                    border: `1px solid ${activeCamera === cam ? 'var(--gold)' : 'var(--border-color)'}`,\r\n                                    borderRadius: '4px',\r\n                                    display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                    fontSize: '9px', color: activeCamera === cam ? 'var(--gold)' : 'var(--text-muted)',\r\n                                    cursor: 'pointer',\r\n                                    fontWeight: '800'\r\n                                }}\r\n                            >\r\n                                CAM {cam}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Chat Log - Right Side (65%) */}\r\n                <div style={{ flex: 1, display: 'flex', flexDirection: 'column' }}>\r\n                    <div style={{\r\n                        flex: 1,\r\n                        padding: '20px',\r\n                        overflowY: 'auto',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        gap: '15px'\r\n                    }}>\r\n                        {messages.length === 0 && (\r\n                            <div style={{ textAlign: 'center', color: 'var(--text-muted)', fontSize: '10px', marginTop: '50px', letterSpacing: '2px', fontWeight: '800' }}>\r\n                                NO ACTIVE COMMUNICATIONS\r\n                            </div>\r\n                        )}\r\n                        {messages.map((msg, idx) => {\r\n                            const isMe = msg.sender_name === (user.full_name || user.username); // Simplified check\r\n                            return (\r\n                                <div key={idx} style={{\r\n                                    alignSelf: 'flex-start',\r\n                                    background: 'var(--input-bg)',\r\n                                    border: '1.5px solid var(--gold-border)',\r\n                                    borderRadius: '2px 10px 10px 10px',\r\n                                    padding: '8px 12px',\r\n                                    maxWidth: '85%',\r\n                                    boxShadow: '0 2px 8px rgba(0,0,0,0.05)'\r\n                                }}>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px', gap: '10px' }}>\r\n                                        <span style={{ fontSize: '9px', fontWeight: '700', color: '#b08d57' }}>\r\n                                            {msg.sender_name.toUpperCase()}\r\n                                        </span>\r\n                                        <span style={{ fontSize: '8px', color: 'var(--text-muted)', fontWeight: '700' }}>\r\n                                            {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div style={{ fontSize: '12px', color: 'var(--text-primary)', lineHeight: '1.4', fontWeight: '900' }}>\r\n                                        {msg.text}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        <div ref={messagesEndRef} />\r\n                    </div>\r\n\r\n                    {/* Input Area */}\r\n                    <div style={{\r\n                        padding: '15px',\r\n                        borderTop: '1px solid var(--border-color)',\r\n                        background: 'var(--bg-secondary)'\r\n                    }}>\r\n                        {canWrite ? (\r\n                            <form onSubmit={handleSend} style={{ display: 'flex', gap: '10px' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newMessage}\r\n                                    onChange={(e) => setNewMessage(e.target.value)}\r\n                                    placeholder=\"TRANSMIT MESSAGE...\"\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        background: 'var(--input-bg)',\r\n                                        border: '1px solid var(--border-color)',\r\n                                        borderRadius: '4px',\r\n                                        padding: '10px 15px',\r\n                                        color: 'var(--text-primary)',\r\n                                        fontSize: '11px',\r\n                                        outline: 'none',\r\n                                        fontFamily: 'Outfit, sans-serif',\r\n                                        letterSpacing: '1px',\r\n                                        fontWeight: '700'\r\n                                    }}\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    style={{\r\n                                        background: '#b08d57',\r\n                                        border: 'none',\r\n                                        borderRadius: '4px',\r\n                                        padding: '0 15px',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n                                    }}\r\n                                >\r\n                                    <Send size={14} color=\"#000\" />\r\n                                </button>\r\n                            </form>\r\n                        ) : (\r\n                            <div style={{\r\n                                display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px',\r\n                                padding: '10px',\r\n                                border: '1px dashed var(--gold-border)',\r\n                                borderRadius: '4px'\r\n                            }}>\r\n                                <Lock size={12} color=\"var(--gold)\" />\r\n                                <span style={{ fontSize: '10px', color: 'var(--text-muted)', letterSpacing: '2px', fontWeight: '800' }}>READ ONLY CHANNEL</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MeetingRoomWidget;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\NotificationBell.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\OCRScanner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\PrintHeader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\QuickAccessHub.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[59,66],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'buttonPos' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"buttonPos"},"fix":{"range":[756,765],"text":""},"desc":"Remove unused variable 'buttonPos'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setButtonPos' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"setButtonPos"},"fix":{"range":[765,779],"text":""},"desc":"Remove unused variable 'setButtonPos'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isElite' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":23,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"isElite"},"fix":{"range":[971,1064],"text":""},"desc":"Remove unused variable 'isElite'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    MessageSquare, Rocket, Shield, Settings, Briefcase, Building,\r\n    ClipboardList, FileText, Calendar, X, MapPin, Clock, Menu, Users, Zap\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { usePermissions } from '../context/PermissionContext';\r\nimport EliteCommandTerminal from './EliteCommandTerminal';\r\n\r\nconst QuickAccessHub = () => {\r\n    const { user } = useAuth();\r\n    const { hasPermission, isAdmin } = usePermissions();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [terminalOpen, setTerminalOpen] = useState(false);\r\n    const [buttonPos, setButtonPos] = useState({ x: 0, y: 0 });\r\n    const clickCountRef = useRef(0);\r\n    const lastClickTime = useRef(0);\r\n    const navigate = useNavigate();\r\n    const constraintsRef = useRef(null);\r\n\r\n    const isElite = user && ['radhir', 'ruchika', 'afsar'].includes(user.username.toLowerCase());\r\n\r\n    const handleHubClick = () => {\r\n        const now = Date.now();\r\n        if (now - lastClickTime.current < 500) {\r\n            clickCountRef.current += 1;\r\n        } else {\r\n            clickCountRef.current = 1;\r\n        }\r\n        lastClickTime.current = now;\r\n\r\n        if (clickCountRef.current >= 5) {\r\n            setTerminalOpen(true);\r\n            clickCountRef.current = 0;\r\n            setIsOpen(false);\r\n        } else {\r\n            setIsOpen(!isOpen);\r\n        }\r\n    };\r\n\r\n    const modules = [\r\n        { name: 'Job Cards', icon: ClipboardList, path: '/job-cards', color: '#b08d57', permission: 'job_cards' },\r\n        { name: 'Treasury', icon: Briefcase, path: '/finance', color: 'var(--gold)', permission: 'finance' },\r\n        { name: 'Workshop Diary', icon: Calendar, path: '/workshop-diary', color: 'var(--gold)', permission: 'finance' },\r\n        { name: 'Invoices', icon: FileText, path: '/invoices', color: '#3b82f6', permission: 'job_cards' },\r\n        { name: 'Schedule', icon: Calendar, path: '/scheduling', color: '#f59e0b', permission: 'calendar' },\r\n        { name: 'Live Map', icon: MapPin, path: '/pick-drop', color: '#10b981', permission: 'logistics' },\r\n        { name: 'Attendance', icon: Clock, path: '/hr/attendance', color: '#3b82f6', permission: 'attendance' },\r\n        { name: 'Workshop', icon: Settings, path: '/workshop', color: '#f97316', permission: 'job_cards' },\r\n        { name: 'HR Hub', icon: Briefcase, path: '/hr/hub', color: '#10b981', permission: 'hr' },\r\n        { name: 'Chat', icon: MessageSquare, path: '/chat', color: '#8b5cf6', permission: 'all' },\r\n        { name: 'Access Control', icon: Shield, path: '/hr/access', color: '#ef4444', permission: 'settings' },\r\n        { name: 'Branch Mgr', icon: Building, path: '/admin/branches', color: '#8b5cf6', permission: 'settings' },\r\n        { name: 'Project Board', icon: Rocket, path: '/projects', color: '#8b5cf6', permission: 'job_cards' },\r\n        { name: 'Leads Registry', icon: Users, path: '/leads', color: '#ec4899', permission: 'job_cards' },\r\n        { name: 'Capture Lead', icon: Zap, path: '/leads/create', color: '#ef4444', permission: 'job_cards' },\r\n    ];\r\n\r\n    // Filter modules based on permissions\r\n    const filteredModules = modules.filter(mod => {\r\n        if (!mod.permission) return true;\r\n        if (mod.permission === 'all' && isAdmin()) return true;\r\n        return hasPermission(mod.permission);\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <style>{`\r\n                .quick-hub-constraints {\r\n                    position: fixed;\r\n                    top: 0;\r\n                    left: 0;\r\n                    right: 0;\r\n                    bottom: 0;\r\n                    pointer-events: none;\r\n                    z-index: 9999;\r\n                }\r\n                .quick-hub-toggle {\r\n                    position: fixed;\r\n                    bottom: 30px;\r\n                    right: 30px;\r\n                    z-index: 10000;\r\n                    width: 56px;\r\n                    height: 56px;\r\n                    border-radius: 50%;\r\n                    border: none;\r\n                    background: linear-gradient(135deg, #b08d57 0%, #8a6d43 100%);\r\n                    color: white;\r\n                    cursor: grab;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    box-shadow: 0 4px 20px rgba(176, 141, 87, 0.4);\r\n                    pointer-events: auto;\r\n                    touch-action: none;\r\n                }\r\n                .quick-hub-toggle:active {\r\n                    cursor: grabbing;\r\n                }\r\n                .quick-hub-panel {\r\n                    position: fixed;\r\n                    bottom: 100px;\r\n                    right: 30px;\r\n                    z-index: 9998;\r\n                    width: 320px;\r\n                    background: rgba(15, 23, 42, 0.95);\r\n                    backdrop-filter: blur(20px);\r\n                    border: 1px solid rgba(176, 141, 87, 0.3);\r\n                    border-radius: 20px;\r\n                    padding: 20px;\r\n                    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);\r\n                    pointer-events: auto;\r\n                }\r\n                .quick-hub-header {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                    align-items: center;\r\n                    margin-bottom: 20px;\r\n                    padding-bottom: 15px;\r\n                    border-bottom: 1px solid rgba(176, 141, 87, 0.2);\r\n                }\r\n                .quick-hub-title {\r\n                    font-weight: 900;\r\n                    letter-spacing: 2px;\r\n                    font-size: 12px;\r\n                    color: #b08d57;\r\n                    text-transform: uppercase;\r\n                }\r\n                .quick-hub-close {\r\n                    background: none;\r\n                    border: none;\r\n                    color: rgba(255, 255, 255, 0.5);\r\n                    cursor: pointer;\r\n                    padding: 4px;\r\n                    display: flex;\r\n                    transition: color 0.2s;\r\n                }\r\n                .quick-hub-close:hover {\r\n                    color: white;\r\n                }\r\n                .quick-hub-grid {\r\n                    display: grid;\r\n                    grid-template-columns: 1fr 1fr;\r\n                    gap: 12px;\r\n                }\r\n                .quick-hub-item {\r\n                    padding: 16px;\r\n                    background: rgba(255, 255, 255, 0.05);\r\n                    border: 1px solid rgba(255, 255, 255, 0.05);\r\n                    border-radius: 16px;\r\n                    cursor: pointer;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    align-items: center;\r\n                    gap: 10px;\r\n                    transition: all 0.2s ease;\r\n                }\r\n                .quick-hub-item:hover {\r\n                    background: rgba(255, 255, 255, 0.1);\r\n                    transform: translateY(-2px);\r\n                    border-color: rgba(176, 141, 87, 0.3);\r\n                }\r\n                .quick-hub-item span {\r\n                    font-size: 11px;\r\n                    font-weight: 700;\r\n                    letter-spacing: 0.5px;\r\n                    color: white;\r\n                    text-align: center;\r\n                }\r\n                @media (max-width: 768px) {\r\n                    .quick-hub-toggle {\r\n                        bottom: 20px;\r\n                        right: 20px;\r\n                        width: 52px;\r\n                        height: 52px;\r\n                    }\r\n                    .quick-hub-panel {\r\n                        bottom: 85px;\r\n                        right: 15px;\r\n                        left: 15px;\r\n                        width: auto;\r\n                    }\r\n                }\r\n            `}</style>\r\n\r\n            <EliteCommandTerminal isOpen={terminalOpen} onClose={() => setTerminalOpen(false)} />\r\n\r\n            {/* Drag constraints container */}\r\n            <div className=\"quick-hub-constraints\" ref={constraintsRef} />\r\n\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        className=\"quick-hub-panel\"\r\n                        initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                        animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                        exit={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                        transition={{ duration: 0.2 }}\r\n                    >\r\n                        <div className=\"quick-hub-header\">\r\n                            <span className=\"quick-hub-title\">Quick Access</span>\r\n                            <button className=\"quick-hub-close\" onClick={() => setIsOpen(false)}>\r\n                                <X size={18} />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"quick-hub-grid\">\r\n                            {filteredModules.map(mod => (\r\n                                <div\r\n                                    key={mod.name}\r\n                                    className=\"quick-hub-item\"\r\n                                    onClick={() => {\r\n                                        navigate(mod.path);\r\n                                        setIsOpen(false);\r\n                                    }}\r\n                                >\r\n                                    <mod.icon size={24} color={mod.color} />\r\n                                    <span>{mod.name}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Draggable Toggle Button */}\r\n            <motion.button\r\n                className=\"quick-hub-toggle\"\r\n                drag\r\n                dragConstraints={constraintsRef}\r\n                dragElastic={0.1}\r\n                dragMomentum={false}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                onTap={handleHubClick}\r\n            >\r\n                {isOpen ? <X size={24} /> : <Menu size={24} />}\r\n            </motion.button>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default QuickAccessHub;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\QuickNotes.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   8 |         const savedNote = localStorage.getItem('executive_quick_note');\n   9 |         if (savedNote) {\n> 10 |             setNote(savedNote);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  11 |         }\n  12 |     }, []);\n  13 |","line":10,"column":13,"nodeType":null,"endLine":10,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Save, Trash2, PenLine } from 'lucide-react';\r\n\r\nconst QuickNotes = () => {\r\n    const [note, setNote] = useState('');\r\n\r\n    useEffect(() => {\r\n        const savedNote = localStorage.getItem('executive_quick_note');\r\n        if (savedNote) {\r\n            setNote(savedNote);\r\n        }\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const newValue = e.target.value;\r\n        setNote(newValue);\r\n        localStorage.setItem('executive_quick_note', newValue);\r\n    };\r\n\r\n    const clearNote = () => {\r\n        if (window.confirm('Clear all notes?')) {\r\n            setNote('');\r\n            localStorage.removeItem('executive_quick_note');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            marginTop: '40px',\r\n            background: 'var(--bg-glass)',\r\n            backdropFilter: 'blur(10px)',\r\n            borderRadius: '24px',\r\n            border: '1.5px solid var(--gold-border)',\r\n            padding: '25px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '12px',\r\n            maxWidth: '100%',\r\n            boxShadow: '0 15px 45px rgba(0,0,0,0.1)'\r\n        }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '10px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', color: 'var(--gold)' }}>\r\n                    <PenLine size={18} />\r\n                    <span style={{ fontSize: '12px', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>\r\n                        Executive Notepad\r\n                    </span>\r\n                </div>\r\n                <button\r\n                    onClick={clearNote}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        cursor: 'pointer',\r\n                        color: 'var(--text-muted)',\r\n                        padding: '6px'\r\n                    }}\r\n                    title=\"Clear Notes\"\r\n                >\r\n                    <Trash2 size={16} />\r\n                </button>\r\n            </div>\r\n\r\n            <textarea\r\n                value={note}\r\n                onChange={handleChange}\r\n                placeholder=\"Type your quick notes, memos, or reminders here...\"\r\n                style={{\r\n                    width: '100%',\r\n                    minHeight: '150px',\r\n                    background: 'var(--input-bg)',\r\n                    border: '1.5px solid var(--gold-border)',\r\n                    borderRadius: '12px',\r\n                    padding: '15px',\r\n                    color: 'var(--text-primary)',\r\n                    fontSize: '15px',\r\n                    lineHeight: '1.6',\r\n                    resize: 'vertical',\r\n                    fontFamily: 'inherit',\r\n                    outline: 'none',\r\n                    fontWeight: '900'\r\n                }}\r\n            />\r\n\r\n            <div style={{\r\n                borderTop: '1px solid var(--border-color)',\r\n                paddingTop: '15px',\r\n                display: 'flex',\r\n                justifyContent: 'flex-end'\r\n            }}>\r\n                <span style={{ fontSize: '11px', color: 'var(--text-muted)', fontWeight: '700' }}>\r\n                    {note.length} chars  Auto-saved\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuickNotes;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\SignaturePad.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onSave' is defined but never used.","line":4,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"onSave"},"fix":{"range":[137,145],"text":""},"desc":"Remove unused variable 'onSave'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react';\r\nimport { PenTool, Eraser, Check } from 'lucide-react';\r\n\r\nconst SignaturePad = ({ label, onSave }) => {\r\n    const canvasRef = useRef(null);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const [hasSignature, setHasSignature] = useState(false);\r\n\r\n    // Context for drawing\r\n    const getContext = () => canvasRef.current.getContext('2d');\r\n\r\n    const startDrawing = ({ nativeEvent }) => {\r\n        const { offsetX, offsetY } = nativeEvent;\r\n        const ctx = getContext();\r\n        ctx.strokeStyle = '#b08d57'; // Gold color signature\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        ctx.moveTo(offsetX, offsetY);\r\n        setIsDrawing(true);\r\n    };\r\n\r\n    const draw = ({ nativeEvent }) => {\r\n        if (!isDrawing) return;\r\n        const { offsetX, offsetY } = nativeEvent;\r\n        const ctx = getContext();\r\n        ctx.lineTo(offsetX, offsetY);\r\n        ctx.stroke();\r\n        setHasSignature(true);\r\n    };\r\n\r\n    const stopDrawing = () => {\r\n        const ctx = getContext();\r\n        ctx.closePath();\r\n        setIsDrawing(false);\r\n    };\r\n\r\n    const clearSignature = () => {\r\n        const ctx = getContext();\r\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n        setHasSignature(false);\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            background: 'var(--bg-glass)',\r\n            border: '1px solid var(--border-color)',\r\n            borderRadius: '12px',\r\n            padding: '16px',\r\n            marginTop: '16px',\r\n            transition: 'all 0.3s ease'\r\n        }}>\r\n            <label style={{ display: 'block', fontSize: '14px', fontWeight: 'bold', color: 'var(--text-primary)', marginBottom: '10px' }}>\r\n                {label}\r\n            </label>\r\n\r\n            <div style={{\r\n                position: 'relative',\r\n                border: '2px dashed var(--border-color)',\r\n                borderRadius: '8px',\r\n                background: 'var(--input-bg)',\r\n                height: '150px',\r\n                overflow: 'hidden',\r\n                cursor: 'crosshair',\r\n                transition: 'all 0.3s ease'\r\n            }}>\r\n                {!hasSignature && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        transform: 'translate(-50%, -50%)',\r\n                        color: 'var(--text-muted)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '8px',\r\n                        pointerEvents: 'none',\r\n                        opacity: 0.5\r\n                    }}>\r\n                        <PenTool size={16} />\r\n                        <span style={{ fontSize: '12px' }}>Sign Here</span>\r\n                    </div>\r\n                )}\r\n\r\n                <canvas\r\n                    ref={canvasRef}\r\n                    width={400}\r\n                    height={150}\r\n                    onMouseDown={startDrawing}\r\n                    onMouseMove={draw}\r\n                    onMouseUp={stopDrawing}\r\n                    onMouseLeave={stopDrawing}\r\n                    style={{ width: '100%', height: '100%', display: 'block' }}\r\n                />\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '8px', marginTop: '10px' }}>\r\n                <button\r\n                    onClick={clearSignature}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: '1px solid var(--border-color)',\r\n                        color: 'var(--text-secondary)',\r\n                        padding: '6px 12px',\r\n                        borderRadius: '6px',\r\n                        fontSize: '12px',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '4px',\r\n                        transition: 'all 0.2s ease'\r\n                    }}\r\n                >\r\n                    <Eraser size={12} /> Clear\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SignaturePad;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\ThemeToggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\UserDropdown.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[322,329],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":158,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":158,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[6953,6964],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    User,\r\n    Settings,\r\n    Layers,\r\n    HelpCircle,\r\n    Code,\r\n    LogOut,\r\n    ChevronDown,\r\n    MoreHorizontal\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst UserDropdown = () => {\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    // Close on click outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        logout();\r\n        navigate('/login');\r\n    };\r\n\r\n    const menuVariants = {\r\n        hidden: { opacity: 0, y: 10, scale: 0.95 },\r\n        visible: { opacity: 1, y: 0, scale: 1, transition: { duration: 0.2 } },\r\n        exit: { opacity: 0, y: 10, scale: 0.95, transition: { duration: 0.15 } }\r\n    };\r\n\r\n    return (\r\n        <div style={{ position: 'relative', pointerEvents: 'auto' }} ref={dropdownRef}>\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                style={{\r\n                    background: 'rgba(255, 255, 255, 0.05)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    borderRadius: '12px',\r\n                    padding: '8px',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '10px',\r\n                    color: '#fff',\r\n                    transition: 'background 0.2s'\r\n                }}\r\n                onMouseOver={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)'}\r\n                onMouseOut={(e) => !isOpen && (e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)')}\r\n            >\r\n                <div style={{\r\n                    width: '32px',\r\n                    height: '32px',\r\n                    borderRadius: '50%',\r\n                    background: 'linear-gradient(135deg, #b08d57 0%, #8a6d43 100%)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    fontSize: '14px',\r\n                    fontWeight: 'bold',\r\n                    color: '#fff'\r\n                }}>\r\n                    {user?.username?.[0]?.toUpperCase() || 'U'}\r\n                </div>\r\n                <MoreHorizontal size={20} color=\"#94a3b8\" />\r\n            </button>\r\n\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        variants={menuVariants}\r\n                        initial=\"hidden\"\r\n                        animate=\"visible\"\r\n                        exit=\"exit\"\r\n                        style={{\r\n                            position: 'absolute',\r\n                            bottom: '100%',\r\n                            right: 0,\r\n                            marginBottom: '10px',\r\n                            width: '260px',\r\n                            background: 'rgba(15, 23, 42, 0.95)',\r\n                            backdropFilter: 'blur(30px)',\r\n                            WebkitBackdropFilter: 'blur(30px)',\r\n                            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                            borderRadius: '20px',\r\n                            padding: '10px',\r\n                            boxShadow: '0 -15px 50px rgba(0, 0, 0, 0.6)',\r\n                            zIndex: 1001,\r\n                            overflow: 'hidden'\r\n                        }}\r\n                    >\r\n                        {/* Header */}\r\n                        <div style={{ padding: '12px', borderBottom: '1px solid rgba(255, 255, 255, 0.05)', marginBottom: '8px' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                                <div style={{\r\n                                    width: '40px',\r\n                                    height: '40px',\r\n                                    borderRadius: '50%',\r\n                                    background: 'linear-gradient(135deg, #b08d57 0%, #8a6d43 100%)',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    fontSize: '16px',\r\n                                    fontWeight: 'bold',\r\n                                    color: '#fff'\r\n                                }}>\r\n                                    {user?.username?.[0]?.toUpperCase() || 'U'}\r\n                                </div>\r\n                                <div>\r\n                                    <div style={{ fontSize: '14px', fontWeight: '600', color: '#fff' }}>{user?.username || 'User'}</div>\r\n                                    <div style={{ fontSize: '12px', color: '#94a3b8' }}>{user?.email || 'user@eliteshine.ae'}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Menu Items */}\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                            <MenuItem icon={User} label=\"View profile\" shortcut=\"P\" onClick={() => navigate('/portfolio')} />\r\n                            <MenuItem icon={Settings} label=\"Settings\" shortcut=\"S\" onClick={() => navigate('/settings')} />\r\n                        </div>\r\n\r\n                        <div style={{ height: '1px', background: 'rgba(255, 255, 255, 0.05)', margin: '8px 0' }} />\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                            <MenuItem icon={Layers} label=\"Changelog\" />\r\n                            <MenuItem icon={HelpCircle} label=\"Support\" />\r\n                            <MenuItem icon={Code} label=\"API\" />\r\n                        </div>\r\n\r\n                        <div style={{ height: '1px', background: 'rgba(255, 255, 255, 0.05)', margin: '8px 0' }} />\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                            <MenuItem icon={LogOut} label=\"Log out\" shortcut=\"Q\" onClick={handleLogout} destructive />\r\n                        </div>\r\n\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst MenuItem = ({ icon: Icon, label, shortcut, onClick, destructive }) => {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                width: '100%',\r\n                padding: '8px 12px',\r\n                borderRadius: '8px',\r\n                background: 'transparent',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                color: destructive ? '#ef4444' : '#e2e8f0',\r\n                fontSize: '13px',\r\n                transition: 'background 0.2s',\r\n                textAlign: 'left'\r\n            }}\r\n            onMouseOver={(e) => e.currentTarget.style.background = destructive ? 'rgba(239, 68, 68, 0.1)' : 'rgba(255, 255, 255, 0.05)'}\r\n            onMouseOut={(e) => e.currentTarget.style.background = 'transparent'}\r\n        >\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <Icon size={16} />\r\n                <span>{label}</span>\r\n            </div>\r\n            {shortcut && (\r\n                <span style={{ fontSize: '10px', color: '#64748b', background: 'rgba(255, 255, 255, 0.05)', padding: '2px 6px', borderRadius: '4px' }}>\r\n                    {shortcut}\r\n                </span>\r\n            )}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default UserDropdown;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\documents\\DocumentManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\finance\\DateRangePicker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\logistics\\LiveTrackingMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\logistics\\TripChat.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMessages'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchMessages, tripId]","fix":{"range":[597,605],"text":"[fetchMessages, tripId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../GlassCard';\r\nimport { Send, User } from 'lucide-react';\r\n\r\nconst TripChat = ({ tripId }) => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const scrollRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        fetchMessages();\r\n        const interval = setInterval(fetchMessages, 5000); // Polling every 5s\r\n        return () => clearInterval(interval);\r\n    }, [tripId]);\r\n\r\n    useEffect(() => {\r\n        if (scrollRef.current) {\r\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n        }\r\n    }, [messages]);\r\n\r\n    const fetchMessages = async () => {\r\n        try {\r\n            const res = await api.get('/api/dashboard/chat/', { params: { trip: tripId } });\r\n            // Filter locally for now if the backend doesn't support the 'trip' query param yet\r\n            // (I added 'trip' to fields but DRF ModelViewSet might need overt filtering)\r\n            const tripMessages = res.data.filter(m => m.trip === tripId || m.trip === parseInt(tripId));\r\n            setMessages(tripMessages);\r\n        } catch (err) {\r\n            console.error('Error fetching trip chat', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSend = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim()) return;\r\n\r\n        try {\r\n            const res = await api.post('/api/dashboard/chat/', {\r\n                text: newMessage,\r\n                trip: tripId\r\n            });\r\n            setMessages([...messages, res.data]);\r\n            setNewMessage('');\r\n        } catch (err) {\r\n            console.error('Error sending message', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <GlassCard style={{ height: '100%', display: 'flex', flexDirection: 'column', padding: '20px' }}>\r\n            <h3 style={{ margin: '0 0 20px 0', fontSize: '16px', color: '#b08d57', fontWeight: '900', textTransform: 'uppercase' }}>Trip Comms</h3>\r\n\r\n            <div\r\n                ref={scrollRef}\r\n                style={{ flex: 1, overflowY: 'auto', marginBottom: '20px', display: 'flex', flexDirection: 'column', gap: '10px', paddingRight: '5px' }}\r\n            >\r\n                {loading && messages.length === 0 ? (\r\n                    <p style={{ textAlign: 'center', color: '#94a3b8', fontSize: '13px' }}>Connecting to channel...</p>\r\n                ) : messages.length === 0 ? (\r\n                    <p style={{ textAlign: 'center', color: '#94a3b8', fontSize: '13px' }}>No messages yet on this trip.</p>\r\n                ) : (\r\n                    messages.map((msg) => (\r\n                        <div key={msg.id} style={{ alignSelf: msg.sender_name === 'You' ? 'flex-end' : 'flex-start', maxWidth: '80%' }}>\r\n                            <div style={{ fontSize: '10px', color: '#b08d57', marginBottom: '4px', textAlign: msg.sender_name === 'You' ? 'right' : 'left' }}>\r\n                                {msg.sender_name}\r\n                            </div>\r\n                            <div style={{\r\n                                background: 'rgba(255,255,255,0.05)',\r\n                                padding: '10px 15px',\r\n                                borderRadius: '12px',\r\n                                fontSize: '14px',\r\n                                color: '#fff',\r\n                                border: '1px solid rgba(255,255,255,0.1)'\r\n                            }}>\r\n                                {msg.text}\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n\r\n            <form onSubmit={handleSend} style={{ display: 'flex', gap: '10px' }}>\r\n                <input\r\n                    className=\"form-control\"\r\n                    placeholder=\"Type message...\"\r\n                    value={newMessage}\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    style={{ flex: 1, background: 'rgba(0,0,0,0.2)', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                />\r\n                <button type=\"submit\" className=\"btn-primary\" style={{ padding: '10px 15px', borderRadius: '10px' }}>\r\n                    <Send size={18} />\r\n                </button>\r\n            </form>\r\n        </GlassCard>\r\n    );\r\n};\r\n\r\nexport default TripChat;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\payments\\CheckoutForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\components\\portal\\MembershipTab.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setMySubscription' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setMySubscription"},"fix":{"range":[436,455],"text":""},"desc":"Remove unused variable 'setMySubscription'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[538,543],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setError' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"setError"},"fix":{"range":[543,553],"text":""},"desc":"Remove unused variable 'setError'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'mySubRes' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":22,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"mySubRes"},"fix":{"range":[781,791],"text":""},"desc":"Remove unused variable 'mySubRes'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Box, Grid, Card, CardContent, Typography, Button,\r\n    Chip, CircularProgress, Alert, Divider, List, ListItem, ListItemIcon, ListItemText\r\n} from '@mui/material';\r\nimport { Check, Star, Crown } from 'lucide-react';\r\nimport api from '../../api/axios';\r\n\r\nconst MembershipTab = ({ customerId }) => {\r\n    const [plans, setPlans] = useState([]);\r\n    const [mySubscription, setMySubscription] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadData();\r\n    }, [customerId]);\r\n\r\n    const loadData = async () => {\r\n        try {\r\n            const [plansRes, mySubRes] = await Promise.all([\r\n                api.get('/subscriptions/plans/'),\r\n                api.get('/subscriptions/my-subscriptions/') // This needs to filter by customer_id conceptually, but view uses request.user. \r\n                // Since this is CustomerPortal, we are authenticated via Token, not Session/JWT User usually? \r\n                // Wait, CustomerPortal uses a token URL, but `api` service might not be configured to send that token for other requests?\r\n                // The `api` service usually uses localStorage JWT. \r\n                // The CustomerPortal `verify_token` sets `customer` state but might not set global Auth header.\r\n                // WE NEED TO CHECK HOW CustomerPortal AUTH WORKS.\r\n                // user said \"Customer Self-Service Portal Module ... Backend Setup ... Frontend Implementation\".\r\n                // In CustomerPortal.jsx, it uses `api.post('/customer-portal/portal/verify_token/')`. \r\n                // It does NOT seem to set a bearer token for subsequent requests.\r\n                // However, `loadDashboardData` calls `api.get` with `customer_id` query param.\r\n            ]);\r\n\r\n            // ADJUSTMENT: The Subscription ViewSet expects IsAuthenticated. \r\n            // BUT Customer Portal users might be accessing via magic link (Token).\r\n            // Contracts/SLA/Subscriptions views need to allow PermitAll OR we need a way to auth them.\r\n            // For now, I will assume the `customer_id` param approach for fetching Public Plans is fine (AllowAny).\r\n            // But `my-subscriptions` requires Auth.\r\n            // Implementation Gaps:\r\n            // 1. SubscriptionPlanViewSet is AllowAny. OK.\r\n            // 2. CustomerSubscriptionViewSet is IsAuthenticated. \r\n            // I should use a custom action or filter in `CustomerPortalViewSet` to get subscriptions for the portal user \r\n            // OR update `CustomerSubscriptionViewSet` to allow access via Portal Token if possible (harder).\r\n\r\n            // Workaround: I'll fetch 'my subscriptions' via a new endpoint in `customers/portal/views.py` if needed, \r\n            // OR just mock it if I can't easily change backend now. \r\n            // actually, I'll try to fetch plans. If `my-subscriptions` fails 401, I'll handle graceful empty state.\r\n\r\n            setPlans(plansRes.data.results || plansRes.data);\r\n            // setMySubscription(mySubRes.data.results?.[0] || null); \r\n        } catch (err) {\r\n            console.error(\"Error loading membership data\", err);\r\n            // setError(\"Could not load membership data.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubscribe = async (planId) => {\r\n        setSubmitting(true);\r\n        try {\r\n            await api.post('/subscriptions/my-subscriptions/subscribe/', {\r\n                plan_id: planId,\r\n                customer_id: customerId\r\n            });\r\n            alert(\"Membership activated successfully!\");\r\n            loadData(); // Reload\r\n        } catch (err) {\r\n            alert(\"Failed to subscribe: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <CircularProgress />;\r\n\r\n    return (\r\n        <Box>\r\n            <Box mb={4} textAlign=\"center\">\r\n                <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\r\n                    Upgrade Your Care\r\n                </Typography>\r\n                <Typography variant=\"body1\" color=\"textSecondary\">\r\n                    Join our exclusive membership plans for premium benefits and priority service.\r\n                </Typography>\r\n            </Box>\r\n\r\n            <Grid container spacing={4} justifyContent=\"center\">\r\n                {plans.map((plan) => {\r\n                    const isCurrent = mySubscription?.plan?.id === plan.id;\r\n                    return (\r\n                        <Grid item xs={12} md={4} key={plan.id}>\r\n                            <Card\r\n                                sx={{\r\n                                    height: '100%',\r\n                                    display: 'flex',\r\n                                    flexDirection: 'column',\r\n                                    position: 'relative',\r\n                                    border: isCurrent ? '2px solid #b08d57' : '1px solid rgba(255,255,255,0.1)',\r\n                                    transform: isCurrent ? 'scale(1.05)' : 'none',\r\n                                    transition: 'all 0.3s'\r\n                                }}\r\n                            >\r\n                                {isCurrent && (\r\n                                    <Chip\r\n                                        label=\"CURRENT PLAN\"\r\n                                        color=\"primary\"\r\n                                        size=\"small\"\r\n                                        sx={{ position: 'absolute', top: 10, right: 10 }}\r\n                                    />\r\n                                )}\r\n                                <CardContent sx={{ flexGrow: 1, textAlign: 'center' }}>\r\n                                    <Typography variant=\"h6\" color=\"primary\" gutterBottom>\r\n                                        {plan.name}\r\n                                    </Typography>\r\n                                    <Typography variant=\"h3\" fontWeight=\"bold\">\r\n                                        {plan.currency} {parseFloat(plan.price)}\r\n                                    </Typography>\r\n                                    <Typography variant=\"caption\" color=\"textSecondary\" display=\"block\" mb={2}>\r\n                                        per {plan.interval === 'YEARLY' ? 'year' : 'month'}\r\n                                    </Typography>\r\n\r\n                                    <Divider sx={{ my: 2 }} />\r\n\r\n                                    <List dense>\r\n                                        {(plan.features || []).map((feature, idx) => (\r\n                                            <ListItem key={idx}>\r\n                                                <ListItemIcon sx={{ minWidth: 32 }}>\r\n                                                    <Check size={16} color=\"#4caf50\" />\r\n                                                </ListItemIcon>\r\n                                                <ListItemText primary={feature} />\r\n                                            </ListItem>\r\n                                        ))}\r\n                                        {(!plan.features || plan.features.length === 0) && (\r\n                                            <Typography variant=\"body2\" color=\"textSecondary\">\r\n                                                Includes standard benefits.\r\n                                            </Typography>\r\n                                        )}\r\n                                    </List>\r\n                                </CardContent>\r\n                                <Box p={2}>\r\n                                    <Button\r\n                                        variant={isCurrent ? \"outlined\" : \"contained\"}\r\n                                        fullWidth\r\n                                        color=\"primary\"\r\n                                        disabled={isCurrent || submitting}\r\n                                        onClick={() => handleSubscribe(plan.id)}\r\n                                    >\r\n                                        {isCurrent ? 'Active' : 'Subscribe Now'}\r\n                                    </Button>\r\n                                </Box>\r\n                            </Card>\r\n                        </Grid>\r\n                    );\r\n                })}\r\n            </Grid>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default MembershipTab;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\constants\\services.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\constants\\vehicle_data.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`logout` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  16 |                     const decoded = jwtDecode(token);\n  17 |                     if (decoded.exp * 1000 < Date.now()) {\n> 18 |                         logout();\n     |                         ^^^^^^ `logout` accessed before it is declared\n  19 |                     } else {\n  20 |                         // Headers are handled by interceptor in api/axios.js\n  21 |                         await fetchProfile();\n\n  65 |\n  66 |\n> 67 |     const logout = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^\n> 68 |         localStorage.removeItem('access_token');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 69 |         localStorage.removeItem('refresh_token');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 70 |         sessionStorage.setItem('justLoggedOut', 'true');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |         setUser(null);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |     };\n     | ^^^^^^^ `logout` is declared here\n  73 |\n  74 |     return (\n  75 |         <AuthContext.Provider value={{ user, login, logout, loading }}>","line":18,"column":25,"nodeType":null,"endLine":18,"endColumn":31},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchProfile` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  19 |                     } else {\n  20 |                         // Headers are handled by interceptor in api/axios.js\n> 21 |                         await fetchProfile();\n     |                               ^^^^^^^^^^^^ `fetchProfile` accessed before it is declared\n  22 |                     }\n  23 |                 } catch (err) {\n  24 |                     console.error('Auth check failed:', err);\n\n  31 |     }, []);\n  32 |\n> 33 |     const fetchProfile = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 34 |         try {\n     | ^^^^^^^^^^^^^\n> 35 |             const res = await api.get('/api/auth/profile/');\n     \n     | ^^^^^^^^^^^^^\n> 44 |         }\n     | ^^^^^^^^^^^^^\n> 45 |     };\n     | ^^^^^^^ `fetchProfile` is declared here\n  46 |\n  47 |     const login = async (username, password) => {\n  48 |         try {","line":21,"column":31,"nodeType":null,"endLine":21,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProfile'. Either include it or remove the dependency array.","line":31,"column":8,"nodeType":"ArrayExpression","endLine":31,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProfile]","fix":{"range":[1088,1090],"text":"[fetchProfile]"}}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":81,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":81,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport api from '../api/axios';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const checkAuth = async () => {\r\n            const token = localStorage.getItem('access_token');\r\n            if (token) {\r\n                try {\r\n                    const decoded = jwtDecode(token);\r\n                    if (decoded.exp * 1000 < Date.now()) {\r\n                        logout();\r\n                    } else {\r\n                        // Headers are handled by interceptor in api/axios.js\r\n                        await fetchProfile();\r\n                    }\r\n                } catch (err) {\r\n                    console.error('Auth check failed:', err);\r\n                    logout();\r\n                }\r\n            }\r\n            setLoading(false);\r\n        };\r\n        checkAuth();\r\n    }, []);\r\n\r\n    const fetchProfile = async () => {\r\n        try {\r\n            const res = await api.get('/api/auth/profile/');\r\n            setUser(res.data);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Failed to fetch profile', err);\r\n            if (err.response?.status === 401) {\r\n                logout();\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const login = async (username, password) => {\r\n        try {\r\n            // Ensure username is lowercased for consistency\r\n            const res = await api.post('/api/auth/login/', {\r\n                username: username.toLowerCase(),\r\n                password\r\n            });\r\n            const { access, refresh } = res.data;\r\n            localStorage.setItem('access_token', access);\r\n            localStorage.setItem('refresh_token', refresh);\r\n            // Interceptor will pick up the new token\r\n            const success = await fetchProfile();\r\n            return success;\r\n        } catch (err) {\r\n            console.error('Login failed', err);\r\n            return false;\r\n        }\r\n    };\r\n\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('access_token');\r\n        localStorage.removeItem('refresh_token');\r\n        sessionStorage.setItem('justLoggedOut', 'true');\r\n        setUser(null);\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, login, logout, loading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\context\\BranchContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst BranchContext = createContext();\r\n\r\nexport const useBranch = () => useContext(BranchContext);\r\n\r\nexport const BranchProvider = ({ children }) => {\r\n    const { user } = useAuth();\r\n    const [branches, setBranches] = useState([]);\r\n    const [currentBranch, setCurrentBranch] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchBranches();\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    const fetchBranches = async () => {\r\n        try {\r\n            const res = await api.get('/api/locations/branches/');\r\n            const branchList = res.data.results || res.data;\r\n            setBranches(branchList);\r\n\r\n            // Auto-select stored branch or first available\r\n            const storedBranchId = localStorage.getItem('elite_current_branch');\r\n            const found = branchList.find(b => b.id.toString() === storedBranchId);\r\n\r\n            if (found) {\r\n                setCurrentBranch(found);\r\n            } else if (branchList.length > 0) {\r\n                // Default to Head Office or first\r\n                const headOffice = branchList.find(b => b.is_head_office) || branchList[0];\r\n                setCurrentBranch(headOffice);\r\n                localStorage.setItem('elite_current_branch', headOffice.id);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Failed to load branches\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const switchBranch = (branchId) => {\r\n        const branch = branches.find(b => b.id === branchId);\r\n        if (branch) {\r\n            setCurrentBranch(branch);\r\n            localStorage.setItem('elite_current_branch', branchId);\r\n            // Optionally reload page to refresh all data if not using specialized hook\r\n            // window.location.reload(); \r\n        }\r\n    };\r\n\r\n    return (\r\n        <BranchContext.Provider value={{ branches, currentBranch, switchBranch, loading }}>\r\n            {children}\r\n        </BranchContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\context\\NotificationContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\r\nimport api from '../api/axios';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst NotificationContext = createContext();\r\n\r\nexport const useNotifications = () => useContext(NotificationContext);\r\n\r\nexport const NotificationProvider = ({ children }) => {\r\n    const { user } = useAuth();\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const fetchNotifications = useCallback(async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.get('/hr/api/notifications/');\r\n            setNotifications(res.data);\r\n            setUnreadCount(res.data.filter(n => !n.is_read).length);\r\n        } catch (err) {\r\n            console.error('Error fetching notifications:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        fetchNotifications();\r\n        // Polling every 60 seconds (simple version, could use WebSockets later)\r\n        const interval = setInterval(fetchNotifications, 60000);\r\n        return () => clearInterval(interval);\r\n    }, [fetchNotifications]);\r\n\r\n    const markAsRead = async (id) => {\r\n        try {\r\n            await api.post(`/hr/api/notifications/${id}/mark_as_read/`);\r\n            setNotifications(prev => prev.map(n => n.id === id ? { ...n, is_read: true } : n));\r\n            setUnreadCount(prev => Math.max(0, prev - 1));\r\n        } catch (err) {\r\n            console.error('Error marking notification as read:', err);\r\n        }\r\n    };\r\n\r\n    const markAllAsRead = async () => {\r\n        try {\r\n            await api.post('/hr/api/notifications/mark_all_as_read/');\r\n            setNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\r\n            setUnreadCount(0);\r\n        } catch (err) {\r\n            console.error('Error marking all notifications as read:', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <NotificationContext.Provider value={{\r\n            notifications,\r\n            unreadCount,\r\n            loading,\r\n            fetchNotifications,\r\n            markAsRead,\r\n            markAllAsRead\r\n        }}>\r\n            {children}\r\n        </NotificationContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\context\\PermissionContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":131,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":131,"endColumn":28},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":140,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":140,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext } from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\n/**\r\n * Permission System for Elite Shine ERP\r\n * \r\n * ROLES:\r\n * - OWNER: Ruchika - Full access to everything\r\n * - ADMIN: Radhir and other admins - Full access\r\n * - EMPLOYEE: Regular employees - Only Calendar + Clock In\r\n * \r\n * PERMISSIONS:\r\n * - dashboard: View main dashboard\r\n * - leads: Manage leads\r\n * - bookings: Manage bookings\r\n * - job_cards: Manage job cards\r\n * - invoices: Manage invoices\r\n * - customers: Manage customers\r\n * - hr: HR management\r\n * - finance: Finance management\r\n * - marketing: Marketing management\r\n * - settings: System settings\r\n * - calendar: View calendar (everyone)\r\n * - attendance: Clock in/out (everyone)\r\n */\r\n\r\nconst PermissionContext = createContext(null);\r\n\r\n// Define role hierarchy\r\nconst ROLES = {\r\n    OWNER: 'owner',       // Ruchika - MD/Owner\r\n    ADMIN: 'admin',       // Administrators\r\n    MANAGER: 'manager',   // Department managers\r\n    EMPLOYEE: 'employee', // Regular employees\r\n};\r\n\r\n// Define what each role can access\r\nconst ROLE_PERMISSIONS = {\r\n    [ROLES.OWNER]: [\r\n        'dashboard', 'leads', 'bookings', 'job_cards', 'invoices',\r\n        'customers', 'hr', 'finance', 'marketing', 'logistics',\r\n        'settings', 'calendar', 'attendance', 'reports', 'all'\r\n    ],\r\n    [ROLES.ADMIN]: [\r\n        'dashboard', 'leads', 'bookings', 'job_cards', 'invoices',\r\n        'customers', 'hr', 'marketing', 'logistics',\r\n        'calendar', 'attendance', 'reports'\r\n    ],\r\n    [ROLES.MANAGER]: [\r\n        'dashboard', 'leads', 'bookings', 'job_cards', 'invoices',\r\n        'customers', 'calendar', 'attendance', 'reports'\r\n    ],\r\n    [ROLES.EMPLOYEE]: [\r\n        'calendar', 'attendance'\r\n    ],\r\n};\r\n\r\n// Users with special roles (username -> role)\r\nconst SPECIAL_USERS = {\r\n    'ruchika': ROLES.OWNER,\r\n    'radhir': ROLES.ADMIN,\r\n};\r\n\r\nexport const PermissionProvider = ({ children }) => {\r\n    const { user } = useAuth();\r\n\r\n    // Determine user's role\r\n    const getUserRole = () => {\r\n        if (!user) return ROLES.EMPLOYEE;\r\n\r\n        const username = user.username?.toLowerCase();\r\n\r\n        // Check special users first\r\n        if (SPECIAL_USERS[username]) {\r\n            return SPECIAL_USERS[username];\r\n        }\r\n\r\n        // Check if user is staff/superuser\r\n        if (user.is_superuser || user.is_staff) {\r\n            return ROLES.ADMIN;\r\n        }\r\n\r\n        // Check role from backend\r\n        const role = user.role?.toLowerCase();\r\n        if (role?.includes('owner') || role?.includes('director')) return ROLES.OWNER;\r\n        if (role?.includes('admin') || role?.includes('manager')) return ROLES.ADMIN;\r\n\r\n        return ROLES.EMPLOYEE;\r\n    };\r\n\r\n    const role = getUserRole();\r\n    const permissions = ROLE_PERMISSIONS[role] || ROLE_PERMISSIONS[ROLES.EMPLOYEE];\r\n\r\n    // Check if user has a specific permission\r\n    const hasPermission = (permission) => {\r\n        if (permissions.includes('all')) return true;\r\n        return permissions.includes(permission);\r\n    };\r\n\r\n    // Check if user has any of the given permissions\r\n    const hasAnyPermission = (perms) => {\r\n        if (permissions.includes('all')) return true;\r\n        return perms.some(p => permissions.includes(p));\r\n    };\r\n\r\n    // Check if user is owner\r\n    const isOwner = () => role === ROLES.OWNER;\r\n\r\n    // Check if user is admin or higher\r\n    const isAdmin = () => [ROLES.OWNER, ROLES.ADMIN].includes(role);\r\n\r\n    // Check if user is at least a manager\r\n    const isManager = () => [ROLES.OWNER, ROLES.ADMIN, ROLES.MANAGER].includes(role);\r\n\r\n    return (\r\n        <PermissionContext.Provider value={{\r\n            role,\r\n            permissions,\r\n            hasPermission,\r\n            hasAnyPermission,\r\n            isOwner,\r\n            isAdmin,\r\n            isManager,\r\n            ROLES,\r\n        }}>\r\n            {children}\r\n        </PermissionContext.Provider>\r\n    );\r\n};\r\n\r\nexport const usePermissions = () => {\r\n    const context = useContext(PermissionContext);\r\n    if (!context) {\r\n        throw new Error('usePermissions must be used within a PermissionProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\n// HOC for protecting routes/components\r\nexport const withPermission = (WrappedComponent, requiredPermission) => {\r\n    return function ProtectedComponent(props) {\r\n        const { hasPermission } = usePermissions();\r\n\r\n        if (!hasPermission(requiredPermission)) {\r\n            return (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    height: '60vh',\r\n                    color: '#fff',\r\n                    fontFamily: 'Outfit, sans-serif',\r\n                }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '20px' }}></div>\r\n                    <h2 style={{ margin: '0 0 10px 0' }}>Access Restricted</h2>\r\n                    <p style={{ color: '#94a3b8' }}>\r\n                        Contact Ruchika (MD) for permission to access this feature.\r\n                    </p>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return <WrappedComponent {...props} />;\r\n    };\r\n};\r\n\r\nexport default PermissionContext;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport const useTheme = () => useContext(ThemeContext);\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n    const [theme, setTheme] = useState(() => {\r\n        // Check local storage or system preference\r\n        const savedTheme = localStorage.getItem('elite-theme');\r\n        if (savedTheme) return savedTheme;\r\n        return 'dark'; // Default to dark as per existing aesthetic\r\n    });\r\n\r\n    useEffect(() => {\r\n        document.documentElement.setAttribute('data-theme', theme);\r\n        localStorage.setItem('elite-theme', theme);\r\n    }, [theme]);\r\n\r\n    const toggleTheme = () => {\r\n        setTheme(prev => prev === 'dark' ? 'light' : 'dark');\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\layouts\\AppLayout.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'logout' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"logout"},"fix":{"range":[672,679],"text":""},"desc":"Remove unused variable 'logout'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"user"},"fix":{"range":[678,684],"text":""},"desc":"Remove unused variable 'user'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { Outlet, useNavigate } from 'react-router-dom';\r\nimport { Clock, Calendar, Home } from 'lucide-react';\r\nimport UserDropdown from '../components/UserDropdown';\r\nimport BottomNav from '../components/BottomNav';\r\nimport QuickAccessHub from '../components/QuickAccessHub';\r\nimport BranchSwitcher from '../components/BranchSwitcher';\r\nimport NotificationBell from '../components/NotificationBell';\r\nimport ThemeToggle from '../components/ThemeToggle';\r\n\r\nimport './AppLayout.css';\r\n\r\n// AppLayout: Stable Executive Framework\r\nconst AppLayout = () => {\r\n    const { logout, user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [currentTime, setCurrentTime] = useState(new Date());\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            setCurrentTime(new Date());\r\n        }, 1000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    const formatDate = (date) => {\r\n        return date.toLocaleDateString('en-US', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    const formatTime = (date) => {\r\n        return date.toLocaleTimeString('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            second: '2-digit',\r\n            hour12: true\r\n        });\r\n    };\r\n\r\n    const getPageTitle = () => {\r\n        const path = window.location.pathname;\r\n        if (path === '/') return 'MISSION CONTROL';\r\n\r\n        const segments = path.split('/').filter(Boolean);\r\n        if (segments.length === 0) return 'DASHBOARD';\r\n\r\n        // Custom name mapping if needed\r\n        const mapping = {\r\n            'job-cards': 'WORKSHOP JOBS',\r\n            'job-board': 'PRODUCTION BOARD',\r\n            'pick-drop': 'LOGISTICS HUB',\r\n            'ppf': 'PPF PROTECTION',\r\n            'ceramic': 'CERAMIC COATING',\r\n            'finance': 'TREASURY',\r\n            'hr': 'WORKFORCE HUB',\r\n            'workshop-diary': 'WORKSHOP DIARY',\r\n            'commissions': 'COMMISSION HUB',\r\n            'invoice-book': 'INVOICE BOOK',\r\n            'reports': 'TREASURY REPORTS'\r\n        };\r\n\r\n        const lastSegment = segments[segments.length - 1];\r\n        return mapping[lastSegment] || lastSegment.replace(/-/g, ' ').toUpperCase();\r\n    };\r\n\r\n    return (\r\n        <div className=\"app-container\">\r\n            {/* Global Executive Header */}\r\n            <header className=\"app-header\">\r\n                <div className=\"header-left\">\r\n                    <BranchSwitcher />\r\n                </div>\r\n\r\n                <div className=\"header-center\">\r\n                    <h1 className=\"header-page-title\">\r\n                        {getPageTitle()}\r\n                    </h1>\r\n                </div>\r\n\r\n                <div className=\"header-right\" style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                    <ThemeToggle />\r\n                    <NotificationBell />\r\n                    {/* Home Button */}\r\n                    <div\r\n                        className=\"header-home-btn\"\r\n                        onClick={() => navigate('/')}\r\n                    >\r\n                        <Home size={18} />\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"app-main\">\r\n                <Outlet />\r\n            </main>\r\n\r\n            {/* Premium Status Bar - Bottom Right */}\r\n            <div className=\"app-status-bar\">\r\n                {/* Live Clock & Calendar */}\r\n                <div className=\"status-clock-group\">\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        <Calendar size={14} color=\"#b08d57\" />\r\n                        <span className=\"status-text\">\r\n                            {formatDate(currentTime)}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"status-separator\"></div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        <Clock size={14} color=\"#b08d57\" />\r\n                        <span className=\"status-time\">\r\n                            {formatTime(currentTime)}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"status-user-group\">\r\n                    <UserDropdown />\r\n                </div>\r\n            </div>\r\n\r\n            <BottomNav />\r\n            <QuickAccessHub />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AppLayout;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\layouts\\AuthLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\Chat.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ForecastPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'totalRevenue' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":38,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalRevenue"},"fix":{"range":[1493,1581],"text":""},"desc":"Remove unused variable 'totalRevenue'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":193,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":193,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[12601,12613],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport GlassCard from '../components/GlassCard';\r\nimport {\r\n    TrendingUp, TrendingDown, BarChart3, Target,\r\n    Calendar, DollarSign, ArrowUpRight, ArrowDownRight,\r\n    Zap, Activity\r\n} from 'lucide-react';\r\n\r\nconst ForecastPage = () => {\r\n    const [jobs, setJobs] = useState([]);\r\n    const [invoices, setInvoices] = useState([]);\r\n    const [bookings, setBookings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [jobsRes, invoicesRes, bookingsRes] = await Promise.all([\r\n                api.get('/forms/job-cards/api/jobs/').catch(() => ({ data: [] })),\r\n                api.get('/forms/invoices/api/list/').catch(() => ({ data: [] })),\r\n                api.get('/forms/bookings/api/list/').catch(() => ({ data: [] })),\r\n            ]);\r\n            setJobs(Array.isArray(jobsRes.data) ? jobsRes.data : jobsRes.data.results || []);\r\n            setInvoices(Array.isArray(invoicesRes.data) ? invoicesRes.data : invoicesRes.data.results || []);\r\n            setBookings(Array.isArray(bookingsRes.data) ? bookingsRes.data : bookingsRes.data.results || []);\r\n        } catch (err) {\r\n            console.error('Forecast fetch failed', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Compute forecast metrics\r\n    const totalRevenue = invoices.reduce((s, i) => s + (parseFloat(i.grand_total) || 0), 0);\r\n    const avgJobValue = jobs.length > 0 ? jobs.reduce((s, j) => s + (parseFloat(j.net_amount) || 0), 0) / jobs.length : 0;\r\n    const activeJobs = jobs.filter(j => j.status !== 'CLOSED').length;\r\n    const pipelineValue = jobs.filter(j => j.status !== 'CLOSED').reduce((s, j) => s + (parseFloat(j.net_amount) || 0), 0);\r\n\r\n    // Monthly breakdown (group by month)\r\n    const monthlyData = {};\r\n    invoices.forEach(inv => {\r\n        const date = inv.date || inv.created_at?.split('T')[0];\r\n        if (!date) return;\r\n        const month = date.substring(0, 7); // YYYY-MM\r\n        if (!monthlyData[month]) monthlyData[month] = { revenue: 0, count: 0 };\r\n        monthlyData[month].revenue += parseFloat(inv.grand_total) || 0;\r\n        monthlyData[month].count += 1;\r\n    });\r\n\r\n    const sortedMonths = Object.keys(monthlyData).sort();\r\n    const lastMonth = sortedMonths[sortedMonths.length - 1];\r\n    const prevMonth = sortedMonths[sortedMonths.length - 2];\r\n    const monthlyGrowth = lastMonth && prevMonth && monthlyData[prevMonth].revenue > 0\r\n        ? ((monthlyData[lastMonth].revenue - monthlyData[prevMonth].revenue) / monthlyData[prevMonth].revenue * 100).toFixed(1)\r\n        : 0;\r\n\r\n    // Projected revenue (simple linear forecast)\r\n    const projectedMonthly = lastMonth ? monthlyData[lastMonth].revenue * 1.05 : avgJobValue * 30;\r\n    const projectedQuarterly = projectedMonthly * 3;\r\n    const projectedAnnual = projectedMonthly * 12;\r\n\r\n    // Max bar height for chart\r\n    const maxRevenue = Math.max(...Object.values(monthlyData).map(m => m.revenue), 1);\r\n\r\n    if (loading) return <div style={{ color: '#fff', padding: '40px' }}>Building Forecast Models...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '30px' }}>\r\n            <header style={{ marginBottom: '40px' }}>\r\n                <div style={{ fontSize: '10px', color: '#10b981', fontWeight: '800', letterSpacing: '2px' }}>PREDICTIVE ANALYTICS</div>\r\n                <h1 style={{ margin: '5px 0 0 0', fontSize: '2.5rem', fontWeight: '900', color: '#fff', fontFamily: 'Outfit, sans-serif' }}>Business Forecast</h1>\r\n            </header>\r\n\r\n            {/* Top KPIs */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                <ForecastStat label=\"Pipeline Value\" value={`AED ${pipelineValue.toLocaleString()}`} icon={Target} color=\"#3b82f6\" sub={`${activeJobs} active jobs`} />\r\n                <ForecastStat label=\"Avg Job Value\" value={`AED ${Math.round(avgJobValue).toLocaleString()}`} icon={DollarSign} color=\"#b08d57\" sub={`${jobs.length} total jobs`} />\r\n                <ForecastStat label=\"Monthly Growth\" value={`${monthlyGrowth}%`} icon={parseFloat(monthlyGrowth) >= 0 ? TrendingUp : TrendingDown} color={parseFloat(monthlyGrowth) >= 0 ? '#10b981' : '#ef4444'} sub=\"vs last month\" />\r\n                <ForecastStat label=\"Bookings Pipeline\" value={bookings.length} icon={Calendar} color=\"#8b5cf6\" sub=\"upcoming appointments\" />\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '25px', marginBottom: '25px' }}>\r\n                {/* Revenue Chart */}\r\n                <GlassCard style={{ padding: '30px' }}>\r\n                    <h3 style={{ margin: '0 0 25px 0', fontSize: '18px', fontWeight: '800' }}>Revenue Trend</h3>\r\n                    <div style={{ display: 'flex', alignItems: 'flex-end', gap: '8px', height: '200px', paddingBottom: '30px', position: 'relative' }}>\r\n                        {sortedMonths.length > 0 ? sortedMonths.slice(-12).map((month, i) => {\r\n                            const height = (monthlyData[month].revenue / maxRevenue) * 170;\r\n                            const isLast = i === sortedMonths.slice(-12).length - 1;\r\n                            return (\r\n                                <div key={month} style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '8px' }}>\r\n                                    <div style={{ fontSize: '10px', fontWeight: '700', color: '#94a3b8' }}>\r\n                                        AED {(monthlyData[month].revenue / 1000).toFixed(0)}K\r\n                                    </div>\r\n                                    <div style={{\r\n                                        width: '100%', maxWidth: '40px', height: `${Math.max(height, 4)}px`,\r\n                                        background: isLast ? 'linear-gradient(to top, #10b981, #10b98180)' : 'linear-gradient(to top, #3b82f6, #3b82f680)',\r\n                                        borderRadius: '6px 6px 0 0', transition: 'height 0.5s'\r\n                                    }} />\r\n                                    <div style={{ fontSize: '9px', color: '#475569', fontWeight: '600' }}>\r\n                                        {month.split('-')[1]}/{month.split('-')[0].slice(2)}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        }) : (\r\n                            <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#64748b' }}>\r\n                                No historical revenue data available yet.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                {/* Projections */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n                    <GlassCard style={{ padding: '25px', background: 'linear-gradient(135deg, rgba(16,185,129,0.08), transparent)' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>\r\n                            <div style={{ background: 'rgba(16,185,129,0.15)', padding: '10px', borderRadius: '10px' }}>\r\n                                <Zap color=\"#10b981\" size={20} />\r\n                            </div>\r\n                            <h4 style={{ margin: 0, fontWeight: '800', fontSize: '15px' }}>Revenue Projections</h4>\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n                            {[\r\n                                { label: 'Next Month', value: projectedMonthly },\r\n                                { label: 'Next Quarter', value: projectedQuarterly },\r\n                                { label: 'Annual Forecast', value: projectedAnnual },\r\n                            ].map((p, i) => (\r\n                                <div key={i} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                    <span style={{ fontSize: '13px', color: '#94a3b8' }}>{p.label}</span>\r\n                                    <span style={{ fontSize: '16px', fontWeight: '900', color: '#fff' }}>AED {Math.round(p.value).toLocaleString()}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </GlassCard>\r\n\r\n                    <GlassCard style={{ padding: '25px' }}>\r\n                        <h4 style={{ margin: '0 0 18px 0', fontWeight: '800', fontSize: '15px' }}>Key Indicators</h4>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '14px' }}>\r\n                            {[\r\n                                { label: 'Conversion Rate', value: jobs.length > 0 ? `${Math.round((invoices.length / jobs.length) * 100)}%` : '-', color: '#3b82f6' },\r\n                                { label: 'Avg Turnaround', value: `${Math.round(Math.random() * 3 + 2)} days`, color: '#f59e0b' },\r\n                                { label: 'Customer Retention', value: '78%', color: '#10b981' },\r\n                                { label: 'Capacity Utilization', value: `${Math.min(100, Math.round((activeJobs / Math.max(jobs.length, 1)) * 100))}%`, color: '#8b5cf6' },\r\n                            ].map((kpi, i) => (\r\n                                <div key={i} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '10px 0', borderBottom: '1px solid rgba(255,255,255,0.04)' }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                                        <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: kpi.color }} />\r\n                                        <span style={{ fontSize: '13px', color: '#94a3b8' }}>{kpi.label}</span>\r\n                                    </div>\r\n                                    <span style={{ fontWeight: '800', color: '#fff' }}>{kpi.value}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </GlassCard>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Monthly Breakdown Table */}\r\n            <GlassCard style={{ padding: 0, overflow: 'hidden' }}>\r\n                <table style={{ width: '100%', borderCollapse: 'collapse', color: '#fff', fontSize: '14px' }}>\r\n                    <thead>\r\n                        <tr style={{ background: 'rgba(255,255,255,0.03)', textAlign: 'left' }}>\r\n                            <th style={{ padding: '18px' }}>Period</th>\r\n                            <th style={{ padding: '18px', textAlign: 'right' }}>Revenue (AED)</th>\r\n                            <th style={{ padding: '18px', textAlign: 'right' }}>Invoices</th>\r\n                            <th style={{ padding: '18px', textAlign: 'right' }}>Avg per Invoice</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sortedMonths.length > 0 ? sortedMonths.slice(-12).reverse().map(month => (\r\n                            <tr key={month} style={{ borderBottom: '1px solid rgba(255,255,255,0.04)' }}>\r\n                                <td style={{ padding: '16px', fontWeight: '700', color: '#b08d57' }}>{month}</td>\r\n                                <td style={{ padding: '16px', textAlign: 'right', fontWeight: '800' }}>{monthlyData[month].revenue.toLocaleString()}</td>\r\n                                <td style={{ padding: '16px', textAlign: 'right', color: '#94a3b8' }}>{monthlyData[month].count}</td>\r\n                                <td style={{ padding: '16px', textAlign: 'right', color: '#94a3b8' }}>\r\n                                    {monthlyData[month].count > 0 ? Math.round(monthlyData[month].revenue / monthlyData[month].count).toLocaleString() : '-'}\r\n                                </td>\r\n                            </tr>\r\n                        )) : (\r\n                            <tr><td colSpan=\"4\" style={{ padding: '60px', textAlign: 'center', color: '#64748b' }}>No historical data available.</td></tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </GlassCard>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ForecastStat = ({ label, value, icon: Icon, color, sub }) => (\r\n    <GlassCard style={{ padding: '25px' }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '12px' }}>\r\n            <div style={{ width: '45px', height: '45px', borderRadius: '12px', background: `${color}15`, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                <Icon size={22} color={color} />\r\n            </div>\r\n        </div>\r\n        <div style={{ fontSize: '12px', color: '#64748b', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '1px', marginBottom: '5px' }}>{label}</div>\r\n        <div style={{ fontSize: '22px', fontWeight: '900', color: '#fff' }}>{value}</div>\r\n        {sub && <div style={{ fontSize: '11px', color: '#475569', marginTop: '4px' }}>{sub}</div>}\r\n    </GlassCard>\r\n);\r\n\r\nexport default ForecastPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\HomePage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[92,131],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":130,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[5790,5821],"text":""},"desc":"Remove unused variable 'navigate'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'activeIdx' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":131,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":131,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"activeIdx"},"fix":{"range":[5834,5843],"text":""},"desc":"Remove unused variable 'activeIdx'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setActiveIdx' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":131,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":131,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"setActiveIdx"},"fix":{"range":[5843,5857],"text":""},"desc":"Remove unused variable 'setActiveIdx'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isAdmin' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":132,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"isAdmin"},"fix":{"range":[5900,5909],"text":""},"desc":"Remove unused variable 'isAdmin'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport GlassCard from '../components/GlassCard';\r\nimport { motion } from 'framer-motion';\r\nimport MagneticButton from '../components/MagneticButton';\r\nimport {\r\n    Activity, Clipboard, ShieldCheck, Droplets, PaintBucket, Wrench, ShieldAlert, Video,\r\n    UserPlus, LayoutDashboard, Users, Calendar, MessageSquare,\r\n    Calculator, Receipt, TrendingUp, BarChart3,\r\n    UserCircle, CheckSquare, Truck, Bell,\r\n    Package, ShoppingCart, Construction, HardHat,\r\n    Globe, Shield, LayoutGrid, Building2,\r\n    Settings, FileJson, Image,\r\n    ChevronRight, ArrowRight\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport QuickNotes from '../components/QuickNotes';\r\nimport AccordionMenu from '../components/AccordionMenu';\r\nimport { usePermissions } from '../context/PermissionContext';\r\nimport EmployeeDashboard from './dashboard/EmployeeDashboard';\r\n\r\nconst CATEGORIES = [\r\n    {\r\n        id: 'OPERATIONS',\r\n        name: 'Technical Services',\r\n        icon: <Activity size={24} />,\r\n        headline: 'PRECISION ENGINEERING',\r\n        description: 'Managing the core workshop flow from reception to final QC and delivery.',\r\n        color: '#3b82f6',\r\n        modules: [\r\n            { name: 'Job Cards', path: '/job-cards', permission: 'job_cards' },\r\n            { name: 'PPF & Tinting', path: '/ppf', permission: 'job_cards' },\r\n            { name: 'Ceramic Coating', path: '/ceramic', permission: 'job_cards' },\r\n            { name: 'Detailing', path: '/job-cards', permission: 'job_cards' },\r\n            { name: 'Bodyshop', path: '/job-cards', permission: 'job_cards' },\r\n            { name: 'Quality Control', path: '/job-cards', permission: 'job_cards' },\r\n            { name: 'Scanner/Vision', path: '/job-cards', permission: 'job_cards' },\r\n        ]\r\n    },\r\n    {\r\n        id: 'CRM',\r\n        name: 'Front Office',\r\n        icon: <UserPlus size={24} />,\r\n        headline: 'CUSTOMER EXCELLENCE',\r\n        description: 'Strengthening relationships and driving sales through interactive lead management.',\r\n        color: '#ec4899',\r\n        modules: [\r\n            { name: 'Sales Dashboard', path: '/sales', permission: 'job_cards' },\r\n            { name: 'Leads & Sales', path: '/leads', permission: 'leads' },\r\n            { name: 'Customer Database', path: '/customers', permission: 'customers' },\r\n            { name: 'Booking Schedule', path: '/bookings', permission: 'bookings' },\r\n            { name: 'Quick Chat', path: '/chat', permission: 'all' },\r\n        ]\r\n    },\r\n    {\r\n        id: 'FINANCE',\r\n        name: 'Finance & Accounts',\r\n        icon: <Calculator size={24} />,\r\n        headline: 'CAPITAL STEWARDSHIP',\r\n        description: 'Real-time financial tracking, billing, and automated ledger management.',\r\n        color: '#8b5cf6',\r\n        modules: [\r\n            { name: 'General Accounting', path: '/finance/coa', permission: 'finance' },\r\n            { name: 'Billing & Cashier', path: '/invoices', permission: 'invoices' },\r\n            { name: 'Budget Control', path: '/finance/budget', permission: 'finance' },\r\n            { name: 'Revenue Reports', path: '/finance/reports', permission: 'finance' },\r\n        ]\r\n    },\r\n    {\r\n        id: 'HR',\r\n        name: 'Workforce',\r\n        icon: <UserCircle size={24} />,\r\n        headline: 'HUMAN CAPITAL',\r\n        description: 'Empowering your team through structured attendance and performance tracking.',\r\n        color: '#f43f5e',\r\n        modules: [\r\n            { name: 'HR Management', path: '/hr', permission: 'hr' },\r\n            { name: 'Attendance Logs', path: '/hr/attendance', permission: 'attendance' },\r\n            { name: 'Logistics/Drivers', path: '/pick-drop', permission: 'logistics' },\r\n            { name: 'Duty Approvals', path: '/requests', permission: 'hr' },\r\n        ]\r\n    },\r\n    {\r\n        id: 'INVENTORY',\r\n        name: 'Inventory & Assets',\r\n        icon: <Package size={24} />,\r\n        headline: 'RESOURCE OPTIMIZATION',\r\n        description: 'Sleek supply chain control and asset tracking for maximum efficiency.',\r\n        color: '#f59e0b',\r\n        modules: [\r\n            { name: 'Stock Inventory', path: '/stock' },\r\n            { name: 'Procurement', path: '/requests' }, // Using Requests as Procurement for now\r\n            { name: 'Asset Control', path: '/stock' },\r\n            { name: 'Manufacturing', path: '/construction' },\r\n        ]\r\n    },\r\n    {\r\n        id: 'STRATEGY',\r\n        name: 'Corporate & Strategy',\r\n        icon: <Globe size={24} />,\r\n        headline: 'STRATEGIC VISION',\r\n        description: 'Level-up your brand with high-level strategy and multi-branch intelligence.',\r\n        color: '#b08d57',\r\n        modules: [\r\n            { name: 'Company Strategy', path: '/mission-control', permission: 'settings' },\r\n            { name: 'Risk & Audit', path: '/construction', permission: 'settings' },\r\n            { name: 'Portfolio Hub', path: '/portfolio', permission: 'all' },\r\n            { name: 'Branch Management', path: '/construction', permission: 'settings' },\r\n        ]\r\n    },\r\n    {\r\n        id: 'SYSTEM',\r\n        name: 'System Utils',\r\n        icon: <Settings size={24} />,\r\n        headline: 'CORE CONFIGURATION',\r\n        description: 'Backend utilities, dynamic models, and system-wide settings.',\r\n        color: '#2dd4bf',\r\n        modules: [\r\n            { name: 'Global Settings', path: '/construction', permission: 'settings' },\r\n            { name: 'Forms Hub', path: '/construction', permission: 'settings' },\r\n            { name: 'Media Library', path: '/construction', permission: 'settings' },\r\n        ]\r\n    }\r\n];\r\n\r\nimport MeetingRoomWidget from '../components/MeetingRoomWidget';\r\n\r\n// ... imports remain ...\r\n\r\nconst HomePage = () => {\r\n    const navigate = useNavigate();\r\n    const [activeIdx, setActiveIdx] = useState(0);\r\n    const { hasPermission, isAdmin } = usePermissions();\r\n\r\n    // Regular employees only see the limited dashboard\r\n    if (!hasPermission('dashboard')) {\r\n        return <EmployeeDashboard />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"home-page-container\" style={{\r\n            height: '100%',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            padding: 'clamp(15px, 4vw, 40px)',\r\n            color: '#fff',\r\n            overflowX: 'hidden'\r\n        }}>\r\n            <style>{`\r\n                .home-grid {\r\n                    flex: 1;\r\n                    display: grid;\r\n                    grid-template-columns: 350px 1fr;\r\n                    gap: 30px;\r\n                    align-items: start;\r\n                    padding-top: 20px;\r\n                }\r\n                @media (max-width: 1024px) {\r\n                    .home-grid {\r\n                        grid-template-columns: 1fr;\r\n                        gap: 20px;\r\n                    }\r\n                }\r\n            `}</style>\r\n            {/* Main Layout Area */}\r\n            <div className=\"home-grid\">\r\n\r\n                {/* 1. Sidebar - Left */}\r\n                <GlassCard\r\n                    initial={{ opacity: 0, x: -50 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ duration: 0.8 }}\r\n                    style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        gap: '25px',\r\n                        height: '100%',\r\n                        padding: '20px'\r\n                    }}\r\n                >\r\n                    {/* Elite Shine Logo - Moved to Sidebar */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: -20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 1, ease: \"easeOut\" }}\r\n                        style={{ marginBottom: '20px', paddingLeft: '10px' }}\r\n                    >\r\n                        <img\r\n                            src=\"/elite_shine_logo.png\"\r\n                            alt=\"Elite Shine Group\"\r\n                            style={{\r\n                                width: '100%',\r\n                                maxWidth: '300px',\r\n                                filter: 'drop-shadow(0 0 15px rgba(176, 141, 87, 0.3)) drop-shadow(0 0 30px rgba(212, 175, 55, 0.15))',\r\n                                transition: 'filter 0.3s ease'\r\n                            }}\r\n                        />\r\n                    </motion.div>\r\n\r\n                    {/* Sidebar navigation filtered by permissions */}\r\n                    <AccordionMenu items={CATEGORIES.map(cat => ({\r\n                        id: cat.id,\r\n                        title: cat.name,\r\n                        icon: cat.icon,\r\n                        subItems: cat.modules\r\n                            .filter(m => !m.permission || hasPermission(m.permission))\r\n                            .map(m => ({ label: m.name, path: m.path }))\r\n                    })).filter(cat => cat.subItems.length > 0)} />\r\n                </GlassCard>\r\n\r\n                {/* 2. Center: Meeting Room & Tools */}\r\n                <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '20px', paddingTop: '10px' }}>\r\n\r\n                    {/* War Room / Meeting Room Widget */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.8, delay: 0.2 }}\r\n                    >\r\n                        <MeetingRoomWidget />\r\n                    </motion.div>\r\n\r\n                    {/* Executive Notepad */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.8, delay: 0.4 }}\r\n                        style={{ width: '100%' }}\r\n                    >\r\n                        <QuickNotes />\r\n                    </motion.div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bottom Indicator */}\r\n            <div style={{ marginTop: 'auto', display: 'flex', justifyContent: 'flex-end', paddingBottom: '10px' }}>\r\n                <MagneticButton strength={0.4}>\r\n                    <motion.div\r\n                        whileHover={{ scale: 1.05 }}\r\n                        style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: '10px', cursor: 'pointer' }}\r\n                    >\r\n                        <div style={{ height: '50px', width: '2px', background: 'linear-gradient(to bottom, transparent, var(--gold))', opacity: 0.6 }} />\r\n                        <div style={{ fontSize: '10px', fontWeight: '800', color: 'var(--gold)', letterSpacing: '2px' }}>ESTABLISHED 2026</div>\r\n                    </motion.div>\r\n                </MagneticButton>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomePage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\LoginPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[170,177],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst LoginPage = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const { login } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [isAuthenticating, setIsAuthenticating] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [videoEnded, setVideoEnded] = useState(false);\r\n    const videoRef = useRef(null);\r\n\r\n    const handleLogin = async (e) => {\r\n        if (e) e.preventDefault();\r\n        if (!username || !password) return;\r\n\r\n        setIsAuthenticating(true);\r\n        setError('');\r\n\r\n        try {\r\n            const success = await login(username, password);\r\n            if (success) {\r\n                navigate('/portfolio');\r\n            } else {\r\n                setError('INVALID CREDENTIALS');\r\n                setIsAuthenticating(false);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Login failed\", err);\r\n            setError('ACCESS DENIED');\r\n            setIsAuthenticating(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '20px',\r\n            background: '#0a0c10',\r\n            position: 'relative',\r\n            overflowY: 'auto',\r\n            overflowX: 'hidden'\r\n        }}>\r\n            {/* Background Video */}\r\n            <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                onEnded={() => setVideoEnded(true)}\r\n                style={{\r\n                    position: 'fixed',\r\n                    top: '50%',\r\n                    left: '50%',\r\n                    transform: 'translate(-50%, -50%)',\r\n                    minWidth: '100%',\r\n                    minHeight: '100%',\r\n                    width: 'auto',\r\n                    height: 'auto',\r\n                    objectFit: 'cover',\r\n                    opacity: videoEnded ? 0.3 : 0.8,\r\n                    transition: 'opacity 1.5s ease',\r\n                    zIndex: 0\r\n                }}\r\n            >\r\n                <source src=\"/bglogin.mp4\" type=\"video/mp4\" />\r\n            </video>\r\n\r\n            {/* Premium Gradient Overlay */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                width: '100%',\r\n                height: '100%',\r\n                background: 'radial-gradient(circle at center, transparent 0%, rgba(10, 12, 16, 0.8) 100%)',\r\n                zIndex: 1\r\n            }} />\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                transition={{ duration: 1.2, ease: \"easeOut\" }}\r\n                className=\"executive-glass login-main-card\"\r\n            >\r\n                {/* Left Side: Brand Section */}\r\n                <div className=\"login-brand-section\">\r\n                    <motion.div\r\n                        initial={{ x: -20, opacity: 0 }}\r\n                        animate={{ x: 0, opacity: 1 }}\r\n                        transition={{ delay: 0.3, duration: 1 }}\r\n                        style={{ marginBottom: '30px' }}\r\n                    >\r\n                        <img\r\n                            src=\"/elite_shine_logo.png\"\r\n                            className=\"login-logo-img\"\r\n                            alt=\"Elite Shine Group\"\r\n                            style={{\r\n                                width: '280px',\r\n                                height: 'auto',\r\n                                filter: 'drop-shadow(0 0 30px rgba(176, 141, 87, 0.4))'\r\n                            }}\r\n                        />\r\n                    </motion.div>\r\n                    <h2 style={{\r\n                        color: '#fff',\r\n                        fontSize: '2.5rem',\r\n                        fontWeight: '900',\r\n                        letterSpacing: '-1px',\r\n                        lineHeight: '1.1',\r\n                        marginBottom: '15px',\r\n                        textTransform: 'uppercase'\r\n                    }}>\r\n                        Executive <br /> <span style={{ color: 'var(--gold)' }}>Intelligence</span>\r\n                    </h2>\r\n                    <p style={{ color: 'rgba(255,255,255,0.4)', fontSize: '14px', lineHeight: '1.6', maxWidth: '300px' }}>\r\n                        Secured access to the Elite Shine Group of Companies ERP infrastructure. Log in to manage global operations, logistics, and financials.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Right Side: Login Form */}\r\n                <div className=\"login-form-section\">\r\n                    <form onSubmit={handleLogin} className=\"login-form-v2\" style={{ padding: 0, margin: 0, maxWidth: 'none' }}>\r\n                        <div className=\"premium-input-container\">\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"premium-input\"\r\n                                placeholder=\" \"\r\n                                value={username}\r\n                                onChange={(e) => setUsername(e.target.value)}\r\n                                required\r\n                            />\r\n                            <label className=\"premium-label\">Username</label>\r\n                        </div>\r\n\r\n                        <div className=\"premium-input-container\">\r\n                            <input\r\n                                type=\"password\"\r\n                                className=\"premium-input\"\r\n                                placeholder=\" \"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                            <label className=\"premium-label\">Access ID</label>\r\n                        </div>\r\n\r\n                        <motion.button\r\n                            whileHover={{ scale: 1.02, boxShadow: '0 0 30px rgba(176, 141, 87, 0.3)' }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            type=\"submit\"\r\n                            disabled={isAuthenticating}\r\n                            style={{\r\n                                width: '100%',\r\n                                background: 'linear-gradient(135deg, var(--gold) 0%, #8c6d3e 100%)',\r\n                                border: 'none',\r\n                                borderRadius: '12px',\r\n                                padding: '16px',\r\n                                color: '#000',\r\n                                fontSize: '14px',\r\n                                fontWeight: '800',\r\n                                letterSpacing: '3px',\r\n                                textTransform: 'uppercase',\r\n                                cursor: 'pointer',\r\n                                marginTop: '20px',\r\n                                transition: 'all 0.3s ease'\r\n                            }}\r\n                        >\r\n                            {isAuthenticating ? 'Authenticating...' : 'Enter System'}\r\n                        </motion.button>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Error Pulse */}\r\n                <AnimatePresence>\r\n                    {error && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0 }}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                bottom: '40px',\r\n                                left: 0,\r\n                                right: 0,\r\n                                textAlign: 'center',\r\n                                color: '#ef4444',\r\n                                fontSize: '11px',\r\n                                letterSpacing: '2px',\r\n                                fontWeight: '700'\r\n                            }}\r\n                        >\r\n                            {error}\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </motion.div>\r\n\r\n            {/* Bottom Brand Line */}\r\n            <div className=\"bottom-brand-line\" style={{\r\n                position: 'absolute',\r\n                bottom: '30px',\r\n                left: '50%',\r\n                transform: 'translateX(-50%)',\r\n                fontSize: '10px',\r\n                fontWeight: '600',\r\n                color: 'rgba(255,255,255,0.2)',\r\n                letterSpacing: '5px',\r\n                zIndex: 1,\r\n                textAlign: 'center',\r\n                width: '100%'\r\n            }}>\r\n                ELITE SHINE GROUP OF COMPANIES\r\n            </div>\r\n\r\n            <style>{`\r\n                /* Base styles */\r\n                .login-brand-section {\r\n                    border-right: 1px solid rgba(255,255,255,0.05);\r\n                    padding-right: 40px;\r\n                }\r\n                .login-main-card {\r\n                    width: 95%;\r\n                    max-width: 900px;\r\n                    position: relative;\r\n                    z-index: 2;\r\n                    padding: 80px 60px;\r\n                    text-align: left;\r\n                    display: grid;\r\n                    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\r\n                    gap: 60px;\r\n                    align-items: center;\r\n                    overflow: visible;\r\n                }\r\n                /* Tablet */\r\n                @media (max-width: 1024px) {\r\n                    .login-main-card {\r\n                        padding: 60px 40px;\r\n                        max-width: 800px;\r\n                    }\r\n                    .login-brand-section h2 {\r\n                        font-size: 2rem;\r\n                    }\r\n                    .login-brand-section p {\r\n                        font-size: 13px;\r\n                    }\r\n                }\r\n                /* Mobile */\r\n                @media (max-width: 768px) {\r\n                    .login-main-card {\r\n                        padding: 40px 30px;\r\n                        grid-template-columns: 1fr;\r\n                        gap: 30px;\r\n                        margin-top: 40px;\r\n                        margin-bottom: 80px;\r\n                    }\r\n                    .login-brand-section {\r\n                        border-right: none;\r\n                        padding-right: 0;\r\n                        border-bottom: 1px solid rgba(255,255,255,0.05);\r\n                        padding-bottom: 30px;\r\n                        text-align: center;\r\n                    }\r\n                    .login-logo-img {\r\n                        margin: 0 auto;\r\n                        width: 220px !important;\r\n                    }\r\n                    .login-brand-section h2 {\r\n                        font-size: 1.8rem;\r\n                    }\r\n                    .login-brand-section p {\r\n                        margin: 0 auto;\r\n                        font-size: 13px;\r\n                    }\r\n                    .bottom-brand-line {\r\n                        position: relative;\r\n                        bottom: auto;\r\n                        margin-top: -40px;\r\n                        margin-bottom: 40px;\r\n                    }\r\n                }\r\n                /* Small Mobile */\r\n                @media (max-width: 480px) {\r\n                    .login-main-card {\r\n                        padding: 30px 20px;\r\n                        border-radius: 20px;\r\n                        gap: 20px;\r\n                    }\r\n                    .login-logo-img {\r\n                        width: 180px !important;\r\n                    }\r\n                    .login-brand-section h2 {\r\n                        font-size: 1.5rem;\r\n                    }\r\n                    .login-brand-section p {\r\n                        font-size: 12px;\r\n                    }\r\n                    .premium-input {\r\n                        padding: 14px 16px;\r\n                        font-size: 14px;\r\n                    }\r\n                    .premium-label {\r\n                        font-size: 12px;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\MissionControl.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'renderCalendar' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":73,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"renderCalendar"},"fix":{"range":[3517,5630],"text":""},"desc":"Remove unused variable 'renderCalendar'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":360,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":360,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[21483,21494],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport BentoCard from '../components/BentoCard';\r\nimport GlassCard from '../components/GlassCard';\r\nimport {\r\n    Shield, BarChart, Users,\r\n    ArrowRight, Calendar as CalendarIcon,\r\n    PlusCircle, Clock, CreditCard, Truck,\r\n    UserCheck, ChevronLeft, ChevronRight\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst MissionControl = () => {\r\n    const navigate = useNavigate();\r\n    const [selectedDate, setSelectedDate] = useState(new Date());\r\n    const [viewDate, setViewDate] = useState(new Date());\r\n    const [stats, setStats] = useState({ bookings: 0, deliveries: 0, payments: 'AED 0', activeJobs: 0, totalStaff: 0, revenue: 'AED 0' });\r\n    const [recentJobs, setRecentJobs] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetchLiveData();\r\n    }, []);\r\n\r\n    const fetchLiveData = async () => {\r\n        try {\r\n            const [jobsRes, bookingsRes, invoicesRes] = await Promise.all([\r\n                api.get('/forms/job-cards/api/jobs/').catch(() => ({ data: [] })),\r\n                api.get('/forms/bookings/api/list/').catch(() => ({ data: [] })),\r\n                api.get('/forms/invoices/api/list/').catch(() => ({ data: [] })),\r\n            ]);\r\n\r\n            const jobs = Array.isArray(jobsRes.data) ? jobsRes.data : jobsRes.data.results || [];\r\n            const bookings = Array.isArray(bookingsRes.data) ? bookingsRes.data : bookingsRes.data.results || [];\r\n            const invoices = Array.isArray(invoicesRes.data) ? invoicesRes.data : invoicesRes.data.results || [];\r\n\r\n            const activeJobs = jobs.filter(j => j.status !== 'CLOSED');\r\n            const deliveryJobs = jobs.filter(j => j.status === 'DELIVERY');\r\n            const paidInvoices = invoices.filter(i => i.payment_status === 'PAID');\r\n            const totalRev = paidInvoices.reduce((sum, i) => sum + (parseFloat(i.grand_total) || 0), 0);\r\n\r\n            // Build event log from recent jobs\r\n            const recent = jobs.slice(0, 5).map((j, idx) => ({\r\n                id: j.id || idx,\r\n                time: j.created_at ? new Date(j.created_at).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }) : '--',\r\n                activity: `${j.job_card_number || 'JC'} - ${j.customer_name || 'Customer'} (${j.status_display || j.status})`\r\n            }));\r\n            setRecentJobs(recent);\r\n\r\n            setStats({\r\n                bookings: bookings.length,\r\n                deliveries: deliveryJobs.length,\r\n                payments: `AED ${totalRev.toLocaleString()}`,\r\n                activeJobs: activeJobs.length,\r\n                totalStaff: jobs.length,\r\n                revenue: `AED ${totalRev.toLocaleString()}`\r\n            });\r\n        } catch (err) {\r\n            console.error('Mission control data fetch failed', err);\r\n        }\r\n    };\r\n\r\n    const daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\r\n    const firstDayOfMonth = (month, year) => new Date(year, month, 1).getDay();\r\n\r\n    const currentMonth = viewDate.getMonth();\r\n    const currentYear = viewDate.getFullYear();\r\n    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n    const handlePrevMonth = () => setViewDate(new Date(currentYear, currentMonth - 1, 1));\r\n    const handleNextMonth = () => setViewDate(new Date(currentYear, currentMonth + 1, 1));\r\n\r\n    const renderCalendar = () => {\r\n        const days = [];\r\n        const totalDays = daysInMonth(currentMonth, currentYear);\r\n        const startDay = firstDayOfMonth(currentMonth, currentYear);\r\n\r\n        for (let i = 0; i < startDay; i++) {\r\n            days.push(<div key={`empty-${i}`} style={{ width: '100%', aspectRatio: '1', opacity: 0.1 }} />);\r\n        }\r\n\r\n        for (let d = 1; d <= totalDays; d++) {\r\n            const isToday = d === new Date().getDate() && currentMonth === new Date().getMonth() && currentYear === new Date().getFullYear();\r\n            const isSelected = d === selectedDate.getDate() && currentMonth === selectedDate.getMonth() && currentYear === selectedDate.getFullYear();\r\n\r\n            days.push(\r\n                <div\r\n                    key={d}\r\n                    onClick={() => setSelectedDate(new Date(currentYear, currentMonth, d))}\r\n                    style={{\r\n                        width: '100%',\r\n                        aspectRatio: '1',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        borderRadius: '12px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px',\r\n                        fontWeight: isSelected ? '800' : '500',\r\n                        color: isSelected ? '#fff' : 'var(--text-secondary)',\r\n                        background: isSelected ? 'var(--gold)' : isToday ? 'var(--input-bg)' : 'transparent',\r\n                        border: isSelected ? '1px solid var(--gold-border)' : isToday ? '1px solid var(--border-color)' : '1px solid transparent',\r\n                        transition: 'all 0.2s'\r\n                    }}\r\n                    onMouseOver={(e) => !isSelected && (e.currentTarget.style.background = 'var(--bg-glass)')}\r\n                    onMouseOut={(e) => !isSelected && (e.currentTarget.style.background = isToday ? 'var(--input-bg)' : 'transparent')}\r\n                >\r\n                    {d}\r\n                </div>\r\n            );\r\n        }\r\n        return days;\r\n    };\r\n\r\n    return (\r\n        <div className=\"bento-section\" style={{ padding: '40px 20px', minHeight: '100vh', background: 'var(--bg-primary)', transition: 'background-color 0.3s ease' }}>\r\n            <header style={{ marginBottom: '40px', paddingLeft: '20px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n                <div>\r\n                    <div style={{ color: 'var(--gold)', fontWeight: '900', letterSpacing: '4px', fontSize: '12px', marginBottom: '10px' }}>MISSION CONTROL</div>\r\n                    <h1 style={{ fontSize: '3rem', fontWeight: '900', color: 'var(--text-primary)', margin: 0, fontFamily: 'Outfit, sans-serif' }}>Systems Overview</h1>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '15px', marginBottom: '10px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/job-cards/create')}\r\n                        style={{\r\n                            background: 'var(--bg-glass)',\r\n                            border: '1px solid var(--gold-border)',\r\n                            color: 'var(--text-primary)',\r\n                            padding: '12px 25px',\r\n                            borderRadius: '12px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '10px',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '700',\r\n                            transition: 'all 0.3s'\r\n                        }}\r\n                        onMouseOver={(e) => e.currentTarget.style.background = 'var(--gold)'}\r\n                        onMouseOut={(e) => e.currentTarget.style.background = 'var(--bg-glass)'}\r\n                    >\r\n                        <PlusCircle size={18} /> Create Job Card\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/hr/attendance')}\r\n                        style={{\r\n                            background: 'var(--bg-glass)',\r\n                            border: '1px solid var(--border-color)',\r\n                            color: 'var(--text-primary)',\r\n                            padding: '12px 25px',\r\n                            borderRadius: '12px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '10px',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '700',\r\n                            transition: 'all 0.3s'\r\n                        }}\r\n                        onMouseOver={(e) => e.currentTarget.style.background = 'var(--border-color)'}\r\n                        onMouseOut={(e) => e.currentTarget.style.background = 'var(--bg-glass)'}\r\n                    >\r\n                        <UserCheck size={18} color=\"#10b981\" /> Attendance\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'minmax(400px, 1fr) 400px', gap: '25px', padding: '0 20px' }}>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '20px' }}>\r\n\r\n                    {/* Operational Calendar Bento */}\r\n                    <BentoCard\r\n                        span={2}\r\n                        rows={2}\r\n                        label=\"Operational Cycle\"\r\n                        title=\"Master Schedule\"\r\n                        description=\"\"\r\n                        icon={CalendarIcon}\r\n                    >\r\n                        <div style={{ marginTop: '20px' }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                                <div style={{ fontSize: '18px', fontWeight: '800', color: 'var(--text-primary)' }}>{monthNames[currentMonth]} {currentYear}</div>\r\n                                <div style={{ display: 'flex', gap: '10px' }}>\r\n                                    <ChevronLeft onClick={handlePrevMonth} style={{ cursor: 'pointer', opacity: 0.5, color: 'var(--text-primary)' }} size={20} />\r\n                                    <ChevronRight onClick={handleNextMonth} style={{ cursor: 'pointer', opacity: 0.5, color: 'var(--text-primary)' }} size={20} />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '8px', textAlign: 'center' }}>\r\n                                {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((d, i) => (\r\n                                    <div key={`day-${i}`} style={{ fontSize: '10px', fontWeight: '900', color: 'var(--text-muted)', marginBottom: '10px' }}>{d}</div>\r\n                                ))}\r\n                                {(() => {\r\n                                    const days = [];\r\n                                    const totalDays = daysInMonth(currentMonth, currentYear);\r\n                                    const startDay = firstDayOfMonth(currentMonth, currentYear);\r\n\r\n                                    for (let i = 0; i < startDay; i++) {\r\n                                        days.push(<div key={`empty-${i}`} style={{ width: '100%', aspectRatio: '1', opacity: 0.1 }} />);\r\n                                    }\r\n\r\n                                    for (let d = 1; d <= totalDays; d++) {\r\n                                        const isToday = d === new Date().getDate() && currentMonth === new Date().getMonth() && currentYear === new Date().getFullYear();\r\n                                        const isSelected = d === selectedDate.getDate() && currentMonth === selectedDate.getMonth() && currentYear === selectedDate.getFullYear();\r\n\r\n                                        days.push(\r\n                                            <div\r\n                                                key={d}\r\n                                                onClick={() => setSelectedDate(new Date(currentYear, currentMonth, d))}\r\n                                                style={{\r\n                                                    width: '100%',\r\n                                                    aspectRatio: '1',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    justifyContent: 'center',\r\n                                                    borderRadius: '12px',\r\n                                                    cursor: 'pointer',\r\n                                                    fontSize: '14px',\r\n                                                    fontWeight: isSelected ? '800' : '500',\r\n                                                    color: isSelected ? '#000' : 'var(--text-secondary)',\r\n                                                    background: isSelected ? 'var(--gold)' : isToday ? 'var(--bg-glass)' : 'transparent',\r\n                                                    border: isSelected ? '1px solid var(--gold-border)' : isToday ? '1px solid var(--border-color)' : '1px solid transparent',\r\n                                                    transition: 'all 0.2s'\r\n                                                }}\r\n                                                onMouseOver={(e) => !isSelected && (e.currentTarget.style.background = 'var(--bg-glass)')}\r\n                                                onMouseOut={(e) => !isSelected && (e.currentTarget.style.background = isToday ? 'var(--bg-glass)' : 'transparent')}\r\n                                            >\r\n                                                {d}\r\n                                            </div>\r\n                                        );\r\n                                    }\r\n                                    return days;\r\n                                })()}\r\n                            </div>\r\n                        </div>\r\n                    </BentoCard>\r\n\r\n                    {/* Financial Summary Bento */}\r\n                    <BentoCard\r\n                        label=\"Finance\"\r\n                        title=\"Revenue Engine\"\r\n                        description={stats.revenue}\r\n                        icon={BarChart}\r\n                    />\r\n\r\n                    {/* Security Bento */}\r\n                    <BentoCard\r\n                        label=\"Security\"\r\n                        title=\"Active Defense\"\r\n                        description=\"JWT Encrypted\"\r\n                        icon={Shield}\r\n                    />\r\n\r\n                    {/* Staffing Bento */}\r\n                    <BentoCard\r\n                        label=\"Active Jobs\"\r\n                        title=\"Workshop Load\"\r\n                        description={`${stats.activeJobs} Active`}\r\n                        icon={Users}\r\n                    />\r\n                </div>\r\n\r\n                {/* Right Panel: Daily Operational Snapshot */}\r\n                <GlassCard style={{ padding: '30px', display: 'flex', flexDirection: 'column', gap: '30px' }}>\r\n                    <div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '10px' }}>\r\n                            <div className=\"pulse-dot\" style={{ width: '8px', height: '8px', background: '#10b981', borderRadius: '50%', boxShadow: '0 0 10px #10b981' }} />\r\n                            <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '2px' }}>DAILY SNAPSHOT</div>\r\n                        </div>\r\n                        <h3 style={{ margin: 0, fontSize: '24px', fontWeight: '800', color: 'var(--text-primary)' }}>{selectedDate.toLocaleDateString('en-US', { day: 'numeric', month: 'long', year: 'numeric' })}</h3>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                        <SnapshotItem icon={CalendarIcon} label=\"Active Jobs\" value={stats.activeJobs} color=\"#3b82f6\" />\r\n                        <SnapshotItem icon={Clock} label=\"Bookings\" value={stats.bookings} color=\"#f59e0b\" />\r\n                        <SnapshotItem icon={Truck} label=\"Deliveries\" value={stats.deliveries} color=\"#10b981\" />\r\n                        <SnapshotItem icon={CreditCard} label=\"Revenue\" value={stats.payments} color=\"#ec4899\" />\r\n                    </div>\r\n\r\n                    <div style={{ flex: 1, marginTop: '10px', overflow: 'hidden' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                            <h4 style={{ fontSize: '13px', fontWeight: '800', color: 'var(--text-secondary)', margin: 0, textTransform: 'uppercase', letterSpacing: '1px' }}>Live Workshop View</h4>\r\n                            <div style={{ fontSize: '10px', color: '#10b981', fontWeight: '800', display: 'flex', alignItems: 'center', gap: '5px' }}>\r\n                                <div className=\"pulse-dot\" style={{ width: '6px', height: '6px', background: '#10b981', borderRadius: '50%' }} /> REAL-TIME\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '80px 1fr 100px', padding: '10px 15px', fontSize: '10px', fontWeight: '900', color: 'var(--text-muted)', textTransform: 'uppercase', letterSpacing: '1px' }}>\r\n                                <span>Time</span>\r\n                                <span>Unit / Customer</span>\r\n                                <span style={{ textAlign: 'right' }}>Status</span>\r\n                            </div>\r\n                            {recentJobs.length > 0 ? recentJobs.map(s => {\r\n                                const [jc, cust, statusRaw] = s.activity.split(' - ');\r\n                                const status = statusRaw?.replace(/[()]/g, '') || 'ACTIVE';\r\n\r\n                                return (\r\n                                    <div key={s.id} style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateColumns: '80px 1fr 100px',\r\n                                        alignItems: 'center',\r\n                                        padding: '14px 15px',\r\n                                        background: 'var(--bg-glass)',\r\n                                        borderRadius: '12px',\r\n                                        border: '1px solid var(--border-color)',\r\n                                        transition: 'all 0.3s'\r\n                                    }}>\r\n                                        <div style={{ fontSize: '11px', fontWeight: '800', color: 'var(--text-secondary)' }}>{s.time}</div>\r\n                                        <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                                            <div style={{ fontSize: '13px', fontWeight: '700', color: 'var(--text-primary)' }}>{jc}</div>\r\n                                            <div style={{ fontSize: '11px', color: 'var(--text-secondary)' }}>{cust}</div>\r\n                                        </div>\r\n                                        <div style={{ textAlign: 'right' }}>\r\n                                            <span style={{\r\n                                                fontSize: '10px',\r\n                                                fontWeight: '900',\r\n                                                padding: '4px 8px',\r\n                                                borderRadius: '6px',\r\n                                                background: status === 'CLOSED' ? 'var(--bg-glass)' : 'var(--gold-glow)',\r\n                                                color: status === 'CLOSED' ? 'var(--text-secondary)' : 'var(--gold)',\r\n                                                border: `1px solid ${status === 'CLOSED' ? 'var(--border-color)' : 'var(--gold-border)'}`\r\n                                            }}>\r\n                                                {status}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            }) : (\r\n                                <div style={{ padding: '40px 20px', textAlign: 'center', color: 'var(--text-secondary)', fontSize: '13px' }}>\r\n                                    No units currently in shop\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={() => navigate('/')}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: '1px solid var(--border-color)',\r\n                            color: 'var(--text-primary)',\r\n                            padding: '12px',\r\n                            borderRadius: '12px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '10px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px',\r\n                            transition: 'all 0.3s'\r\n                        }}\r\n                    >\r\n                        Back to Core Dashboard <ArrowRight size={16} />\r\n                    </button>\r\n                </GlassCard>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SnapshotItem = ({ icon: Icon, label, value, color }) => (\r\n    <div style={{ padding: '20px', background: 'var(--bg-glass)', borderRadius: '16px', border: '1px solid var(--border-color)', transition: 'all 0.3s' }}>\r\n        <Icon size={18} color={color} style={{ marginBottom: '10px' }} />\r\n        <div style={{ fontSize: '11px', color: 'var(--text-secondary)', fontWeight: '700', textTransform: 'uppercase' }}>{label}</div>\r\n        <div style={{ fontSize: '18px', fontWeight: '800', color: 'var(--text-primary)', marginTop: '4px' }}>{value}</div>\r\n    </div>\r\n);\r\n\r\nexport default MissionControl;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\Portfolio.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[95,102],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchAttendance` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  39 |     useEffect(() => {\n  40 |         if (user) {\n> 41 |             fetchAttendance();\n     |             ^^^^^^^^^^^^^^^ `fetchAttendance` accessed before it is declared\n  42 |             fetchEmployees();\n  43 |         }\n  44 |     }, [user]);\n\n  44 |     }, [user]);\n  45 |\n> 46 |     const fetchAttendance = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |         try {\n     | ^^^^^^^^^^^^^\n> 48 |             const res = await api.get('/forms/attendance/api/records/');\n     \n     | ^^^^^^^^^^^^^\n> 55 |         }\n     | ^^^^^^^^^^^^^\n> 56 |     };\n     | ^^^^^^^ `fetchAttendance` is declared here\n  57 |\n  58 |     const fetchEmployees = async () => {\n  59 |         try {","line":41,"column":13,"nodeType":null,"endLine":41,"endColumn":28},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchEmployees` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  40 |         if (user) {\n  41 |             fetchAttendance();\n> 42 |             fetchEmployees();\n     |             ^^^^^^^^^^^^^^ `fetchEmployees` accessed before it is declared\n  43 |         }\n  44 |     }, [user]);\n  45 |\n\n  56 |     };\n  57 |\n> 58 |     const fetchEmployees = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |         try {\n     | ^^^^^^^^^^^^^\n> 60 |             const res = await api.get('/hr/api/employees/');\n     | ^^^^^^^^^^^^^\n> 61 |             setEmployees(res.data);\n     | ^^^^^^^^^^^^^\n> 62 |         } catch (err) {\n     | ^^^^^^^^^^^^^\n> 63 |             console.error('Failed to fetch employees', err);\n     | ^^^^^^^^^^^^^\n> 64 |         }\n     | ^^^^^^^^^^^^^\n> 65 |     };\n     | ^^^^^^^ `fetchEmployees` is declared here\n  66 |\n  67 |     const handleClockIn = async () => {\n  68 |         try {","line":42,"column":13,"nodeType":null,"endLine":42,"endColumn":27}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Search, User, Mail, Clock, CreditCard, FileText,\r\n    Heart, MapPin, Briefcase, Shield, ArrowRight, Users\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n// Helper to get proper image URL\r\nconst getImageUrl = (imagePath) => {\r\n    if (!imagePath) return '/elite_shine_logo.png';\r\n    if (imagePath.startsWith('http') || imagePath.startsWith('/')) {\r\n        if (imagePath.startsWith('/media/')) {\r\n            return `http://localhost:8000${imagePath}`;\r\n        }\r\n        return imagePath;\r\n    }\r\n    return `http://localhost:8000/media/${imagePath}`;\r\n};\r\n\r\n// Team members data\r\nconst teamMembers = [\r\n    { id: 'ruchika', name: 'Ruchika', role: 'Managing Director', image: '/ruchika.jpg', accent: '#b08d57' },\r\n    { id: 'radhir', name: 'Radhir', role: 'Systems Architect', image: '/radhir.jpg', accent: '#8b5cf6' },\r\n    { id: 'afsar', name: 'Afsar', role: 'Service Advisor', image: '/afsar.jpg', accent: '#3b82f6' },\r\n    { id: 'ankit', name: 'Ankit', role: 'Technician', image: '/ankit.jpg', accent: '#10b981' },\r\n];\r\n\r\nconst Portfolio = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [attendance, setAttendance] = useState(null);\r\n    const [attendances, setAttendances] = useState([]);\r\n    const [employees, setEmployees] = useState([]);\r\n    const [selectedMember, setSelectedMember] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchAttendance();\r\n            fetchEmployees();\r\n        }\r\n    }, [user]);\r\n\r\n    const fetchAttendance = async () => {\r\n        try {\r\n            const res = await api.get('/forms/attendance/api/records/');\r\n            setAttendances(res.data);\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const active = res.data.find(a => a.date === today && !a.check_out_time);\r\n            setAttendance(active || null);\r\n        } catch (err) {\r\n            console.error('Failed to fetch attendance', err);\r\n        }\r\n    };\r\n\r\n    const fetchEmployees = async () => {\r\n        try {\r\n            const res = await api.get('/hr/api/employees/');\r\n            setEmployees(res.data);\r\n        } catch (err) {\r\n            console.error('Failed to fetch employees', err);\r\n        }\r\n    };\r\n\r\n    const handleClockIn = async () => {\r\n        try {\r\n            const res = await api.post('/forms/attendance/api/check-in/');\r\n            setAttendance(res.data.data || res.data);\r\n            fetchAttendance(); // Refresh data\r\n        } catch (err) {\r\n            console.error('Clock in failed', err);\r\n            alert('Clock in failed: ' + (err.response?.data?.error || err.message));\r\n        }\r\n    };\r\n\r\n\r\n    const profileData = {\r\n        name: user?.full_name || user?.username || 'Elite Member',\r\n        role: user?.role || 'Administrator',\r\n        image: getImageUrl(user?.profile_image),\r\n        accent: user?.accent_color || '#b08d57',\r\n        department: 'Technology',\r\n        joinDate: user?.date_joined || '2024',\r\n        hoursLogged: attendances.reduce((sum, a) => sum + parseFloat(a.total_hours || 0), 0).toFixed(1),\r\n    };\r\n\r\n    // Merge API employees with static team members\r\n    const allTeam = [...teamMembers];\r\n    employees.forEach(emp => {\r\n        if (!allTeam.find(t => t.id === emp.user?.username?.toLowerCase())) {\r\n            allTeam.push({\r\n                id: emp.employee_id,\r\n                name: `${emp.user?.first_name || ''} ${emp.user?.last_name || ''}`.trim() || emp.user?.username || 'Unknown',\r\n                role: emp.role || 'Team Member',\r\n                image: getImageUrl(emp.profile_image),\r\n                accent: emp.accent_color || '#64748b',\r\n            });\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            {/* Main Bento Container */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 30 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.6 }}\r\n                style={styles.bentoContainer}\r\n            >\r\n                {/* Top Navigation */}\r\n                <div style={styles.topNav}>\r\n                    <div style={styles.logoPill}>\r\n                        <span style={styles.logoText}>ELITE SHINE</span>\r\n                    </div>\r\n                    <div style={styles.navActions}>\r\n                        <div style={styles.iconBtn}><Search size={18} /></div>\r\n                        <div style={styles.iconBtn}><Users size={18} /></div>\r\n                        <button style={styles.contactBtn} onClick={() => navigate('/')}>\r\n                            <ArrowRight size={14} /> Dashboard\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Grid Layout */}\r\n                <div style={styles.mainGrid}>\r\n                    {/* Left: Hero Image Section */}\r\n                    <div style={styles.heroSection}>\r\n                        <div style={styles.heroImageWrapper}>\r\n                            <img\r\n                                src={selectedMember ? selectedMember.image : profileData.image}\r\n                                alt={selectedMember ? selectedMember.name : profileData.name}\r\n                                style={styles.heroImage}\r\n                            />\r\n                            {/* Floating Labels */}\r\n                            <motion.div\r\n                                key={selectedMember?.id || 'self'}\r\n                                initial={{ opacity: 0, x: -20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                style={styles.floatingLabel}\r\n                            >\r\n                                <span style={styles.labelTitle}>\r\n                                    {selectedMember ? selectedMember.role : profileData.department}\r\n                                </span>\r\n                                <span style={styles.labelSub}>Elite Shine Group</span>\r\n                            </motion.div>\r\n                        </div>\r\n\r\n                        {/* Big Typography */}\r\n                        <motion.div\r\n                            key={selectedMember?.id || 'self-text'}\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            style={styles.heroText}\r\n                        >\r\n                            <h1 style={styles.heroTitle}>\r\n                                {(selectedMember?.name || profileData.name).split(' ')[0].toUpperCase()}<br />\r\n                                <span style={{ ...styles.heroHighlight, color: selectedMember?.accent || profileData.accent }}>\r\n                                    PROFESSIONAL.\r\n                                </span><br />\r\n                                VERIFIED.\r\n                            </h1>\r\n                        </motion.div>\r\n                    </div>\r\n\r\n                    {/* Right: Info Cards */}\r\n                    <div style={styles.rightColumn}>\r\n                        {/* Team Members Grid */}\r\n                        <div style={styles.teamSection}>\r\n                            <div style={styles.sectionTitle}>\r\n                                <Users size={16} /> TEAM\r\n                            </div>\r\n                            <div style={styles.teamGrid}>\r\n                                {allTeam.slice(0, 6).map((member, idx) => (\r\n                                    <motion.div\r\n                                        key={member.id}\r\n                                        initial={{ opacity: 0, scale: 0.9 }}\r\n                                        animate={{ opacity: 1, scale: 1 }}\r\n                                        transition={{ delay: idx * 0.1 }}\r\n                                        onClick={() => setSelectedMember(selectedMember?.id === member.id ? null : member)}\r\n                                        style={{\r\n                                            ...styles.teamMember,\r\n                                            borderColor: selectedMember?.id === member.id ? member.accent : 'rgba(255,255,255,0.1)',\r\n                                            background: selectedMember?.id === member.id ? `${member.accent}20` : '#000',\r\n                                        }}\r\n                                    >\r\n                                        <img src={member.image} alt={member.name} style={styles.teamAvatar} />\r\n                                        <div style={styles.teamName}>{member.name.split(' ')[0]}</div>\r\n                                    </motion.div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Stats Card */}\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.2 }}\r\n                            style={styles.statCard}\r\n                        >\r\n                            <div style={styles.statLabel}>HOURS LOGGED</div>\r\n                            <div style={styles.statValue}>{profileData.hoursLogged}h</div>\r\n                        </motion.div>\r\n\r\n                        {/* Clock In Card */}\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.4 }}\r\n                            onClick={!attendance ? handleClockIn : () => navigate('/hr/attendance')}\r\n                            style={{\r\n                                ...styles.clockCard,\r\n                                background: attendance ? 'rgba(16, 185, 129, 0.15)' : 'rgba(176, 141, 87, 0.15)',\r\n                                borderColor: attendance ? '#10b981' : profileData.accent,\r\n                            }}\r\n                        >\r\n                            <Clock size={24} color={attendance ? '#10b981' : profileData.accent} />\r\n                            <span style={{ color: attendance ? '#10b981' : '#fff', fontWeight: '800' }}>\r\n                                {attendance ? 'ON DUTY' : 'CLOCK IN'}\r\n                            </span>\r\n                        </motion.div>\r\n\r\n                        {/* Profile Card */}\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.9 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            transition={{ delay: 0.5 }}\r\n                            style={styles.profileThumb}\r\n                        >\r\n                            <img\r\n                                src={profileData.image}\r\n                                alt={profileData.name}\r\n                                style={styles.thumbImage}\r\n                            />\r\n                            <div style={styles.thumbInfo}>\r\n                                <div style={styles.thumbName}>{profileData.name}</div>\r\n                                <div style={styles.thumbRole}>{profileData.role}</div>\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Background Grain */}\r\n            <div style={styles.grain} />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    container: {\r\n        minHeight: '100vh',\r\n        background: 'linear-gradient(180deg, #0a0a0a 0%, #1a1a2e 100%)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '40px',\r\n        fontFamily: 'Outfit, sans-serif',\r\n    },\r\n    bentoContainer: {\r\n        width: '100%',\r\n        maxWidth: '1200px',\r\n        background: '#111',\r\n        borderRadius: '40px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        padding: '24px',\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n    },\r\n    topNav: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '24px',\r\n    },\r\n    logoPill: {\r\n        background: '#000',\r\n        padding: '12px 24px',\r\n        borderRadius: '100px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n    },\r\n    logoText: {\r\n        color: '#fff',\r\n        fontWeight: '900',\r\n        fontSize: '14px',\r\n        letterSpacing: '3px',\r\n    },\r\n    navActions: {\r\n        display: 'flex',\r\n        gap: '12px',\r\n        alignItems: 'center',\r\n    },\r\n    iconBtn: {\r\n        width: '44px',\r\n        height: '44px',\r\n        borderRadius: '50%',\r\n        background: '#000',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: '#fff',\r\n        cursor: 'pointer',\r\n    },\r\n    contactBtn: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        background: '#fff',\r\n        color: '#000',\r\n        border: 'none',\r\n        borderRadius: '100px',\r\n        padding: '12px 24px',\r\n        fontWeight: '700',\r\n        fontSize: '13px',\r\n        cursor: 'pointer',\r\n    },\r\n    mainGrid: {\r\n        display: 'grid',\r\n        gridTemplateColumns: '2fr 1fr',\r\n        gap: '24px',\r\n    },\r\n    heroSection: {\r\n        position: 'relative',\r\n        borderRadius: '30px',\r\n        overflow: 'hidden',\r\n        background: '#000',\r\n        minHeight: '500px',\r\n    },\r\n    heroImageWrapper: {\r\n        position: 'absolute',\r\n        inset: 0,\r\n    },\r\n    heroImage: {\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: 'cover',\r\n        objectPosition: 'center top',\r\n        opacity: 0.85,\r\n    },\r\n    floatingLabel: {\r\n        position: 'absolute',\r\n        top: '30px',\r\n        left: '30px',\r\n        background: 'rgba(0,0,0,0.7)',\r\n        backdropFilter: 'blur(10px)',\r\n        padding: '12px 20px',\r\n        borderRadius: '15px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n    },\r\n    labelTitle: {\r\n        color: '#fff',\r\n        fontSize: '12px',\r\n        fontWeight: '700',\r\n        display: 'block',\r\n    },\r\n    labelSub: {\r\n        color: 'rgba(255,255,255,0.5)',\r\n        fontSize: '11px',\r\n    },\r\n    heroText: {\r\n        position: 'absolute',\r\n        bottom: '40px',\r\n        left: '40px',\r\n        right: '40px',\r\n    },\r\n    heroTitle: {\r\n        fontSize: '3rem',\r\n        fontWeight: '900',\r\n        lineHeight: '0.95',\r\n        margin: 0,\r\n        color: '#fff',\r\n        textTransform: 'uppercase',\r\n        letterSpacing: '-1px',\r\n    },\r\n    heroHighlight: {\r\n        color: '#b08d57',\r\n    },\r\n    rightColumn: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '16px',\r\n    },\r\n    teamSection: {\r\n        background: '#000',\r\n        borderRadius: '25px',\r\n        padding: '20px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n    },\r\n    sectionTitle: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        color: 'rgba(255,255,255,0.5)',\r\n        fontSize: '11px',\r\n        fontWeight: '700',\r\n        letterSpacing: '1px',\r\n        marginBottom: '15px',\r\n    },\r\n    teamGrid: {\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(3, 1fr)',\r\n        gap: '10px',\r\n    },\r\n    teamMember: {\r\n        background: '#000',\r\n        borderRadius: '15px',\r\n        padding: '10px',\r\n        border: '2px solid rgba(255,255,255,0.1)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        cursor: 'pointer',\r\n        transition: 'all 0.2s ease',\r\n    },\r\n    teamAvatar: {\r\n        width: '45px',\r\n        height: '45px',\r\n        borderRadius: '12px',\r\n        objectFit: 'cover',\r\n    },\r\n    teamName: {\r\n        color: '#fff',\r\n        fontSize: '10px',\r\n        fontWeight: '700',\r\n        textAlign: 'center',\r\n    },\r\n    statCard: {\r\n        background: '#000',\r\n        borderRadius: '25px',\r\n        padding: '20px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n    },\r\n    statLabel: {\r\n        color: 'rgba(255,255,255,0.5)',\r\n        fontSize: '11px',\r\n        fontWeight: '700',\r\n        letterSpacing: '1px',\r\n        marginBottom: '8px',\r\n    },\r\n    statValue: {\r\n        color: '#fff',\r\n        fontSize: '28px',\r\n        fontWeight: '900',\r\n    },\r\n    clockCard: {\r\n        borderRadius: '25px',\r\n        padding: '20px',\r\n        border: '1px solid',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '12px',\r\n        cursor: 'pointer',\r\n        fontSize: '13px',\r\n        letterSpacing: '1px',\r\n        transition: 'all 0.2s ease',\r\n    },\r\n    profileThumb: {\r\n        background: 'linear-gradient(135deg, rgba(176, 141, 87, 0.2), rgba(0,0,0,0.8))',\r\n        borderRadius: '25px',\r\n        padding: '15px',\r\n        border: '1px solid rgba(176, 141, 87, 0.3)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '15px',\r\n        marginTop: 'auto',\r\n    },\r\n    thumbImage: {\r\n        width: '50px',\r\n        height: '50px',\r\n        borderRadius: '15px',\r\n        objectFit: 'cover',\r\n    },\r\n    thumbInfo: {\r\n        flex: 1,\r\n    },\r\n    thumbName: {\r\n        color: '#fff',\r\n        fontSize: '14px',\r\n        fontWeight: '700',\r\n    },\r\n    thumbRole: {\r\n        color: 'rgba(255,255,255,0.5)',\r\n        fontSize: '11px',\r\n    },\r\n    grain: {\r\n        position: 'fixed',\r\n        inset: 0,\r\n        backgroundColor: 'transparent',\r\n        backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")`,\r\n        opacity: 0.05,\r\n        pointerEvents: 'none',\r\n        zIndex: 999,\r\n        mixBlendMode: 'overlay',\r\n    },\r\n};\r\n\r\nexport default Portfolio;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ProjectsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\RegisterPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'confirmPassword' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":99,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"confirmPassword"},"fix":{"range":[2794,2810],"text":""},"desc":"Remove unused variable 'confirmPassword'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userData' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":99,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"userData"},"fix":{"range":[2824,2837],"text":""},"desc":"Remove unused variable 'userData'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userResponse' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":100,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"userResponse"},"fix":{"range":[2860,3140],"text":""},"desc":"Remove unused variable 'userResponse'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport api from '../api/axios';\nimport GlassCard from '../components/GlassCard';\nimport { UserPlus, Upload, User, Briefcase, Heart, FileText, Calendar } from 'lucide-react';\n\nconst RegisterPage = () => {\n    const [step, setStep] = useState(1); // Multi-step form\n    const [form, setForm] = useState({\n        // Step 1: Account Credentials\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n        first_name: '',\n        last_name: '',\n\n        // Step 2: Employment Details\n        role: '',\n        department: '',\n        basic_salary: '',\n        employee_id: '',\n\n        // Step 3: Personal Information\n        medical_history: '',\n        family_members_count: '',\n        visa_start_date: '',\n        experience_summary: '',\n        bio: '',\n\n        // Step 4: Emergency Contacts\n        emergency_contact_1_name: '',\n        emergency_contact_1_phone: '',\n        emergency_contact_1_relation: '',\n        emergency_contact_2_name: '',\n        emergency_contact_2_phone: '',\n        emergency_contact_2_relation: '',\n\n        // Profile Photo\n        profile_photo: null\n    });\n    const [photoPreview, setPhotoPreview] = useState(null);\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const navigate = useNavigate();\n\n    const handleChange = (e) => {\n        setForm({ ...form, [e.target.name]: e.target.value });\n        setError('');\n    };\n\n    const handlePhotoChange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            setForm({ ...form, profile_photo: file });\n            setPhotoPreview(URL.createObjectURL(file));\n        }\n    };\n\n    const validateStep = () => {\n        if (step === 1) {\n            if (!form.username || !form.password) {\n                setError('Username and password are required');\n                return false;\n            }\n            if (form.password !== form.confirmPassword) {\n                setError('Passwords do not match');\n                return false;\n            }\n            if (form.password.length < 6) {\n                setError('Password must be at least 6 characters');\n                return false;\n            }\n        }\n        return true;\n    };\n\n    const nextStep = () => {\n        if (validateStep()) {\n            setStep(step + 1);\n            setError('');\n        }\n    };\n\n    const prevStep = () => {\n        setStep(step - 1);\n        setError('');\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError('');\n\n        if (!validateStep()) return;\n\n        setLoading(true);\n        try {\n            // Create user account first\n            const { confirmPassword, profile_photo, ...userData } = form;\n            const userResponse = await api.post('/api/auth/register/', {\n                username: form.username,\n                email: form.email,\n                password: form.password,\n                first_name: form.first_name,\n                last_name: form.last_name\n            });\n\n            // Then create/update HR profile with additional data\n            const formData = new FormData();\n            formData.append('role', form.role || 'Employee');\n            formData.append('bio', form.bio || '');\n            formData.append('basic_salary', form.basic_salary || '0');\n            formData.append('employee_id', form.employee_id || '');\n            formData.append('medical_history', form.medical_history || '');\n            formData.append('family_members_count', form.family_members_count || '0');\n            formData.append('visa_start_date', form.visa_start_date || '');\n            formData.append('experience_summary', form.experience_summary || '');\n            formData.append('emergency_contact_1_name', form.emergency_contact_1_name || '');\n            formData.append('emergency_contact_1_phone', form.emergency_contact_1_phone || '');\n            formData.append('emergency_contact_1_relation', form.emergency_contact_1_relation || '');\n            formData.append('emergency_contact_2_name', form.emergency_contact_2_name || '');\n            formData.append('emergency_contact_2_phone', form.emergency_contact_2_phone || '');\n            formData.append('emergency_contact_2_relation', form.emergency_contact_2_relation || '');\n\n            if (profile_photo) {\n                formData.append('profile_image', profile_photo);\n            }\n\n            // Note: This requires a backend endpoint to update HR profile\n            // For now, we'll just register the user\n\n            alert('Registration successful! Please login. Your profile will be completed by HR.');\n            navigate('/login');\n        } catch (err) {\n            const data = err.response?.data;\n            if (data) {\n                const messages = Object.values(data).flat().join('. ');\n                setError(messages || 'Registration failed');\n            } else {\n                setError('Registration failed. Please try again.');\n            }\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const inputStyle = {\n        display: 'block',\n        fontSize: '12px',\n        color: '#94a3b8',\n        marginBottom: '8px',\n        textTransform: 'uppercase',\n        fontWeight: '600',\n        letterSpacing: '1px'\n    };\n\n    const renderStep1 = () => (\n        <>\n            <div style={{ marginBottom: '20px', textAlign: 'center' }}>\n                <User size={40} color=\"#b08d57\" style={{ marginBottom: '10px' }} />\n                <h3 style={{ color: '#fff', margin: '0 0 5px 0', fontSize: '1.2rem' }}>Account Credentials</h3>\n                <p style={{ color: '#64748b', fontSize: '12px', margin: 0 }}>Create your login credentials</p>\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', marginBottom: '15px' }}>\n                <div>\n                    <label style={inputStyle}>First Name *</label>\n                    <input\n                        type=\"text\"\n                        name=\"first_name\"\n                        className=\"form-control\"\n                        value={form.first_name}\n                        onChange={handleChange}\n                        required\n                    />\n                </div>\n                <div>\n                    <label style={inputStyle}>Last Name *</label>\n                    <input\n                        type=\"text\"\n                        name=\"last_name\"\n                        className=\"form-control\"\n                        value={form.last_name}\n                        onChange={handleChange}\n                        required\n                    />\n                </div>\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Username *</label>\n                <input\n                    type=\"text\"\n                    name=\"username\"\n                    className=\"form-control\"\n                    value={form.username}\n                    onChange={handleChange}\n                    required\n                />\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Email</label>\n                <input\n                    type=\"email\"\n                    name=\"email\"\n                    className=\"form-control\"\n                    value={form.email}\n                    onChange={handleChange}\n                />\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Password *</label>\n                <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"form-control\"\n                    value={form.password}\n                    onChange={handleChange}\n                    required\n                />\n            </div>\n\n            <div style={{ marginBottom: '25px' }}>\n                <label style={inputStyle}>Confirm Password *</label>\n                <input\n                    type=\"password\"\n                    name=\"confirmPassword\"\n                    className=\"form-control\"\n                    value={form.confirmPassword}\n                    onChange={handleChange}\n                    required\n                />\n            </div>\n        </>\n    );\n\n    const renderStep2 = () => (\n        <>\n            <div style={{ marginBottom: '20px', textAlign: 'center' }}>\n                <Briefcase size={40} color=\"#b08d57\" style={{ marginBottom: '10px' }} />\n                <h3 style={{ color: '#fff', margin: '0 0 5px 0', fontSize: '1.2rem' }}>Employment Details</h3>\n                <p style={{ color: '#64748b', fontSize: '12px', margin: 0 }}>Professional information</p>\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Role / Position</label>\n                <input\n                    type=\"text\"\n                    name=\"role\"\n                    className=\"form-control\"\n                    value={form.role}\n                    onChange={handleChange}\n                    placeholder=\"e.g., Technician, Service Advisor\"\n                />\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Employee ID</label>\n                <input\n                    type=\"text\"\n                    name=\"employee_id\"\n                    className=\"form-control\"\n                    value={form.employee_id}\n                    onChange={handleChange}\n                    placeholder=\"ESG-XXXX\"\n                />\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Experience Summary</label>\n                <textarea\n                    name=\"experience_summary\"\n                    className=\"form-control\"\n                    value={form.experience_summary}\n                    onChange={handleChange}\n                    rows=\"3\"\n                    placeholder=\"Brief summary of your professional experience...\"\n                />\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Bio</label>\n                <textarea\n                    name=\"bio\"\n                    className=\"form-control\"\n                    value={form.bio}\n                    onChange={handleChange}\n                    rows=\"2\"\n                    placeholder=\"Short bio for your profile...\"\n                />\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Profile Photo</label>\n                <div style={{ display: 'flex', gap: '15px', alignItems: 'center' }}>\n                    {photoPreview && (\n                        <img src={photoPreview} alt=\"Preview\" style={{ width: '80px', height: '80px', borderRadius: '50%', objectFit: 'cover', border: '2px solid #b08d57' }} />\n                    )}\n                    <label style={{ flex: 1, cursor: 'pointer', padding: '15px', background: 'rgba(176,141,87,0.1)', border: '1px dashed #b08d57', borderRadius: '10px', textAlign: 'center', color: '#b08d57', fontSize: '12px', fontWeight: '600' }}>\n                        <Upload size={20} style={{ marginBottom: '5px' }} />\n                        <div>Click to upload photo</div>\n                        <input type=\"file\" accept=\"image/*\" onChange={handlePhotoChange} style={{ display: 'none' }} />\n                    </label>\n                </div>\n            </div>\n        </>\n    );\n\n    const renderStep3 = () => (\n        <>\n            <div style={{ marginBottom: '20px', textAlign: 'center' }}>\n                <FileText size={40} color=\"#b08d57\" style={{ marginBottom: '10px' }} />\n                <h3 style={{ color: '#fff', margin: '0 0 5px 0', fontSize: '1.2rem' }}>Personal Information</h3>\n                <p style={{ color: '#64748b', fontSize: '12px', margin: 0 }}>Health and visa details</p>\n            </div>\n\n            <div style={{ marginBottom: '15px' }}>\n                <label style={inputStyle}>Medical History</label>\n                <textarea\n                    name=\"medical_history\"\n                    className=\"form-control\"\n                    value={form.medical_history}\n                    onChange={handleChange}\n                    rows=\"2\"\n                    placeholder=\"Any medical conditions or allergies...\"\n                />\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', marginBottom: '15px' }}>\n                <div>\n                    <label style={inputStyle}>Family Members</label>\n                    <input\n                        type=\"number\"\n                        name=\"family_members_count\"\n                        className=\"form-control\"\n                        value={form.family_members_count}\n                        onChange={handleChange}\n                        min=\"0\"\n                    />\n                </div>\n                <div>\n                    <label style={inputStyle}>Visa Start Date</label>\n                    <input\n                        type=\"date\"\n                        name=\"visa_start_date\"\n                        className=\"form-control\"\n                        value={form.visa_start_date}\n                        onChange={handleChange}\n                    />\n                </div>\n            </div>\n        </>\n    );\n\n    const renderStep4 = () => (\n        <>\n            <div style={{ marginBottom: '20px', textAlign: 'center' }}>\n                <Heart size={40} color=\"#b08d57\" style={{ marginBottom: '10px' }} />\n                <h3 style={{ color: '#fff', margin: '0 0 5px 0', fontSize: '1.2rem' }}>Emergency Contacts</h3>\n                <p style={{ color: '#64748b', fontSize: '12px', margin: 0 }}>People to contact in case of emergency</p>\n            </div>\n\n            <div style={{ marginBottom: '20px', padding: '15px', background: 'rgba(176,141,87,0.05)', borderRadius: '10px', border: '1px solid rgba(176,141,87,0.2)' }}>\n                <div style={{ fontSize: '11px', fontWeight: '800', color: '#b08d57', marginBottom: '15px', letterSpacing: '1px' }}>PRIMARY CONTACT</div>\n                <div style={{ marginBottom: '10px' }}>\n                    <label style={inputStyle}>Name</label>\n                    <input\n                        type=\"text\"\n                        name=\"emergency_contact_1_name\"\n                        className=\"form-control\"\n                        value={form.emergency_contact_1_name}\n                        onChange={handleChange}\n                    />\n                </div>\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>\n                    <div>\n                        <label style={inputStyle}>Phone</label>\n                        <input\n                            type=\"tel\"\n                            name=\"emergency_contact_1_phone\"\n                            className=\"form-control\"\n                            value={form.emergency_contact_1_phone}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div>\n                        <label style={inputStyle}>Relation</label>\n                        <input\n                            type=\"text\"\n                            name=\"emergency_contact_1_relation\"\n                            className=\"form-control\"\n                            value={form.emergency_contact_1_relation}\n                            onChange={handleChange}\n                            placeholder=\"e.g., Spouse, Parent\"\n                        />\n                    </div>\n                </div>\n            </div>\n\n            <div style={{ padding: '15px', background: 'rgba(176,141,87,0.05)', borderRadius: '10px', border: '1px solid rgba(176,141,87,0.2)' }}>\n                <div style={{ fontSize: '11px', fontWeight: '800', color: '#b08d57', marginBottom: '15px', letterSpacing: '1px' }}>SECONDARY CONTACT</div>\n                <div style={{ marginBottom: '10px' }}>\n                    <label style={inputStyle}>Name</label>\n                    <input\n                        type=\"text\"\n                        name=\"emergency_contact_2_name\"\n                        className=\"form-control\"\n                        value={form.emergency_contact_2_name}\n                        onChange={handleChange}\n                    />\n                </div>\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>\n                    <div>\n                        <label style={inputStyle}>Phone</label>\n                        <input\n                            type=\"tel\"\n                            name=\"emergency_contact_2_phone\"\n                            className=\"form-control\"\n                            value={form.emergency_contact_2_phone}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div>\n                        <label style={inputStyle}>Relation</label>\n                        <input\n                            type=\"text\"\n                            name=\"emergency_contact_2_relation\"\n                            className=\"form-control\"\n                            value={form.emergency_contact_2_relation}\n                            onChange={handleChange}\n                            placeholder=\"e.g., Sibling, Friend\"\n                        />\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n\n    return (\n        <GlassCard style={{ padding: '40px', maxWidth: '550px', width: '100%' }}>\n            <div style={{ textAlign: 'center', marginBottom: '30px' }}>\n                <img\n                    src=\"/elite_shine_logo.png\"\n                    alt=\"Elite Shine Logo\"\n                    style={{\n                        width: '240px',\n                        height: 'auto',\n                        marginBottom: '10px',\n                        filter: 'drop-shadow(0 0 15px rgba(176, 141, 87, 0.3))'\n                    }}\n                />\n                <h2 style={{ color: '#fff', fontSize: '1.3rem', margin: '10px 0 5px 0', fontFamily: 'Outfit, sans-serif' }}>Employee Registration</h2>\n                <p style={{ color: '#64748b', fontSize: '13px', margin: 0 }}>Complete your profile in {4} easy steps</p>\n\n                {/* Progress Indicator */}\n                <div style={{ display: 'flex', gap: '10px', marginTop: '20px', justifyContent: 'center' }}>\n                    {[1, 2, 3, 4].map(s => (\n                        <div key={s} style={{ flex: 1, height: '4px', background: s <= step ? '#b08d57' : 'rgba(255,255,255,0.1)', borderRadius: '2px', transition: 'background 0.3s' }} />\n                    ))}\n                </div>\n            </div>\n\n            {error && (\n                <div style={{\n                    background: 'rgba(239, 68, 68, 0.1)',\n                    border: '1px solid rgba(239, 68, 68, 0.3)',\n                    color: '#ef4444',\n                    padding: '10px 15px',\n                    borderRadius: '10px',\n                    fontSize: '13px',\n                    marginBottom: '20px'\n                }}>\n                    {error}\n                </div>\n            )}\n\n            <form onSubmit={handleSubmit}>\n                {step === 1 && renderStep1()}\n                {step === 2 && renderStep2()}\n                {step === 3 && renderStep3()}\n                {step === 4 && renderStep4()}\n\n                <div style={{ display: 'flex', gap: '10px', marginTop: '25px' }}>\n                    {step > 1 && (\n                        <button\n                            type=\"button\"\n                            onClick={prevStep}\n                            className=\"btn-secondary\"\n                            style={{ flex: 1 }}\n                        >\n                            Previous\n                        </button>\n                    )}\n                    {step < 4 ? (\n                        <button\n                            type=\"button\"\n                            onClick={nextStep}\n                            className=\"btn-primary\"\n                            style={{ flex: 1 }}\n                        >\n                            Next\n                        </button>\n                    ) : (\n                        <button\n                            type=\"submit\"\n                            className=\"btn-primary\"\n                            disabled={loading}\n                            style={{\n                                flex: 1,\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                gap: '10px',\n                                opacity: loading ? 0.7 : 1\n                            }}\n                        >\n                            <UserPlus size={20} /> {loading ? 'Creating Account...' : 'Complete Registration'}\n                        </button>\n                    )}\n                </div>\n            </form>\n\n            <div style={{ marginTop: '20px', textAlign: 'center', fontSize: '14px', color: '#94a3b8' }}>\n                Already have an account? <Link to=\"/login\" style={{ color: '#b08d57', textDecoration: 'none' }}>Login</Link>\n            </div>\n        </GlassCard>\n    );\n};\n\nexport default RegisterPage;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ReportsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'invoices' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":29,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"invoices"},"fix":{"range":[921,929],"text":""},"desc":"Remove unused variable 'invoices'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":254,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":254,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[14499,14510],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":266,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":266,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[15236,15248],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport GlassCard from '../components/GlassCard';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    BarChart3, TrendingUp, Users, Package,\r\n    FileText, Download, Calendar, CreditCard,\r\n    Briefcase, CheckCircle2, Clock, AlertCircle\r\n} from 'lucide-react';\r\nimport {\r\n    LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\r\n    PieChart, Pie, Cell, BarChart, Bar, Legend\r\n} from 'recharts';\r\n\r\nconst ReportsPage = () => {\r\n    const navigate = useNavigate();\r\n    const [stats, setStats] = useState({\r\n        totalJobs: 0,\r\n        activeJobs: 0,\r\n        closedJobs: 0,\r\n        totalInvoices: 0,\r\n        paidInvoices: 0,\r\n        pendingInvoices: 0,\r\n        totalLeads: 0,\r\n        totalBookings: 0,\r\n        totalRevenue: 0,\r\n    });\r\n    const [jobs, setJobs] = useState([]);\r\n    const [invoices, setInvoices] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchAllData();\r\n    }, []);\r\n\r\n    const fetchAllData = async () => {\r\n        try {\r\n            const [jobsRes, invoicesRes, leadsRes, bookingsRes] = await Promise.all([\r\n                api.get('/forms/job-cards/api/jobs/').catch(() => ({ data: [] })),\r\n                api.get('/forms/invoices/api/list/').catch(() => ({ data: [] })),\r\n                api.get('/forms/leads/api/list/').catch(() => ({ data: [] })),\r\n                api.get('/forms/bookings/api/list/').catch(() => ({ data: [] })),\r\n            ]);\r\n\r\n            const jobsData = Array.isArray(jobsRes.data) ? jobsRes.data : jobsRes.data.results || [];\r\n            const invoicesData = Array.isArray(invoicesRes.data) ? invoicesRes.data : invoicesRes.data.results || [];\r\n            const leadsData = Array.isArray(leadsRes.data) ? leadsRes.data : leadsRes.data.results || [];\r\n            const bookingsData = Array.isArray(bookingsRes.data) ? bookingsRes.data : bookingsRes.data.results || [];\r\n\r\n            setJobs(jobsData);\r\n            setInvoices(invoicesData);\r\n\r\n            const paidInv = invoicesData.filter(i => i.payment_status === 'PAID');\r\n            const totalRev = paidInv.reduce((sum, i) => sum + (parseFloat(i.grand_total) || 0), 0);\r\n\r\n            setStats({\r\n                totalJobs: jobsData.length,\r\n                activeJobs: jobsData.filter(j => j.status !== 'CLOSED' && j.status !== 'DELIVERY').length,\r\n                closedJobs: jobsData.filter(j => j.status === 'CLOSED' || j.status === 'DELIVERY').length,\r\n                totalInvoices: invoicesData.length,\r\n                paidInvoices: paidInv.length,\r\n                pendingInvoices: invoicesData.filter(i => i.payment_status !== 'PAID').length,\r\n                totalLeads: leadsData.length,\r\n                totalBookings: bookingsData.length,\r\n                totalRevenue: totalRev,\r\n            });\r\n        } catch (err) {\r\n            console.error('Error loading reports', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const viewReport = (model) => {\r\n        const routes = {\r\n            'JobCard': '/job-cards',\r\n            'Invoice': '/invoices',\r\n            'Lead': '/leads',\r\n            'Booking': '/bookings',\r\n            'StockForm': '/stock',\r\n            'LeaveApplication': '/requests',\r\n            'WorkshopDiary': '/job-cards', // Best fallback for workshop context\r\n            'Operation': '/job-cards',\r\n            'AdvisorDaily': '/advisor-daily-report'\r\n        };\r\n        const path = routes[model] || '/';\r\n        navigate(`${path}?print_confirm = true`);\r\n    };\r\n\r\n    if (loading) return <div style={{ color: '#fff', padding: '40px' }}>Loading Reports...</div>;\r\n\r\n    // Count jobs by status\r\n    const statusCounts = {};\r\n    jobs.forEach(j => {\r\n        statusCounts[j.status] = (statusCounts[j.status] || 0) + 1;\r\n    });\r\n\r\n    return (\r\n        <div style={{ padding: '30px' }}>\r\n            <header style={{ marginBottom: '40px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px' }}>ANALYTICS CENTER</div>\r\n                    <h1 style={{ margin: '5px 0 0 0', fontSize: '2.5rem', fontWeight: '900', color: '#fff', fontFamily: 'Outfit, sans-serif' }}>Reports Dashboard</h1>\r\n                </div>\r\n            </header>\r\n\r\n            {/* KPI Cards */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                <KPICard icon={Briefcase} label=\"Total Jobs\" value={stats.totalJobs} color=\"#3b82f6\" />\r\n                <KPICard icon={CreditCard} label=\"Total Revenue\" value={`AED ${stats.totalRevenue.toLocaleString()} `} color=\"#10b981\" />\r\n                <KPICard icon={FileText} label=\"Invoices\" value={stats.totalInvoices} color=\"#f59e0b\" />\r\n                <KPICard icon={Users} label=\"Total Leads\" value={stats.totalLeads} color=\"#ec4899\" />\r\n            </div>\r\n\r\n            {/* Charts Row */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '25px', marginBottom: '30px' }}>\r\n                {/* Revenue Trend Chart */}\r\n                <GlassCard style={{ padding: '25px', minHeight: '400px' }}>\r\n                    <h3 style={sectionTitle}>Revenue Trend (Last 6 Months)</h3>\r\n                    <ResponsiveContainer width=\"100%\" height={300}>\r\n                        <LineChart data={[\r\n                            { name: 'Aug', revenue: 45000 },\r\n                            { name: 'Sep', revenue: 52000 },\r\n                            { name: 'Oct', revenue: 48000 },\r\n                            { name: 'Nov', revenue: 61000 },\r\n                            { name: 'Dec', revenue: 55000 },\r\n                            { name: 'Jan', revenue: stats.totalRevenue || 75000 } // Use real if available\r\n                        ]}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.1)\" />\r\n                            <XAxis dataKey=\"name\" stroke=\"#94a3b8\" />\r\n                            <YAxis stroke=\"#94a3b8\" />\r\n                            <Tooltip\r\n                                contentStyle={{ backgroundColor: '#0f172a', borderColor: 'rgba(255,255,255,0.1)', color: '#fff' }}\r\n                                itemStyle={{ color: '#b08d57' }}\r\n                            />\r\n                            <Line type=\"monotone\" dataKey=\"revenue\" stroke=\"#b08d57\" strokeWidth={3} dot={{ r: 6, fill: '#b08d57' }} activeDot={{ r: 8 }} />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </GlassCard>\r\n\r\n                {/* Job Distribution Chart */}\r\n                <GlassCard style={{ padding: '25px' }}>\r\n                    <h3 style={sectionTitle}>Job Status Distribution</h3>\r\n                    <ResponsiveContainer width=\"100%\" height={300}>\r\n                        <PieChart>\r\n                            <Pie\r\n                                data={[\r\n                                    { name: 'Active', value: stats.activeJobs },\r\n                                    { name: 'Completed', value: stats.closedJobs },\r\n                                    { name: 'Pending', value: (stats.totalJobs - stats.activeJobs - stats.closedJobs) || 0 }\r\n                                ]}\r\n                                innerRadius={60}\r\n                                outerRadius={80}\r\n                                paddingAngle={5}\r\n                                dataKey=\"value\"\r\n                            >\r\n                                <Cell key=\"cell-0\" fill=\"#3b82f6\" />\r\n                                <Cell key=\"cell-1\" fill=\"#10b981\" />\r\n                                <Cell key=\"cell-2\" fill=\"#f59e0b\" />\r\n                            </Pie>\r\n                            <Tooltip\r\n                                contentStyle={{ backgroundColor: '#0f172a', borderColor: 'rgba(255,255,255,0.1)', color: '#fff' }}\r\n                            />\r\n                            <Legend />\r\n                        </PieChart>\r\n                    </ResponsiveContainer>\r\n                </GlassCard>\r\n            </div>\r\n            {/* Invoice Summary */}\r\n            <GlassCard style={{ padding: '25px' }}>\r\n                <h3 style={sectionTitle}>Invoice Summary</h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '20px' }}>\r\n                    <div style={{ padding: '20px', background: 'rgba(16,185,129,0.05)', borderRadius: '12px', border: '1px solid rgba(16,185,129,0.2)' }}>\r\n                        <CheckCircle2 size={20} color=\"#10b981\" style={{ marginBottom: '8px' }} />\r\n                        <div style={{ fontSize: '24px', fontWeight: '800', color: '#10b981' }}>{stats.paidInvoices}</div>\r\n                        <div style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase' }}>Paid</div>\r\n                    </div>\r\n                    <div style={{ padding: '20px', background: 'rgba(245,158,11,0.05)', borderRadius: '12px', border: '1px solid rgba(245,158,11,0.2)' }}>\r\n                        <Clock size={20} color=\"#f59e0b\" style={{ marginBottom: '8px' }} />\r\n                        <div style={{ fontSize: '24px', fontWeight: '800', color: '#f59e0b' }}>{stats.pendingInvoices}</div>\r\n                        <div style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase' }}>Pending</div>\r\n                    </div>\r\n                </div>\r\n                <div style={{ padding: '15px', background: 'rgba(176,141,87,0.05)', borderRadius: '10px', border: '1px solid rgba(176,141,87,0.2)' }}>\r\n                    <div style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase', marginBottom: '5px' }}>Total Revenue (Paid)</div>\r\n                    <div style={{ fontSize: '28px', fontWeight: '900', color: '#b08d57' }}>AED {stats.totalRevenue.toLocaleString()}</div>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            {/* Quick Counts */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                <StatBlock label=\"Active Jobs\" value={stats.activeJobs} icon={Clock} color=\"#3b82f6\" />\r\n                <StatBlock label=\"Completed Jobs\" value={stats.closedJobs} icon={CheckCircle2} color=\"#10b981\" />\r\n                <StatBlock label=\"Bookings\" value={stats.totalBookings} icon={Calendar} color=\"#8b5cf6\" />\r\n                <StatBlock label=\"Leads\" value={stats.totalLeads} icon={Users} color=\"#ec4899\" />\r\n            </div>\r\n\r\n            {/* Export Section - Redesigned as Module Hub */}\r\n            <div style={{ marginTop: '40px' }}>\r\n                <h3 style={sectionTitle}>System Reports Library</h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px' }}>\r\n                    {[\r\n                        { label: 'Job Cards', model: 'JobCard', icon: Briefcase, desc: 'Workflow & Status Operations' },\r\n                        { label: 'Invoices', model: 'Invoice', icon: FileText, desc: 'Revenue & Financial Transactions' },\r\n                        { label: 'Leads', model: 'Lead', icon: Users, desc: 'Sales Pipeline & Conversion' },\r\n                        { label: 'Bookings', model: 'Booking', icon: Calendar, desc: 'Scheduled Appointments' },\r\n                        { label: 'Operations', model: 'Operation', icon: CheckCircle2, desc: 'Task Execution Logs' },\r\n                        { label: 'Inventory', model: 'StockForm', icon: Package, desc: 'Stock Levels & Valuation' },\r\n                        { label: 'Leave Requests', model: 'LeaveApplication', icon: AlertCircle, desc: 'HR & Employee Absence' },\r\n                        { label: 'Workshop Diary', model: 'WorkshopDiary', icon: Clock, desc: 'Daily Operational Logs' },\r\n                        { label: 'Advisor Daily', model: 'AdvisorDaily', icon: TrendingUp, desc: 'Morning Briefing & Conversion' },\r\n                    ].map(r => (\r\n                        <GlassCard\r\n                            key={r.model}\r\n                            onClick={() => viewReport(r.model)}\r\n                            style={{\r\n                                padding: '20px',\r\n                                cursor: 'pointer',\r\n                                transition: 'all 0.3s ease',\r\n                                border: '1px solid rgba(255,255,255,0.05)',\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                gap: '10px'\r\n                            }}\r\n                            onMouseEnter={(e) => {\r\n                                e.currentTarget.style.transform = 'translateY(-5px)';\r\n                                e.currentTarget.style.borderColor = 'rgba(176,141,87,0.3)';\r\n                                e.currentTarget.style.backgroundColor = 'rgba(255,255,255,0.05)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                                e.currentTarget.style.transform = 'translateY(0)';\r\n                                e.currentTarget.style.borderColor = 'rgba(255,255,255,0.05)';\r\n                                e.currentTarget.style.backgroundColor = 'rgba(255,255,255,0.02)';\r\n                            }}\r\n                        >\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                                <div style={{ background: 'rgba(176,141,87,0.1)', padding: '10px', borderRadius: '10px' }}>\r\n                                    <r.icon size={20} color=\"#b08d57\" />\r\n                                </div>\r\n                                <Download size={16} color=\"#64748b\" />\r\n                            </div>\r\n                            <div>\r\n                                <h4 style={{ margin: '0 0 5px 0', fontSize: '15px', fontWeight: '700', color: '#f1f5f9' }}>{r.label}</h4>\r\n                                <p style={{ margin: 0, fontSize: '12px', color: '#64748b' }}>{r.desc}</p>\r\n                            </div>\r\n                        </GlassCard>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n\r\nconst KPICard = ({ icon: Icon, label, value, color }) => (\r\n    <GlassCard style={{ padding: '25px', display: 'flex', alignItems: 'center', gap: '20px', borderLeft: `4px solid ${color} ` }}>\r\n        <div style={{ width: '50px', height: '50px', borderRadius: '14px', background: `${color} 15`, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            <Icon size={24} color={color} />\r\n        </div>\r\n        <div>\r\n            <div style={{ fontSize: '12px', color: '#64748b', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\r\n            <div style={{ fontSize: '24px', fontWeight: '900', color: '#fff' }}>{value}</div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nconst StatBlock = ({ label, value, icon: Icon, color }) => (\r\n    <GlassCard style={{ padding: '20px', textAlign: 'center', position: 'relative', overflow: 'hidden' }}>\r\n        <div style={{ position: 'absolute', top: '-10px', right: '-10px', opacity: 0.1 }}>\r\n            <Icon size={80} color={color} />\r\n        </div>\r\n        <Icon size={20} color={color} style={{ marginBottom: '10px', position: 'relative' }} />\r\n        <div style={{ fontSize: '28px', fontWeight: '900', color: '#fff', position: 'relative' }}>{value}</div>\r\n        <div style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '5px', position: 'relative' }}>{label}</div>\r\n    </GlassCard>\r\n);\r\n\r\nconst sectionTitle = {\r\n    fontSize: '12px',\r\n    textTransform: 'uppercase',\r\n    color: '#b08d57',\r\n    marginBottom: '20px',\r\n    fontWeight: '800',\r\n    letterSpacing: '2px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '10px'\r\n};\r\n\r\nexport default ReportsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\RiskAuditPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":198,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":198,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[12287,12299],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport GlassCard from '../components/GlassCard';\r\nimport {\r\n    ShieldAlert, AlertTriangle, CheckCircle, Clock,\r\n    FileText, Eye, BarChart3, TrendingUp,\r\n    Search, Filter, ChevronRight\r\n} from 'lucide-react';\r\n\r\nconst RiskAuditPage = () => {\r\n    const [jobs, setJobs] = useState([]);\r\n    const [invoices, setInvoices] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchAuditData();\r\n    }, []);\r\n\r\n    const fetchAuditData = async () => {\r\n        try {\r\n            const [jobsRes, invoicesRes] = await Promise.all([\r\n                api.get('/forms/job-cards/api/jobs/').catch(() => ({ data: [] })),\r\n                api.get('/forms/invoices/api/list/').catch(() => ({ data: [] })),\r\n            ]);\r\n            setJobs(Array.isArray(jobsRes.data) ? jobsRes.data : jobsRes.data.results || []);\r\n            setInvoices(Array.isArray(invoicesRes.data) ? invoicesRes.data : invoicesRes.data.results || []);\r\n        } catch (err) {\r\n            console.error('Audit fetch failed', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Risk metrics computed from real data\r\n    const openJobs = jobs.filter(j => j.status !== 'CLOSED' && j.status !== 'DELIVERY');\r\n    const qcPending = jobs.filter(j => j.status === 'QC' && !j.qc_sign_off);\r\n    const overdueInvoices = invoices.filter(i => i.payment_status === 'OVERDUE');\r\n    const noSignOff = jobs.filter(j => j.status === 'DELIVERY' && (!j.customer_signature));\r\n    const highValueJobs = jobs.filter(j => parseFloat(j.net_amount || 0) > 5000);\r\n\r\n    const riskScore = Math.min(100, Math.round(\r\n        (qcPending.length * 10) + (overdueInvoices.length * 15) + (noSignOff.length * 8)\r\n    ));\r\n    const riskLevel = riskScore > 60 ? 'HIGH' : riskScore > 30 ? 'MEDIUM' : 'LOW';\r\n    const riskColor = riskScore > 60 ? '#ef4444' : riskScore > 30 ? '#f59e0b' : '#10b981';\r\n\r\n    const auditItems = [\r\n        ...qcPending.map(j => ({\r\n            type: 'QC',\r\n            severity: 'HIGH',\r\n            title: `QC Pending: ${j.job_card_number || 'JC-' + j.id}`,\r\n            detail: `${j.customer_name || 'Unknown'} - ${j.brand || ''} ${j.model || ''}`,\r\n            date: j.updated_at?.split('T')[0] || '-'\r\n        })),\r\n        ...overdueInvoices.map(inv => ({\r\n            type: 'FINANCE',\r\n            severity: 'HIGH',\r\n            title: `Overdue Payment: ${inv.invoice_number || 'INV-' + inv.id}`,\r\n            detail: `${inv.customer_name || 'Unknown'} - AED ${parseFloat(inv.grand_total || 0).toLocaleString()}`,\r\n            date: inv.date || '-'\r\n        })),\r\n        ...noSignOff.map(j => ({\r\n            type: 'COMPLIANCE',\r\n            severity: 'MEDIUM',\r\n            title: `Missing Signature: ${j.job_card_number || 'JC-' + j.id}`,\r\n            detail: `Delivery without customer sign-off`,\r\n            date: j.updated_at?.split('T')[0] || '-'\r\n        })),\r\n        ...highValueJobs.filter(j => !j.floor_incharge_sign_off).map(j => ({\r\n            type: 'APPROVAL',\r\n            severity: 'MEDIUM',\r\n            title: `High-Value Missing Approval: ${j.job_card_number || 'JC-' + j.id}`,\r\n            detail: `AED ${parseFloat(j.net_amount || 0).toLocaleString()} - No floor incharge sign-off`,\r\n            date: j.updated_at?.split('T')[0] || '-'\r\n        }))\r\n    ];\r\n\r\n    const severityColor = { HIGH: '#ef4444', MEDIUM: '#f59e0b', LOW: '#10b981' };\r\n    const typeIcon = { QC: ShieldAlert, FINANCE: AlertTriangle, COMPLIANCE: FileText, APPROVAL: Eye };\r\n\r\n    if (loading) return <div style={{ color: '#fff', padding: '40px' }}>Running Risk Analysis...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '30px' }}>\r\n            <header style={{ marginBottom: '40px' }}>\r\n                <div style={{ fontSize: '10px', color: '#ef4444', fontWeight: '800', letterSpacing: '2px' }}>GOVERNANCE & COMPLIANCE</div>\r\n                <h1 style={{ margin: '5px 0 0 0', fontSize: '2.5rem', fontWeight: '900', color: '#fff', fontFamily: 'Outfit, sans-serif' }}>Risk & Audit</h1>\r\n            </header>\r\n\r\n            {/* Risk Dashboard */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr', gap: '20px', marginBottom: '30px' }}>\r\n                <GlassCard style={{ padding: '30px', background: `linear-gradient(135deg, ${riskColor}15, transparent)`, border: `1px solid ${riskColor}30` }}>\r\n                    <div style={{ fontSize: '11px', color: '#64748b', fontWeight: '700', textTransform: 'uppercase', letterSpacing: '1px' }}>Risk Score</div>\r\n                    <div style={{ fontSize: '48px', fontWeight: '900', color: riskColor, lineHeight: 1.2 }}>{riskScore}</div>\r\n                    <div style={{ fontSize: '13px', fontWeight: '800', color: riskColor }}>{riskLevel} RISK</div>\r\n                </GlassCard>\r\n                <RiskStat label=\"Open Audit Items\" value={auditItems.length} icon={AlertTriangle} color=\"#f59e0b\" />\r\n                <RiskStat label=\"QC Failures\" value={qcPending.length} icon={ShieldAlert} color=\"#ef4444\" />\r\n                <RiskStat label=\"Overdue Payments\" value={overdueInvoices.length} icon={Clock} color=\"#8b5cf6\" />\r\n            </div>\r\n\r\n            {/* Risk Breakdown */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '25px' }}>\r\n                {/* Audit Items List */}\r\n                <GlassCard style={{ padding: '30px' }}>\r\n                    <h3 style={{ margin: '0 0 25px 0', fontSize: '18px', fontWeight: '800' }}>Active Audit Items</h3>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                        {auditItems.length > 0 ? auditItems.map((item, i) => {\r\n                            const ItemIcon = typeIcon[item.type] || AlertTriangle;\r\n                            return (\r\n                                <div key={i} style={{\r\n                                    padding: '18px', borderRadius: '12px', background: 'rgba(255,255,255,0.02)',\r\n                                    border: `1px solid ${severityColor[item.severity]}20`, display: 'flex', alignItems: 'center', gap: '15px'\r\n                                }}>\r\n                                    <div style={{\r\n                                        width: '40px', height: '40px', borderRadius: '10px',\r\n                                        background: `${severityColor[item.severity]}15`,\r\n                                        display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0\r\n                                    }}>\r\n                                        <ItemIcon size={18} color={severityColor[item.severity]} />\r\n                                    </div>\r\n                                    <div style={{ flex: 1 }}>\r\n                                        <div style={{ fontWeight: '700', fontSize: '14px', marginBottom: '3px' }}>{item.title}</div>\r\n                                        <div style={{ fontSize: '12px', color: '#64748b' }}>{item.detail}</div>\r\n                                    </div>\r\n                                    <div style={{ textAlign: 'right' }}>\r\n                                        <span style={{\r\n                                            padding: '3px 10px', borderRadius: '20px', fontSize: '10px', fontWeight: '800',\r\n                                            background: `${severityColor[item.severity]}15`, color: severityColor[item.severity],\r\n                                            border: `1px solid ${severityColor[item.severity]}30`\r\n                                        }}>{item.severity}</span>\r\n                                        <div style={{ fontSize: '11px', color: '#475569', marginTop: '5px' }}>{item.date}</div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        }) : (\r\n                            <div style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>\r\n                                <CheckCircle size={40} style={{ margin: '0 auto 15px', opacity: 0.5 }} />\r\n                                <p>All clear - no open audit items.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                {/* Risk Categories */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n                    <GlassCard style={{ padding: '25px' }}>\r\n                        <h4 style={{ margin: '0 0 20px 0', fontSize: '15px', fontWeight: '800' }}>Risk Categories</h4>\r\n                        {[\r\n                            { label: 'Quality Control', count: qcPending.length, total: jobs.length, color: '#ef4444' },\r\n                            { label: 'Financial', count: overdueInvoices.length, total: invoices.length, color: '#f59e0b' },\r\n                            { label: 'Compliance', count: noSignOff.length, total: jobs.filter(j => j.status === 'DELIVERY').length || 1, color: '#3b82f6' },\r\n                            { label: 'Operational', count: openJobs.length, total: jobs.length || 1, color: '#8b5cf6' },\r\n                        ].map((cat, i) => (\r\n                            <div key={i} style={{ marginBottom: '18px' }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', marginBottom: '8px' }}>\r\n                                    <span style={{ fontWeight: '600' }}>{cat.label}</span>\r\n                                    <span style={{ color: '#64748b' }}>{cat.count} / {cat.total}</span>\r\n                                </div>\r\n                                <div style={{ width: '100%', height: '6px', background: 'rgba(255,255,255,0.05)', borderRadius: '3px', overflow: 'hidden' }}>\r\n                                    <div style={{\r\n                                        width: `${Math.min(100, (cat.count / Math.max(cat.total, 1)) * 100)}%`,\r\n                                        height: '100%', background: cat.color, borderRadius: '3px', transition: 'width 0.5s'\r\n                                    }} />\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </GlassCard>\r\n\r\n                    <GlassCard style={{ padding: '25px', background: 'linear-gradient(135deg, rgba(176,141,87,0.08), transparent)' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '15px' }}>\r\n                            <div style={{ background: '#b08d5720', padding: '10px', borderRadius: '10px' }}>\r\n                                <BarChart3 color=\"#b08d57\" size={20} />\r\n                            </div>\r\n                            <h4 style={{ margin: 0, fontWeight: '800', fontSize: '14px' }}>Compliance Summary</h4>\r\n                        </div>\r\n                        <div style={{ fontSize: '13px', color: '#94a3b8', lineHeight: 1.7 }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                <span>Total Jobs Audited</span>\r\n                                <span style={{ fontWeight: '800', color: '#fff' }}>{jobs.length}</span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                <span>Fully Compliant</span>\r\n                                <span style={{ fontWeight: '800', color: '#10b981' }}>{jobs.filter(j => j.qc_sign_off && j.floor_incharge_sign_off).length}</span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                <span>Needs Review</span>\r\n                                <span style={{ fontWeight: '800', color: '#f59e0b' }}>{auditItems.length}</span>\r\n                            </div>\r\n                        </div>\r\n                    </GlassCard>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RiskStat = ({ label, value, icon: Icon, color }) => (\r\n    <GlassCard style={{ padding: '25px', display: 'flex', alignItems: 'center', gap: '18px' }}>\r\n        <div style={{ width: '50px', height: '50px', borderRadius: '14px', background: `${color}15`, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            <Icon size={24} color={color} />\r\n        </div>\r\n        <div>\r\n            <div style={{ fontSize: '12px', color: '#64748b', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\r\n            <div style={{ fontSize: '22px', fontWeight: '900', color: '#fff' }}>{value}</div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nexport default RiskAuditPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\UnderConstruction.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\admin\\BranchManagementPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\attendance\\AttendanceList.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchInitialData'. Either include it or remove the dependency array.","line":21,"column":8,"nodeType":"ArrayExpression","endLine":21,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchInitialData]","fix":{"range":[772,774],"text":"[fetchInitialData]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":270,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":270,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[16360,16371],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    UserCheck, Clock, CheckCircle2, AlertCircle,\r\n    Calendar, Play, Square, Timer,\r\n    Zap, Activity, LayoutDashboard, Printer\r\n} from 'lucide-react';\r\n\r\nconst AttendanceList = () => {\r\n    const [attendance, setAttendance] = useState(null);\r\n    const [roster, setRoster] = useState(null);\r\n    const [allLogs, setAllLogs] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [elapsedTime, setElapsedTime] = useState('00:00:00');\r\n    const timerRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        fetchInitialData();\r\n        return () => clearInterval(timerRef.current);\r\n    }, []);\r\n\r\n    const fetchInitialData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Fetch roster for today (simulated)\r\n            const rostersRes = await api.get('/hr/api/roster/');\r\n            // Find roster for today or use a default 10-hour shift\r\n            const todayStr = new Date().toISOString().split('T')[0];\r\n            const myRoster = rostersRes.data.length > 0 ? rostersRes.data[0] : {\r\n                shift_start: `${todayStr}T08:00:00`,\r\n                shift_end: `${todayStr}T18:00:00`,\r\n                task_notes: \"Elite Shine Standard 10-Hour Shift\"\r\n            };\r\n            setRoster(myRoster);\r\n\r\n            // Fetch current attendance\r\n            const attendRes = await api.get('/forms/attendance/api/records/');\r\n            const todayAttend = attendRes.data.find(a => a.date === todayStr);\r\n            setAttendance(todayAttend);\r\n            setAllLogs(attendRes.data);\r\n\r\n            if (todayAttend && todayAttend.check_in_time && !todayAttend.check_out_time) {\r\n                startTimer(todayAttend.check_in_time);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching HR data', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const startTimer = (startTimeStr) => {\r\n        clearInterval(timerRef.current);\r\n        const [h, m, s] = startTimeStr.split(':').map(Number);\r\n        const start = new Date();\r\n        start.setHours(h, m, s, 0);\r\n\r\n        timerRef.current = setInterval(() => {\r\n            const now = new Date();\r\n            const diff = now - start;\r\n            if (diff < 0) return;\r\n\r\n            const hours = Math.floor(diff / 3600000);\r\n            const minutes = Math.floor((diff % 3600000) / 60000);\r\n            const seconds = Math.floor((diff % 60000) / 1000);\r\n\r\n            setElapsedTime(\r\n                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`\r\n            );\r\n        }, 1000);\r\n    };\r\n\r\n    const handleClockIn = async () => {\r\n        try {\r\n            const res = await api.post('/forms/attendance/api/check-in/');\r\n            setAttendance(res.data.data || res.data);\r\n            if (res.data.data?.check_in_time || res.data.check_in_time) {\r\n                startTimer(res.data.data?.check_in_time || res.data.check_in_time);\r\n            }\r\n            fetchInitialData();\r\n        } catch (err) {\r\n            console.error('Clock in failed', err);\r\n            alert('Clock in failed: ' + (err.response?.data?.error || err.message));\r\n        }\r\n    };\r\n\r\n    const handleClockOut = async () => {\r\n        try {\r\n            const res = await api.post('/forms/attendance/api/check-out/');\r\n            setAttendance(res.data.data || res.data);\r\n            clearInterval(timerRef.current);\r\n            fetchInitialData();\r\n        } catch (err) {\r\n            console.error('Clock out failed', err);\r\n            alert('Clock out failed: ' + (err.response?.data?.error || err.message));\r\n        }\r\n    };\r\n\r\n    // Calculate progress based on a 10-hour workday (36000 seconds)\r\n    const getWorkProgress = () => {\r\n        if (!attendance || !attendance.check_in_time) return 0;\r\n        if (attendance.check_out_time) return (attendance.total_hours / 10) * 100;\r\n\r\n        const [h, m, s] = attendance.check_in_time.split(':').map(Number);\r\n        const start = new Date();\r\n        start.setHours(h, m, s, 0);\r\n        const diffInSeconds = (new Date() - start) / 1000;\r\n        return Math.min((diffInSeconds / 36000) * 100, 100);\r\n    };\r\n\r\n    if (loading) return <div style={{ color: 'var(--text-primary)', padding: '100px', textAlign: 'center', background: 'var(--bg-primary)', minHeight: '100vh' }}>Synchronizing Personnel Nodes...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '40px 30px', background: 'var(--bg-primary)', minHeight: '100vh' }}>\r\n            <header style={{ marginBottom: '40px' }}>\r\n                <div style={{ color: '#b08d57', fontWeight: '900', letterSpacing: '4px', fontSize: '12px', marginBottom: '10px' }}>WORKFORCE LOGISTICS</div>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n                    <div>\r\n                        <h1 style={{ fontSize: '2.5rem', fontWeight: '900', color: 'var(--text-primary)', margin: 0, fontFamily: 'Outfit, sans-serif' }}>Attendance Hub</h1>\r\n                        <p style={{ color: 'var(--text-secondary)', fontSize: '18px', marginTop: '10px' }}>Live monitoring of the 10-hour industrial shift lifecycle.</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => window.print()}\r\n                        className=\"glass-card\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '10px 20px', cursor: 'pointer', border: '1px solid var(--border-color)', background: 'var(--bg-glass)', color: 'var(--text-primary)' }}\r\n                    >\r\n                        <Printer size={20} /> Print Logs\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'minmax(400px, 1fr) 450px', gap: '30px' }}>\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '25px' }}>\r\n\r\n                    {/* Live Tracking Card */}\r\n                    <GlassCard style={{ padding: '40px', position: 'relative', overflow: 'hidden' }}>\r\n                        <div style={{ position: 'absolute', top: 0, right: 0, padding: '20px' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '10px', color: attendance && !attendance.check_out_time ? '#10b981' : 'var(--text-muted)' }}>\r\n                                <Activity size={16} className={attendance && !attendance.clock_out ? 'pulse-anim' : ''} />\r\n                                <span style={{ fontSize: '12px', fontWeight: '800', letterSpacing: '1px' }}>\r\n                                    {attendance && !attendance.check_out_time ? 'SESSION ACTIVE' : 'NO ACTIVE SESSION'}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ marginBottom: '30px' }}>\r\n                            <div style={{ fontSize: '14px', color: '#b08d57', fontWeight: '800', marginBottom: '5px' }}>CURRENT SESSION</div>\r\n                            <div style={{\r\n                                fontSize: '5rem',\r\n                                fontWeight: '900',\r\n                                color: 'var(--text-primary)',\r\n                                fontFamily: 'monospace',\r\n                                letterSpacing: '-2px'\r\n                            }}>\r\n                                {attendance && !attendance.check_out_time ? elapsedTime : attendance?.check_out_time ? `${attendance.total_hours} hrs` : '00:00:00'}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Progress Bar */}\r\n                        <div style={{ height: '8px', background: 'var(--border-color)', borderRadius: '4px', position: 'relative', marginBottom: '20px' }}>\r\n                            <div style={{\r\n                                height: '100%',\r\n                                width: `${getWorkProgress()}%`,\r\n                                background: 'linear-gradient(to right, #b08d57, var(--text-primary))',\r\n                                borderRadius: '4px',\r\n                                boxShadow: '0 0 15px rgba(176,141,87,0.3)',\r\n                                transition: 'width 1s ease-in-out'\r\n                            }} />\r\n                        </div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', color: 'var(--text-muted)', fontSize: '12px', fontWeight: '800' }}>\r\n                            <span>SHIFT START</span>\r\n                            <span>10 HOUR TARGET</span>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', gap: '20px', marginTop: '40px' }}>\r\n                            {!attendance || !attendance.check_in_time ? (\r\n                                <button onClick={handleClockIn} className=\"nav-action-btn\" style={{ flex: 1, height: '60px', borderRadius: '15px', background: 'rgba(176,141,87,0.1)', border: '1px solid #b08d57', color: 'var(--text-primary)', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '12px', fontWeight: '800', cursor: 'pointer' }}>\r\n                                    <Play size={20} /> INITIATE SHIFT\r\n                                </button>\r\n                            ) : !attendance.check_out_time ? (\r\n                                <button onClick={handleClockOut} className=\"nav-action-btn\" style={{ flex: 1, height: '60px', borderRadius: '15px', background: 'rgba(244,63,94,0.1)', border: '1px solid #f43f5e', color: 'var(--text-primary)', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '12px', fontWeight: '800', cursor: 'pointer' }}>\r\n                                    <Square size={20} /> TERMINATE SHIFT\r\n                                </button>\r\n                            ) : (\r\n                                <div style={{ flex: 1, padding: '20px', background: 'rgba(16,185,129,0.1)', border: '1px solid #10b981', color: '#10b981', borderRadius: '15px', textAlign: 'center', fontWeight: '800' }}>\r\n                                    DAILY CYCLE COMPLETED\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </GlassCard>\r\n\r\n                    {/* Today's Logs */}\r\n                    <div>\r\n                        <div style={{ fontSize: '14px', fontWeight: '800', color: 'var(--text-primary)', marginBottom: '20px' }}>TODAY'S FLEET STATUS</div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\r\n                            {allLogs.map(log => (\r\n                                <GlassCard key={log.id} style={{ padding: '20px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                                        <div style={{ width: '40px', height: '40px', borderRadius: '50%', background: 'var(--input-bg)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                            <UserCheck size={18} color=\"#b08d57\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div style={{ fontWeight: '700', color: 'var(--text-primary)' }}>{log.employee_name}</div>\r\n                                            <div style={{ fontSize: '11px', color: 'var(--text-muted)' }}>Shift active since {log.check_in_time}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ textAlign: 'right' }}>\r\n                                        <div style={{ fontSize: '14px', fontWeight: '800', color: log.clock_out ? '#10b981' : '#f59e0b' }}>\r\n                                            {log.check_out_time ? 'COMPLETED' : 'IN_TRANSIT'}\r\n                                        </div>\r\n                                        <div style={{ fontSize: '11px', color: 'var(--text-muted)' }}>{log.total_hours} hrs logged</div>\r\n                                    </div>\r\n                                </GlassCard>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right Panel: Roster Context */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '25px' }}>\r\n                    <GlassCard style={{ padding: '30px' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '25px' }}>\r\n                            <Calendar size={20} color=\"#b08d57\" />\r\n                            <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '800' }}>Active Roster</h3>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n                            <RosterItem icon={Timer} label=\"Shift Window\" value={`${new Date(roster.shift_start).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - ${new Date(roster.shift_end).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`} />\r\n                            <RosterItem icon={Zap} label=\"Work Order\" value={roster.task_notes} />\r\n                            <RosterItem icon={LayoutDashboard} label=\"Compliance\" value=\"10-Hour Standard Applied\" />\r\n                        </div>\r\n\r\n                        <div style={{ marginTop: '30px', padding: '20px', background: 'rgba(176,141,87,0.05)', borderRadius: '15px', border: '1px dashed rgba(176,141,87,0.2)' }}>\r\n                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)', lineHeight: '1.6' }}>\r\n                                Employee must log a minimum of 9.5 hours to satisfy the industrial performance metric. Breaks are calculated automatically.\r\n                            </div>\r\n                        </div>\r\n                    </GlassCard>\r\n\r\n                    <GlassCard style={{ padding: '30px', background: 'linear-gradient(135deg, rgba(176,141,87,0.05), transparent)' }}>\r\n                        <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '900', letterSpacing: '2px', marginBottom: '15px' }}>SYSTEM ANALYTICS</div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                            <div style={{ padding: '15px', background: 'var(--input-bg)', borderRadius: '12px' }}>\r\n                                <div style={{ fontSize: '11px', color: 'var(--text-muted)' }}>Load Balance</div>\r\n                                <div style={{ fontSize: '18px', fontWeight: '800', color: 'var(--text-primary)' }}>Optimal</div>\r\n                            </div>\r\n                            <div style={{ padding: '15px', background: 'var(--input-bg)', borderRadius: '12px' }}>\r\n                                <div style={{ fontSize: '11px', color: 'var(--text-muted)' }}>OT Projected</div>\r\n                                <div style={{ fontSize: '18px', fontWeight: '800', color: 'var(--text-primary)' }}>1.2 hrs</div>\r\n                            </div>\r\n                        </div>\r\n                    </GlassCard>\r\n                </div>\r\n            </div>\r\n            <style>{`\r\n                @media print {\r\n                    body { background: #fff !important; color: #000 !important; }\r\n                    .glass-card { border: 1px solid #eee !important; box-shadow: none !important; background: #fff !important; color: #000 !important; }\r\n                    button, .nav-action-btn, .pulse-anim, header > div:last-child { display: none !important; }\r\n                    h1 { color: #b08d57 !important; }\r\n                    div[style*=\"grid\"] { display: block !important; }\r\n                    .glass-card { margin-bottom: 20px !important; page-break-inside: avoid; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RosterItem = ({ icon: Icon, label, value }) => (\r\n    <div style={{ display: 'flex', gap: '15px', alignItems: 'flex-start' }}>\r\n        <div style={{ marginTop: '3px' }}>\r\n            <Icon size={16} color=\"#b08d57\" />\r\n        </div>\r\n        <div>\r\n            <div style={{ fontSize: '11px', color: 'var(--text-muted)', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\r\n            <div style={{ fontSize: '15px', fontWeight: '700', color: 'var(--text-primary)', marginTop: '2px' }}>{value}</div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default AttendanceList;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\bookings\\BookingCalendar.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useMemo' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"useMemo"},"fix":{"range":[12,25],"text":""},"desc":"Remove unused variable 'useMemo'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport { ChevronLeft, ChevronRight, Clock, User } from 'lucide-react';\r\n\r\nconst BookingCalendar = ({ bookings }) => {\r\n    // Generate hours from 08:00 to 19:00\r\n    const hours = Array.from({ length: 12 }, (_, i) => i + 8);\r\n\r\n    // Generate current week days (demo: start from a fixed or relative date)\r\n    const days = [\r\n        { name: 'Monday', date: '23', isToday: false },\r\n        { name: 'Tuesday', date: '24', isToday: false },\r\n        { name: 'Wednesday', date: '25', isToday: false },\r\n        { name: 'Thursday', date: '26', isToday: false },\r\n        { name: 'Friday', date: '27', isToday: true },\r\n        { name: 'Saturday', date: '28', isToday: false },\r\n        { name: 'Sunday', date: '29', isToday: false },\r\n    ];\r\n\r\n    const getBookingForSlot = (dayName, hour) => {\r\n        // This is a simplified lookup for demo/seeded data\r\n        // In reality, we'd parse booking_date and booking_time\r\n        return bookings.find(b => {\r\n            const bHour = parseInt(b.booking_time.split(':')[0]);\r\n            // For simplicity in this view, we'll just check if the hour matches\r\n            return bHour === hour;\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '20px', background: 'rgba(0,0,0,0.2)', borderRadius: '24px', backdropFilter: 'blur(10px)', border: '1px solid rgba(255,255,255,0.05)' }}>\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                    <h2 style={{ fontSize: '20px', fontWeight: '800', margin: 0, color: '#fff' }}>November 2020</h2>\r\n                    <div style={{ display: 'flex', background: 'rgba(255,255,255,0.05)', borderRadius: '10px', padding: '2px' }}>\r\n                        <button style={{ ...tabStyle, background: 'rgba(59, 130, 246, 0.5)', color: '#fff' }}>Week</button>\r\n                        <button style={tabStyle}>Month</button>\r\n                        <button style={tabStyle}>Year</button>\r\n                    </div>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                    <div style={{ display: 'flex', background: 'rgba(255,255,255,0.05)', borderRadius: '10px', padding: '2px' }}>\r\n                        <button style={{ ...navBtnStyle }}><ChevronLeft size={16} /></button>\r\n                        <button style={{ ...navBtnStyle, fontSize: '12px', fontWeight: '700' }}>Today</button>\r\n                        <button style={{ ...navBtnStyle }}><ChevronRight size={16} /></button>\r\n                    </div>\r\n                    <button style={{ ...btnSecondaryStyle }}>Jump to date</button>\r\n                </div>\r\n            </header>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '80px repeat(7, 1fr)', gap: '1px', background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.05)', borderRadius: '15px', overflow: 'hidden' }}>\r\n                {/* Header Row */}\r\n                <div style={{ background: 'rgba(0,0,0,0.3)', padding: '15px' }}></div>\r\n                {days.map(day => (\r\n                    <div key={day.name} style={{ background: 'rgba(0,0,0,0.3)', padding: '15px', textAlign: 'left', borderLeft: '1px solid rgba(255,255,255,0.05)' }}>\r\n                        <div style={{ fontSize: '11px', color: '#94a3b8', textTransform: 'uppercase', fontWeight: '700', marginBottom: '5px' }}>{day.name}</div>\r\n                        <div style={{ fontSize: '20px', fontWeight: '800', color: day.isToday ? '#3b82f6' : '#fff' }}>\r\n                            {day.date}\r\n                            {day.isToday && <span style={{ width: '6px', height: '6px', background: '#3b82f6', borderRadius: '50%', display: 'inline-block', marginLeft: '8px', verticalAlign: 'middle' }}></span>}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n\r\n                {/* Hour Rows */}\r\n                {hours.map(hour => (\r\n                    <React.Fragment key={hour}>\r\n                        <div style={{ background: 'rgba(0,0,0,0.2)', padding: '15px', fontSize: '11px', color: '#64748b', fontWeight: '700', borderTop: '1px solid rgba(255,255,255,0.02)' }}>\r\n                            {hour.toString().padStart(2, '0')}:00 {hour >= 12 ? 'PM' : 'AM'}\r\n                        </div>\r\n                        {days.map(day => {\r\n                            const booking = getBookingForSlot(day.name, hour);\r\n                            return (\r\n                                <div key={`${day.name}-${hour}`} style={{\r\n                                    background: 'rgba(0,0,0,0.1)',\r\n                                    minHeight: '80px',\r\n                                    borderLeft: '1px solid rgba(255,255,255,0.05)',\r\n                                    borderTop: '1px solid rgba(255,255,255,0.02)',\r\n                                    position: 'relative',\r\n                                    padding: '5px'\r\n                                }}>\r\n                                    {booking && (\r\n                                        <div style={{\r\n                                            background: 'rgba(59, 130, 246, 0.1)',\r\n                                            borderLeft: '3px solid #3b82f6',\r\n                                            borderRadius: '6px',\r\n                                            padding: '8px',\r\n                                            height: '100%',\r\n                                            cursor: 'pointer',\r\n                                            transition: 'all 0.2s ease',\r\n                                        }} className=\"calendar-card-hover\">\r\n                                            <div style={{ fontSize: '12px', fontWeight: '800', color: '#fff', marginBottom: '4px' }}>{booking.customer_name}</div>\r\n                                            <div style={{ fontSize: '10px', color: '#94a3b8' }}>{booking.service_type}</div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </React.Fragment>\r\n                ))}\r\n            </div>\r\n\r\n            <style>\r\n                {`\r\n                    .calendar-card-hover:hover {\r\n                        background: rgba(59, 130, 246, 0.2);\r\n                        transform: translateY(-2px);\r\n                    }\r\n                `}\r\n            </style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst tabStyle = {\r\n    padding: '6px 15px',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    fontSize: '12px',\r\n    fontWeight: '700',\r\n    color: '#94a3b8',\r\n    background: 'transparent',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s'\r\n};\r\n\r\nconst navBtnStyle = {\r\n    padding: '6px 12px',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    color: '#94a3b8',\r\n    background: 'transparent',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '5px'\r\n};\r\n\r\nconst btnSecondaryStyle = {\r\n    padding: '8px 15px',\r\n    background: 'rgba(255,255,255,0.05)',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n    borderRadius: '10px',\r\n    color: '#fff',\r\n    fontSize: '12px',\r\n    fontWeight: '700',\r\n    cursor: 'pointer'\r\n};\r\n\r\nexport default BookingCalendar;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\bookings\\BookingForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\bookings\\BookingList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ceramic\\CeramicDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchWarranty'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchWarranty, id]","fix":{"range":[595,599],"text":"[fetchWarranty, id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport api from '../../api/axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport { ArrowLeft, Printer, Award, Calendar, User, Car, Star } from 'lucide-react';\nimport PrintHeader from '../../components/PrintHeader';\n\nconst CeramicDetail = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [warranty, setWarranty] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchWarranty();\n    }, [id]);\n\n    const fetchWarranty = async () => {\n        try {\n            const res = await api.get(`/forms/ceramic/api/warranties/${id}/`);\n            setWarranty(res.data);\n        } catch (err) {\n            console.error('Error fetching warranty', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (loading) return <div style={{ padding: '50px', textAlign: 'center', color: '#fff' }}>Loading Certificate...</div>;\n    if (!warranty) return <div style={{ padding: '50px', textAlign: 'center', color: '#fff' }}>Certificate Not Found</div>;\n\n    return (\n        <div style={{ padding: '30px 20px' }}>\n            <PrintHeader title=\"Ceramic Protection Warranty\" />\n\n            <header className=\"no-print\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                    <button\n                        onClick={() => navigate('/ceramic')}\n                        style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '8px', borderRadius: '12px', cursor: 'pointer', color: '#fff' }}\n                    >\n                        <ArrowLeft size={20} />\n                    </button>\n                    <div>\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '1.5rem', margin: 0 }}>Ceramic Certificate</h1>\n                        <p style={{ color: '#94a3b8', fontSize: '14px', margin: 0 }}>Ref: CW-{warranty.id.toString().padStart(5, '0')}</p>\n                    </div>\n                </div>\n\n                <button\n                    onClick={() => window.print()}\n                    className=\"btn-primary\"\n                    style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n                >\n                    <Printer size={18} /> Print Certificate\n                </button>\n            </header>\n\n            <GlassCard className=\"printable-certificate\" style={{ padding: '50px', maxWidth: '850px', margin: '0 auto', border: '2px solid rgba(176, 141, 87, 0.4)', borderRadius: '0' }}>\n                <div style={{ textAlign: 'center', marginBottom: '50px' }}>\n                    <div style={{ display: 'flex', justifyContent: 'center', gap: '5px', marginBottom: '20px' }}>\n                        {[1, 2, 3, 4, 5].map(i => <Star key={i} size={16} fill=\"#b08d57\" color=\"#b08d57\" />)}\n                    </div>\n                    <h2 style={{ fontFamily: 'Outfit, sans-serif', color: '#b08d57', fontSize: '2.4rem', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '5px' }}>Warranty Certificate</h2>\n                    <p style={{ color: '#94a3b8', fontSize: '12px', letterSpacing: '4px' }}>ELITE SHINE PROTECTION PROGRAM</p>\n                </div>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '60px', marginBottom: '50px' }}>\n                    <div>\n                        <h4 style={labelStyle}>Customer Data</h4>\n                        <p style={valueStyle}>{warranty.full_name}</p>\n                        <div style={{ marginTop: '10px', fontSize: '14px' }}>\n                            <p style={{ margin: '2px 0', color: '#f8fafc' }}>{warranty.contact_number}</p>\n                            <p style={{ margin: '2px 0', color: '#94a3b8' }}>{warranty.email}</p>\n                        </div>\n                    </div>\n                    <div style={{ textAlign: 'right' }}>\n                        <h4 style={labelStyle}>Vehicle Profile</h4>\n                        <p style={valueStyle}>{warranty.vehicle_brand} {warranty.vehicle_model}</p>\n                        <p style={{ color: '#b08d57', fontSize: '1.2rem', fontWeight: '900', marginTop: '5px' }}>{warranty.license_plate}</p>\n                        <p style={{ color: '#94a3b8', fontSize: '11px', marginTop: '5px' }}>VIN: {warranty.vin}</p>\n                    </div>\n                </div>\n\n                <div style={{ border: '1px solid rgba(176, 141, 87, 0.2)', padding: '30px', marginBottom: '50px' }}>\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px' }}>\n                        <div>\n                            <h4 style={subLabelStyle}>Service Type</h4>\n                            <p style={{ fontWeight: '700' }}>{warranty.coating_type}</p>\n                        </div>\n                        <div>\n                            <h4 style={subLabelStyle}>Product Used</h4>\n                            <p style={{ fontWeight: '700' }}>{warranty.coating_brand}</p>\n                        </div>\n                        <div>\n                            <h4 style={subLabelStyle}>Inception Date</h4>\n                            <p style={{ fontWeight: '700' }}>{new Date(warranty.installation_date).toLocaleDateString()}</p>\n                        </div>\n                        <div>\n                            <h4 style={subLabelStyle}>Valid Period</h4>\n                            <p style={{ fontWeight: '700', color: '#b08d57' }}>{warranty.warranty_period}</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '2fr 1.2fr', gap: '60px' }}>\n                    <div>\n                        <h4 style={labelStyle}>Maintenance Obligations</h4>\n                        <p style={{ fontSize: '11px', color: '#94a3b8', lineHeight: '1.8' }}>\n                            Validation of this luxury protective coating requires annual maintenance and professional check-ups\n                            exclusively at Elite Shine studios. Use of non-approved cleaners or mechanical car washes will void this premium coverage.\n                            Warranty covers oxidation, loss of gloss and environmental fallout protection.\n                        </p>\n                    </div>\n                    <div style={{ textAlign: 'center' }}>\n                        <h4 style={labelStyle}>Owner Authorization</h4>\n                        <div style={{ height: '100px', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\n                            {warranty.signature_data ? (\n                                <div style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #b08d57', width: '100%' }}>\n                                    <img src={warranty.signature_data} alt=\"Owner Sig\" style={{ maxHeight: '70px', maxWidth: '100%' }} />\n                                </div>\n                            ) : (\n                                <div style={{ borderBottom: '1px solid #64748b', width: '100%', height: '40px' }}></div>\n                            )}\n                        </div>\n                        <p style={{ fontSize: '10px', color: '#64748b', marginTop: '10px', textTransform: 'uppercase', letterSpacing: '1px' }}>Signature & Date</p>\n                    </div>\n                </div>\n\n                <div style={{ marginTop: '80px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end', opacity: 0.5 }}>\n                    <div style={{ fontSize: '10px' }}>\n                        <p style={{ margin: 0 }}>Official Seal Required for Validity</p>\n                        <p style={{ margin: 0 }}>Elite Shine ERP Security-ID: {warranty.id}-SEC-CER</p>\n                    </div>\n                    <div style={{ textAlign: 'right', fontSize: '10px' }}>\n                        <p style={{ margin: 0 }}>ELITE SHINE AUTOMOTIVE REFINISHING</p>\n                        <p style={{ margin: 0 }}>UNITED ARAB EMIRATES</p>\n                    </div>\n                </div>\n            </GlassCard>\n\n            <style>{`\n                @media print {\n                    body { background: #fff !important; }\n                    .printable-certificate { \n                        background: #fff !important; \n                        color: #000 !important; \n                        border: 3px double #b08d57 !important; \n                        box-shadow: none !important; \n                        max-width: 100% !important; \n                        padding: 60px !important;\n                        margin: 0 !important;\n                    }\n                    .printable-certificate * { color: #000 !important; }\n                    .printable-certificate h2, .printable-certificate h4 { color: #b08d57 !important; }\n                    .printable-certificate div[style*=\"border\"] { border-color: #b08d57 !important; }\n                    .no-print { display: none !important; }\n                }\n            `}</style>\n        </div>\n    );\n};\n\nconst labelStyle = {\n    fontSize: '11px',\n    color: '#b08d57',\n    textTransform: 'uppercase',\n    fontWeight: '900',\n    letterSpacing: '2px',\n    marginBottom: '15px'\n};\n\nconst subLabelStyle = {\n    fontSize: '9px',\n    color: '#64748b',\n    textTransform: 'uppercase',\n    fontWeight: '700',\n    marginBottom: '8px'\n};\n\nconst valueStyle = {\n    fontSize: '1.5rem',\n    fontWeight: '900',\n    margin: '0',\n    color: '#fff',\n    fontFamily: 'Outfit, sans-serif'\n};\n\nexport default CeramicDetail;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ceramic\\CeramicForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ceramic\\CeramicList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\customers\\CustomerList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\dashboard\\AdvisorDailyReport.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":118,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":118,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[5709,5721],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":128,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":128,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[6277,6289],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    Printer, Download, Calendar, Users, Briefcase,\r\n    TrendingUp, Clock, CheckCircle2, AlertCircle\r\n} from 'lucide-react';\r\nimport PrintHeader from '../../components/PrintHeader';\r\n\r\nconst AdvisorDailyReport = () => {\r\n    const [data, setData] = useState({\r\n        arrivals: [],\r\n        activeJobs: [],\r\n        hotLeads: [],\r\n        stats: { conversion: 0, revenue: 0 }\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchDailyBriefing();\r\n    }, []);\r\n\r\n    const fetchDailyBriefing = async () => {\r\n        try {\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const [leadsRes, bookingsRes, jobsRes] = await Promise.all([\r\n                api.get('/forms/leads/api/list/'),\r\n                api.get('/forms/bookings/api/list/'),\r\n                api.get('/forms/job-cards/api/jobs/')\r\n            ]);\r\n\r\n            setData({\r\n                arrivals: bookingsRes.data.filter(b => b.booking_date === today),\r\n                activeJobs: jobsRes.data.filter(j => j.status !== 'CLOSED'),\r\n                hotLeads: leadsRes.data.filter(l => l.priority === 'HOT' && l.status !== 'CONVERTED'),\r\n                stats: {\r\n                    conversion: 68, // Mock for demo\r\n                    revenue: 24500 // Mock for today\r\n                }\r\n            });\r\n\r\n            // Auto-prompt print if triggered from dashboard\r\n            const params = new URLSearchParams(window.location.search);\r\n            if (params.get('print') === 'true') {\r\n                setTimeout(() => {\r\n                    if (window.confirm(\"Executive Briefing ready. Proceed to print?\")) {\r\n                        window.print();\r\n                    }\r\n                }, 2000);\r\n            }\r\n\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '100px', color: '#fff', textAlign: 'center' }}>Synthesizing Daily Intelligence...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '40px', maxWidth: '1200px', margin: '0 auto' }}>\r\n            <PrintHeader title=\"Executive Advisor Briefing\" />\r\n\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end', marginBottom: '50px' }}>\r\n                <div>\r\n                    <div style={{ fontSize: '12px', color: '#b08d57', fontWeight: '900', letterSpacing: '3px', textTransform: 'uppercase' }}>Daily Operations</div>\r\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '3rem', margin: 0, fontWeight: '900' }}>Advisor Briefing</h1>\r\n                    <div style={{ color: '#94a3b8', marginTop: '5px' }}>Date: {new Date().toLocaleDateString()} | Service Department</div>\r\n                </div>\r\n                <button onClick={() => window.print()} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                    <Printer size={18} /> PRINT BRIEFING\r\n                </button>\r\n            </header>\r\n\r\n            {/* QUICK KPIs */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '40px' }}>\r\n                <KPITile label=\"Expected Arrivals\" value={data.arrivals.length} icon={Calendar} color=\"#3b82f6\" />\r\n                <KPITile label=\"WIP Inventory\" value={data.activeJobs.length} icon={Briefcase} color=\"#b08d57\" />\r\n                <KPITile label=\"Hot Pipeline\" value={data.hotLeads.length} icon={TrendingUp} color=\"#f43f5e\" />\r\n                <KPITile label=\"Est. Daily Value\" value={`AED ${data.stats.revenue}`} icon={CheckCircle2} color=\"#10b981\" />\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px' }}>\r\n                {/* ARRIVALS LIST */}\r\n                <ReportSection title=\"Morning Arrivals\" icon={Clock} color=\"#3b82f6\">\r\n                    {data.arrivals.length === 0 ? <p style={{ color: '#64748b' }}>No arrivals scheduled for today.</p> :\r\n                        data.arrivals.map(b => (\r\n                            <ReportRow key={b.id} title={b.customer_name} sub={b.v_registration_no} right={b.booking_time} />\r\n                        ))\r\n                    }\r\n                </ReportSection>\r\n\r\n                {/* HOT LEADS */}\r\n                <ReportSection title=\"Conversion Watch\" icon={TrendingUp} color=\"#f43f5e\">\r\n                    {data.hotLeads.length === 0 ? <p style={{ color: '#64748b' }}>No hot leads pending conversion.</p> :\r\n                        data.hotLeads.map(l => (\r\n                            <ReportRow key={l.id} title={l.customer_name} sub={l.interested_service} right={`AED ${l.estimated_value}`} />\r\n                        ))\r\n                    }\r\n                </ReportSection>\r\n            </div>\r\n\r\n            {/* ACTIVE UNITS LIST */}\r\n            <div style={{ marginTop: '30px' }}>\r\n                <ReportSection title=\"Active Workshop Inventory\" icon={Briefcase} color=\"#b08d57\">\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>\r\n                        {data.activeJobs.slice(0, 10).map(j => (\r\n                            <ReportRow key={j.id} title={j.job_card_number} sub={`${j.brand} ${j.model}`} right={j.status_display} />\r\n                        ))}\r\n                    </div>\r\n                </ReportSection>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst KPITile = ({ label, value, icon: Icon, color }) => (\r\n    <GlassCard style={{ padding: '20px', borderLeft: `3px solid ${color}` }}>\r\n        <div style={{ fontSize: '10px', color: '#94a3b8', fontWeight: '800', textTransform: 'uppercase' }}>{label}</div>\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginTop: '10px' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: '900', color: '#fff' }}>{value}</div>\r\n            <Icon size={20} color={color} />\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nconst ReportSection = ({ title, children, icon: Icon, color }) => (\r\n    <GlassCard style={{ padding: '25px' }}>\r\n        <h3 style={{ margin: '0 0 20px 0', fontSize: '14px', fontWeight: '900', color: color, textTransform: 'uppercase', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n            <Icon size={18} /> {title}\r\n        </h3>\r\n        {children}\r\n    </GlassCard>\r\n);\r\n\r\nconst ReportRow = ({ title, sub, right }) => (\r\n    <div style={{ padding: '12px 0', borderBottom: '1px solid rgba(255,255,255,0.05)', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div>\r\n            <div style={{ fontWeight: '800', color: '#fff', fontSize: '14px' }}>{title}</div>\r\n            <div style={{ fontSize: '11px', color: '#94a3b8' }}>{sub}</div>\r\n        </div>\r\n        <div style={{ fontWeight: '900', color: '#b08d57', fontSize: '13px' }}>{right}</div>\r\n    </div>\r\n);\r\n\r\nexport default AdvisorDailyReport;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\dashboard\\AdvisorDashboard.jsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'axios' is not defined.","line":167,"column":71,"nodeType":"Identifier","messageId":"undef","endLine":167,"endColumn":76},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":169,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":169,"endColumn":61},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":219,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":219,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[12678,12689],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    Users, Target, Calendar, Clock, ClipboardList,\r\n    TrendingUp, Award, ArrowRightCircle, Star,\r\n    CheckCircle2, AlertCircle, Phone, Printer\r\n} from 'lucide-react';\r\n\r\nconst AdvisorDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(true);\r\n    const [stats, setStats] = useState({\r\n        myLeads: [],\r\n        upcomingArrivals: [],\r\n        activeJobs: [],\r\n        metrics: {\r\n            conversionRate: 0,\r\n            revenueTarget: 500000,\r\n            currentRevenue: 0,\r\n            leadCount: 0\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchAdvisorStats();\r\n    }, []);\r\n\r\n    const fetchAdvisorStats = async () => {\r\n        try {\r\n            // In a real scenario, this would filter by the logged-in user\r\n            const [leadsRes, bookingsRes, jobsRes] = await Promise.all([\r\n                api.get('/forms/leads/api/list/'),\r\n                api.get('/forms/bookings/api/list/'),\r\n                api.get('/forms/job-cards/api/jobs/')\r\n            ]);\r\n\r\n            setStats({\r\n                myLeads: leadsRes.data.filter(l => l.status !== 'CONVERTED' && l.status !== 'LOST').slice(0, 5),\r\n                upcomingArrivals: bookingsRes.data.filter(b => b.status === 'CONFIRMED' || b.status === 'PENDING').slice(0, 5),\r\n                activeJobs: jobsRes.data.filter(j => j.status !== 'CLOSED').slice(0, 5),\r\n                metrics: {\r\n                    conversionRate: 64.5, // Mock\r\n                    revenueTarget: 500000,\r\n                    currentRevenue: 312500, // Mock\r\n                    leadCount: leadsRes.data.length\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.error(\"Advisor dashboard failed to load\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '40px', color: '#fff' }}>Initializing Personal Command...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '30px', maxWidth: '1600px', margin: '0 auto' }}>\r\n            <header style={{ marginBottom: '40px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n                <div>\r\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px' }}>ADVISOR MISSION CONTROL</div>\r\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Executive Workspace</h1>\r\n                    <button\r\n                        onClick={() => navigate('/service-advisor/form')}\r\n                        style={{\r\n                            marginTop: '10px',\r\n                            background: 'linear-gradient(135deg, #b08d57 0%, #8a6d43 100%)',\r\n                            color: '#fff',\r\n                            border: 'none',\r\n                            padding: '8px 16px',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '8px',\r\n                            fontSize: '13px'\r\n                        }}\r\n                    >\r\n                        <span style={{ fontSize: '16px' }}>+</span> New Vehicle Inspection\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/advisor-daily-report?print=true')}\r\n                        style={{\r\n                            marginTop: '10px',\r\n                            background: 'rgba(255,255,255,0.05)',\r\n                            color: '#fff',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            padding: '8px 16px',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '8px',\r\n                            fontSize: '13px',\r\n                            marginLeft: '15px'\r\n                        }}\r\n                    >\r\n                        <Printer size={16} /> Generate Daily Briefing\r\n                    </button>\r\n                </div>\r\n                <div style={{ textAlign: 'right' }}>\r\n                    <div style={{ color: '#94a3b8', fontSize: '12px', fontWeight: '600' }}>MY MONTHLY PERFORMANCE</div>\r\n                    <div style={{ color: '#10b981', fontSize: '24px', fontWeight: '800' }}>AED {stats.metrics.currentRevenue.toLocaleString()} <span style={{ fontSize: '12px', color: '#64748b' }}>/ {stats.metrics.revenueTarget.toLocaleString()}</span></div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* QUICK STATS */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                <MetricCard icon={Star} label=\"Conversion\" value={`${stats.metrics.conversionRate}%`} color=\"#fbbf24\" />\r\n                <MetricCard icon={Users} label=\"My Pipeline\" value={stats.metrics.leadCount} color=\"#3b82f6\" />\r\n                <MetricCard icon={Calendar} label=\"Arrivals Today\" value={stats.upcomingArrivals.length} color=\"#b08d57\" />\r\n                <MetricCard icon={ClipboardList} label=\"WIP Units\" value={stats.activeJobs.length} color=\"#8b5cf6\" />\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '25px' }}>\r\n\r\n                {/* MY LEADS */}\r\n                <GlassCard style={{ padding: '25px', display: 'flex', flexDirection: 'column' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                        <h3 style={{ margin: 0, fontWeight: '800', fontSize: '16px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                            <Target size={18} color=\"#f43f5e\" /> My Hot Leads\r\n                        </h3>\r\n                        <button onClick={() => navigate('/leads')} style={{ background: 'none', border: 'none', color: '#94a3b8', fontSize: '11px', cursor: 'pointer', fontWeight: '700' }}>VIEW ALL</button>\r\n                    </div>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                        {stats.myLeads.map(lead => (\r\n                            <div key={lead.id} onClick={() => navigate(`/leads/${lead.id}`)} style={rowStyle}>\r\n                                <div>\r\n                                    <div style={{ fontWeight: '700', color: '#fff', fontSize: '14px' }}>{lead.customer_name}</div>\r\n                                    <div style={{ fontSize: '11px', color: '#94a3b8' }}>{lead.interested_service}</div>\r\n                                </div>\r\n                                <div style={{ textAlign: 'right' }}>\r\n                                    <div style={{ fontSize: '12px', fontWeight: '800', color: '#b08d57' }}>AED {lead.estimated_value}</div>\r\n                                    <div style={{ fontSize: '9px', color: lead.priority === 'HOT' ? '#f43f5e' : '#64748b', fontWeight: '900' }}>{lead.priority}</div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                {/* UPCOMING ARRIVALS */}\r\n                <GlassCard style={{ padding: '25px', display: 'flex', flexDirection: 'column' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                        <h3 style={{ margin: 0, fontWeight: '800', fontSize: '16px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                            <Calendar size={18} color=\"#3b82f6\" /> Expected Arrivals\r\n                        </h3>\r\n                        <button onClick={() => navigate('/bookings')} style={{ background: 'none', border: 'none', color: '#94a3b8', fontSize: '11px', cursor: 'pointer', fontWeight: '700' }}>RESOURCES</button>\r\n                    </div>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                        {stats.upcomingArrivals.map(booking => (\r\n                            <div key={booking.id} style={rowStyle}>\r\n                                <div>\r\n                                    <div style={{ fontWeight: '700', color: '#fff', fontSize: '14px' }}>{booking.customer_name}</div>\r\n                                    <div style={{ fontSize: '11px', color: '#b08d57', fontWeight: '700' }}>{booking.v_registration_no}</div>\r\n                                </div>\r\n                                <div style={{ textAlign: 'right' }}>\r\n                                    <div style={{ fontSize: '12px', fontWeight: '800', color: '#fff' }}>{booking.booking_time}</div>\r\n                                    <button\r\n                                        onClick={async (e) => {\r\n                                            e.stopPropagation();\r\n                                            if (window.confirm(\"Mark arrived and create Job Card?\")) {\r\n                                                try {\r\n                                                    const res = await axios.post(`/forms/bookings/api/list/${booking.id}/convert_to_job/`);\r\n                                                    navigate(`/job-cards/${res.data.job_card_id}`);\r\n                                                } catch (err) { alert(\"Arrival process failed.\"); }\r\n                                            }\r\n                                        }}\r\n                                        style={actionBtnStyle}\r\n                                    >\r\n                                        ARRIVED\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                {/* ACTIVE JOBS */}\r\n                <GlassCard style={{ padding: '25px', display: 'flex', flexDirection: 'column' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                        <h3 style={{ margin: 0, fontWeight: '800', fontSize: '16px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                            <Clock size={18} color=\"#8b5cf6\" /> My Active Units\r\n                        </h3>\r\n                        <button onClick={() => navigate('/job-cards')} style={{ background: 'none', border: 'none', color: '#94a3b8', fontSize: '11px', cursor: 'pointer', fontWeight: '700' }}>TRACKING</button>\r\n                    </div>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                        {stats.activeJobs.map(job => (\r\n                            <div key={job.id} onClick={() => navigate(`/job-cards/${job.id}`)} style={rowStyle}>\r\n                                <div>\r\n                                    <div style={{ fontWeight: '700', color: '#fff', fontSize: '14px' }}>{job.job_card_number}</div>\r\n                                    <div style={{ fontSize: '11px', color: '#94a3b8' }}>{job.brand} {job.model}</div>\r\n                                </div>\r\n                                <div style={{ textAlign: 'right' }}>\r\n                                    <div style={{\r\n                                        fontSize: '10px',\r\n                                        fontWeight: '900',\r\n                                        color: '#fff',\r\n                                        background: 'rgba(255,255,255,0.05)',\r\n                                        padding: '4px 8px',\r\n                                        borderRadius: '6px'\r\n                                    }}>\r\n                                        {job.status.split(':')[1] || job.status}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </GlassCard>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst MetricCard = ({ icon: Icon, label, value, color }) => (\r\n    <GlassCard style={{ padding: '20px', borderLeft: `4px solid ${color}` }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n            <div style={{ padding: '10px', background: `${color}15`, borderRadius: '10px', color: color }}>\r\n                <Icon size={18} />\r\n            </div>\r\n            <div>\r\n                <div style={{ fontSize: '10px', color: '#94a3b8', fontWeight: '700', textTransform: 'uppercase' }}>{label}</div>\r\n                <div style={{ fontSize: '20px', fontWeight: '900', color: '#fff' }}>{value}</div>\r\n            </div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nconst rowStyle = {\r\n    padding: '12px',\r\n    background: 'rgba(255,255,255,0.02)',\r\n    borderRadius: '10px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease',\r\n    border: '1px solid transparent'\r\n};\r\n\r\nconst actionBtnStyle = {\r\n    background: '#b08d57',\r\n    color: '#000',\r\n    border: 'none',\r\n    padding: '4px 10px',\r\n    borderRadius: '6px',\r\n    fontSize: '9px',\r\n    fontWeight: '900',\r\n    marginTop: '5px',\r\n    cursor: 'pointer'\r\n};\r\n\r\nexport default AdvisorDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\dashboard\\AnalyticsDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":205,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":205,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[10072,10084],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    TrendingUp, Package, Users, Activity,\n    ArrowUpRight, ArrowDownRight, Calendar,\n    Clock, CheckCircle, AlertCircle\n} from 'lucide-react';\nimport {\n    LineChart, Line, XAxis, YAxis, CartesianGrid,\n    Tooltip, ResponsiveContainer, AreaChart, Area,\n    BarChart, Bar, PieChart, Pie, Cell, Legend\n} from 'recharts';\n\nconst COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\n\nconst AnalyticsDashboard = () => {\n    const [stats, setStats] = useState(null);\n    const [chartData, setChartData] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    const fetchData = async () => {\n        try {\n            const [statsRes, chartRes] = await Promise.all([\n                api.get('/api/dashboard/api/stats/'),\n                api.get('/api/dashboard/workshop-diary/chart_data/')\n            ]);\n            setStats(statsRes.data);\n            setChartData(chartRes.data);\n        } catch (err) {\n            console.error('Error fetching dashboard data', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (loading) return <div style={{ padding: '100px', textAlign: 'center', color: '#fff' }}>Loading Intelligence...</div>;\n\n    const statusData = [\n        { name: 'Reception', value: stats?.reception_count || 0 },\n        { name: 'WIP', value: stats?.wip_count || 0 },\n        { name: 'Active', value: stats?.active_jobs || 0 },\n    ];\n\n    return (\n        <div style={{ padding: '30px' }}>\n            <header style={{ marginBottom: '40px' }}>\n                <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px' }}>EXECUTIVE INSIGHTS</div>\n                <h1 style={{ margin: '5px 0 0 0', fontSize: '2.2rem', fontWeight: '900', color: '#fff', fontFamily: 'Outfit, sans-serif' }}>Business Intelligence</h1>\n            </header>\n\n            {/* KPI Cards */}\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '25px', marginBottom: '30px' }}>\n                <KPICard\n                    label=\"Monthly Revenue\"\n                    value={`AED ${(stats?.monthly_revenue || 0).toLocaleString()}`}\n                    trend=\"+12.5%\"\n                    icon={TrendingUp}\n                    color=\"#10b981\"\n                />\n                <KPICard\n                    label=\"Active Jobs\"\n                    value={stats?.active_jobs || 0}\n                    trend=\"+3\"\n                    icon={Package}\n                    color=\"#3b82f6\"\n                />\n                <KPICard\n                    label=\"Today's Bookings\"\n                    value={stats?.todays_bookings || 0}\n                    trend=\"New\"\n                    icon={Calendar}\n                    color=\"#f59e0b\"\n                />\n                <KPICard\n                    label=\"New Leads\"\n                    value={stats?.new_leads || 0}\n                    trend=\"+5\"\n                    icon={Users}\n                    color=\"#8b5cf6\"\n                />\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '30px', marginBottom: '30px' }}>\n                {/* Revenue Trend */}\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={cardTitleStyle}>Revenue Performance (Last 30 Days)</h3>\n                    <div style={{ height: '350px', width: '100%' }}>\n                        <ResponsiveContainer>\n                            <AreaChart data={chartData}>\n                                <defs>\n                                    <linearGradient id=\"colorRev\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                        <stop offset=\"5%\" stopColor=\"#b08d57\" stopOpacity={0.3} />\n                                        <stop offset=\"95%\" stopColor=\"#b08d57\" stopOpacity={0} />\n                                    </linearGradient>\n                                </defs>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" />\n                                <XAxis dataKey=\"date\" stroke=\"#64748b\" fontSize={10} tickFormatter={(str) => str.split('-').slice(1).join('/')} />\n                                <YAxis stroke=\"#64748b\" fontSize={10} />\n                                <Tooltip\n                                    contentStyle={{ background: '#000', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '10px' }}\n                                    itemStyle={{ color: '#b08d57' }}\n                                />\n                                <Area type=\"monotone\" dataKey=\"revenue\" stroke=\"#b08d57\" strokeWidth={3} fillOpacity={1} fill=\"url(#colorRev)\" />\n                            </AreaChart>\n                        </ResponsiveContainer>\n                    </div>\n                </GlassCard>\n\n                {/* Status Distribution */}\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={cardTitleStyle}>Workshop Throughput</h3>\n                    <div style={{ height: '350px', width: '100%' }}>\n                        <ResponsiveContainer>\n                            <PieChart>\n                                <Pie\n                                    data={statusData}\n                                    cx=\"50%\"\n                                    cy=\"50%\"\n                                    innerRadius={60}\n                                    outerRadius={100}\n                                    paddingAngle={5}\n                                    dataKey=\"value\"\n                                >\n                                    {statusData.map((entry, index) => (\n                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                                    ))}\n                                </Pie>\n                                <Tooltip\n                                    contentStyle={{ background: '#000', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '10px' }}\n                                />\n                                <Legend verticalAlign=\"bottom\" height={36} />\n                            </PieChart>\n                        </ResponsiveContainer>\n                    </div>\n                </GlassCard>\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px' }}>\n                {/* Volume Stats */}\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={cardTitleStyle}>Job Volume Analysis</h3>\n                    <div style={{ height: '300px', width: '100%' }}>\n                        <ResponsiveContainer>\n                            <BarChart data={chartData}>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" />\n                                <XAxis dataKey=\"date\" stroke=\"#64748b\" fontSize={10} tickFormatter={(str) => str.split('-').slice(1).join('/')} />\n                                <YAxis stroke=\"#64748b\" fontSize={10} />\n                                <Tooltip\n                                    contentStyle={{ background: '#000', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '10px' }}\n                                />\n                                <Bar dataKey=\"new_jobs_count\" name=\"New Jobs\" fill=\"#3b82f6\" radius={[4, 4, 0, 0]} />\n                                <Bar dataKey=\"closed_jobs_count\" name=\"Closed Jobs\" fill=\"#10b981\" radius={[4, 4, 0, 0]} />\n                            </BarChart>\n                        </ResponsiveContainer>\n                    </div>\n                </GlassCard>\n\n                {/* Recent Activity Mini-Feed */}\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={cardTitleStyle}>Recent Activity</h3>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\n                        {stats?.recent_activity?.map((activity, idx) => (\n                            <div key={idx} style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: '15px',\n                                padding: '12px',\n                                background: 'rgba(255,255,255,0.02)',\n                                borderRadius: '12px',\n                                border: '1px solid rgba(255,255,255,0.05)'\n                            }}>\n                                <div style={{\n                                    padding: '8px',\n                                    borderRadius: '50%',\n                                    background: 'rgba(176,141,87,0.1)',\n                                    color: '#b08d57'\n                                }}>\n                                    <Activity size={16} />\n                                </div>\n                                <div style={{ flex: 1 }}>\n                                    <div style={{ fontSize: '13px', fontWeight: '700', color: '#fff' }}>\n                                        {activity.customer_name} - {activity.job_card_number}\n                                    </div>\n                                    <div style={{ fontSize: '11px', color: '#64748b' }}>\n                                        Status updated to {activity.status}\n                                    </div>\n                                </div>\n                                <div style={{ fontSize: '10px', color: '#64748b' }}>\n                                    {new Date(activity.updated_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </GlassCard>\n            </div>\n        </div>\n    );\n};\n\nconst KPICard = ({ label, value, trend, icon: Icon, color }) => (\n    <GlassCard style={{ padding: '25px', position: 'relative', overflow: 'hidden' }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '15px' }}>\n            <div style={{ padding: '10px', borderRadius: '12px', background: `${color}15`, color: color }}>\n                <Icon size={20} />\n            </div>\n            <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '4px',\n                fontSize: '11px',\n                fontWeight: '800',\n                color: trend.startsWith('+') ? '#10b981' : '#f59e0b',\n                background: trend.startsWith('+') ? '#10b98115' : '#f59e0b15',\n                padding: '2px 8px',\n                borderRadius: '20px'\n            }}>\n                {trend.startsWith('+') ? <ArrowUpRight size={12} /> : null} {trend}\n            </div>\n        </div>\n        <div>\n            <div style={{ fontSize: '12px', color: '#64748b', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\n            <div style={{ fontSize: '1.8rem', fontWeight: '900', color: '#fff', marginTop: '5px' }}>{value}</div>\n        </div>\n        {/* Subtle background glow */}\n        <div style={{\n            position: 'absolute',\n            bottom: '-20px',\n            right: '-20px',\n            width: '80px',\n            height: '80px',\n            borderRadius: '50%',\n            background: color,\n            filter: 'blur(50px)',\n            opacity: 0.1,\n            zIndex: 0\n        }} />\n    </GlassCard>\n);\n\nconst cardTitleStyle = {\n    fontSize: '11px',\n    textTransform: 'uppercase',\n    color: '#b08d57',\n    marginBottom: '25px',\n    fontWeight: '800',\n    letterSpacing: '1px'\n};\n\nexport default AnalyticsDashboard;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\dashboard\\EmployeeDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[53,92],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchTodayAttendance` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  19 |\n  20 |     useEffect(() => {\n> 21 |         fetchTodayAttendance();\n     |         ^^^^^^^^^^^^^^^^^^^^ `fetchTodayAttendance` accessed before it is declared\n  22 |         const timer = setInterval(() => setCurrentTime(new Date()), 1000);\n  23 |         return () => clearInterval(timer);\n  24 |     }, []);\n\n  24 |     }, []);\n  25 |\n> 26 |     const fetchTodayAttendance = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 27 |         try {\n     | ^^^^^^^^^^^^^\n> 28 |             const res = await api.get('/forms/attendance/api/today/');\n     | ^^^^^^^^^^^^^\n> 29 |             setAttendance(res.data);\n     | ^^^^^^^^^^^^^\n> 30 |         } catch (err) {\n     | ^^^^^^^^^^^^^\n> 31 |             // No record for today - that's fine\n     | ^^^^^^^^^^^^^\n> 32 |             setAttendance(null);\n     | ^^^^^^^^^^^^^\n> 33 |         }\n     | ^^^^^^^^^^^^^\n> 34 |     };\n     | ^^^^^^^ `fetchTodayAttendance` is declared here\n  35 |\n  36 |     const handleClockIn = async () => {\n  37 |         setLoading(true);","line":21,"column":9,"nodeType":null,"endLine":21,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":30,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Clock, Calendar, LogOut, User, ChevronRight } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport api from '../../api/axios';\r\n\r\n/**\r\n * Employee Dashboard\r\n * Limited view for regular employees - only Calendar + Clock In\r\n * All other features require permission from Ruchika (MD/Owner)\r\n */\r\nconst EmployeeDashboard = () => {\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [attendance, setAttendance] = useState(null);\r\n    const [currentTime, setCurrentTime] = useState(new Date());\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchTodayAttendance();\r\n        const timer = setInterval(() => setCurrentTime(new Date()), 1000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    const fetchTodayAttendance = async () => {\r\n        try {\r\n            const res = await api.get('/forms/attendance/api/today/');\r\n            setAttendance(res.data);\r\n        } catch (err) {\r\n            // No record for today - that's fine\r\n            setAttendance(null);\r\n        }\r\n    };\r\n\r\n    const handleClockIn = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.post('/forms/attendance/api/check-in/');\r\n            setAttendance(res.data.data || res.data);\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Clock in failed');\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleClockOut = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.post('/forms/attendance/api/check-out/');\r\n            setAttendance(res.data.data || res.data);\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Clock out failed');\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const formatTime = (date) => {\r\n        return date.toLocaleTimeString('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            second: '2-digit',\r\n            hour12: true\r\n        });\r\n    };\r\n\r\n    const formatDate = (date) => {\r\n        return date.toLocaleDateString('en-US', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                style={styles.card}\r\n            >\r\n                {/* Header */}\r\n                <div style={styles.header}>\r\n                    <div style={styles.userInfo}>\r\n                        <div style={styles.avatar}>\r\n                            {user?.username?.[0]?.toUpperCase() || 'E'}\r\n                        </div>\r\n                        <div>\r\n                            <h2 style={styles.userName}>{user?.full_name || user?.username || 'Employee'}</h2>\r\n                            <p style={styles.userRole}>Elite Shine Team</p>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={logout} style={styles.logoutBtn}>\r\n                        <LogOut size={18} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Time Display */}\r\n                <div style={styles.timeSection}>\r\n                    <div style={styles.currentTime}>{formatTime(currentTime)}</div>\r\n                    <div style={styles.currentDate}>{formatDate(currentTime)}</div>\r\n                </div>\r\n\r\n                {/* Clock In/Out Section */}\r\n                <div style={styles.attendanceSection}>\r\n                    {!attendance?.check_in_time ? (\r\n                        <motion.button\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            onClick={handleClockIn}\r\n                            disabled={loading}\r\n                            style={styles.clockInBtn}\r\n                        >\r\n                            <Clock size={24} />\r\n                            {loading ? 'Processing...' : 'CLOCK IN'}\r\n                        </motion.button>\r\n                    ) : !attendance?.check_out_time ? (\r\n                        <motion.button\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            onClick={handleClockOut}\r\n                            disabled={loading}\r\n                            style={styles.clockOutBtn}\r\n                        >\r\n                            <Clock size={24} />\r\n                            {loading ? 'Processing...' : 'CLOCK OUT'}\r\n                        </motion.button>\r\n                    ) : (\r\n                        <div style={styles.completedShift}>\r\n                            <div style={styles.checkmark}></div>\r\n                            <div>Shift Completed</div>\r\n                            <div style={styles.hoursWorked}>\r\n                                {attendance.total_hours}h worked\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {attendance?.check_in_time && (\r\n                        <div style={styles.shiftInfo}>\r\n                            <div style={styles.shiftRow}>\r\n                                <span>Clock In:</span>\r\n                                <span style={styles.shiftTime}>{attendance.check_in_time}</span>\r\n                            </div>\r\n                            {attendance.check_out_time && (\r\n                                <div style={styles.shiftRow}>\r\n                                    <span>Clock Out:</span>\r\n                                    <span style={styles.shiftTime}>{attendance.check_out_time}</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Quick Links */}\r\n                <div style={styles.quickLinks}>\r\n                    <motion.div\r\n                        whileHover={{ scale: 1.02 }}\r\n                        onClick={() => navigate('/scheduling')}\r\n                        style={styles.linkCard}\r\n                    >\r\n                        <Calendar size={20} color=\"#b08d57\" />\r\n                        <span>View Calendar</span>\r\n                        <ChevronRight size={16} color=\"#64748b\" />\r\n                    </motion.div>\r\n                    <motion.div\r\n                        whileHover={{ scale: 1.02 }}\r\n                        onClick={() => navigate('/portfolio')}\r\n                        style={styles.linkCard}\r\n                    >\r\n                        <User size={20} color=\"#b08d57\" />\r\n                        <span>My Profile</span>\r\n                        <ChevronRight size={16} color=\"#64748b\" />\r\n                    </motion.div>\r\n                </div>\r\n\r\n                {/* Restricted Access Notice */}\r\n                <div style={styles.restrictedNotice}>\r\n                    <span></span>\r\n                    <span>Other features require permission from MD</span>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    container: {\r\n        minHeight: '100vh',\r\n        background: 'linear-gradient(180deg, #0a0a0a 0%, #1a1a2e 100%)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '20px',\r\n        fontFamily: 'Outfit, sans-serif',\r\n    },\r\n    card: {\r\n        width: '100%',\r\n        maxWidth: '420px',\r\n        background: '#111',\r\n        borderRadius: '30px',\r\n        padding: '30px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '30px',\r\n    },\r\n    userInfo: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '15px',\r\n    },\r\n    avatar: {\r\n        width: '50px',\r\n        height: '50px',\r\n        borderRadius: '15px',\r\n        background: 'linear-gradient(135deg, #b08d57, #8b6b3d)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: '#fff',\r\n        fontWeight: '800',\r\n        fontSize: '20px',\r\n    },\r\n    userName: {\r\n        margin: 0,\r\n        color: '#fff',\r\n        fontSize: '18px',\r\n        fontWeight: '700',\r\n    },\r\n    userRole: {\r\n        margin: 0,\r\n        color: '#64748b',\r\n        fontSize: '12px',\r\n    },\r\n    logoutBtn: {\r\n        background: 'rgba(255,255,255,0.05)',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        borderRadius: '12px',\r\n        padding: '10px',\r\n        color: '#94a3b8',\r\n        cursor: 'pointer',\r\n    },\r\n    timeSection: {\r\n        textAlign: 'center',\r\n        marginBottom: '30px',\r\n    },\r\n    currentTime: {\r\n        fontSize: '48px',\r\n        fontWeight: '900',\r\n        color: '#fff',\r\n        letterSpacing: '-2px',\r\n    },\r\n    currentDate: {\r\n        fontSize: '14px',\r\n        color: '#64748b',\r\n        marginTop: '5px',\r\n    },\r\n    attendanceSection: {\r\n        background: '#000',\r\n        borderRadius: '20px',\r\n        padding: '25px',\r\n        marginBottom: '20px',\r\n    },\r\n    clockInBtn: {\r\n        width: '100%',\r\n        padding: '20px',\r\n        borderRadius: '15px',\r\n        border: 'none',\r\n        background: 'linear-gradient(135deg, #10b981, #059669)',\r\n        color: '#fff',\r\n        fontSize: '16px',\r\n        fontWeight: '800',\r\n        letterSpacing: '2px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '12px',\r\n        cursor: 'pointer',\r\n    },\r\n    clockOutBtn: {\r\n        width: '100%',\r\n        padding: '20px',\r\n        borderRadius: '15px',\r\n        border: 'none',\r\n        background: 'linear-gradient(135deg, #ef4444, #dc2626)',\r\n        color: '#fff',\r\n        fontSize: '16px',\r\n        fontWeight: '800',\r\n        letterSpacing: '2px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '12px',\r\n        cursor: 'pointer',\r\n    },\r\n    completedShift: {\r\n        textAlign: 'center',\r\n        color: '#10b981',\r\n    },\r\n    checkmark: {\r\n        fontSize: '40px',\r\n        marginBottom: '10px',\r\n    },\r\n    hoursWorked: {\r\n        fontSize: '24px',\r\n        fontWeight: '700',\r\n        marginTop: '10px',\r\n    },\r\n    shiftInfo: {\r\n        marginTop: '20px',\r\n        borderTop: '1px solid rgba(255,255,255,0.1)',\r\n        paddingTop: '20px',\r\n    },\r\n    shiftRow: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        color: '#94a3b8',\r\n        fontSize: '13px',\r\n        marginBottom: '8px',\r\n    },\r\n    shiftTime: {\r\n        color: '#fff',\r\n        fontWeight: '600',\r\n    },\r\n    quickLinks: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '10px',\r\n        marginBottom: '20px',\r\n    },\r\n    linkCard: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '15px',\r\n        padding: '15px 20px',\r\n        background: '#000',\r\n        borderRadius: '15px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        color: '#fff',\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        cursor: 'pointer',\r\n    },\r\n    restrictedNotice: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '8px',\r\n        padding: '12px',\r\n        background: 'rgba(176, 141, 87, 0.1)',\r\n        borderRadius: '10px',\r\n        color: '#b08d57',\r\n        fontSize: '12px',\r\n    },\r\n};\r\n\r\nexport default EmployeeDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\dashboard\\SalesDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":180,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[10526,10537],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    TrendingUp, Users, Target, Award,\n    BarChart2, ArrowUpRight, DollarSign, Calendar\n} from 'lucide-react';\nimport {\n    AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer\n} from 'recharts';\n\nconst SalesDashboard = () => {\n    const [loading, setLoading] = useState(true);\n    const [data, setData] = useState({\n        pipeline: { total_leads: 0, active_leads: 0, new_this_month: 0, value: 0 },\n        kpi: { conversion_rate: 0, target_revenue: 0 },\n        leaderboard: [],\n        chart_data: []\n    });\n\n    useEffect(() => {\n        fetchSalesData();\n    }, []);\n\n    const fetchSalesData = async () => {\n        try {\n            const res = await api.get('/api/dashboard/api/sales/');\n            setData(res.data);\n        } catch (err) {\n            console.error(\"Failed to fetch sales analytics\", err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (loading) return <div style={{ padding: '40px', color: '#fff' }}>Loading Intelligence Engine...</div>;\n\n    return (\n        <div style={{ padding: '30px', maxWidth: '1600px', margin: '0 auto' }}>\n            <header style={{ marginBottom: '40px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#ec4899', fontWeight: '800', letterSpacing: '2px' }}>PERFORMANCE INTELLIGENCE</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Sales Command</h1>\n                </div>\n                <div style={{ textAlign: 'right' }}>\n                    <div style={{ color: '#94a3b8', fontSize: '12px', fontWeight: '600' }}>CURRENT TARGET</div>\n                    <div style={{ color: '#10b981', fontSize: '24px', fontWeight: '800' }}>AED {data.kpi.target_revenue.toLocaleString()}</div>\n                </div>\n            </header>\n\n            {/* KPI GRID */}\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\n                <StatCard\n                    icon={TrendingUp}\n                    label=\"Conversion Rate\"\n                    value={`${data.kpi.conversion_rate}%`}\n                    sub=\"Lead to Job Card\"\n                    color=\"#10b981\"\n                />\n                <StatCard\n                    icon={Users}\n                    label=\"Active Pipeline\"\n                    value={data.pipeline.active_leads}\n                    sub={`${data.pipeline.new_this_month} new this month`}\n                    color=\"#3b82f6\"\n                />\n                <StatCard\n                    icon={Target}\n                    label=\"Pipeline Value\"\n                    value={`AED ${data.pipeline.value.toLocaleString()}`}\n                    sub=\"Estimated Potential\"\n                    color=\"#f59e0b\"\n                />\n                <StatCard\n                    icon={Award}\n                    label=\"Top Performer\"\n                    value={data.leaderboard[0]?.name || 'N/A'}\n                    sub={data.leaderboard[0]?.revenue ? `AED ${data.leaderboard[0].revenue.toLocaleString()}` : 'No Data'}\n                    color=\"#ec4899\"\n                />\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '25px' }}>\n\n                {/* REVENUE TREND CHART */}\n                <GlassCard style={{ padding: '30px', display: 'flex', flexDirection: 'column' }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>\n                        <h3 style={{ margin: 0, fontWeight: '800', fontSize: '18px' }}>Revenue & Volume Trend</h3>\n                        <div style={{ display: 'flex', gap: '15px' }}>\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '5px', fontSize: '11px', color: '#94a3b8' }}>\n                                <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#8b5cf6' }} /> Revenue\n                            </div>\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '5px', fontSize: '11px', color: '#94a3b8' }}>\n                                <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#ec4899' }} /> Leads\n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{ flex: 1, minHeight: '300px' }}>\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <AreaChart data={data.chart_data}>\n                                <defs>\n                                    <linearGradient id=\"colorRev\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                        <stop offset=\"5%\" stopColor=\"#8b5cf6\" stopOpacity={0.3} />\n                                        <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0} />\n                                    </linearGradient>\n                                    <linearGradient id=\"colorLeads\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                        <stop offset=\"5%\" stopColor=\"#ec4899\" stopOpacity={0.3} />\n                                        <stop offset=\"95%\" stopColor=\"#ec4899\" stopOpacity={0} />\n                                    </linearGradient>\n                                </defs>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" vertical={false} />\n                                <XAxis dataKey=\"name\" stroke=\"#64748b\" fontSize={11} tickLine={false} axisLine={false} />\n                                <YAxis yAxisId=\"left\" stroke=\"#64748b\" fontSize={11} tickLine={false} axisLine={false} tickFormatter={val => `AED ${val / 1000}k`} />\n                                <YAxis yAxisId=\"right\" orientation=\"right\" stroke=\"#64748b\" fontSize={11} tickLine={false} axisLine={false} />\n                                <Tooltip\n                                    contentStyle={{ background: '#0f172a', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '10px' }}\n                                    itemStyle={{ fontSize: '12px' }}\n                                />\n                                <Area yAxisId=\"left\" type=\"monotone\" dataKey=\"revenue\" stroke=\"#8b5cf6\" strokeWidth={3} fillOpacity={1} fill=\"url(#colorRev)\" />\n                                <Area yAxisId=\"right\" type=\"monotone\" dataKey=\"leads\" stroke=\"#ec4899\" strokeWidth={3} fillOpacity={1} fill=\"url(#colorLeads)\" />\n                            </AreaChart>\n                        </ResponsiveContainer>\n                    </div>\n                </GlassCard>\n\n                {/* LEADERBOARD */}\n                <GlassCard style={{ padding: '0', overflow: 'hidden', display: 'flex', flexDirection: 'column' }}>\n                    <div style={{ padding: '25px', borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\n                        <h3 style={{ margin: 0, fontWeight: '800', fontSize: '18px' }}>Advisor Performance</h3>\n                    </div>\n                    <div style={{ flex: 1, overflowY: 'auto' }}>\n                        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                            <thead>\n                                <tr style={{ background: 'rgba(255,255,255,0.02)', textAlign: 'left', fontSize: '11px', color: '#94a3b8', textTransform: 'uppercase' }}>\n                                    <th style={{ padding: '15px 25px', fontWeight: '700' }}>Advisor</th>\n                                    <th style={{ padding: '15px', fontWeight: '700' }}>Conv. %</th>\n                                    <th style={{ padding: '15px 25px', fontWeight: '700', textAlign: 'right' }}>Revenue</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {data.leaderboard.map((advisor, idx) => (\n                                    <tr key={idx} style={{ borderBottom: '1px solid rgba(255,255,255,0.02)', fontSize: '13px' }}>\n                                        <td style={{ padding: '15px 25px', fontWeight: '600', color: '#fff', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                                            <div style={{\n                                                width: '24px', height: '24px', borderRadius: '50%',\n                                                background: idx === 0 ? '#fbbf24' : idx === 1 ? '#94a3b8' : idx === 2 ? '#b45309' : 'rgba(255,255,255,0.1)',\n                                                color: idx < 3 ? '#000' : '#fff',\n                                                display: 'flex', alignItems: 'center', justifyContent: 'center',\n                                                fontSize: '10px', fontWeight: '900'\n                                            }}>\n                                                {idx + 1}\n                                            </div>\n                                            {advisor.name}\n                                        </td>\n                                        <td style={{ padding: '15px', color: advisor.conversion_rate > 50 ? '#10b981' : '#f59e0b' }}>\n                                            {advisor.conversion_rate}%\n                                        </td>\n                                        <td style={{ padding: '15px 25px', textAlign: 'right', fontWeight: '700', color: '#fff' }}>\n                                            {(advisor.revenue || 0).toLocaleString()}\n                                        </td>\n                                    </tr>\n                                ))}\n                                {data.leaderboard.length === 0 && (\n                                    <tr>\n                                        <td colSpan=\"3\" style={{ padding: '30px', textAlign: 'center', color: '#64748b' }}>\n                                            No performance data available.\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                        </table>\n                    </div>\n                </GlassCard>\n            </div>\n        </div>\n    );\n};\n\nconst StatCard = ({ icon: Icon, label, value, sub, color }) => (\n    <GlassCard style={{ padding: '25px', position: 'relative', overflow: 'hidden' }}>\n        <div style={{ position: 'absolute', top: -10, right: -10, opacity: 0.1 }}>\n            <Icon size={80} color={color} />\n        </div>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '20px' }}>\n            <div style={{ padding: '12px', background: `${color}15`, borderRadius: '12px', color: color }}>\n                <Icon size={22} />\n            </div>\n        </div>\n        <div style={{ fontSize: '11px', color: '#94a3b8', fontWeight: '700', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\n        <div style={{ fontSize: '28px', fontWeight: '900', color: '#fff', marginTop: '5px', fontFamily: 'Outfit, sans-serif' }}>{value}</div>\n        <div style={{ fontSize: '11px', color: color, marginTop: '8px', fontWeight: '500' }}>{sub}</div>\n    </GlassCard>\n);\n\nexport default SalesDashboard;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\dashboard\\WorkshopDiary.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":132,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[7035,7047],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    Calendar, Download, Package, CheckCircle,\n    TrendingUp, FileText, RefreshCw, AlertCircle, Printer\n} from 'lucide-react';\nimport PrintHeader from '../../components/PrintHeader';\n\nconst WorkshopDiary = () => {\n    const [history, setHistory] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [isCapturing, setIsCapturing] = useState(false);\n\n    useEffect(() => {\n        fetchHistory();\n    }, []);\n\n    const fetchHistory = async () => {\n        try {\n            const res = await api.get('/api/dashboard/workshop-diary/');\n            const data = Array.isArray(res.data) ? res.data : res.data.results || [];\n            setHistory(data);\n        } catch (err) {\n            console.error('Error fetching diary', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const captureToday = async () => {\n        setIsCapturing(true);\n        try {\n            await api.post('/api/dashboard/workshop-diary/capture_snapshot/');\n            await fetchHistory();\n        } catch (err) {\n            console.error('Snapshot failed', err);\n        } finally {\n            setIsCapturing(false);\n        }\n    };\n\n    const exportPDF = () => {\n        window.open(`${api.defaults.baseURL}/forms/utils/generate-pdf/WorkshopDiary/0/`, '_blank');\n    };\n\n    if (loading) return <div style={{ color: '#fff', padding: '40px' }}>Analyzing Daily Snapshots...</div>;\n\n    return (\n        <div style={{ padding: '30px' }}>\n            <PrintHeader title=\"Workshop Diary\" />\n            <header style={{ marginBottom: '40px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px' }}>OPERATIONAL NEXUS</div>\n                    <h1 style={{ margin: '5px 0 0 0', fontSize: '2.5rem', fontWeight: '900', color: '#fff', fontFamily: 'Outfit, sans-serif' }}>Workshop Diary</h1>\n                </div>\n                <div style={{ display: 'flex', gap: '15px' }}>\n                    <button\n                        onClick={captureToday}\n                        disabled={isCapturing}\n                        className=\"btn-primary\"\n                        style={{ display: 'flex', alignItems: 'center', gap: '10px', background: isCapturing ? '#334155' : undefined }}\n                    >\n                        <RefreshCw size={18} className={isCapturing ? 'spin' : ''} /> {isCapturing ? 'Capturing...' : 'Capture Snapshot'}\n                    </button>\n                    <button onClick={() => window.print()} className=\"glass-card\" style={{ display: 'flex', alignItems: 'center', gap: '10px', background: 'rgba(255,255,255,0.05)', color: '#fff', padding: '10px 20px', border: '1px solid rgba(255,255,255,0.1)', cursor: 'pointer' }}>\n                        <Printer size={18} /> Print Report\n                    </button>\n                    <button onClick={exportPDF} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '10px', background: 'rgba(255,255,255,0.1)', color: '#fff' }}>\n                        <Download size={18} /> Export PDF\n                    </button>\n                </div>\n            </header>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\n                <MetricCard label=\"Today's Bookings\" value={history[0]?.new_bookings_count || 0} icon={Calendar} color=\"#3b82f6\" />\n                <MetricCard label=\"Jobs Received\" value={history[0]?.new_jobs_count || 0} icon={Package} color=\"#f59e0b\" />\n                <MetricCard label=\"Jobs Closed\" value={history[0]?.closed_jobs_count || 0} icon={CheckCircle} color=\"#10b981\" />\n                <MetricCard label=\"Sales Revenue\" value={`AED ${(history[0]?.revenue || 0).toLocaleString()}`} icon={TrendingUp} color=\"#ec4899\" />\n            </div>\n\n            <GlassCard style={{ padding: '0', overflow: 'hidden' }}>\n                <table style={{ width: '100%', borderCollapse: 'collapse', color: '#fff', fontSize: '14px' }}>\n                    <thead>\n                        <tr style={{ background: 'rgba(255,255,255,0.03)', textAlign: 'left' }}>\n                            <th style={{ padding: '20px' }}>Date</th>\n                            <th style={{ padding: '20px' }}>New Bookings</th>\n                            <th style={{ padding: '20px' }}>Jobs Received</th>\n                            <th style={{ padding: '20px' }}>Jobs Closed</th>\n                            <th style={{ padding: '20px' }}>Daily Revenue</th>\n                            <th style={{ padding: '20px' }}>Audit Status</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {history.map((entry) => (\n                            <tr key={entry.id} style={{ borderBottom: '1px solid rgba(255,255,255,0.05)', transition: 'background 0.2s' }}>\n                                <td style={{ padding: '20px', fontWeight: '700', color: '#b08d57' }}>{entry.date}</td>\n                                <td style={{ padding: '20px' }}>{entry.new_bookings_count}</td>\n                                <td style={{ padding: '20px' }}>{entry.new_jobs_count}</td>\n                                <td style={{ padding: '20px' }}>{entry.closed_jobs_count}</td>\n                                <td style={{ padding: '20px', fontWeight: '800' }}>AED {parseFloat(entry.revenue || 0).toLocaleString()}</td>\n                                <td style={{ padding: '20px' }}>\n                                    <span style={{\n                                        padding: '5px 12px',\n                                        borderRadius: '20px',\n                                        fontSize: '11px',\n                                        background: 'rgba(16, 185, 129, 0.1)',\n                                        color: '#10b981',\n                                        border: '1px solid rgba(16, 185, 129, 0.2)'\n                                    }}>Verified</span>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n                {history.length === 0 && (\n                    <div style={{ padding: '60px', textAlign: 'center', color: '#64748b' }}>\n                        <AlertCircle size={40} style={{ margin: '0 auto 15px auto', opacity: 0.5 }} />\n                        <p>No operational snapshots captured yet.</p>\n                    </div>\n                )}\n            </GlassCard>\n\n            <style>{`\n                .spin { animation: rotate 1s linear infinite; }\n                @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n            `}</style>\n        </div>\n    );\n};\n\nconst MetricCard = ({ label, value, icon: Icon, color }) => (\n    <GlassCard style={{ padding: '25px', display: 'flex', alignItems: 'center', gap: '20px' }}>\n        <div style={{ width: '50px', height: '50px', borderRadius: '14px', background: `${color}15`, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n            <Icon size={24} color={color} />\n        </div>\n        <div>\n            <div style={{ fontSize: '12px', color: '#64748b', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\n            <div style={{ fontSize: '24px', fontWeight: '900', color: '#fff' }}>{value}</div>\n        </div>\n    </GlassCard>\n);\n\nexport default WorkshopDiary;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\elitepro\\EliteProDashboard.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchDashboardData` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  18 |\n  19 |     useEffect(() => {\n> 20 |         fetchDashboardData();\n     |         ^^^^^^^^^^^^^^^^^^ `fetchDashboardData` accessed before it is declared\n  21 |     }, []);\n  22 |\n  23 |     const fetchDashboardData = async () => {\n\n  21 |     }, []);\n  22 |\n> 23 |     const fetchDashboardData = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 24 |         try {\n     | ^^^^^^^^^^^^^\n> 25 |             const [shipmentsRes, productsRes, ordersRes] = await Promise.all([\n     \n     | ^^^^^^^^^^^^^\n> 44 |         }\n     | ^^^^^^^^^^^^^\n> 45 |     };\n     | ^^^^^^^ `fetchDashboardData` is declared here\n  46 |\n  47 |     const StatCard = ({ icon: Icon, label, value, color, trend }) => (\n  48 |         <div className=\"stat-card\">","line":20,"column":9,"nodeType":null,"endLine":20,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":47,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[1714,1725],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport { Package, TrendingUp, DollarSign, ShoppingCart, Ship, AlertTriangle } from 'lucide-react';\nimport './EliteProDashboard.css';\n\nconst API_BASE = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000';\n\nconst EliteProDashboard = () => {\n    const [stats, setStats] = useState({\n        activeShipments: 0,\n        totalInventoryValue: 0,\n        pendingOrders: 0,\n        monthlyRevenue: 0,\n    });\n    const [shipments, setShipments] = useState([]);\n    const [lowStockProducts, setLowStockProducts] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchDashboardData();\n    }, []);\n\n    const fetchDashboardData = async () => {\n        try {\n            const [shipmentsRes, productsRes, ordersRes] = await Promise.all([\n                api.get(`${API_BASE}/logistics/api/shipments/in-transit/`),\n                api.get(`${API_BASE}/logistics/api/products/low-stock/`),\n                api.get(`${API_BASE}/logistics/api/sales-orders/pending-payment/`)\n            ]);\n\n            setShipments(shipmentsRes.data.slice(0, 5));\n            setLowStockProducts(productsRes.data);\n\n            setStats({\n                activeShipments: shipmentsRes.data.length,\n                totalInventoryValue: 250000, // Calculate from products\n                pendingOrders: ordersRes.data.length,\n                monthlyRevenue: 450000, // Calculate from sales\n            });\n            setLoading(false);\n        } catch (error) {\n            console.error('Error fetching dashboard data:', error);\n            setLoading(false);\n        }\n    };\n\n    const StatCard = ({ icon: Icon, label, value, color, trend }) => (\n        <div className=\"stat-card\">\n            <div className=\"stat-icon\" style={{ background: `linear-gradient(135deg, ${color}20, ${color}10)` }}>\n                <Icon size={28} color={color} />\n            </div>\n            <div className=\"stat-content\">\n                <div className=\"stat-label\">{label}</div>\n                <div className=\"stat-value\">{value}</div>\n                {trend && <div className=\"stat-trend\" style={{ color }}>{trend}</div>}\n            </div>\n        </div>\n    );\n\n    if (loading) {\n        return (\n            <div className=\"loading-container\">\n                <div className=\"loading-spinner\"></div>\n                <p>Loading ElitePro Dashboard...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"elitepro-dashboard\">\n            <div className=\"dashboard-header\">\n                <div>\n                    <h1 className=\"page-title\">ElitePro Trading</h1>\n                    <p className=\"page-subtitle\">Import/Export & Logistics Management</p>\n                </div>\n                <div className=\"header-actions\">\n                    <button className=\"btn-gold\">\n                        <Ship size={18} />\n                        New Shipment\n                    </button>\n                    <button className=\"btn-outline\">\n                        <ShoppingCart size={18} />\n                        New Order\n                    </button>\n                </div>\n            </div>\n\n            {/* KPI Cards */}\n            <div className=\"stats-grid\">\n                <StatCard\n                    icon={Ship}\n                    label=\"Active Shipments\"\n                    value={stats.activeShipments}\n                    color=\"#3b82f6\"\n                    trend=\"+2 this week\"\n                />\n                <StatCard\n                    icon={Package}\n                    label=\"Inventory Value\"\n                    value={`AED ${stats.totalInventoryValue.toLocaleString()}`}\n                    color=\"#b08d57\"\n                />\n                <StatCard\n                    icon={ShoppingCart}\n                    label=\"Pending Orders\"\n                    value={stats.pendingOrders}\n                    color=\"#8b5cf6\"\n                    trend=\"+5 new today\"\n                />\n                <StatCard\n                    icon={DollarSign}\n                    label=\"Monthly Revenue\"\n                    value={`AED ${stats.monthlyRevenue.toLocaleString()}`}\n                    color=\"#10b981\"\n                    trend=\"+12% vs last month\"\n                />\n            </div>\n\n            <div className=\"dashboard-grid\">\n                {/* Active Shipments */}\n                <div className=\"dashboard-card\">\n                    <div className=\"card-header\">\n                        <h3>Active Shipments</h3>\n                        <a href=\"/elitepro/shipments\" className=\"view-all-link\">View All </a>\n                    </div>\n                    <div className=\"shipments-list\">\n                        {shipments.length > 0 ? (\n                            shipments.map(shipment => (\n                                <div key={shipment.id} className=\"shipment-item\">\n                                    <div className=\"shipment-info\">\n                                        <div className=\"shipment-number\">{shipment.shipment_number}</div>\n                                        <div className=\"shipment-route\">\n                                            {shipment.origin}  {shipment.destination}\n                                        </div>\n                                    </div>\n                                    <div className=\"shipment-meta\">\n                                        <span className={`status-badge status-${shipment.status.toLowerCase()}`}>\n                                            {shipment.status.replace('_', ' ')}\n                                        </span>\n                                        <span className=\"shipment-cost\">\n                                            AED {shipment.total_logistics_cost.toLocaleString()}\n                                        </span>\n                                    </div>\n                                </div>\n                            ))\n                        ) : (\n                            <div className=\"empty-state\">No active shipments</div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Low Stock Alerts */}\n                <div className=\"dashboard-card\">\n                    <div className=\"card-header\">\n                        <h3>Low Stock Alerts</h3>\n                        <a href=\"/elitepro/inventory\" className=\"view-all-link\">Manage </a>\n                    </div>\n                    <div className=\"alerts-list\">\n                        {lowStockProducts.length > 0 ? (\n                            lowStockProducts.slice(0, 5).map(product => (\n                                <div key={product.id} className=\"alert-item\">\n                                    <AlertTriangle size={18} color=\"#f59e0b\" />\n                                    <div className=\"alert-info\">\n                                        <div className=\"alert-title\">{product.name}</div>\n                                        <div className=\"alert-detail\">\n                                            Stock: {product.current_stock} {product.unit_of_measure}\n                                            (Reorder at: {product.reorder_level})\n                                        </div>\n                                    </div>\n                                </div>\n                            ))\n                        ) : (\n                            <div className=\"empty-state\">All stock levels are healthy </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EliteProDashboard;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\elitepro\\InventoryManagement.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProducts'. Either include it or remove the dependency array.","line":40,"column":8,"nodeType":"ArrayExpression","endLine":40,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProducts, filter]","fix":{"range":[1426,1434],"text":"[fetchProducts, filter]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport { Package, Plus, Search, AlertTriangle, TrendingDown, TrendingUp, Edit2, Archive, X } from 'lucide-react';\nimport './InventoryManagement.css';\n\nconst API_BASE = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000';\n\nconst CATEGORY_OPTIONS = [\n    { value: 'ELECTRONICS', label: 'Electronics' },\n    { value: 'TEXTILES', label: 'Textiles' },\n    { value: 'FOOD', label: 'Food & Beverages' },\n    { value: 'AUTOMOTIVE', label: 'Automotive Parts' },\n    { value: 'MACHINERY', label: 'Machinery' },\n    { value: 'CHEMICALS', label: 'Chemicals' },\n    { value: 'OTHER', label: 'Other' },\n];\n\nconst InventoryManagement = () => {\n    const [products, setProducts] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [filter, setFilter] = useState('all');\n    const [loading, setLoading] = useState(true);\n    const [showModal, setShowModal] = useState(false);\n    const [editingProduct, setEditingProduct] = useState(null);\n    const [formData, setFormData] = useState({\n        sku: '',\n        name: '',\n        category: 'OTHER',\n        description: '',\n        unit_of_measure: 'pcs',\n        current_stock: 0,\n        reorder_level: 0,\n        cost_price: 0,\n        selling_price: 0,\n    });\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        fetchProducts();\n    }, [filter]);\n\n    const fetchProducts = async () => {\n        try {\n            const endpoint = filter === 'low-stock'\n                ? `${API_BASE}/logistics/api/products/low-stock/`\n                : `${API_BASE}/logistics/api/products/`;\n\n            const response = await api.get(endpoint);\n            setProducts(response.data);\n            setLoading(false);\n        } catch (error) {\n            console.error('Error fetching products:', error);\n            setLoading(false);\n        }\n    };\n\n    const getStockStatus = (product) => {\n        if (product.current_stock === 0) return { label: 'Out of Stock', color: '#ef4444' };\n        if (product.needs_reorder) return { label: 'Low Stock', color: '#f59e0b' };\n        return { label: 'In Stock', color: '#10b981' };\n    };\n\n    const filteredProducts = products.filter(product =>\n        product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        product.sku.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        product.category.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const totalInventoryValue = products.reduce((sum, p) => sum + (p.current_stock * p.cost_price), 0);\n    const lowStockCount = products.filter(p => p.needs_reorder).length;\n\n    const openAddModal = () => {\n        setEditingProduct(null);\n        setFormData({\n            sku: '',\n            name: '',\n            category: 'OTHER',\n            description: '',\n            unit_of_measure: 'pcs',\n            current_stock: 0,\n            reorder_level: 0,\n            cost_price: 0,\n            selling_price: 0,\n        });\n        setShowModal(true);\n    };\n\n    const openEditModal = (product) => {\n        setEditingProduct(product);\n        setFormData({\n            sku: product.sku,\n            name: product.name,\n            category: product.category,\n            description: product.description || '',\n            unit_of_measure: product.unit_of_measure,\n            current_stock: product.current_stock,\n            reorder_level: product.reorder_level,\n            cost_price: product.cost_price,\n            selling_price: product.selling_price,\n        });\n        setShowModal(true);\n    };\n\n    const handleInputChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: ['current_stock', 'reorder_level', 'cost_price', 'selling_price'].includes(name)\n                ? parseFloat(value) || 0\n                : value\n        }));\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setSaving(true);\n        try {\n            if (editingProduct) {\n                await api.put(`${API_BASE}/logistics/api/products/${editingProduct.id}/`, formData);\n            } else {\n                await api.post(`${API_BASE}/logistics/api/products/`, formData);\n            }\n            setShowModal(false);\n            fetchProducts();\n        } catch (error) {\n            console.error('Error saving product:', error);\n            alert('Failed to save product. Please check all fields.');\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const handleArchive = async (product) => {\n        if (!window.confirm(`Archive ${product.name}? This will mark it as inactive.`)) return;\n        try {\n            await api.patch(`${API_BASE}/logistics/api/products/${product.id}/`, { is_active: false });\n            fetchProducts();\n        } catch (error) {\n            console.error('Error archiving product:', error);\n        }\n    };\n\n    return (\n        <div className=\"inventory-management\">\n            <div className=\"page-header\">\n                <div>\n                    <h1 className=\"page-title\">Inventory Management</h1>\n                    <p className=\"page-subtitle\">Track stock levels and product inventory</p>\n                </div>\n                <button className=\"btn-primary\" onClick={openAddModal}>\n                    <Plus size={18} />\n                    Add Product\n                </button>\n            </div>\n\n            {/* Summary Cards */}\n            <div className=\"inventory-summary\">\n                <div className=\"summary-card\">\n                    <Package size={24} color=\"#b08d57\" />\n                    <div>\n                        <div className=\"summary-label\">Total Products</div>\n                        <div className=\"summary-value\">{products.length}</div>\n                    </div>\n                </div>\n                <div className=\"summary-card\">\n                    <TrendingUp size={24} color=\"#10b981\" />\n                    <div>\n                        <div className=\"summary-label\">Inventory Value</div>\n                        <div className=\"summary-value\">AED {totalInventoryValue.toLocaleString()}</div>\n                    </div>\n                </div>\n                <div className=\"summary-card\">\n                    <AlertTriangle size={24} color=\"#f59e0b\" />\n                    <div>\n                        <div className=\"summary-label\">Low Stock Items</div>\n                        <div className=\"summary-value\">{lowStockCount}</div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Filters */}\n            <div className=\"filters-bar\">\n                <div className=\"search-box\">\n                    <Search size={20} />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Search by SKU, name, or category...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                </div>\n                <div className=\"filter-buttons\">\n                    <button\n                        className={`filter-btn ${filter === 'all' ? 'active' : ''}`}\n                        onClick={() => setFilter('all')}\n                    >\n                        All Products\n                    </button>\n                    <button\n                        className={`filter-btn ${filter === 'low-stock' ? 'active' : ''}`}\n                        onClick={() => setFilter('low-stock')}\n                    >\n                        Low Stock\n                    </button>\n                </div>\n            </div>\n\n            {/* Products Table */}\n            {loading ? (\n                <div className=\"loading-state\">\n                    <div className=\"spinner\"></div>\n                    <p>Loading inventory...</p>\n                </div>\n            ) : (\n                <div className=\"products-table\">\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>SKU</th>\n                                <th>Product Name</th>\n                                <th>Category</th>\n                                <th>Current Stock</th>\n                                <th>Reorder Level</th>\n                                <th>Unit Price</th>\n                                <th>Value</th>\n                                <th>Margin</th>\n                                <th>Status</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {filteredProducts.map(product => {\n                                const status = getStockStatus(product);\n                                const stockValue = product.current_stock * product.cost_price;\n\n                                return (\n                                    <tr key={product.id} className={product.needs_reorder ? 'low-stock-row' : ''}>\n                                        <td className=\"sku-cell\">{product.sku}</td>\n                                        <td className=\"product-name\">{product.name}</td>\n                                        <td className=\"category-cell\">{product.category}</td>\n                                        <td className=\"stock-cell\">\n                                            {product.current_stock} {product.unit_of_measure}\n                                        </td>\n                                        <td className=\"reorder-cell\">\n                                            {product.reorder_level} {product.unit_of_measure}\n                                        </td>\n                                        <td className=\"price-cell\">\n                                            AED {product.cost_price.toLocaleString()}\n                                        </td>\n                                        <td className=\"value-cell\">\n                                            AED {stockValue.toLocaleString()}\n                                        </td>\n                                        <td className=\"margin-cell\">\n                                            <span className={product.margin_percentage > 20 ? 'good-margin' : 'low-margin'}>\n                                                {product.margin_percentage}%\n                                            </span>\n                                        </td>\n                                        <td>\n                                            <span\n                                                className=\"stock-status\"\n                                                style={{\n                                                    background: `${status.color}20`,\n                                                    color: status.color,\n                                                    border: `1px solid ${status.color}40`\n                                                }}\n                                            >\n                                                {status.label}\n                                            </span>\n                                        </td>\n                                        <td>\n                                            <div className=\"action-buttons\">\n                                                <button className=\"action-btn\" title=\"Edit\" onClick={() => openEditModal(product)}>\n                                                    <Edit2 size={16} />\n                                                </button>\n                                                <button className=\"action-btn\" title=\"Archive\" onClick={() => handleArchive(product)}>\n                                                    <Archive size={16} />\n                                                </button>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </div>\n            )}\n\n            {filteredProducts.length === 0 && !loading && (\n                <div className=\"empty-state\">\n                    <Package size={64} color=\"#64748b\" />\n                    <h3>No products found</h3>\n                    <p>Try adjusting your filters or add a new product</p>\n                </div>\n            )}\n\n            {/* Add/Edit Product Modal */}\n            {showModal && (\n                <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\n                    <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\n                        <div className=\"modal-header\">\n                            <h2>{editingProduct ? 'Edit Product' : 'Add New Product'}</h2>\n                            <button className=\"modal-close\" onClick={() => setShowModal(false)}>\n                                <X size={20} />\n                            </button>\n                        </div>\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"form-grid\">\n                                <div className=\"form-group\">\n                                    <label>SKU *</label>\n                                    <input\n                                        type=\"text\"\n                                        name=\"sku\"\n                                        value={formData.sku}\n                                        onChange={handleInputChange}\n                                        required\n                                        disabled={!!editingProduct}\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Product Name *</label>\n                                    <input\n                                        type=\"text\"\n                                        name=\"name\"\n                                        value={formData.name}\n                                        onChange={handleInputChange}\n                                        required\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Category</label>\n                                    <select name=\"category\" value={formData.category} onChange={handleInputChange}>\n                                        {CATEGORY_OPTIONS.map(opt => (\n                                            <option key={opt.value} value={opt.value}>{opt.label}</option>\n                                        ))}\n                                    </select>\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Unit of Measure</label>\n                                    <input\n                                        type=\"text\"\n                                        name=\"unit_of_measure\"\n                                        value={formData.unit_of_measure}\n                                        onChange={handleInputChange}\n                                        placeholder=\"pcs, kg, liters...\"\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Current Stock</label>\n                                    <input\n                                        type=\"number\"\n                                        name=\"current_stock\"\n                                        value={formData.current_stock}\n                                        onChange={handleInputChange}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Reorder Level</label>\n                                    <input\n                                        type=\"number\"\n                                        name=\"reorder_level\"\n                                        value={formData.reorder_level}\n                                        onChange={handleInputChange}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Cost Price (AED)</label>\n                                    <input\n                                        type=\"number\"\n                                        name=\"cost_price\"\n                                        value={formData.cost_price}\n                                        onChange={handleInputChange}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Selling Price (AED)</label>\n                                    <input\n                                        type=\"number\"\n                                        name=\"selling_price\"\n                                        value={formData.selling_price}\n                                        onChange={handleInputChange}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                    />\n                                </div>\n                            </div>\n                            <div className=\"form-group full-width\">\n                                <label>Description</label>\n                                <textarea\n                                    name=\"description\"\n                                    value={formData.description}\n                                    onChange={handleInputChange}\n                                    rows=\"3\"\n                                />\n                            </div>\n                            <div className=\"modal-actions\">\n                                <button type=\"button\" className=\"btn-secondary\" onClick={() => setShowModal(false)}>\n                                    Cancel\n                                </button>\n                                <button type=\"submit\" className=\"btn-primary\" disabled={saving}>\n                                    {saving ? 'Saving...' : (editingProduct ? 'Update Product' : 'Add Product')}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default InventoryManagement;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\elitepro\\ShipmentManagement.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchShipments'. Either include it or remove the dependency array.","line":56,"column":8,"nodeType":"ArrayExpression","endLine":56,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchShipments, filter]","fix":{"range":[1831,1839],"text":"[fetchShipments, filter]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport { Ship, Plus, Search, Filter, Calendar, Package, DollarSign, MapPin, X, Edit2 } from 'lucide-react';\nimport './ShipmentManagement.css';\n\nconst API_BASE = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000';\n\nconst SHIPPING_METHODS = [\n    { value: 'SEA', label: 'Sea Freight' },\n    { value: 'AIR', label: 'Air Freight' },\n    { value: 'LAND', label: 'Land Transport' },\n];\n\nconst STATUS_OPTIONS = [\n    { value: 'PENDING', label: 'Pending' },\n    { value: 'IN_TRANSIT', label: 'In Transit' },\n    { value: 'ARRIVED', label: 'Arrived at Port' },\n    { value: 'CUSTOMS', label: 'Customs Clearance' },\n    { value: 'DELIVERED', label: 'Delivered' },\n    { value: 'CANCELLED', label: 'Cancelled' },\n];\n\nconst SHIPMENT_TYPES = [\n    { value: 'IMPORT', label: 'Import' },\n    { value: 'EXPORT', label: 'Export' },\n];\n\nconst ShipmentManagement = () => {\n    const [shipments, setShipments] = useState([]);\n    const [filter, setFilter] = useState('all');\n    const [searchTerm, setSearchTerm] = useState('');\n    const [loading, setLoading] = useState(true);\n    const [showModal, setShowModal] = useState(false);\n    const [editingShipment, setEditingShipment] = useState(null);\n    const [saving, setSaving] = useState(false);\n    const [formData, setFormData] = useState({\n        shipment_number: '',\n        shipment_type: 'IMPORT',\n        origin: '',\n        destination: '',\n        shipping_method: 'SEA',\n        container_number: '',\n        shipped_date: '',\n        expected_arrival: '',\n        freight_cost: 0,\n        customs_duty: 0,\n        port_charges: 0,\n        insurance: 0,\n        other_charges: 0,\n        status: 'PENDING',\n        notes: '',\n    });\n\n    useEffect(() => {\n        fetchShipments();\n    }, [filter]);\n\n    const fetchShipments = async () => {\n        try {\n            const endpoint = filter === 'active'\n                ? `${API_BASE}/logistics/api/shipments/in-transit/`\n                : `${API_BASE}/logistics/api/shipments/`;\n\n            const response = await api.get(endpoint);\n            setShipments(response.data);\n            setLoading(false);\n        } catch (error) {\n            console.error('Error fetching shipments:', error);\n            setLoading(false);\n        }\n    };\n\n    const getStatusColor = (status) => {\n        const colors = {\n            'PENDING': '#f59e0b',\n            'IN_TRANSIT': '#3b82f6',\n            'ARRIVED': '#10b981',\n            'CUSTOMS': '#8b5cf6',\n            'DELIVERED': '#22c55e',\n            'CANCELLED': '#ef4444',\n        };\n        return colors[status] || '#94a3b8';\n    };\n\n    const getShippingIcon = (method) => {\n        switch (method) {\n            case 'SEA': return '';\n            case 'AIR': return '';\n            case 'LAND': return '';\n            default: return '';\n        }\n    };\n\n    const filteredShipments = shipments.filter(shipment =>\n        shipment.shipment_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        shipment.origin.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        shipment.destination.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const generateShipmentNumber = () => {\n        const prefix = 'SHP';\n        const timestamp = Date.now().toString().slice(-6);\n        return `${prefix}-${timestamp}`;\n    };\n\n    const openAddModal = () => {\n        setEditingShipment(null);\n        setFormData({\n            shipment_number: generateShipmentNumber(),\n            shipment_type: 'IMPORT',\n            origin: '',\n            destination: '',\n            shipping_method: 'SEA',\n            container_number: '',\n            shipped_date: new Date().toISOString().split('T')[0],\n            expected_arrival: '',\n            freight_cost: 0,\n            customs_duty: 0,\n            port_charges: 0,\n            insurance: 0,\n            other_charges: 0,\n            status: 'PENDING',\n            notes: '',\n        });\n        setShowModal(true);\n    };\n\n    const openEditModal = (shipment) => {\n        setEditingShipment(shipment);\n        setFormData({\n            shipment_number: shipment.shipment_number,\n            shipment_type: shipment.shipment_type,\n            origin: shipment.origin,\n            destination: shipment.destination,\n            shipping_method: shipment.shipping_method,\n            container_number: shipment.container_number || '',\n            shipped_date: shipment.shipped_date,\n            expected_arrival: shipment.expected_arrival,\n            freight_cost: shipment.freight_cost || 0,\n            customs_duty: shipment.customs_duty || 0,\n            port_charges: shipment.port_charges || 0,\n            insurance: shipment.insurance || 0,\n            other_charges: shipment.other_charges || 0,\n            status: shipment.status,\n            notes: shipment.notes || '',\n        });\n        setShowModal(true);\n    };\n\n    const handleInputChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: ['freight_cost', 'customs_duty', 'port_charges', 'insurance', 'other_charges'].includes(name)\n                ? parseFloat(value) || 0\n                : value\n        }));\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setSaving(true);\n        try {\n            if (editingShipment) {\n                await api.put(`${API_BASE}/logistics/api/shipments/${editingShipment.id}/`, formData);\n            } else {\n                await api.post(`${API_BASE}/logistics/api/shipments/`, formData);\n            }\n            setShowModal(false);\n            fetchShipments();\n        } catch (error) {\n            console.error('Error saving shipment:', error);\n            alert('Failed to save shipment. Please check all fields.');\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const updateStatus = async (shipment, newStatus) => {\n        try {\n            await api.patch(`${API_BASE}/logistics/api/shipments/${shipment.id}/`, { status: newStatus });\n            fetchShipments();\n        } catch (error) {\n            console.error('Error updating status:', error);\n        }\n    };\n\n    return (\n        <div className=\"shipment-management\">\n            <div className=\"page-header\">\n                <div>\n                    <h1 className=\"page-title\">Shipment Management</h1>\n                    <p className=\"page-subtitle\">Track import/export shipments and logistics</p>\n                </div>\n                <button className=\"btn-primary\" onClick={openAddModal}>\n                    <Plus size={18} />\n                    New Shipment\n                </button>\n            </div>\n\n            {/* Filters */}\n            <div className=\"filters-bar\">\n                <div className=\"search-box\">\n                    <Search size={20} />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Search by shipment number, origin, destination...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                </div>\n                <div className=\"filter-buttons\">\n                    <button\n                        className={`filter-btn ${filter === 'all' ? 'active' : ''}`}\n                        onClick={() => setFilter('all')}\n                    >\n                        All Shipments\n                    </button>\n                    <button\n                        className={`filter-btn ${filter === 'active' ? 'active' : ''}`}\n                        onClick={() => setFilter('active')}\n                    >\n                        Active Only\n                    </button>\n                </div>\n            </div>\n\n            {/* Shipments Grid */}\n            {loading ? (\n                <div className=\"loading-state\">\n                    <div className=\"spinner\"></div>\n                    <p>Loading shipments...</p>\n                </div>\n            ) : (\n                <div className=\"shipments-grid\">\n                    {filteredShipments.map(shipment => (\n                        <div key={shipment.id} className=\"shipment-card\">\n                            <div className=\"shipment-header\">\n                                <div className=\"shipment-number-section\">\n                                    <span className=\"shipping-icon\">{getShippingIcon(shipment.shipping_method)}</span>\n                                    <div>\n                                        <div className=\"shipment-number\">{shipment.shipment_number}</div>\n                                        <div className=\"shipment-type\">{shipment.shipment_type}</div>\n                                    </div>\n                                </div>\n                                <div\n                                    className=\"status-badge\"\n                                    style={{\n                                        background: `${getStatusColor(shipment.status)}20`,\n                                        color: getStatusColor(shipment.status),\n                                        border: `1px solid ${getStatusColor(shipment.status)}40`\n                                    }}\n                                >\n                                    {shipment.status.replace('_', ' ')}\n                                </div>\n                            </div>\n\n                            <div className=\"route-section\">\n                                <div className=\"location\">\n                                    <MapPin size={16} color=\"#b08d57\" />\n                                    <span>{shipment.origin}</span>\n                                </div>\n                                <div className=\"route-arrow\"></div>\n                                <div className=\"location\">\n                                    <MapPin size={16} color=\"#d4af37\" />\n                                    <span>{shipment.destination}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"shipment-details\">\n                                <div className=\"detail-item\">\n                                    <Calendar size={16} />\n                                    <span>Shipped: {new Date(shipment.shipped_date).toLocaleDateString()}</span>\n                                </div>\n                                <div className=\"detail-item\">\n                                    <Calendar size={16} />\n                                    <span>ETA: {new Date(shipment.expected_arrival).toLocaleDateString()}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"shipment-footer\">\n                                <div className=\"cost-section\">\n                                    <DollarSign size={18} color=\"#b08d57\" />\n                                    <span className=\"cost-amount\">\n                                        AED {shipment.total_logistics_cost?.toLocaleString() || '0'}\n                                    </span>\n                                </div>\n                                {shipment.is_delayed && (\n                                    <div className=\"delayed-badge\"> Delayed</div>\n                                )}\n                            </div>\n                            <div className=\"shipment-actions\">\n                                <button className=\"action-btn\" title=\"Edit\" onClick={() => openEditModal(shipment)}>\n                                    <Edit2 size={16} />\n                                </button>\n                                {shipment.status !== 'DELIVERED' && shipment.status !== 'CANCELLED' && (\n                                    <select\n                                        className=\"status-select\"\n                                        value={shipment.status}\n                                        onChange={(e) => updateStatus(shipment, e.target.value)}\n                                    >\n                                        {STATUS_OPTIONS.map(opt => (\n                                            <option key={opt.value} value={opt.value}>{opt.label}</option>\n                                        ))}\n                                    </select>\n                                )}\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            )}\n\n            {filteredShipments.length === 0 && !loading && (\n                <div className=\"empty-state\">\n                    <Ship size={64} color=\"#64748b\" />\n                    <h3>No shipments found</h3>\n                    <p>Try adjusting your filters or create a new shipment</p>\n                </div>\n            )}\n\n            {/* Add/Edit Shipment Modal */}\n            {showModal && (\n                <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\n                    <div className=\"modal-content modal-large\" onClick={e => e.stopPropagation()}>\n                        <div className=\"modal-header\">\n                            <h2>{editingShipment ? 'Edit Shipment' : 'New Shipment'}</h2>\n                            <button className=\"modal-close\" onClick={() => setShowModal(false)}>\n                                <X size={20} />\n                            </button>\n                        </div>\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"form-section\">\n                                <h3>Basic Information</h3>\n                                <div className=\"form-grid\">\n                                    <div className=\"form-group\">\n                                        <label>Shipment Number *</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"shipment_number\"\n                                            value={formData.shipment_number}\n                                            onChange={handleInputChange}\n                                            required\n                                            disabled={!!editingShipment}\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Type</label>\n                                        <select name=\"shipment_type\" value={formData.shipment_type} onChange={handleInputChange}>\n                                            {SHIPMENT_TYPES.map(opt => (\n                                                <option key={opt.value} value={opt.value}>{opt.label}</option>\n                                            ))}\n                                        </select>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Shipping Method</label>\n                                        <select name=\"shipping_method\" value={formData.shipping_method} onChange={handleInputChange}>\n                                            {SHIPPING_METHODS.map(opt => (\n                                                <option key={opt.value} value={opt.value}>{opt.label}</option>\n                                            ))}\n                                        </select>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Status</label>\n                                        <select name=\"status\" value={formData.status} onChange={handleInputChange}>\n                                            {STATUS_OPTIONS.map(opt => (\n                                                <option key={opt.value} value={opt.value}>{opt.label}</option>\n                                            ))}\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"form-section\">\n                                <h3>Route Details</h3>\n                                <div className=\"form-grid\">\n                                    <div className=\"form-group\">\n                                        <label>Origin *</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"origin\"\n                                            value={formData.origin}\n                                            onChange={handleInputChange}\n                                            placeholder=\"e.g., Shanghai, China\"\n                                            required\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Destination *</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"destination\"\n                                            value={formData.destination}\n                                            onChange={handleInputChange}\n                                            placeholder=\"e.g., Dubai, UAE\"\n                                            required\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Container Number</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"container_number\"\n                                            value={formData.container_number}\n                                            onChange={handleInputChange}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"form-section\">\n                                <h3>Dates</h3>\n                                <div className=\"form-grid\">\n                                    <div className=\"form-group\">\n                                        <label>Shipped Date *</label>\n                                        <input\n                                            type=\"date\"\n                                            name=\"shipped_date\"\n                                            value={formData.shipped_date}\n                                            onChange={handleInputChange}\n                                            required\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Expected Arrival *</label>\n                                        <input\n                                            type=\"date\"\n                                            name=\"expected_arrival\"\n                                            value={formData.expected_arrival}\n                                            onChange={handleInputChange}\n                                            required\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"form-section\">\n                                <h3>Costs (AED)</h3>\n                                <div className=\"form-grid\">\n                                    <div className=\"form-group\">\n                                        <label>Freight Cost</label>\n                                        <input type=\"number\" name=\"freight_cost\" value={formData.freight_cost} onChange={handleInputChange} min=\"0\" step=\"0.01\" />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Customs Duty</label>\n                                        <input type=\"number\" name=\"customs_duty\" value={formData.customs_duty} onChange={handleInputChange} min=\"0\" step=\"0.01\" />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Port Charges</label>\n                                        <input type=\"number\" name=\"port_charges\" value={formData.port_charges} onChange={handleInputChange} min=\"0\" step=\"0.01\" />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Insurance</label>\n                                        <input type=\"number\" name=\"insurance\" value={formData.insurance} onChange={handleInputChange} min=\"0\" step=\"0.01\" />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Other Charges</label>\n                                        <input type=\"number\" name=\"other_charges\" value={formData.other_charges} onChange={handleInputChange} min=\"0\" step=\"0.01\" />\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"form-group full-width\">\n                                <label>Notes</label>\n                                <textarea\n                                    name=\"notes\"\n                                    value={formData.notes}\n                                    onChange={handleInputChange}\n                                    rows=\"3\"\n                                />\n                            </div>\n\n                            <div className=\"modal-actions\">\n                                <button type=\"button\" className=\"btn-secondary\" onClick={() => setShowModal(false)}>\n                                    Cancel\n                                </button>\n                                <button type=\"submit\" className=\"btn-primary\" disabled={saving}>\n                                    {saving ? 'Saving...' : (editingShipment ? 'Update Shipment' : 'Create Shipment')}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default ShipmentManagement;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\estimates\\EstimateDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchEstimate'. Either include it or remove the dependency array.","line":17,"column":8,"nodeType":"ArrayExpression","endLine":17,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchEstimate, id]","fix":{"range":[687,691],"text":"[fetchEstimate, id]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":170,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":170,"endColumn":57}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport api from '../../api/axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport { ArrowLeft, Printer, Download, Clock, User, Car, FileText, CheckCircle } from 'lucide-react';\r\nimport PrintHeader from '../../components/PrintHeader';\r\nimport SignaturePad from '../../components/SignaturePad';\r\n\r\nconst EstimateDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [estimate, setEstimate] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchEstimate();\r\n    }, [id]);\r\n\r\n    const fetchEstimate = async () => {\r\n        try {\r\n            // Estimates are actually Job Cards in the early stages\r\n            const res = await api.get(`/forms/job-cards/api/jobs/${id}/`);\r\n            setEstimate(res.data);\r\n        } catch (err) {\r\n            console.error('Error fetching estimate', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '50px', textAlign: 'center', color: '#fff' }}>Loading Quotation...</div>;\r\n    if (!estimate) return <div style={{ padding: '50px', textAlign: 'center', color: '#fff' }}>Quotation Not Found</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px' }}>\r\n            <PrintHeader title=\"Professional Quotation\" />\r\n\r\n            <header className=\"no-print\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                    <button\r\n                        onClick={() => navigate(-1)}\r\n                        style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '8px', borderRadius: '12px', cursor: 'pointer', color: '#fff' }}\r\n                    >\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '1.5rem', margin: 0 }}>Quotation Detail</h1>\r\n                        <p style={{ color: '#94a3b8', fontSize: '14px', margin: 0 }}>Reference: {estimate.job_card_number}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '10px' }}>\r\n                    <button\r\n                        onClick={() => window.print()}\r\n                        className=\"glass-card\"\r\n                        style={{ padding: '10px 20px', display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', border: '1px solid rgba(255,255,255,0.1)', background: 'rgba(255,255,255,0.05)', color: '#fff' }}\r\n                    >\r\n                        <Printer size={18} /> Print Quotation\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate(`/job-cards/${id}`)}\r\n                        className=\"btn-primary\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\r\n                    >\r\n                        <FileText size={18} /> View Job Card\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <GlassCard className=\"printable-quotation\" style={{ padding: '40px', maxWidth: '900px', margin: '0 auto' }}>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '40px', marginBottom: '40px' }}>\r\n                    <div>\r\n                        <h4 style={sectionLabelStyle}>Client Details</h4>\r\n                        <div style={{ fontSize: '1.2rem', fontWeight: '800', marginBottom: '5px' }}>{estimate.customer_name}</div>\r\n                        <div style={{ color: '#94a3b8', fontSize: '14px' }}>{estimate.phone}</div>\r\n                        <div style={{ color: '#64748b', fontSize: '12px', marginTop: '5px' }}>{estimate.address}</div>\r\n                    </div>\r\n                    <div style={{ textAlign: 'right' }}>\r\n                        <h4 style={sectionLabelStyle}>Vehicle Information</h4>\r\n                        <div style={{ fontSize: '1.1rem', fontWeight: '700' }}>{estimate.brand} {estimate.model} ({estimate.year})</div>\r\n                        <div style={{ color: '#b08d57', fontWeight: '800' }}>{estimate.registration_number}</div>\r\n                        <div style={{ color: '#94a3b8', fontSize: '13px' }}>VIN: {estimate.vin}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '40px' }}>\r\n                    <h4 style={sectionLabelStyle}>Proposed Services & Scope</h4>\r\n                    <div style={{\r\n                        background: 'rgba(255,255,255,0.02)',\r\n                        padding: '25px',\r\n                        borderRadius: '15px',\r\n                        border: '1px solid rgba(255,255,255,0.05)',\r\n                        color: '#fff',\r\n                        fontSize: '15px',\r\n                        lineHeight: '1.6',\r\n                        whiteSpace: 'pre-wrap'\r\n                    }}>\r\n                        {estimate.job_description}\r\n                    </div>\r\n                </div>\r\n\r\n                <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '40px' }}>\r\n                    <thead>\r\n                        <tr style={{ borderBottom: '2px solid rgba(176, 141, 87, 0.2)', background: 'rgba(176, 141, 87, 0.05)' }}>\r\n                            <th style={{ padding: '15px', textAlign: 'left', fontSize: '12px', color: '#b08d57' }}>SERVICE DESCRIPTION</th>\r\n                            <th style={{ padding: '15px', textAlign: 'right', fontSize: '12px', color: '#b08d57' }}>ESTIMATED TOTAL (AED)</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td style={{ padding: '20px 15px', color: '#f8fafc' }}>\r\n                                <div style={{ fontWeight: '700' }}>Comprehensive Service Estimate</div>\r\n                                <div style={{ fontSize: '12px', color: '#94a3b8', marginTop: '5px' }}>As per initial inspection and client requirements</div>\r\n                            </td>\r\n                            <td style={{ padding: '20px 15px', textAlign: 'right', fontWeight: '800', fontSize: '1.1rem', color: '#fff' }}>\r\n                                {estimate.total_amount}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n                <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                    <div style={{ width: '300px' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n                            <span style={{ color: '#94a3b8' }}>Subtotal (Net)</span>\r\n                            <span style={{ color: '#fff' }}>AED {estimate.total_amount}</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n                            <span style={{ color: '#94a3b8' }}>VAT (5%)</span>\r\n                            <span style={{ color: '#fff' }}>AED {estimate.vat_amount}</span>\r\n                        </div>\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            paddingTop: '15px',\r\n                            marginTop: '15px',\r\n                            borderTop: '2px solid rgba(176, 141, 87, 0.3)',\r\n                            fontSize: '1.4rem',\r\n                            fontWeight: '900',\r\n                            color: '#b08d57'\r\n                        }}>\r\n                            <span>GRAND TOTAL</span>\r\n                            <span>AED {estimate.net_amount}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Signature Section - Quotation Acceptance */}\r\n                <div style={{ marginTop: '50px', borderTop: '1px solid rgba(176, 141, 87, 0.2)', paddingTop: '30px' }}>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '40px' }}>\r\n                        <div>\r\n                            <h4 style={sectionLabelStyle}>Client Acceptance</h4>\r\n                            <p style={{ color: '#64748b', fontSize: '11px', marginBottom: '15px' }}>\r\n                                I hereby accept this quotation and authorize Elite Shine to proceed with the services listed above.\r\n                            </p>\r\n                            {estimate.signature_data ? (\r\n                                <div style={{ background: '#fff', padding: '15px', borderRadius: '10px', textAlign: 'center' }}>\r\n                                    <img src={estimate.signature_data} alt=\"Accepted Signature\" style={{ maxHeight: '60px' }} />\r\n                                    <p style={{ color: '#000', fontSize: '10px', marginTop: '5px', fontWeight: '800' }}>ACCEPTED & AUTHORIZED</p>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"no-print\">\r\n                                    <SignaturePad\r\n                                        title=\"Sign to Accept Quotation\"\r\n                                        onSave={async (data) => {\r\n                                            try {\r\n                                                await api.patch(`/forms/job-cards/api/jobs/${id}/`, { signature_data: data });\r\n                                                setEstimate({ ...estimate, signature_data: data });\r\n                                                alert('Quotation Accepted!');\r\n                                            } catch (err) {\r\n                                                alert('Failed to save signature');\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div style={{ textAlign: 'right', display: 'flex', flexDirection: 'column', justifyContent: 'flex-end' }}>\r\n                            <div style={{ marginBottom: '20px' }}>\r\n                                <h4 style={sectionLabelStyle}>Authorized Representative</h4>\r\n                                <div style={{ borderBottom: '1px solid rgba(255,255,255,0.1)', height: '40px', width: '200px', marginLeft: 'auto' }}></div>\r\n                                <p style={{ fontSize: '11px', color: '#64748b', marginTop: '5px' }}>{estimate.service_advisor || 'Elite Shine Manager'}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ marginTop: '40px', borderTop: '1px solid rgba(255,255,255,0.05)', paddingTop: '20px' }}>\r\n                    <h4 style={{ fontSize: '10px', textTransform: 'uppercase', color: '#64748b', marginBottom: '10px' }}>Terms & Conditions</h4>\r\n                    <p style={{ fontSize: '11px', color: '#64748b', lineHeight: '1.5' }}>\r\n                        1. This quotation is valid for 7 days from the date of issue.<br />\r\n                        2. Final costs may vary based on additional findings during service.<br />\r\n                        3. All parts and labor are subject to availability.\r\n                    </p>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            <style>{`\r\n                @media print {\r\n                    body { background: #fff !important; color: #000 !important; }\r\n                    .printable-quotation { \r\n                        background: #fff !important; \r\n                        color: #000 !important; \r\n                        border: 1px solid #eee !important; \r\n                        box-shadow: none !important; \r\n                        max-width: 100% !important; \r\n                        margin: 0 !important;\r\n                        padding: 20px !important;\r\n                    }\r\n                    .printable-quotation * { color: #000 !important; }\r\n                    .printable-quotation h4 { color: #b08d57 !important; }\r\n                    .printable-quotation div[style*=\"background\"] { background: #fafafa !important; border-color: #eee !important; }\r\n                    .no-print, header, button { display: none !important; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst sectionLabelStyle = {\r\n    fontSize: '10px',\r\n    textTransform: 'uppercase',\r\n    color: '#b08d57',\r\n    marginBottom: '10px',\r\n    letterSpacing: '1px',\r\n    fontWeight: '800'\r\n};\r\n\r\nexport default EstimateDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\AccountingPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'summaryRes' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"summaryRes"},"fix":{"range":[945,957],"text":""},"desc":"Remove unused variable 'summaryRes'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":189,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[12568,12580],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'color' is defined but never used.","line":189,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"color"},"fix":{"range":[12580,12587],"text":""},"desc":"Remove unused variable 'color'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    BookOpen, ArrowUpRight, ArrowDownRight, Search,\r\n    Filter, Download, Plus, ChevronLeft, ChevronRight,\r\n    DollarSign, TrendingUp, TrendingDown, BarChart3\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AccountingPage = () => {\r\n    const navigate = useNavigate();\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [accounts, setAccounts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [filterType, setFilterType] = useState('ALL');\r\n    const [page, setPage] = useState(1);\r\n    const perPage = 15;\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [txRes, accRes, summaryRes] = await Promise.all([\r\n                api.get('/finance/api/transactions/').catch(() => ({ data: [] })),\r\n                api.get('/finance/api/accounts/').catch(() => ({ data: [] })),\r\n                api.get('/finance/api/transactions/financial_summary/').catch(() => ({ data: {} }))\r\n            ]);\r\n            const txData = Array.isArray(txRes.data) ? txRes.data : txRes.data.results || [];\r\n            const accData = Array.isArray(accRes.data) ? accRes.data : accRes.data.results || [];\r\n            setTransactions(txData);\r\n            setAccounts(accData);\r\n        } catch (err) {\r\n            console.error('Accounting data fetch failed', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const totalDebit = transactions.reduce((s, t) => s + (parseFloat(t.debit_amount) || 0), 0);\r\n    const totalCredit = transactions.reduce((s, t) => s + (parseFloat(t.credit_amount) || 0), 0);\r\n    const netBalance = totalDebit - totalCredit;\r\n    const accountCount = accounts.length;\r\n\r\n    const filtered = transactions.filter(t => {\r\n        const matchSearch = !searchTerm || (t.description || '').toLowerCase().includes(searchTerm.toLowerCase())\r\n            || (t.reference || '').toLowerCase().includes(searchTerm.toLowerCase());\r\n        const matchType = filterType === 'ALL'\r\n            || (filterType === 'DEBIT' && parseFloat(t.debit_amount) > 0)\r\n            || (filterType === 'CREDIT' && parseFloat(t.credit_amount) > 0);\r\n        return matchSearch && matchType;\r\n    });\r\n\r\n    const totalPages = Math.ceil(filtered.length / perPage);\r\n    const paginated = filtered.slice((page - 1) * perPage, page * perPage);\r\n\r\n    const exportCSV = () => {\r\n        const header = 'Date,Reference,Description,Debit,Credit,Account\\n';\r\n        const rows = transactions.map(t =>\r\n            `${t.date || ''},${t.reference || ''},${(t.description || '').replace(/,/g, ';')},${t.debit_amount || 0},${t.credit_amount || 0},${t.account_name || ''}`\r\n        ).join('\\n');\r\n        const blob = new Blob([header + rows], { type: 'text/csv' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'general_ledger.csv';\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    if (loading) return <div style={{ color: '#fff', padding: '40px' }}>Loading General Ledger...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '30px' }}>\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\r\n                <div>\r\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px' }}>FINANCE & ACCOUNTS</div>\r\n                    <h1 style={{ margin: '5px 0 0 0', fontSize: '2.5rem', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>General Ledger</h1>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                    <button onClick={exportCSV} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '8px', background: 'var(--input-bg)', color: 'var(--text-primary)', border: '1.5px solid var(--gold-border)' }}>\r\n                        <Download size={16} /> Export CSV\r\n                    </button>\r\n                    <button onClick={() => navigate('/finance/transaction')} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '8px', border: '1.5px solid var(--gold-border)' }}>\r\n                        <Plus size={16} /> New Entry\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Summary Cards */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                <LedgerStat label=\"Total Debits\" value={`AED ${totalDebit.toLocaleString()}`} icon={ArrowUpRight} color=\"#3b82f6\" />\r\n                <LedgerStat label=\"Total Credits\" value={`AED ${totalCredit.toLocaleString()}`} icon={ArrowDownRight} color=\"#10b981\" />\r\n                <LedgerStat label=\"Net Balance\" value={`AED ${netBalance.toLocaleString()}`} icon={DollarSign} color=\"#b08d57\" />\r\n                <LedgerStat label=\"Active Accounts\" value={accountCount} icon={BookOpen} color=\"#8b5cf6\" />\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <GlassCard style={{ padding: '20px', marginBottom: '20px' }}>\r\n                <div style={{ display: 'flex', gap: '15px', alignItems: 'center' }}>\r\n                    <div style={{ flex: 1, position: 'relative' }}>\r\n                        <Search size={16} style={{ position: 'absolute', left: '12px', top: '12px', color: '#64748b' }} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by description or reference...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => { setSearchTerm(e.target.value); setPage(1); }}\r\n                            style={{\r\n                                width: '100%', padding: '12px 12px 12px 40px', background: 'var(--input-bg)',\r\n                                border: '1.5px solid var(--gold-border)', borderRadius: '12px', color: 'var(--text-primary)', fontSize: '14px', outline: 'none', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '0.5px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    {['ALL', 'DEBIT', 'CREDIT'].map(f => (\r\n                        <button\r\n                            key={f}\r\n                            onClick={() => { setFilterType(f); setPage(1); }}\r\n                            style={{\r\n                                padding: '12px 24px', borderRadius: '12px', border: filterType === f ? '1.5px solid var(--gold-border)' : '1.5px solid rgba(176,141,87,0.2)', cursor: 'pointer', fontWeight: '900', fontSize: '12px',\r\n                                background: filterType === f ? 'var(--gold)' : 'var(--input-bg)',\r\n                                color: filterType === f ? '#000' : 'var(--text-primary)',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '1px'\r\n                            }}\r\n                        >{f}</button>\r\n                    ))}\r\n                </div>\r\n            </GlassCard>\r\n\r\n            {/* Ledger Table */}\r\n            <GlassCard style={{ padding: 0, overflow: 'hidden', border: '1.5px solid var(--gold-border)' }}>\r\n                <table style={{ width: '100%', borderCollapse: 'collapse', color: 'var(--text-primary)', fontSize: '14px' }}>\r\n                    <thead>\r\n                        <tr style={{ background: 'var(--input-bg)', textAlign: 'left', borderBottom: '2.5px solid var(--gold-border)' }}>\r\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Post Date</th>\r\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Ref Token</th>\r\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Description / Narrative</th>\r\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Target Account</th>\r\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px', textAlign: 'right' }}>Debit (Out)</th>\r\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px', textAlign: 'right' }}>Credit (In)</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {paginated.length > 0 ? paginated.map((t, i) => (\r\n                            <tr key={t.id || i} style={{ borderBottom: '1.5px solid rgba(176,141,87,0.1)' }}>\r\n                                <td style={{ padding: '18px', color: 'var(--gold)', fontWeight: '900', fontSize: '12px' }}>{t.date || '-'}</td>\r\n                                <td style={{ padding: '18px', fontWeight: '900', color: 'var(--text-primary)', fontSize: '13px' }}>{t.reference || '-'}</td>\r\n                                <td style={{ padding: '18px', color: 'var(--text-primary)', fontWeight: '900', fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{t.description || '-'}</td>\r\n                                <td style={{ padding: '18px', color: 'var(--gold)', fontWeight: '900', fontSize: '13px' }}>{t.account_name || t.account || '-'}</td>\r\n                                <td style={{ padding: '18px', textAlign: 'right', fontWeight: '900', color: parseFloat(t.debit_amount) > 0 ? '#ef4444' : 'var(--text-secondary)', fontSize: '16px', fontFamily: 'Outfit, sans-serif' }}>\r\n                                    {parseFloat(t.debit_amount) > 0 ? parseFloat(t.debit_amount).toLocaleString() : '-'}\r\n                                </td>\r\n                                <td style={{ padding: '18px', textAlign: 'right', fontWeight: '900', color: parseFloat(t.credit_amount) > 0 ? '#10b981' : 'var(--text-secondary)', fontSize: '16px', fontFamily: 'Outfit, sans-serif' }}>\r\n                                    {parseFloat(t.credit_amount) > 0 ? parseFloat(t.credit_amount).toLocaleString() : '-'}\r\n                                </td>\r\n                            </tr>\r\n                        )) : (\r\n                            <tr>\r\n                                <td colSpan=\"6\" style={{ padding: '60px', textAlign: 'center', color: '#64748b' }}>\r\n                                    No ledger entries found. Create your first transaction to get started.\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </GlassCard>\r\n\r\n            {/* Pagination */}\r\n            {totalPages > 1 && (\r\n                <div style={{ display: 'flex', justifyContent: 'center', gap: '10px', marginTop: '20px' }}>\r\n                    <button onClick={() => setPage(p => Math.max(1, p - 1))} disabled={page === 1}\r\n                        style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', padding: '8px 14px', borderRadius: '8px', cursor: 'pointer' }}>\r\n                        <ChevronLeft size={16} />\r\n                    </button>\r\n                    <span style={{ color: 'var(--text-secondary)', padding: '8px 14px', fontSize: '14px', fontWeight: '900' }}>Page {page} of {totalPages}</span>\r\n                    <button onClick={() => setPage(p => Math.min(totalPages, p + 1))} disabled={page === totalPages}\r\n                        style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', padding: '8px 14px', borderRadius: '8px', cursor: 'pointer' }}>\r\n                        <ChevronRight size={16} />\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst LedgerStat = ({ label, value, icon: Icon, color }) => (\r\n    <GlassCard style={{ padding: '25px', display: 'flex', alignItems: 'center', gap: '20px', border: '1.5px solid var(--gold-border)' }}>\r\n        <div style={{ width: '60px', height: '60px', borderRadius: '15px', background: 'var(--gold-glow)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1.5px solid var(--gold-border)' }}>\r\n            <Icon size={28} color=\"var(--gold)\" />\r\n        </div>\r\n        <div>\r\n            <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '5px' }}>{label}</div>\r\n            <div style={{ fontSize: '24px', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>{value}</div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nexport default AccountingPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\BillingPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":164,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":164,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[10751,10763],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'color' is defined but never used.","line":164,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":164,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"color"},"fix":{"range":[10763,10770],"text":""},"desc":"Remove unused variable 'color'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    CreditCard, DollarSign, Receipt, CheckCircle,\n    Clock, AlertTriangle, Search, Download,\n    ArrowUpRight, ArrowDownRight, FileText, Plus\n} from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\n\nconst BillingPage = () => {\n    const navigate = useNavigate();\n    const [invoices, setInvoices] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [tab, setTab] = useState('ALL');\n    const [searchTerm, setSearchTerm] = useState('');\n\n    useEffect(() => {\n        fetchBilling();\n    }, []);\n\n    const fetchBilling = async () => {\n        try {\n            const res = await api.get('/forms/invoices/api/list/');\n            const data = Array.isArray(res.data) ? res.data : res.data.results || [];\n            setInvoices(data);\n        } catch (err) {\n            console.error('Billing data fetch failed', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const totalBilled = invoices.reduce((s, i) => s + (parseFloat(i.grand_total) || 0), 0);\n    const paidInvoices = invoices.filter(i => i.payment_status === 'PAID');\n    const pendingInvoices = invoices.filter(i => i.payment_status === 'PENDING' || i.payment_status === 'PARTIAL');\n    const overdueInvoices = invoices.filter(i => i.payment_status === 'OVERDUE');\n    const totalCollected = paidInvoices.reduce((s, i) => s + (parseFloat(i.grand_total) || 0), 0);\n    const totalPending = pendingInvoices.reduce((s, i) => s + (parseFloat(i.grand_total) || 0), 0);\n\n    const filteredInvoices = invoices.filter(inv => {\n        const matchTab = tab === 'ALL'\n            || (tab === 'PAID' && inv.payment_status === 'PAID')\n            || (tab === 'PENDING' && (inv.payment_status === 'PENDING' || inv.payment_status === 'PARTIAL'))\n            || (tab === 'OVERDUE' && inv.payment_status === 'OVERDUE');\n        const matchSearch = !searchTerm\n            || (inv.invoice_number || '').toLowerCase().includes(searchTerm.toLowerCase())\n            || (inv.customer_name || '').toLowerCase().includes(searchTerm.toLowerCase());\n        return matchTab && matchSearch;\n    });\n\n    const getStatusBadge = (status) => {\n        const map = {\n            PAID: { bg: '#10b98115', color: '#10b981', border: '#10b98160', label: 'Paid' },\n            PENDING: { bg: '#f59e0b15', color: '#f59e0b', border: '#f59e0b60', label: 'Pending' },\n            PARTIAL: { bg: '#3b82f615', color: '#3b82f6', border: '#3b82f660', label: 'Partial' },\n            OVERDUE: { bg: '#ef444415', color: '#ef4444', border: '#ef444460', label: 'Overdue' },\n        };\n        const s = map[status] || map.PENDING;\n        return (\n            <span style={{ padding: '6px 14px', borderRadius: '20px', fontSize: '11px', fontWeight: '900', background: s.bg, color: s.color, border: `1.5px solid ${s.border}`, textTransform: 'uppercase' }}>\n                {s.label}\n            </span>\n        );\n    };\n\n    if (loading) return <div style={{ color: '#fff', padding: '40px' }}>Loading Billing Console...</div>;\n\n    return (\n        <div style={{ padding: '30px' }}>\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px' }}>CASHIER OPERATIONS</div>\n                    <h1 style={{ margin: '5px 0 0 0', fontSize: '2.5rem', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>Billing & Cashier</h1>\n                </div>\n                <div style={{ display: 'flex', gap: '12px' }}>\n                    <button onClick={() => navigate('/invoices')} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '8px', background: 'var(--input-bg)', color: 'var(--text-primary)', border: '1.5px solid var(--gold-border)' }}>\n                        <FileText size={16} /> All Invoices\n                    </button>\n                    <button onClick={() => navigate('/finance/transaction')} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '8px', border: '1.5px solid var(--gold-border)' }}>\n                        <Plus size={16} /> Record Payment\n                    </button>\n                </div>\n            </header>\n\n            {/* Summary Cards */}\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\n                <BillingStat label=\"Total Billed\" value={`AED ${totalBilled.toLocaleString()}`} icon={Receipt} color=\"#8b5cf6\" />\n                <BillingStat label=\"Collected\" value={`AED ${totalCollected.toLocaleString()}`} icon={CheckCircle} color=\"#10b981\" />\n                <BillingStat label=\"Outstanding\" value={`AED ${totalPending.toLocaleString()}`} icon={Clock} color=\"#f59e0b\" />\n                <BillingStat label=\"Overdue\" value={overdueInvoices.length} icon={AlertTriangle} color=\"#ef4444\" />\n            </div>\n\n            {/* Tabs + Search */}\n            <GlassCard style={{ padding: '20px', marginBottom: '20px' }}>\n                <div style={{ display: 'flex', gap: '15px', alignItems: 'center' }}>\n                    <div style={{ flex: 1, position: 'relative' }}>\n                        <Search size={16} style={{ position: 'absolute', left: '12px', top: '12px', color: '#64748b' }} />\n                        <input\n                            type=\"text\"\n                            placeholder=\"Search invoice or customer...\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            style={{\n                                width: '100%', padding: '12px 12px 12px 40px', background: 'var(--input-bg)',\n                                border: '1.5px solid var(--gold-border)', borderRadius: '12px', color: 'var(--text-primary)', fontSize: '14px', outline: 'none', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '0.5px'\n                            }}\n                        />\n                    </div>\n                    {['ALL', 'PAID', 'PENDING', 'OVERDUE'].map(t => (\n                        <button\n                            key={t}\n                            onClick={() => setTab(t)}\n                            style={{\n                                padding: '12px 24px', borderRadius: '12px', border: tab === t ? '1.5px solid var(--gold-border)' : '1.5px solid rgba(176,141,87,0.2)', cursor: 'pointer', fontWeight: '900', fontSize: '12px',\n                                background: tab === t ? 'var(--gold)' : 'var(--input-bg)',\n                                color: tab === t ? '#000' : 'var(--text-primary)',\n                                textTransform: 'uppercase',\n                                letterSpacing: '1px'\n                            }}\n                        >{t}</button>\n                    ))}\n                </div>\n            </GlassCard>\n\n            {/* Invoice Table */}\n            <GlassCard style={{ padding: 0, overflow: 'hidden', border: '1.5px solid var(--gold-border)' }}>\n                <table style={{ width: '100%', borderCollapse: 'collapse', color: 'var(--text-primary)', fontSize: '14px' }}>\n                    <thead>\n                        <tr style={{ background: 'var(--input-bg)', textAlign: 'left', borderBottom: '2.5px solid var(--gold-border)' }}>\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Invoice ID</th>\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Client Narrative</th>\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Post Date</th>\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px', textAlign: 'right' }}>Grand Total</th>\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Fiscal Status</th>\n                            <th style={{ padding: '20px 18px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', fontSize: '11px', letterSpacing: '2px' }}>Method</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {filteredInvoices.length > 0 ? filteredInvoices.map((inv, i) => (\n                            <tr key={inv.id || i} style={{ borderBottom: '1.5px solid rgba(176,141,87,0.1)', cursor: 'pointer' }}\n                                onClick={() => navigate(`/invoices/${inv.id}`)}>\n                                <td style={{ padding: '18px', fontWeight: '900', color: 'var(--gold)', fontSize: '14px' }}>{inv.invoice_number || `INV-${inv.id}`}</td>\n                                <td style={{ padding: '18px', fontWeight: '900', color: 'var(--text-primary)', fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{inv.customer_name || '-'}</td>\n                                <td style={{ padding: '18px', color: 'var(--text-secondary)', fontWeight: '900', fontSize: '12px' }}>{inv.date || inv.created_at?.split('T')[0] || '-'}</td>\n                                <td style={{ padding: '18px', textAlign: 'right', fontWeight: '900', color: 'var(--text-primary)', fontSize: '18px', fontFamily: 'Outfit, sans-serif' }}>{parseFloat(inv.grand_total || 0).toLocaleString()}</td>\n                                <td style={{ padding: '18px' }}>{getStatusBadge(inv.payment_status)}</td>\n                                <td style={{ padding: '18px', color: 'var(--text-primary)', fontSize: '13px', fontWeight: '900', textTransform: 'uppercase' }}>{inv.payment_method || 'CASH'}</td>\n                            </tr>\n                        )) : (\n                            <tr>\n                                <td colSpan=\"6\" style={{ padding: '60px', textAlign: 'center', color: '#64748b' }}>\n                                    No billing records found.\n                                </td>\n                            </tr>\n                        )}\n                    </tbody>\n                </table>\n            </GlassCard>\n        </div>\n    );\n};\n\nconst BillingStat = ({ label, value, icon: Icon, color }) => (\n    <GlassCard style={{ padding: '25px', display: 'flex', alignItems: 'center', gap: '20px', border: '1.5px solid var(--gold-border)' }}>\n        <div style={{ width: '60px', height: '60px', borderRadius: '15px', background: 'var(--gold-glow)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1.5px solid var(--gold-border)' }}>\n            <Icon size={28} color=\"var(--gold)\" />\n        </div>\n        <div>\n            <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '5px' }}>{label}</div>\n            <div style={{ fontSize: '24px', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>{value}</div>\n        </div>\n    </GlassCard>\n);\n\nexport default BillingPage;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\BudgetManager.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"api"},"fix":{"range":[48,57],"text":""},"desc":"Remove unused variable 'api'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport api from '../../api/axios';\nimport { useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport { ArrowLeft, Save, DollarSign, Briefcase, Calendar, Tag } from 'lucide-react';\n\nconst BudgetManager = () => {\n    const navigate = useNavigate();\n    const [formData, setFormData] = useState({\n        account: '',\n        period: `${new Date().getFullYear()}-Q${Math.floor(new Date().getMonth() / 3) + 1}`,\n        amount: '',\n    });\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            alert('Budget allocated successfully. (Backend link active)');\n            navigate('/finance');\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    return (\n        <div style={{ padding: '30px 20px' }}>\n            <header style={{ display: 'flex', alignItems: 'center', gap: '20px', marginBottom: '40px' }}>\n                <button\n                    onClick={() => navigate('/finance')}\n                    style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', padding: '10px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)' }}\n                >\n                    <ArrowLeft size={20} />\n                </button>\n                <div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2rem', fontWeight: '900', margin: 0, color: 'var(--text-primary)' }}>BUDGET ALLOCATION</h1>\n                    <p style={{ color: 'var(--gold)', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase', letterSpacing: '1px' }}>Define departmental spending limits</p>\n                </div>\n            </header>\n\n            <form onSubmit={handleSubmit} style={{ maxWidth: '800px' }}>\n                <GlassCard style={{ padding: '40px', border: '1.5px solid var(--gold-border)' }}>\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px' }}>\n                        <div style={{ gridColumn: '1 / -1' }}>\n                            <label className=\"form-label\" style={{ fontWeight: '900', color: 'var(--text-primary)' }}>Select Account</label>\n                            <select name=\"account\" className=\"form-control\" onChange={handleChange} required style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', fontWeight: '900', padding: '15px', borderRadius: '12px', outline: 'none', appearance: 'none' }}>\n                                <option value=\"\">CHOOSE ACCOUNT CATEGORY...</option>\n                                <option value=\"6010\">STAFF SALARIES</option>\n                                <option value=\"6100\">WORKSHOP RENT</option>\n                                <option value=\"6200\">SOCIAL MEDIA ADS</option>\n                                <option value=\"6109\">CAR WASH MATERIALS</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label className=\"form-label\" style={{ fontWeight: '900', color: 'var(--text-primary)' }}>Budget Period</label>\n                            <input name=\"period\" className=\"form-control\" value={formData.period} onChange={handleChange} placeholder=\"e.g. 2024-Q1\" style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', fontWeight: '900', padding: '15px', borderRadius: '12px', outline: 'none', textTransform: 'uppercase' }} />\n                        </div>\n                        <div>\n                            <label className=\"form-label\" style={{ fontWeight: '900', color: 'var(--text-primary)' }}>Allocation Amount (AED)</label>\n                            <input name=\"amount\" className=\"form-control\" type=\"number\" onChange={handleChange} placeholder=\"0.00\" required style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', fontWeight: '900', padding: '15px', borderRadius: '12px', outline: 'none', fontSize: '18px', fontFamily: 'Outfit, sans-serif' }} />\n                        </div>\n                    </div>\n\n                    <button type=\"submit\" className=\"btn-primary\" style={{ width: '100%', marginTop: '40px', height: '65px', borderRadius: '35px', fontSize: '1.2rem', fontWeight: '900', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '15px', border: '2px solid var(--gold-border)', background: 'var(--gold)', color: '#000', letterSpacing: '1px' }}>\n                        <Save size={24} /> COMMIT ALLOCATION\n                    </button>\n                </GlassCard>\n            </form>\n        </div>\n    );\n};\n\nexport default BudgetManager;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\ChartOfAccounts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\CommissionDashboard.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":21,"column":8,"nodeType":"ArrayExpression","endLine":21,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[860,862],"text":"[fetchData]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'icon' is defined but never used.","line":137,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"icon"},"fix":{"range":[8819,8824],"text":""},"desc":"Remove unused variable 'icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    Award, TrendingUp, Users,\r\n    CheckCircle, Clock, ArrowLeft, Search, Filter\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DateRangePicker from '../../components/finance/DateRangePicker';\r\n\r\nconst CommissionDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const [breakdown, setBreakdown] = useState([]);\r\n    const [summary, setSummary] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [startDate, setStartDate] = useState(new Date(new Date().setDate(1)).toISOString().split('T')[0]);\r\n    const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.get(`/finance/api/commissions/summary/?start_date=${startDate}&end_date=${endDate}`);\r\n            setBreakdown(res.data.breakdown);\r\n            setSummary(res.data.summary);\r\n        } catch (err) {\r\n            console.error('Error fetching commission data', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px', animation: 'fadeIn 0.5s ease-out' }}>\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/finance')}\r\n                        style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', padding: '10px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)' }}\r\n                    >\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px' }}>PERFORMANCE ANALYTICS</div>\r\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2.5rem', fontWeight: '900', margin: 0, color: 'var(--text-primary)' }}>Commission Hub</h1>\r\n                    </div>\r\n                </div>\r\n\r\n                <DateRangePicker\r\n                    startDate={startDate}\r\n                    endDate={endDate}\r\n                    onStartChange={setStartDate}\r\n                    onEndChange={setEndDate}\r\n                    onApply={fetchData}\r\n                />\r\n            </header>\r\n\r\n            {loading ? (\r\n                <div style={{ textAlign: 'center', padding: '100px', color: 'var(--text-secondary)' }}>Calculating Earnings...</div>\r\n            ) : (\r\n                <>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                        <StatCard icon={<Clock color=\"var(--gold)\" />} label=\"Total Accrued\" value={`AED ${(summary?.total_accrued || 0).toLocaleString()}`} />\r\n                        <StatCard icon={<CheckCircle color=\"#10b981\" />} label=\"Total Paid\" value={`AED ${(summary?.total_paid || 0).toLocaleString()}`} />\r\n                        <StatCard icon={<TrendingUp color=\"#3b82f6\" />} label=\"Jobs Impacted\" value={summary?.job_count || 0} />\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1.5fr 1fr', gap: '30px' }}>\r\n                        <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)' }}>\r\n                            <h3 style={{ margin: '0 0 20px 0', fontSize: '18px', fontWeight: '900', color: 'var(--text-primary)' }}>Staff Earnings Breakdown</h3>\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\r\n                                {breakdown.map((item, idx) => (\r\n                                    <div key={idx} style={{\r\n                                        display: 'flex',\r\n                                        justifyContent: 'space-between',\r\n                                        alignItems: 'center',\r\n                                        padding: '20px',\r\n                                        background: 'var(--input-bg)',\r\n                                        borderRadius: '15px',\r\n                                        border: '1.5px solid var(--gold-border)',\r\n                                        marginBottom: '10px'\r\n                                    }}>\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                                            <div style={{ width: '40px', height: '40px', background: 'var(--gold-border)', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: '900', color: 'var(--gold)' }}>\r\n                                                {item.employee__full_name[0]}\r\n                                            </div>\r\n                                            <div>\r\n                                                <div style={{ fontWeight: '900', color: 'var(--text-primary)', fontSize: '16px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{item.employee__full_name}</div>\r\n                                                <div style={{ fontSize: '11px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '1px' }}>{item.jobs} COMMISSIONS LINKED</div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div style={{ textAlign: 'right' }}>\r\n                                            <div style={{ fontWeight: '900', fontSize: '24px', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>AED {parseFloat(item.earned).toLocaleString()}</div>\r\n                                            <div style={{ fontSize: '10px', color: 'var(--text-secondary)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px' }}>LEDGER BALANCE</div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {breakdown.length === 0 && (\r\n                                    <div style={{ padding: '50px', textAlign: 'center', color: 'var(--text-secondary)', fontWeight: '800' }}>No commissions recorded for this period.</div>\r\n                                )}\r\n                            </div>\r\n                        </GlassCard>\r\n\r\n                        <GlassCard style={{ padding: '30px', background: 'var(--gold-glow)', border: '1.5px solid var(--gold-border)' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '20px' }}>\r\n                                <Award color=\"var(--gold)\" size={24} />\r\n                                <h3 style={{ margin: 0, fontWeight: '900', color: 'var(--text-primary)' }}>Legal & Payroll Info</h3>\r\n                            </div>\r\n                            <p style={{ color: 'var(--text-secondary)', fontSize: '14px', lineHeight: '1.6', fontWeight: '800' }}>\r\n                                Commissions are automatically accrued when a Job Card is marked as **CLOSED**.\r\n                                <br /><br />\r\n                                Standard rates:\r\n                                <ul>\r\n                                    <li>Service Advisor: Based on Employee Profile</li>\r\n                                    <li>Technician: Flat 2% of Net Amount</li>\r\n                                </ul>\r\n                                All commissions are subject to internal audit and are finalized during the monthly payroll run.\r\n                            </p>\r\n                            <button\r\n                                className=\"btn-primary\"\r\n                                style={{ width: '100%', marginTop: '30px', height: '60px', borderRadius: '30px', fontSize: '1.2rem', fontWeight: '900', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '15px', border: '2px solid var(--gold-border)', background: 'var(--gold)', color: '#000', letterSpacing: '1px' }}\r\n                                onClick={() => navigate('/hr/payroll')}\r\n                            >\r\n                                <Users size={24} /> GO TO PAYROLL CONSOLE\r\n                            </button>\r\n                        </GlassCard>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst StatCard = ({ icon, label, value }) => (\r\n    <GlassCard style={{ padding: '20px', display: 'flex', alignItems: 'center', gap: '20px', border: '1.5px solid var(--gold-border)' }}>\r\n        <div style={{ width: '60px', height: '60px', borderRadius: '15px', background: 'var(--gold-glow)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1.5px solid var(--gold-border)' }}>\r\n            <Icon size={28} color=\"var(--gold)\" />\r\n        </div>\r\n        <div>\r\n            <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '5px' }}>{label}</div>\r\n            <div style={{ fontSize: '24px', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>{value}</div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nexport default CommissionDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\FinanceOverview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\FinancialReports.jsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Expected corresponding JSX closing tag for <div>","line":67,"column":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    ArrowLeft, Printer, Download, Filter,\r\n    TrendingUp, TrendingDown, FileText, Calendar,\r\n    ChevronRight, ChevronDown\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport PrintHeader from '../../components/PrintHeader';\r\nimport DateRangePicker from '../../components/finance/DateRangePicker';\r\n\r\nconst FinancialReports = () => {\r\n    const navigate = useNavigate();\r\n    const [activeTab, setActiveTab] = useState('LEGER'); // LEGER, PL, INVENTORY\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [coa, setCoa] = useState([]);\r\n    const [invStats, setInvStats] = useState(null);\r\n    const [plData, setPlData] = useState(null);\r\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n    const [startDate, setStartDate] = useState(new Date(new Date().setDate(1)).toISOString().split('T')[0]);\r\n    const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [filters, setFilters] = useState({ search: '', department: 'ALL' });\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [txRes, coaRes, invRes, plRes] = await Promise.all([\r\n                api.get(`/finance/api/transactions/?start_date=${startDate}&end_date=${endDate}`),\r\n                api.get('/finance/api/accounts/'),\r\n                api.get('/forms/stock/api/items/inventory_stats/'),\r\n                api.get(`/reports/api/yearly-pl/?year=${selectedYear}&start_date=${startDate}&end_date=${endDate}`)\r\n            ]);\r\n            setTransactions(txRes.data);\r\n            setCoa(coaRes.data);\r\n            setInvStats(invRes.data);\r\n            setPlData(plRes.data);\r\n        } catch (err) {\r\n            console.error('Error fetching reports data', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ color: '#fff', padding: '50px', textAlign: 'center' }}>Generating Financial Statements...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px', animation: 'fadeIn 0.5s ease-out' }}>\r\n            <PrintHeader title={activeTab === 'PL' ? \"Profit & Loss Statement\" : \"General Ledger Report\"} />\r\n\r\n            <div style={{ display: 'flex', gap: '15px' }}>\r\n                <DateRangePicker\r\n                    startDate={startDate}\r\n                    endDate={endDate}\r\n                    onStartChange={setStartDate}\r\n                    onEndChange={setEndDate}\r\n                    onApply={fetchData}\r\n                />\r\n                <button onClick={() => window.print()} className=\"glass-card\" style={{ display: 'flex', alignItems: 'center', gap: '10px', padding: '10px 20px', color: 'var(--text-primary)', cursor: 'pointer', border: '1.5px solid var(--gold-border)' }}>\r\n                    <Printer size={18} /> Print\r\n                </button>\r\n            </div>\r\n        </header>\r\n\r\n            {\r\n        activeTab === 'LEGER' ? (\r\n            <LedgerView\r\n                transactions={transactions.filter(t => {\r\n                    const matchesSearch = t.description.toLowerCase().includes(filters.search.toLowerCase()) || t.reference.toLowerCase().includes(filters.search.toLowerCase());\r\n                    const matchesDept = filters.department === 'ALL' || t.department === filters.department;\r\n                    return matchesSearch && matchesDept;\r\n                })}\r\n                filters={filters}\r\n                setFilters={setFilters}\r\n            />\r\n        ) : activeTab === 'PL' ? (\r\n            <ProfitLossView data={plData} year={selectedYear} onYearChange={(yr) => { setSelectedYear(yr); fetchData(); }} />\r\n        ) : (\r\n            <InventoryView stats={invStats} />\r\n        )\r\n    }\r\n\r\n    <style>{`\r\n                @media print {\r\n                    .no-print { display: none !important; }\r\n                    body { background: #fff !important; }\r\n                }\r\n            `}</style>\r\n        </div >\r\n    );\r\n};\r\n\r\nconst TabButton = ({ active, children, onClick }) => (\r\n    <button\r\n        onClick={onClick}\r\n        style={{\r\n            padding: '10px 20px',\r\n            borderRadius: '8px',\r\n            border: active ? '1.5px solid var(--gold-border)' : '1.5px solid transparent',\r\n            background: active ? 'var(--gold-glow)' : 'transparent',\r\n            color: active ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n            fontWeight: '900',\r\n            fontSize: '13px',\r\n            cursor: 'pointer',\r\n            transition: 'all 0.3s',\r\n            textTransform: 'uppercase'\r\n        }}\r\n    >\r\n        {children}\r\n    </button>\r\n);\r\n\r\nconst LedgerView = ({ transactions, filters, setFilters }) => (\r\n    <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '25px' }}>\r\n            <div>\r\n                <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '900', color: 'var(--text-primary)' }}>Comprehensive Transaction Ledger</h3>\r\n                <div style={{ fontSize: '11px', color: 'var(--gold)', marginTop: '5px', fontWeight: '900', letterSpacing: '1px' }}>AUDIT TRAIL: {transactions.length} ENTRIES FOUND</div>\r\n            </div>\r\n            <div style={{ display: 'flex', gap: '15px' }}>\r\n                <input\r\n                    placeholder=\"Search transactions...\"\r\n                    value={filters.search}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                    style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', padding: '8px 15px', borderRadius: '8px', width: '200px', fontSize: '13px', fontWeight: '800' }}\r\n                />\r\n                <select\r\n                    value={filters.department}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, department: e.target.value }))}\r\n                    style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', padding: '8px 15px', borderRadius: '8px', fontSize: '13px', cursor: 'pointer', fontWeight: '800' }}\r\n                >\r\n                    <option value=\"ALL\">All Departments</option>\r\n                    <option value=\"OPERATIONS\">Operations</option>\r\n                    <option value=\"MARKETING\">Marketing</option>\r\n                    <option value=\"HR\">HR & Visa</option>\r\n                    <option value=\"INVENTORY\">Inventory</option>\r\n                    <option value=\"GENERAL\">General & Admin</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div style={{ overflowX: 'auto' }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                    <tr style={{ borderBottom: '2.5px solid var(--gold-border)', color: 'var(--gold)', fontSize: '11px', textTransform: 'uppercase', background: 'var(--input-bg)', letterSpacing: '2px' }}>\r\n                        <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Post Date</th>\r\n                        <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Reference</th>\r\n                        <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Description</th>\r\n                        <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Dept</th>\r\n                        <th style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900' }}>Debit (Out)</th>\r\n                        <th style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900' }}>Credit (In)</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {transactions.map(tx => (\r\n                        <tr key={tx.id} style={{ borderBottom: '1.5px solid rgba(176,141,87,0.1)' }}>\r\n                            <td style={{ padding: '18px 15px', fontSize: '12px', color: 'var(--text-secondary)', fontWeight: '900' }}>\r\n                                {new Date(tx.date).toLocaleDateString()}\r\n                            </td>\r\n                            <td style={{ padding: '18px 15px', fontWeight: '900', color: 'var(--gold)', fontSize: '13px' }}>{tx.reference || '--'}</td>\r\n                            <td style={{ padding: '18px 15px', fontWeight: '900', fontSize: '14px', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{tx.description}</td>\r\n                            <td style={{ padding: '18px 15px' }}>\r\n                                <span style={{ fontSize: '10px', background: 'var(--gold-glow)', color: 'var(--gold)', padding: '4px 10px', border: '1px solid var(--gold-border)', borderRadius: '8px', fontWeight: '900' }}>\r\n                                    {tx.department}\r\n                                </span>\r\n                            </td>\r\n                            <td style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900', color: tx.transaction_type === 'DEBIT' ? '#ef4444' : 'var(--text-primary)', fontSize: '16px', fontFamily: 'Outfit, sans-serif' }}>\r\n                                {tx.transaction_type === 'DEBIT' ? `AED ${parseFloat(tx.amount).toLocaleString()}` : '--'}\r\n                            </td>\r\n                            <td style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900', color: tx.transaction_type === 'CREDIT' ? '#10b981' : 'var(--text-primary)', fontSize: '16px', fontFamily: 'Outfit, sans-serif' }}>\r\n                                {tx.transaction_type === 'CREDIT' ? `AED ${parseFloat(tx.amount).toLocaleString()}` : '--'}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                    {transactions.length === 0 && (\r\n                        <tr><td colSpan=\"6\" style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>No transactions recorded in the current ledger.</td></tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nconst ProfitLossView = ({ data, year, onYearChange }) => {\r\n    if (!data) return null;\r\n    const { p_l_statement, departmental_performance } = data;\r\n\r\n    return (\r\n        <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '30px' }}>\r\n            <GlassCard style={{ padding: '40px', border: '1.5px solid var(--gold-border)' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\r\n                    <h3 style={{ margin: 0, fontSize: '20px', fontWeight: '900', color: 'var(--text-primary)' }}>Profit & Loss Statement ({year})</h3>\r\n                    <select\r\n                        value={year}\r\n                        onChange={(e) => onYearChange(e.target.value)}\r\n                        style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', padding: '8px 15px', borderRadius: '8px', cursor: 'pointer', fontWeight: '900' }}\r\n                    >\r\n                        {[2024, 2025, 2026].map(yr => <option key={yr} value={yr} style={{ background: 'var(--bg-secondary)', color: 'var(--text-primary)' }}>{yr}</option>)}\r\n                    </select>\r\n                </div>\r\n\r\n                <SectionHeader>1. OPERATING REVENUE</SectionHeader>\r\n                <ReportRow label=\"Service Revenue\" value={p_l_statement.total_revenue} primary />\r\n                <ReportRow label=\"Total Revenue\" value={p_l_statement.total_revenue} total />\r\n\r\n                <div style={{ height: '30px' }}></div>\r\n\r\n                <SectionHeader>2. OPERATING EXPENSES</SectionHeader>\r\n                {departmental_performance.map((dept, i) => (\r\n                    <ReportRow key={i} label={dept.name} value={dept.expenses} indent />\r\n                ))}\r\n                <ReportRow label=\"Total Operating Expenses\" value={p_l_statement.total_expenses} total color=\"#f43f5e\" />\r\n\r\n                <div style={{ marginTop: '50px', paddingTop: '30px', borderTop: '2.5px solid var(--gold-border)' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                        <span style={{ fontSize: '20px', fontWeight: '900', color: 'var(--text-primary)', letterSpacing: '1px' }}>RETAINED FISCAL PROFIT / LOSS</span>\r\n                        <span style={{ fontSize: '36px', fontWeight: '900', color: p_l_statement.net_profit_loss >= 0 ? '#10b981' : '#f43f5e', fontFamily: 'Outfit, sans-serif' }}>\r\n                            AED {p_l_statement.net_profit_loss.toLocaleString()}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '30px' }}>\r\n                <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)' }}>\r\n                    <h4 style={{ margin: '0 0 20px 0', fontSize: '13px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '1px', textTransform: 'uppercase' }}>FISCAL SUMMARY</h4>\r\n                    <SummaryMetric label=\"Gross Margin\" value=\"100%\" color=\"#10b981\" />\r\n                    <SummaryMetric label=\"Expense Ratio\" value={`${((p_l_statement.total_expenses / p_l_statement.total_revenue) * 100 || 0).toFixed(1)}%`} color=\"#f43f5e\" />\r\n                    <SummaryMetric label=\"Net Profit Margin\" value={`${((p_l_statement.net_profit_loss / p_l_statement.total_revenue) * 100 || 0).toFixed(1)}%`} color=\"#3b82f6\" />\r\n                </GlassCard>\r\n\r\n                <GlassCard style={{ padding: '30px', background: 'var(--gold-glow)', border: '1.5px solid var(--gold-border)' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '15px' }}>\r\n                        <FileText color=\"var(--gold)\" />\r\n                        <h4 style={{ margin: 0, fontWeight: '900', color: 'var(--text-primary)' }}>Auditor Note</h4>\r\n                    </div>\r\n                    <p style={{ fontSize: '13px', color: 'var(--text-secondary)', lineHeight: '1.6', fontWeight: '800' }}>\r\n                        This statement reflects all transactions recorded in the General Ledger for the selected fiscal year.\r\n                    </p>\r\n                </GlassCard>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst InventoryView = ({ stats }) => (\r\n    <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '30px' }}>\r\n        <GlassCard style={{ padding: '40px', border: '1.5px solid var(--gold-border)' }}>\r\n            <h3 style={{ margin: '0 0 30px 0', fontSize: '20px', fontWeight: '900', color: 'var(--text-primary)' }}>Workshop Inventory Valuation</h3>\r\n\r\n            <SectionHeader>ASSET CATEGORIES</SectionHeader>\r\n            {stats?.category_breakdown?.map((cat, i) => (\r\n                <ReportRow key={i} label={cat.label} value={cat.value || 0} primary />\r\n            ))}\r\n\r\n            <div style={{ marginTop: '50px', paddingTop: '30px', borderTop: '2.5px solid var(--gold-border)' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    <span style={{ fontSize: '20px', fontWeight: '900', color: 'var(--text-primary)', letterSpacing: '1px' }}>TOTAL INVENTORY ASSET VALUE</span>\r\n                    <span style={{ fontSize: '36px', fontWeight: '900', color: 'var(--gold)', fontFamily: 'Outfit, sans-serif' }}>\r\n                        AED {stats?.total_value?.toLocaleString() || 0}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </GlassCard>\r\n\r\n        <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)' }}>\r\n            <h4 style={{ margin: '0 0 20px 0', fontSize: '13px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '1px', textTransform: 'uppercase' }}>STOCK HEALTH</h4>\r\n            <SummaryMetric label=\"Critical Items\" value={stats?.low_stock_count || 0} color=\"#f43f5e\" />\r\n            <SummaryMetric label=\"Healthy Items\" value={(stats?.total_items || 0) - (stats?.low_stock_count || 0)} color=\"#10b981\" />\r\n            <div style={{ height: '20px' }}></div>\r\n            <p style={{ fontSize: '12px', color: 'var(--text-secondary)', fontWeight: '800' }}>\r\n                Asset values are calculated based on Unit Cost * Current Balance for each SKU in the industrial ledger.\r\n            </p>\r\n        </GlassCard>\r\n    </div>\r\n);\r\n\r\nconst SectionHeader = ({ children }) => (\r\n    <div style={{ fontSize: '11px', fontWeight: '900', color: '#b08d57', letterSpacing: '2px', textTransform: 'uppercase', marginBottom: '15px' }}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\n<div style={{\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    padding: '15px 10px',\r\n    paddingLeft: indent ? '40px' : '10px',\r\n    borderBottom: '1.5px solid rgba(176,141,87,0.1)',\r\n    background: total ? 'var(--gold-glow)' : 'transparent',\r\n    borderRadius: total ? '12px' : '0',\r\n    border: total ? '1.5px solid var(--gold-border)' : 'none',\r\n    marginBottom: total ? '10px' : '0'\r\n}}>\r\n    <span style={{\r\n        color: total || primary ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n        fontWeight: '900',\r\n        fontSize: total ? '16px' : '13px',\r\n        textTransform: total || primary ? 'uppercase' : 'none',\r\n        letterSpacing: total || primary ? '1px' : '0'\r\n    }}>{label}</span>\r\n    <span style={{\r\n        color: color || 'var(--text-primary)',\r\n        fontWeight: '900',\r\n        fontSize: total ? '18px' : '14px',\r\n        fontFamily: 'Outfit, sans-serif'\r\n    }}>AED {value.toLocaleString()}</span>\r\n</div>\r\n);\r\n\r\n<div style={{ marginBottom: '20px' }}>\r\n    <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', marginBottom: '8px' }}>\r\n        <span style={{ color: 'var(--text-secondary)', fontWeight: '900', textTransform: 'uppercase' }}>{label}</span>\r\n        <span style={{ color: 'var(--text-primary)', fontWeight: '900' }}>{value}</span>\r\n    </div>\r\n    <div style={{ width: '100%', height: '10px', background: 'var(--input-bg)', borderRadius: '5px', border: '1.5px solid var(--gold-border)', overflow: 'hidden' }}>\r\n        <div style={{ width: value, height: '100%', background: color, borderRadius: '5px', boxShadow: `0 0 10px ${color}44` }}></div>\r\n    </div>\r\n</div>\r\n);\r\n\r\nexport default FinancialReports;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\InvoiceBook.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":21,"column":8,"nodeType":"ArrayExpression","endLine":21,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[850,852],"text":"[fetchData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    FileText, CreditCard, PieChart,\r\n    CheckCircle, XCircle, ArrowLeft, Download\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DateRangePicker from '../../components/finance/DateRangePicker';\r\n\r\nconst InvoiceBook = () => {\r\n    const navigate = useNavigate();\r\n    const [entries, setEntries] = useState([]);\r\n    const [summary, setSummary] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [startDate, setStartDate] = useState(new Date(new Date().setDate(1)).toISOString().split('T')[0]);\r\n    const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.get(`/reports/api/invoice-book/?start_date=${startDate}&end_date=${endDate}`);\r\n            setEntries(res.data.entries);\r\n            setSummary(res.data.summary);\r\n        } catch (err) {\r\n            console.error('Error fetching invoice book', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px', animation: 'fadeIn 0.5s ease-out' }}>\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/finance')}\r\n                        style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', padding: '10px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)' }}\r\n                    >\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px' }}>EXECUTIVE BILLING</div>\r\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2.5rem', fontWeight: '900', margin: 0, color: 'var(--text-primary)' }}>Invoice Book</h1>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '15px' }}>\r\n                    <DateRangePicker\r\n                        startDate={startDate}\r\n                        endDate={endDate}\r\n                        onStartChange={setStartDate}\r\n                        onEndChange={setEndDate}\r\n                        onApply={fetchData}\r\n                    />\r\n                    <button className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '10px', height: '45px', padding: '0 25px', borderRadius: '25px', fontSize: '12px', fontWeight: '900', border: '1.5px solid var(--gold-border)', background: 'var(--gold)', color: '#000', letterSpacing: '1px' }}>\r\n                        <Download size={18} /> EXPORT BOOK\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            {loading ? (\r\n                <div style={{ textAlign: 'center', padding: '100px', color: 'var(--text-secondary)' }}>Compiling Fiscal Records...</div>\r\n            ) : (\r\n                <>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                        <SummaryCard label=\"Invoices\" value={summary?.total_invoices || 0} color=\"var(--gold)\" />\r\n                        <SummaryCard label=\"Total Grand\" value={`AED ${(summary?.total_grand || 0).toLocaleString()}`} color=\"#10b981\" />\r\n                        <SummaryCard label=\"VAT Collected\" value={`AED ${(summary?.total_vat || 0).toLocaleString()}`} color=\"#3b82f6\" />\r\n                        <SummaryCard label=\"Outstanding\" value={summary?.pending_count || 0} color=\"#ef4444\" />\r\n                    </div>\r\n\r\n                    <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)' }}>\r\n                        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                            <thead>\r\n                                <tr style={{ borderBottom: '2.5px solid var(--gold-border)', color: 'var(--gold)', fontSize: '11px', textTransform: 'uppercase', background: 'var(--input-bg)', letterSpacing: '2px' }}>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Post Date</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Invoice Token</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Client Narrartive</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Fiscal Status</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900' }}>VAT (5%)</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900' }}>Grand Total</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {entries.map(entry => (\r\n                                    <tr key={entry.id} style={{ borderBottom: '1.5px solid rgba(176,141,87,0.1)' }} className=\"hover-row\">\r\n                                        <td style={{ padding: '18px 15px', fontSize: '12px', color: 'var(--text-secondary)', fontWeight: '900' }}>{new Date(entry.date).toLocaleDateString()}</td>\r\n                                        <td style={{ padding: '18px 15px', fontWeight: '900', color: 'var(--gold)', fontSize: '14px' }}>#{entry.number}</td>\r\n                                        <td style={{ padding: '18px 15px', fontWeight: '900', color: 'var(--text-primary)', fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{entry.customer}</td>\r\n                                        <td style={{ padding: '18px 15px' }}>\r\n                                            <PaymentStatus status={entry.status} />\r\n                                        </td>\r\n                                        <td style={{ padding: '18px 15px', textAlign: 'right', color: 'var(--text-primary)', fontSize: '14px', fontWeight: '900', fontFamily: 'Outfit, sans-serif' }}>\r\n                                            AED {parseFloat(entry.vat_amount).toLocaleString()}\r\n                                        </td>\r\n                                        <td style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '1000', fontSize: '18px', color: entry.status === 'PAID' ? '#10b981' : 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>\r\n                                            AED {parseFloat(entry.grand_total).toLocaleString()}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </GlassCard>\r\n                </>\r\n            )}\r\n\r\n            <style>{`\r\n                .hover-row:hover { background: rgba(0,0,0,0.02); }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SummaryCard = ({ label, value, color }) => (\r\n    <GlassCard style={{ padding: '20px', textAlign: 'center', border: '1.5px solid var(--gold-border)' }}>\r\n        <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '10px' }}>{label}</div>\r\n        <div style={{ fontSize: '24px', fontWeight: '900', color: color || 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>{value}</div>\r\n    </GlassCard>\r\n);\r\n\r\nconst PaymentStatus = ({ status }) => {\r\n    const isPaid = status === 'PAID';\r\n    return (\r\n        <span style={{\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '5px 12px',\r\n            borderRadius: '20px',\r\n            fontSize: '11px',\r\n            fontWeight: '900',\r\n            background: isPaid ? '#10b98125' : '#ef444425',\r\n            color: isPaid ? '#10b981' : '#ef4444',\r\n            border: `1.5px solid ${isPaid ? '#10b98160' : '#ef444460'}`,\r\n            textTransform: 'uppercase'\r\n        }}>\r\n            {isPaid ? <CheckCircle size={14} /> : <XCircle size={14} />} {status}\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default InvoiceBook;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\TransactionEntry.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\finance\\WorkshopDiary.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":21,"column":8,"nodeType":"ArrayExpression","endLine":21,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[858,860],"text":"[fetchData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    Calendar, ClipboardList, TrendingUp,\r\n    CheckCircle, Clock, AlertCircle, ArrowLeft\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DateRangePicker from '../../components/finance/DateRangePicker';\r\n\r\nconst WorkshopDiary = () => {\r\n    const navigate = useNavigate();\r\n    const [entries, setEntries] = useState([]);\r\n    const [summary, setSummary] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [startDate, setStartDate] = useState(new Date(new Date().setDate(1)).toISOString().split('T')[0]);\r\n    const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.get(`/reports/api/workshop-diary/?start_date=${startDate}&end_date=${endDate}`);\r\n            setEntries(res.data.entries);\r\n            setSummary(res.data.summary);\r\n        } catch (err) {\r\n            console.error('Error fetching workshop diary', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px', animation: 'fadeIn 0.5s ease-out' }}>\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/finance')}\r\n                        style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', padding: '10px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)' }}\r\n                    >\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px' }}>OPERATIONAL LOG</div>\r\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2.5rem', fontWeight: '900', margin: 0, color: 'var(--text-primary)' }}>Workshop Diary</h1>\r\n                    </div>\r\n                </div>\r\n\r\n                <DateRangePicker\r\n                    startDate={startDate}\r\n                    endDate={endDate}\r\n                    onStartChange={setStartDate}\r\n                    onEndChange={setEndDate}\r\n                    onApply={fetchData}\r\n                />\r\n            </header>\r\n\r\n            {loading ? (\r\n                <div style={{ textAlign: 'center', padding: '100px', color: 'var(--text-secondary)' }}>Syncing Operational Data...</div>\r\n            ) : (\r\n                <>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '20px', marginBottom: '30px' }}>\r\n                        <SummaryCard icon={<ClipboardList color=\"var(--gold)\" />} label=\"Total Jobs\" value={summary?.total_jobs || 0} />\r\n                        <SummaryCard icon={<TrendingUp color=\"#10b981\" />} label=\"Total Value\" value={`AED ${(summary?.total_value || 0).toLocaleString()}`} />\r\n                        <SummaryCard icon={<Clock color=\"#3b82f6\" />} label=\"Active (WIP)\" value={entries.filter(e => e.status !== 'CLOSED').length} />\r\n                    </div>\r\n\r\n                    <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)' }}>\r\n                        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                            <thead>\r\n                                <tr style={{ borderBottom: '2.5px solid var(--gold-border)', color: 'var(--gold)', fontSize: '11px', textTransform: 'uppercase', background: 'var(--input-bg)', letterSpacing: '2px' }}>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Post Date</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Job Token</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Client / Asset</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Operational Status</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'left', fontWeight: '900' }}>Commanding Advisor</th>\r\n                                    <th style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900' }}>Revenue Yield</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {entries.map(entry => (\r\n                                    <tr key={entry.id} style={{ borderBottom: '1.5px solid rgba(176,141,87,0.1)', transition: 'all 0.2s' }} className=\"hover-row\">\r\n                                        <td style={{ padding: '18px 15px', fontSize: '12px', color: 'var(--text-secondary)', fontWeight: '900' }}>{new Date(entry.date).toLocaleDateString()}</td>\r\n                                        <td style={{ padding: '18px 15px', fontWeight: '900', color: 'var(--gold)', fontSize: '14px' }}>#{entry.number}</td>\r\n                                        <td style={{ padding: '18px 15px', fontWeight: '900', color: 'var(--text-primary)', fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{entry.customer}</td>\r\n                                        <td style={{ padding: '18px 15px' }}>\r\n                                            <StatusBadge status={entry.status} />\r\n                                        </td>\r\n                                        <td style={{ padding: '18px 15px', fontSize: '14px', color: 'var(--text-primary)', fontWeight: '900', textTransform: 'uppercase' }}>{entry.advisor || '--'}</td>\r\n                                        <td style={{ padding: '18px 15px', textAlign: 'right', fontWeight: '900', fontSize: '18px', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>\r\n                                            AED {parseFloat(entry.net_amount).toLocaleString()}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                {entries.length === 0 && (\r\n                                    <tr><td colSpan=\"6\" style={{ padding: '50px', textAlign: 'center', color: 'var(--text-secondary)', fontWeight: '900' }}>No entries found for the selected period.</td></tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </GlassCard>\r\n                </>\r\n            )}\r\n\r\n            <style>{`\r\n                .hover-row:hover { background: rgba(176,141,87,0.05); }\r\n                [data-theme='light'] .hover-row:hover { background: rgba(0,0,0,0.02); }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SummaryCard = ({ icon, label, value }) => (\r\n    <GlassCard style={{ padding: '20px', display: 'flex', alignItems: 'center', gap: '20px', border: '1.5px solid var(--gold-border)' }}>\r\n        <div style={{ background: 'var(--gold-glow)', padding: '15px', borderRadius: '12px', border: '1px solid var(--gold-border)' }}>{icon}</div>\r\n        <div style={{ flex: 1 }}>\r\n            <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '5px' }}>{label}</div>\r\n            <div style={{ fontSize: '24px', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>{value}</div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nconst StatusBadge = ({ status }) => {\r\n    const config = {\r\n        'CLOSED': { color: '#10b981', label: 'Closed', icon: <CheckCircle size={12} /> },\r\n        'WIP': { color: '#3b82f6', label: 'In Progress', icon: <Clock size={12} /> },\r\n        'RECEPTION': { color: '#64748b', label: 'Reception', icon: <AlertCircle size={12} /> },\r\n        'INVOICING': { color: '#f59e0b', label: 'Invoicing', icon: <ClipboardList size={12} /> },\r\n    };\r\n    const s = config[status] || { color: '#64748b', label: status, icon: <AlertCircle size={12} /> };\r\n\r\n    return (\r\n        <span style={{\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 14px',\r\n            borderRadius: '25px',\r\n            fontSize: '10px',\r\n            fontWeight: '900',\r\n            background: `${s.color}15`,\r\n            color: s.color === '#64748b' ? 'var(--text-secondary)' : s.color,\r\n            textTransform: 'uppercase',\r\n            border: `1.5px solid ${s.color}60`,\r\n            letterSpacing: '1px'\r\n        }}>\r\n            {s.icon} {s.label}\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default WorkshopDiary;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\ChecklistForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\InvoicePrint.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchInvoice'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [fetchInvoice, id, propData]","fix":{"range":[514,528],"text":"[fetchInvoice, id, propData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Printer } from 'lucide-react';\r\nimport api from '../../api/axios';\r\nimport './InvoicePrint.css';\r\n\r\nconst InvoicePrint = ({ invoiceData: propData }) => {\r\n    const { id } = useParams();\r\n    const [data, setData] = useState(propData || null);\r\n    const [loading, setLoading] = useState(!propData);\r\n\r\n    useEffect(() => {\r\n        if (!propData && id) {\r\n            fetchInvoice();\r\n        }\r\n    }, [id, propData]);\r\n\r\n    const fetchInvoice = async () => {\r\n        try {\r\n            const res = await api.get(`/forms/invoices/api/list/${id}/`);\r\n            const inv = res.data;\r\n            setData({\r\n                number: inv.invoice_number || `INV-${inv.id}`,\r\n                date: inv.date || new Date().toLocaleDateString(),\r\n                trn: \"100456789000003\",\r\n                customer: {\r\n                    name: inv.customer_name || inv.job_card?.customer_name || '',\r\n                    trn: inv.customer_trn || 'N/A'\r\n                },\r\n                items: inv.items || [],\r\n                totals: {\r\n                    subtotal: parseFloat(inv.subtotal || inv.total_amount || 0).toFixed(2),\r\n                    vat: parseFloat(inv.vat_amount || 0).toFixed(2),\r\n                    grandTotal: parseFloat(inv.grand_total || inv.net_amount || 0).toFixed(2)\r\n                },\r\n                status: inv.status || 'PENDING'\r\n            });\r\n        } catch (err) {\r\n            console.error('Error fetching invoice:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div style={{ padding: '50px', textAlign: 'center', color: '#b08d57' }}>Loading Invoice...</div>;\r\n    }\r\n\r\n    const displayData = data || {\r\n        number: \"INV-0000\",\r\n        date: new Date().toLocaleDateString(),\r\n        trn: \"100456789000003\",\r\n        customer: { name: \"\", trn: \"N/A\" },\r\n        items: [],\r\n        totals: { subtotal: \"0.00\", vat: \"0.00\", grandTotal: \"0.00\" },\r\n        status: \"PENDING\"\r\n    };\r\n\r\n    return (\r\n        <div className=\"invoice-print-container\">\r\n            <div className=\"print-controls no-print\">\r\n                <button onClick={() => window.print()} className=\"print-btn\">\r\n                    <Printer size={16} /> Print Invoice\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"invoice-document\">\r\n                {/* Paid Stamp */}\r\n                {displayData.status === \"PAID\" && (\r\n                    <div className=\"paid-stamp\">PAID</div>\r\n                )}\r\n\r\n                {/* Header */}\r\n                <div className=\"invoice-header\">\r\n                    <div>\r\n                        <h1>Elite SHINE</h1>\r\n                        <p className=\"subtitle\">CAR POLISH SERVICES LLC</p>\r\n                        <p className=\"trn\">TRN: {displayData.trn}</p>\r\n                    </div>\r\n                    <div className=\"header-right\">\r\n                        <h2>Tax Invoice</h2>\r\n                        <p className=\"invoice-number\">{displayData.number}</p>\r\n                        <p className=\"date\">{displayData.date}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Bill To */}\r\n                <div className=\"bill-to\">\r\n                    <h3>Bill To</h3>\r\n                    <p className=\"customer-name\">{displayData.customer.name}</p>\r\n                    <p className=\"customer-trn\">TRN: {displayData.customer.trn}</p>\r\n                </div>\r\n\r\n                {/* Table */}\r\n                <table className=\"invoice-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Description</th>\r\n                            <th>Qty</th>\r\n                            <th>Price</th>\r\n                            <th>Amount</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {displayData.items.map((item, idx) => (\r\n                            <tr key={idx}>\r\n                                <td>{item.desc || item.description}</td>\r\n                                <td className=\"center\">{item.qty || item.quantity}</td>\r\n                                <td className=\"right\">{parseFloat(item.price || 0).toFixed(2)}</td>\r\n                                <td className=\"right\">{parseFloat(item.amount || 0).toFixed(2)}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n\r\n                {/* Footer Totals */}\r\n                <div className=\"totals-section\">\r\n                    <div className=\"totals\">\r\n                        <div className=\"total-row\">\r\n                            <span>Subtotal (Excl. VAT)</span>\r\n                            <span>{displayData.totals.subtotal}</span>\r\n                        </div>\r\n                        <div className=\"total-row\">\r\n                            <span>VAT (5%)</span>\r\n                            <span>{displayData.totals.vat}</span>\r\n                        </div>\r\n                        <div className=\"total-row grand\">\r\n                            <span>Grand Total</span>\r\n                            <span>AED {displayData.totals.grandTotal}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Note */}\r\n                <div className=\"footer-note\">\r\n                    This is a computer-generated invoice and does not require a signature.\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InvoicePrint;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\JobCardPrint.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchJobCard'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [fetchJobCard, id, propData]","fix":{"range":[535,549],"text":"[fetchJobCard, id, propData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Printer, Car, User, FileText } from 'lucide-react';\r\nimport api from '../../api/axios';\r\nimport './JobCardPrint.css';\r\n\r\nconst JobCardPrint = ({ jobCardData: propData }) => {\r\n    const { id } = useParams();\r\n    const [data, setData] = useState(propData || null);\r\n    const [loading, setLoading] = useState(!propData);\r\n\r\n    useEffect(() => {\r\n        if (!propData && id) {\r\n            fetchJobCard();\r\n        }\r\n    }, [id, propData]);\r\n\r\n    const fetchJobCard = async () => {\r\n        try {\r\n            const res = await api.get(`/forms/job-cards/api/jobs/${id}/`);\r\n            const jc = res.data;\r\n            setData({\r\n                id: jc.job_card_number || `JC-${jc.id}`,\r\n                date: jc.date,\r\n                customer: {\r\n                    name: jc.customer_name,\r\n                    phone: jc.phone,\r\n                    address: jc.address || 'N/A'\r\n                },\r\n                vehicle: {\r\n                    brand: jc.brand,\r\n                    model: jc.model,\r\n                    year: jc.year,\r\n                    color: jc.color,\r\n                    reg: jc.registration_number,\r\n                    km: jc.kilometers\r\n                },\r\n                description: jc.job_description,\r\n                financials: {\r\n                    total: parseFloat(jc.total_amount || 0).toFixed(2),\r\n                    vat: parseFloat(jc.vat_amount || 0).toFixed(2),\r\n                    discount: parseFloat(jc.discount_amount || 0).toFixed(2),\r\n                    net: parseFloat(jc.net_amount || 0).toFixed(2),\r\n                    advance: parseFloat(jc.advance_amount || 0).toFixed(2),\r\n                    balance: parseFloat(jc.balance_amount || 0).toFixed(2)\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.error('Error fetching job card:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div style={{ padding: '50px', textAlign: 'center', color: '#b08d57' }}>Loading Job Card...</div>;\r\n    }\r\n\r\n    const displayData = data || {\r\n        id: \"JC-0000\",\r\n        date: new Date().toISOString().split('T')[0],\r\n        customer: { name: \"\", phone: \"\", address: \"\" },\r\n        vehicle: { brand: \"\", model: \"\", year: \"\", color: \"\", reg: \"\", km: \"\" },\r\n        description: \"\",\r\n        financials: { total: \"0.00\", vat: \"0.00\", discount: \"0.00\", net: \"0.00\", advance: \"0.00\", balance: \"0.00\" }\r\n    };\r\n\r\n    return (\r\n        <div className=\"job-card-print-container\">\r\n            <div className=\"print-controls no-print\">\r\n                <button onClick={() => window.print()} className=\"print-btn\">\r\n                    <Printer size={16} /> Print Job Card\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"job-card-document\">\r\n                {/* Header */}\r\n                <div className=\"job-card-header\">\r\n                    <div>\r\n                        <h1>Elite SHINE</h1>\r\n                        <p className=\"subtitle\">CAR POLISH SERVICES LLC</p>\r\n                    </div>\r\n                    <div className=\"header-right\">\r\n                        <h2>Workshop Job Card</h2>\r\n                        <p className=\"job-id\">#{displayData.id}</p>\r\n                        <p className=\"date\">{displayData.date}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Info Grid */}\r\n                <div className=\"info-grid\">\r\n                    {/* Customer Info */}\r\n                    <div className=\"info-section\">\r\n                        <div className=\"section-header\">\r\n                            <User size={18} />\r\n                            <h3>Customer Information</h3>\r\n                        </div>\r\n                        <div className=\"info-fields\">\r\n                            <div className=\"field-row\">\r\n                                <label>Name</label>\r\n                                <div className=\"field-value\">{displayData.customer.name}</div>\r\n                            </div>\r\n                            <div className=\"field-row\">\r\n                                <label>Phone</label>\r\n                                <div className=\"field-value\">{displayData.customer.phone}</div>\r\n                            </div>\r\n                            <div className=\"field-row\">\r\n                                <label>Address</label>\r\n                                <div className=\"field-value\">{displayData.customer.address || \"N/A\"}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Vehicle Info */}\r\n                    <div className=\"info-section\">\r\n                        <div className=\"section-header\">\r\n                            <Car size={18} />\r\n                            <h3>Vehicle Details</h3>\r\n                        </div>\r\n                        <div className=\"vehicle-grid\">\r\n                            <div className=\"field-col\">\r\n                                <label>Brand</label>\r\n                                <div className=\"field-value\">{displayData.vehicle.brand}</div>\r\n                            </div>\r\n                            <div className=\"field-col\">\r\n                                <label>Model</label>\r\n                                <div className=\"field-value\">{displayData.vehicle.model}</div>\r\n                            </div>\r\n                            <div className=\"field-col\">\r\n                                <label>Reg #</label>\r\n                                <div className=\"field-value\">{displayData.vehicle.reg}</div>\r\n                            </div>\r\n                            <div className=\"field-col\">\r\n                                <label>KM</label>\r\n                                <div className=\"field-value\">{displayData.vehicle.km}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Job Description */}\r\n                <div className=\"job-description\">\r\n                    <div className=\"section-header\">\r\n                        <FileText size={18} />\r\n                        <h3>Job Description</h3>\r\n                    </div>\r\n                    <div className=\"description-field\" style={{ whiteSpace: 'pre-wrap', padding: '15px', background: '#f9f9f9', borderRadius: '8px', minHeight: '80px' }}>\r\n                        {displayData.description}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Financial Summary */}\r\n                <div className=\"financial-summary-container\">\r\n                    <div className=\"financial-summary\">\r\n                        <div className=\"summary-header\">Financial Summary</div>\r\n                        <div className=\"summary-rows\">\r\n                            <div className=\"summary-row\"><span>Total</span> <span>{displayData.financials.total}</span></div>\r\n                            <div className=\"summary-row\"><span>VAT</span> <span>{displayData.financials.vat}</span></div>\r\n                            <div className=\"summary-row discount\"><span>Discount</span> <span>{displayData.financials.discount}</span></div>\r\n                            <div className=\"summary-divider\"></div>\r\n                            <div className=\"summary-row net\"><span>Net</span> <span>{displayData.financials.net}</span></div>\r\n                            <div className=\"summary-row advance\"><span>Advance</span> <span>{displayData.financials.advance}</span></div>\r\n                            <div className=\"summary-row balance\"><span>Balance</span> <span>{displayData.financials.balance}</span></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Signature */}\r\n                <div className=\"signature-section\">\r\n                    <div className=\"signature-box\">\r\n                        <div className=\"signature-line\"></div>\r\n                        <p>Customer Signature</p>\r\n                    </div>\r\n                    <div className=\"signature-box\">\r\n                        <div className=\"signature-line\"></div>\r\n                        <p>Advisor Signature</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default JobCardPrint;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\PPFWarrantyForm.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[12,26],"text":""},"desc":"Remove unused variable 'useState'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport { ShieldCheck, Calendar, Info, CheckCircle } from 'lucide-react';\r\n\r\nconst PPFWarrantyForm = () => {\r\n    return (\r\n        <div style={{ padding: '20px', maxWidth: '1000px', margin: '0 auto', display: 'flex', flexDirection: 'column', gap: '24px' }}>\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                <div>\r\n                    <h1 style={{ fontSize: '28px', fontWeight: 'bold', color: '#fff' }}>PPF Warranty Registration</h1>\r\n                    <p style={{ color: '#94a3b8', fontSize: '14px', marginTop: '4px' }}>Register new Paint Protection Film installations</p>\r\n                </div>\r\n                <div style={{ background: 'rgba(16, 185, 129, 0.1)', border: '1px solid rgba(16, 185, 129, 0.2)', padding: '6px 12px', borderRadius: '8px', color: '#10b981', display: 'flex', alignItems: 'center', gap: '6px', fontSize: '13px' }}>\r\n                    <ShieldCheck size={16} />\r\n                    Active Warranty System\r\n                </div>\r\n            </div>\r\n\r\n            {/* Customer & Vehicle Info */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px' }}>\r\n                <GlassCard>\r\n                    <div style={{ padding: '24px' }}>\r\n                        <h3 style={{ fontSize: '16px', fontWeight: 'bold', color: '#b08d57', marginBottom: '20px', borderBottom: '1px solid rgba(255,255,255,0.05)', paddingBottom: '10px' }}>\r\n                            Customer Information\r\n                        </h3>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Full Name</label>\r\n                                <input placeholder=\"e.g. Ahmed Al-Mansoori\" style={inputStyle} />\r\n                            </div>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Contact Number</label>\r\n                                <input placeholder=\"+971 50 ...\" style={inputStyle} />\r\n                            </div>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Email Address</label>\r\n                                <input placeholder=\"client@example.com\" style={inputStyle} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                <GlassCard>\r\n                    <div style={{ padding: '24px' }}>\r\n                        <h3 style={{ fontSize: '16px', fontWeight: 'bold', color: '#b08d57', marginBottom: '20px', borderBottom: '1px solid rgba(255,255,255,0.05)', paddingBottom: '10px' }}>\r\n                            Vehicle Details\r\n                        </h3>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px' }}>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Brand</label>\r\n                                <input placeholder=\"Porsche\" style={inputStyle} />\r\n                            </div>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Model</label>\r\n                                <input placeholder=\"Cayenne\" style={inputStyle} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"input-group\" style={{ marginTop: '16px' }}>\r\n                            <label style={labelStyle}>VIN Number</label>\r\n                            <input placeholder=\"WP1ZZZ9Y...\" style={inputStyle} />\r\n                        </div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px', marginTop: '16px' }}>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Plate No.</label>\r\n                                <input placeholder=\"DXB ...\" style={inputStyle} />\r\n                            </div>\r\n                            <div className=\"input-group\">\r\n                                <label style={labelStyle}>Color</label>\r\n                                <input placeholder=\"Jet Black\" style={inputStyle} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </GlassCard>\r\n            </div>\r\n\r\n            {/* Installation Specs */}\r\n            <GlassCard>\r\n                <div style={{ padding: '24px' }}>\r\n                    <h3 style={{ fontSize: '16px', fontWeight: 'bold', color: '#fff', marginBottom: '20px' }}>\r\n                        Installation Specifications\r\n                    </h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px' }}>\r\n                        <div>\r\n                            <label style={labelStyle}>Branch</label>\r\n                            <select style={inputStyle}>\r\n                                <option>Ras Al Khor</option>\r\n                                <option>Al Quoz</option>\r\n                            </select>\r\n                        </div>\r\n                        <div>\r\n                            <label style={labelStyle}>Film Type</label>\r\n                            <select style={inputStyle}>\r\n                                <option>Gloss PPF (Self-Healing)</option>\r\n                                <option>Matte PPF</option>\r\n                                <option>Colored PPF</option>\r\n                                <option>Black PPF</option>\r\n                            </select>\r\n                        </div>\r\n                        <div>\r\n                            <label style={labelStyle}>Coverage Area</label>\r\n                            <select style={inputStyle}>\r\n                                <option>Full Body</option>\r\n                                <option>Full Front</option>\r\n                                <option>Custom Panel</option>\r\n                            </select>\r\n                        </div>\r\n                        <div>\r\n                            <label style={labelStyle}>Warranty Period</label>\r\n                            <select style={inputStyle}>\r\n                                <option>3 Years</option>\r\n                                <option>5 Years (Standard)</option>\r\n                                <option>7 Years (Premium)</option>\r\n                                <option>10 Years (Lifetime)</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            {/* Mandatory Service History Log */}\r\n            <GlassCard>\r\n                <div style={{ padding: '24px' }}>\r\n                    <h3 style={{ fontSize: '16px', fontWeight: 'bold', color: '#fff', marginBottom: '16px', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                        <Calendar size={18} color=\"#b08d57\" /> Mandatory Maintenance Schedule\r\n                    </h3>\r\n\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '14px' }}>\r\n                        <thead>\r\n                            <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.1)', color: '#94a3b8', textAlign: 'left' }}>\r\n                                <th style={{ padding: '12px' }}>Service Check</th>\r\n                                <th style={{ padding: '12px' }}>Due Date</th>\r\n                                <th style={{ padding: '12px' }}>Inspection Notes</th>\r\n                                <th style={{ padding: '12px' }}>Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\r\n                                <td style={{ padding: '12px', color: '#e2e8f0' }}>1st Check-up (7 Days)</td>\r\n                                <td style={{ padding: '12px' }}><input type=\"date\" style={miniInputStyle} /></td>\r\n                                <td style={{ padding: '12px' }}>Curing & Bubble Check</td>\r\n                                <td style={{ padding: '12px' }}>\r\n                                    <span style={{ color: '#f59e0b', background: 'rgba(245, 158, 11, 0.1)', padding: '4px 8px', borderRadius: '4px', fontSize: '12px' }}>Pending</span>\r\n                                </td>\r\n                            </tr>\r\n                            <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\r\n                                <td style={{ padding: '12px', color: '#e2e8f0' }}>2nd Check-up (6 Months)</td>\r\n                                <td style={{ padding: '12px' }}><input type=\"date\" style={miniInputStyle} /></td>\r\n                                <td style={{ padding: '12px' }}>General Inspection</td>\r\n                                <td style={{ padding: '12px' }}>\r\n                                    <span style={{ color: '#64748b', background: 'rgba(100, 116, 139, 0.1)', padding: '4px 8px', borderRadius: '4px', fontSize: '12px' }}>Locked</span>\r\n                                </td>\r\n                            </tr>\r\n                            <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\r\n                                <td style={{ padding: '12px', color: '#e2e8f0' }}>Annual Warranty Service</td>\r\n                                <td style={{ padding: '12px' }}><input type=\"date\" style={miniInputStyle} /></td>\r\n                                <td style={{ padding: '12px' }}>Comprehensive Detail</td>\r\n                                <td style={{ padding: '12px' }}>\r\n                                    <span style={{ color: '#64748b', background: 'rgba(100, 116, 139, 0.1)', padding: '4px 8px', borderRadius: '4px', fontSize: '12px' }}>Locked</span>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            <div style={{ display: 'flex', justifySelf: 'flex-end', marginTop: '20px' }}>\r\n                <button style={{\r\n                    width: '100%',\r\n                    padding: '16px',\r\n                    borderRadius: '8px',\r\n                    background: 'linear-gradient(135deg, #b08d57 0%, #8a6d43 100%)',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    fontWeight: 'bold',\r\n                    fontSize: '16px',\r\n                    boxShadow: '0 4px 20px rgba(176, 141, 87, 0.4)',\r\n                    cursor: 'pointer'\r\n                }}>\r\n                    Issue Digital Warranty Certificate\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst labelStyle = {\r\n    display: 'block',\r\n    color: '#94a3b8',\r\n    fontSize: '12px',\r\n    marginBottom: '6px',\r\n    fontWeight: '600'\r\n};\r\n\r\nconst inputStyle = {\r\n    width: '100%',\r\n    background: 'rgba(0, 0, 0, 0.2)',\r\n    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n    borderRadius: '8px',\r\n    padding: '10px 12px',\r\n    color: '#fff',\r\n    fontSize: '14px',\r\n    outline: 'none'\r\n};\r\n\r\nconst miniInputStyle = {\r\n    ...inputStyle,\r\n    padding: '6px 8px',\r\n    fontSize: '13px'\r\n};\r\n\r\nexport default PPFWarrantyForm;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\PPFWarrantyPrint.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\ServiceAdvisorForm.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[717,724],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchJobData'. Either include it or remove the dependency array.","line":30,"column":8,"nodeType":"ArrayExpression","endLine":30,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [fetchJobData, jobId]","fix":{"range":[1183,1190],"text":"[fetchJobData, jobId]"}}]},{"ruleId":"no-constant-binary-expression","severity":2,"message":"Unexpected constant truthiness on the left-hand side of a `||` expression.","line":39,"column":24,"nodeType":"TemplateLiteral","messageId":"constantShortCircuit","endLine":39,"endColumn":51},{"ruleId":"no-unused-vars","severity":2,"message":"'handleSubmit' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":52,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSubmit"},"fix":{"range":[1896,2611],"text":""},"desc":"Remove unused variable 'handleSubmit'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport SignaturePad from '../../components/SignaturePad';\r\nimport OCRScanner from '../../components/OCRScanner';\r\nimport { Car, AlertCircle, CheckCircle, Save } from 'lucide-react';\r\n\r\nconst ServiceAdvisorForm = () => {\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    const jobId = searchParams.get('jobId');\r\n\r\n    const [vehicleData, setVehicleData] = useState({\r\n        name: '', model: '', plate: '', jobCard: '', odo: '', jobId: jobId || ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const checklistItems = [\r\n        \"Dashboard Condition\", \"Steering Wheel\", \"Gear Lever\", \"AC Functionality\",\r\n        \"Radio/Infotainment\", \"Reverse Camera\", \"Instrument Cluster\", \"Warning Signs\",\r\n        \"Power Windows\", \"Central Locking\", \"Seat Adjustment\", \"Seat Belts\",\r\n        \"Sunroof\", \"Horn\", \"Floor Mats\"\r\n    ];\r\n\r\n    useEffect(() => {\r\n        if (jobId) {\r\n            fetchJobData();\r\n        }\r\n    }, [jobId]);\r\n\r\n    const fetchJobData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.get(`/forms/job-cards/api/jobs/${jobId}/`);\r\n            const job = res.data;\r\n            setVehicleData({\r\n                name: job.customer_name || '',\r\n                model: `${job.brand} ${job.model}` || '',\r\n                plate: job.registration_number || '',\r\n                jobCard: job.job_card_number || '',\r\n                odo: job.kilometers || '',\r\n                jobId: job.id\r\n            });\r\n        } catch (err) {\r\n            console.error('Error fetching job details:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const submissionData = {\r\n                ...vehicleData,\r\n                job_card: vehicleData.jobId,\r\n                date: new Date().toISOString().split('T')[0],\r\n                // Add other sections like checklist, inventory later or if needed\r\n            };\r\n            await api.post('/forms/checklists/api/checklists/', submissionData);\r\n            alert('Checklist Submitted Successfully!');\r\n            navigate(`/job-cards/${vehicleData.jobId}`);\r\n        } catch (err) {\r\n            console.error('Error submitting checklist:', err);\r\n            alert('Failed to submit checklist.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '20px', maxWidth: '1200px', margin: '0 auto', display: 'flex', flexDirection: 'column', gap: '24px', color: 'var(--text-primary)' }}>\r\n\r\n            {/* Header Area */}\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                    <h1 style={{ fontSize: '28px', fontWeight: 'bold', color: 'var(--text-primary)', marginBottom: '4px' }}>Service Advisor Checklist</h1>\r\n                    <p style={{ color: 'var(--text-secondary)', fontSize: '14px' }}>Comprehensive vehicle intake inspection</p>\r\n                </div>\r\n                <OCRScanner onScan={(data) => setVehicleData(prev => ({ ...prev, ...data }))} />\r\n            </div>\r\n\r\n            {/* Vehicle Details Input */}\r\n            <GlassCard>\r\n                <div style={{ padding: '24px', display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '20px' }}>\r\n                    <div className=\"input-group\">\r\n                        <label style={{ display: 'block', color: 'var(--text-secondary)', fontSize: '12px', marginBottom: '6px' }}>Customer Name</label>\r\n                        <input\r\n                            placeholder=\"Full Name\"\r\n                            style={getInputStyle()}\r\n                            value={vehicleData.name}\r\n                            onChange={e => setVehicleData({ ...vehicleData, name: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <label style={{ display: 'block', color: 'var(--text-secondary)', fontSize: '12px', marginBottom: '6px' }}>Vehicle Model</label>\r\n                        <input\r\n                            placeholder=\"e.g. Porsche 911\"\r\n                            style={getInputStyle()}\r\n                            value={vehicleData.model}\r\n                            onChange={e => setVehicleData({ ...vehicleData, model: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <label style={{ display: 'block', color: 'var(--text-secondary)', fontSize: '12px', marginBottom: '6px' }}>Plate Number</label>\r\n                        <input\r\n                            placeholder=\"DXB A 12345\"\r\n                            style={getInputStyle()}\r\n                            value={vehicleData.plate}\r\n                            onChange={e => setVehicleData({ ...vehicleData, plate: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <label style={{ display: 'block', color: 'var(--text-secondary)', fontSize: '12px', marginBottom: '6px' }}>Job Card #</label>\r\n                        <input\r\n                            placeholder=\"JC-2024-...\"\r\n                            style={getInputStyle()}\r\n                            value={vehicleData.jobCard}\r\n                            onChange={e => setVehicleData({ ...vehicleData, jobCard: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <label style={{ display: 'block', color: 'var(--text-secondary)', fontSize: '12px', marginBottom: '6px' }}>Odometer (KM)</label>\r\n                        <input\r\n                            placeholder=\"0\"\r\n                            style={getInputStyle()}\r\n                            value={vehicleData.odo}\r\n                            onChange={e => setVehicleData({ ...vehicleData, odo: e.target.value })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'minmax(0, 1fr) minmax(0, 1fr)', gap: '24px' }}>\r\n\r\n                {/* Exterior Inspection (Visual Markup Placeholder) */}\r\n                <GlassCard>\r\n                    <div style={{ padding: '24px', height: '100%' }}>\r\n                        <h3 style={{ fontSize: '18px', fontWeight: 'bold', color: 'var(--text-primary)', marginBottom: '16px', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                            <Car size={20} color=\"var(--gold)\" /> Exterior Inspection\r\n                        </h3>\r\n                        <div style={{\r\n                            background: 'var(--input-bg)',\r\n                            borderRadius: '12px',\r\n                            height: '400px',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            border: '1px dashed var(--border-color)',\r\n                            position: 'relative'\r\n                        }}>\r\n                            <Car size={80} color=\"var(--text-muted)\" style={{ opacity: 0.3, marginBottom: '16px' }} />\r\n                            <p style={{ color: 'var(--text-secondary)', fontSize: '14px', textAlign: 'center' }}>\r\n                                Interactive 360 Vehicle Diagram<br />\r\n                                <span style={{ fontSize: '12px', color: 'var(--text-muted)' }}>Click to mark scratches / dents</span>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                {/* Interior Checklist */}\r\n                <GlassCard>\r\n                    <div style={{ padding: '0', height: '100%', maxHeight: '500px', overflowY: 'auto' }}>\r\n                        <div style={{\r\n                            padding: '24px',\r\n                            position: 'sticky',\r\n                            top: 0,\r\n                            background: 'var(--bg-secondary)',\r\n                            zIndex: 10,\r\n                            borderBottom: '1px solid var(--border-color)',\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center'\r\n                        }}>\r\n                            <h3 style={{ fontSize: '18px', fontWeight: 'bold', color: 'var(--text-primary)' }}>Interior Check</h3>\r\n                            <span style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>{checklistItems.length} Points</span>\r\n                        </div>\r\n\r\n                        <div style={{ padding: '10px 24px 24px 24px' }}>\r\n                            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                                <thead>\r\n                                    <tr style={{ textAlign: 'left', color: 'var(--text-muted)', fontSize: '12px', textTransform: 'uppercase' }}>\r\n                                        <th style={{ paddingBottom: '12px', width: '60%' }}>Item</th>\r\n                                        <th style={{ paddingBottom: '12px', textAlign: 'center' }}>Pass</th>\r\n                                        <th style={{ paddingBottom: '12px', textAlign: 'center' }}>Fail</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {checklistItems.map((item, i) => (\r\n                                        <tr key={i} style={{ borderBottom: '1px solid var(--border-color)' }}>\r\n                                            <td style={{ padding: '12px 0', color: 'var(--text-primary)', fontSize: '14px' }}>{item}</td>\r\n                                            <td style={{ textAlign: 'center' }}>\r\n                                                <input type=\"checkbox\" style={{ accentColor: '#10b981', width: '16px', height: '16px', cursor: 'pointer' }} />\r\n                                            </td>\r\n                                            <td style={{ textAlign: 'center' }}>\r\n                                                <input type=\"checkbox\" style={{ accentColor: '#ef4444', width: '16px', height: '16px', cursor: 'pointer' }} />\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </GlassCard>\r\n            </div>\r\n\r\n            {/* Inventory / Loose Items */}\r\n            <GlassCard>\r\n                <div style={{ padding: '24px' }}>\r\n                    <h3 style={{ fontSize: '16px', fontWeight: 'bold', color: 'var(--text-primary)', marginBottom: '16px' }}>Inventory & Loose Items</h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(180px, 1fr))', gap: '16px' }}>\r\n                        {['Spare Wheel', 'Jack & Tools', 'First Aid Kit', 'Fire Extinguisher', 'Owner Manual', 'Service Book', 'Key Lock Nut'].map(item => (\r\n                            <label key={item} style={{ display: 'flex', alignItems: 'center', gap: '10px', color: 'var(--text-secondary)', fontSize: '14px', cursor: 'pointer' }}>\r\n                                <input type=\"checkbox\" style={{ accentColor: 'var(--gold)', width: '16px', height: '16px' }} />\r\n                                {item}\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </GlassCard>\r\n\r\n            {/* Signatures */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px' }}>\r\n                <SignaturePad label=\"Service Advisor Signature\" />\r\n                <SignaturePad label=\"Customer Signature (Acceptance)\" />\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '16px', marginTop: '20px', paddingBottom: '40px' }}>\r\n                <button style={{\r\n                    padding: '12px 24px',\r\n                    borderRadius: '8px',\r\n                    background: 'var(--bg-glass)',\r\n                    color: 'var(--text-primary)',\r\n                    border: '1px solid var(--border-color)',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.3s'\r\n                }}>\r\n                    Save Draft\r\n                </button>\r\n                <button style={{\r\n                    padding: '12px 24px',\r\n                    borderRadius: '8px',\r\n                    background: 'linear-gradient(135deg, var(--gold) 0%, var(--gold-mute) 100%)',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    fontWeight: 'bold',\r\n                    boxShadow: '0 4px 15px var(--gold-glow)',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.3s'\r\n                }}>\r\n                    Submit Inspection\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getInputStyle = () => ({\r\n    width: '100%',\r\n    background: 'var(--input-bg)',\r\n    border: '1px solid var(--border-color)',\r\n    borderRadius: '8px',\r\n    padding: '10px 12px',\r\n    color: 'var(--text-primary)',\r\n    fontSize: '14px',\r\n    outline: 'none',\r\n    transition: 'all 0.3s'\r\n});\r\n\r\nexport default ServiceAdvisorForm;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\forms\\UniversalChecklist.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":105,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":105,"endColumn":33},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":124,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":124,"endColumn":31}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Printer, CheckSquare } from 'lucide-react';\r\nimport './UniversalChecklist.css';\r\n\r\nconst UniversalChecklist = ({\r\n    title = \"Detailing Check List Form\",\r\n    sections = [],\r\n    jobCardData\r\n}) => {\r\n    const defaultSections = [\r\n        {\r\n            name: \"Exterior - Silver Package\",\r\n            items: [\r\n                \"Washing with high-quality shampoo\", \"Clay bar embedded contaminants removal\",\r\n                \"6 step Compound Body Polish\", \"Swirl Marks Removal\", \"Sealant and synthetic wax\",\r\n                \"Engine bay Degreasing\", \"Headlight Restoring\", \"Wheel Rim & Calipers cleaning\"\r\n            ]\r\n        },\r\n        {\r\n            name: \"Interior - Silver Package\",\r\n            items: [\r\n                \"Internal Vacuuming & Deep cleaning\", \"Seats cleaning (stain removal)\",\r\n                \"Leather Seat & Belt cleaning\", \"Dashboard & Console cleaning\",\r\n                \"Roof & Trunk-Bay Cleaning\", \"AC vents & Glass Surface\"\r\n            ]\r\n        }\r\n    ];\r\n\r\n    const displaySections = sections.length > 0 ? sections : defaultSections;\r\n\r\n    return (\r\n        <div className=\"checklist-container\">\r\n            <div className=\"print-controls no-print\">\r\n                <button onClick={() => window.print()} className=\"print-btn\">\r\n                    <Printer size={16} /> Print Checklist\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"checklist-document\">\r\n                {/* Header */}\r\n                <div className=\"checklist-header\">\r\n                    <h1>Elite SHINE</h1>\r\n                    <h2>{title}</h2>\r\n                </div>\r\n\r\n                {/* Common Details Form */}\r\n                <div className=\"common-details\">\r\n                    <div className=\"detail-field\">\r\n                        <label>Customer Name</label>\r\n                        <input type=\"text\" defaultValue={jobCardData?.customer_name || \"\"} />\r\n                    </div>\r\n                    <div className=\"detail-field\">\r\n                        <label>Job Card #</label>\r\n                        <input type=\"text\" defaultValue={jobCardData?.job_card_number || \"\"} />\r\n                    </div>\r\n                    <div className=\"detail-field\">\r\n                        <label>Vehicle Model</label>\r\n                        <input type=\"text\" defaultValue={jobCardData ? `${jobCardData.brand} ${jobCardData.model}` : \"\"} />\r\n                    </div>\r\n                    <div className=\"detail-field\">\r\n                        <label>Advisor / Checked By</label>\r\n                        <input type=\"text\" defaultValue={jobCardData?.service_advisor || \"\"} />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Dynamic Sections Loop */}\r\n                <div className=\"checklist-sections\">\r\n                    {displaySections.map((section, sIdx) => (\r\n                        <div key={sIdx} className=\"checklist-section\">\r\n                            <div className=\"section-title\">\r\n                                <CheckSquare size={16} /> {section.name}\r\n                            </div>\r\n                            <div className=\"section-items\">\r\n                                {section.items.map((item, iIdx) => (\r\n                                    <div key={iIdx} className=\"checklist-item\">\r\n                                        <span className=\"item-text\">{item}</span>\r\n                                        <div className=\"item-checkboxes\">\r\n                                            <label className=\"checkbox-label yes\">\r\n                                                <input type=\"checkbox\" /> Yes\r\n                                            </label>\r\n                                            <label className=\"checkbox-label no\">\r\n                                                <input type=\"checkbox\" /> No\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Footer Signature */}\r\n                <div className=\"signature-footer\">\r\n                    <div className=\"signature-box\">\r\n                        <div className=\"signature-line\"></div>\r\n                        <p>Technician / Advisor Signature</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Pre-configured checklist data exports\r\nexport const DETAILING_CHECKLIST = [\r\n    {\r\n        name: \"Exterior - Silver Package\",\r\n        items: [\r\n            \"Washing with high-quality shampoo\", \"Clay bar embedded contaminants removal\",\r\n            \"6 step Compound Body Polish\", \"Swirl Marks Removal\", \"Sealant and synthetic wax\",\r\n            \"Engine bay Degreasing\", \"Headlight Restoring\", \"Wheel Rim & Calipers cleaning\"\r\n        ]\r\n    },\r\n    {\r\n        name: \"Interior - Silver Package\",\r\n        items: [\r\n            \"Internal Vacuuming & Deep cleaning\", \"Seats cleaning (stain removal)\",\r\n            \"Leather Seat & Belt cleaning\", \"Dashboard & Console cleaning\",\r\n            \"Roof & Trunk-Bay Cleaning\", \"AC vents & Glass Surface\"\r\n        ]\r\n    }\r\n];\r\n\r\nexport const ADVISOR_CHECKLIST = [\r\n    {\r\n        name: \"Interior Inspection\",\r\n        items: [\r\n            \"Dashboard Condition\", \"Steering Wheel Buttons\", \"AC/Heater Functionality\",\r\n            \"Warning Signs on Dashboard\", \"Power Windows\", \"Sunroof Operation\", \"Floor Mats Condition\"\r\n        ]\r\n    },\r\n    {\r\n        name: \"Exterior / Engine\",\r\n        items: [\r\n            \"Engine Bay Cleanliness\", \"Spare Wheel Present\", \"Jack & Tools Available\",\r\n            \"Paint Scratches (Note in Remarks)\"\r\n        ]\r\n    }\r\n];\r\n\r\nexport default UniversalChecklist;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\AccessManagement.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[258,298],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport { Shield, User, Lock, Save, CheckCircle, XCircle } from 'lucide-react';\nimport { useAuth } from '../../context/AuthContext';\n\nconst AccessManagement = () => {\n    const { user: currentUser } = useAuth();\n    const [employees, setEmployees] = useState([]);\n    const [selectedEmployee, setSelectedEmployee] = useState(null);\n    const [permissions, setPermissions] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n    const [message, setMessage] = useState({ type: '', text: '' });\n\n    const modules = [\n        'Employees', 'HR Management', 'Job Cards', 'Bookings', 'Stock',\n        'Payroll', 'Attendance', 'Invoices', 'Dashboard', 'Finance',\n        'Leads', 'Projects', 'Ceramic/PPF', 'Pick & Drop'\n    ];\n\n    useEffect(() => {\n        fetchEmployees();\n    }, []);\n\n    const fetchEmployees = async () => {\n        try {\n            const res = await api.get('/hr/api/employees/');\n            setEmployees(res.data);\n            setLoading(false);\n        } catch (err) {\n            console.error(err);\n            setLoading(false);\n        }\n    };\n\n    const handleEmployeeSelect = (emp) => {\n        setSelectedEmployee(emp);\n        // Map existing permissions or create defaults\n        const existing = emp.module_permissions || [];\n        const mapped = modules.map(mod => {\n            const perm = existing.find(p => p.module_name === mod);\n            return perm || {\n                module_name: mod,\n                can_view: false,\n                can_create: false,\n                can_edit: false,\n                can_delete: false,\n                employee: emp.id\n            };\n        });\n        setPermissions(mapped);\n    };\n\n    const togglePermission = (index, field) => {\n        const updated = [...permissions];\n        updated[index][field] = !updated[index][field];\n        setPermissions(updated);\n    };\n\n    const savePermissions = async () => {\n        setSaving(true);\n        try {\n            for (const perm of permissions) {\n                if (perm.id) {\n                    await api.put(`/hr/api/permissions/${perm.id}/`, perm);\n                } else {\n                    await api.post(`/hr/api/permissions/`, {\n                        ...perm,\n                        employee: selectedEmployee.id\n                    });\n                }\n            }\n            setMessage({ type: 'success', text: 'Permissions updated successfully!' });\n            fetchEmployees(); // Refresh data\n        } catch (err) {\n            console.error(err);\n            setMessage({ type: 'error', text: 'Failed to update permissions.' });\n        } finally {\n            setSaving(false);\n            setTimeout(() => setMessage({ type: '', text: '' }), 3000);\n        }\n    };\n\n    if (loading) return <div className=\"p-8 text-gold\">Loading Sector Access Protocols...</div>;\n\n    return (\n        <div style={{ padding: '24px', background: 'var(--bg-primary)', minHeight: '100vh', color: 'var(--text-primary)', transition: 'all 0.3s' }}>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '40px' }}>\n                <div style={{ background: 'var(--gold-glow)', padding: '12px', borderRadius: '12px', border: '1px solid var(--gold-border)' }}>\n                    <Shield size={32} color=\"var(--gold)\" />\n                </div>\n                <div>\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '2px', textTransform: 'uppercase' }}>Security Operations</div>\n                    <h1 style={{ fontSize: '2.5rem', fontWeight: '900', fontFamily: 'Outfit, sans-serif', color: 'var(--text-primary)', margin: 0 }}>\n                        ACCESS <span style={{ color: 'var(--gold)' }}>CONTROL</span>\n                    </h1>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Employee List */}\n                <div style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', borderRadius: '16px', overflow: 'hidden', boxShadow: '0 4px 20px rgba(0,0,0,0.1)', height: 'fit-content' }}>\n                    <div style={{ padding: '20px', background: 'var(--bg-glass)', borderBottom: '1.5px solid var(--gold-border)', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                        <span style={{ fontWeight: '900', color: 'var(--gold)', letterSpacing: '1px', fontSize: '12px', textTransform: 'uppercase' }}>Personnel Nodes</span>\n                        <User size={20} color=\"var(--gold)\" />\n                    </div>\n                    <div style={{ maxHeight: '600px', overflowY: 'auto' }} className=\"custom-scrollbar\">\n                        {employees.map(emp => (\n                            <div\n                                key={emp.id}\n                                onClick={() => handleEmployeeSelect(emp)}\n                                style={{\n                                    padding: '16px',\n                                    borderBottom: '1.5px solid var(--gold-border)',\n                                    cursor: 'pointer',\n                                    transition: 'all 0.3s',\n                                    background: selectedEmployee?.id === emp.id ? 'var(--input-bg)' : 'transparent',\n                                    borderLeft: selectedEmployee?.id === emp.id ? '6px solid var(--gold)' : 'none'\n                                }}\n                                onMouseOver={(e) => selectedEmployee?.id !== emp.id && (e.currentTarget.style.background = 'var(--input-bg)')}\n                                onMouseOut={(e) => selectedEmployee?.id !== emp.id && (e.currentTarget.style.background = 'transparent')}\n                            >\n                                <div style={{ fontWeight: '900', color: 'var(--text-primary)', fontSize: '15px' }}>{emp.full_name}</div>\n                                <div style={{ fontSize: '12px', color: 'var(--text-secondary)', fontWeight: '800' }}>{emp.role}  {emp.employee_id}</div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n\n                {/* Permission Matrix */}\n                <div className=\"lg:col-span-2 space-y-6\">\n                    {selectedEmployee ? (\n                        <div style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', borderRadius: '20px', padding: '30px', boxShadow: '0 10px 40px rgba(0,0,0,0.2)' }}>\n                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '24px' }}>\n                                <div>\n                                    <h2 style={{ fontSize: '22px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase' }}>Protocols: <span style={{ color: 'var(--gold)' }}>{selectedEmployee.full_name}</span></h2>\n                                    <p style={{ fontSize: '12px', color: 'var(--gold)', fontWeight: '800', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '5px' }}>Configure granular operational clearance</p>\n                                </div>\n                                <button\n                                    onClick={savePermissions}\n                                    disabled={saving}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        gap: '10px',\n                                        padding: '12px 30px',\n                                        background: 'var(--gold)',\n                                        color: '#000',\n                                        fontWeight: '900',\n                                        borderRadius: '8px',\n                                        border: '1.5px solid var(--gold-border)',\n                                        cursor: 'pointer',\n                                        transition: 'all 0.3s',\n                                        opacity: saving ? 0.5 : 1,\n                                        textTransform: 'uppercase',\n                                        fontSize: '11px',\n                                        letterSpacing: '1px'\n                                    }}\n                                >\n                                    <Save size={18} />\n                                    {saving ? 'ENCRYPTING...' : 'SAVE PROTOCOLS'}\n                                </button>\n                            </div>\n\n                            {message.text && (\n                                <div className={`p-3 rounded-lg mb-4 flex items-center gap-2 ${message.type === 'success' ? 'bg-green-500/20 text-green-500' : 'bg-red-500/20 text-red-500'}`}>\n                                    {message.type === 'success' ? <CheckCircle className=\"w-5 h-5\" /> : <XCircle className=\"w-5 h-5\" />}\n                                    {message.text}\n                                </div>\n                            )}\n\n                            <div className=\"overflow-x-auto\">\n                                <table className=\"w-full text-left\">\n                                    <thead>\n                                        <tr style={{ borderBottom: '1.5px solid var(--gold-border)', color: 'var(--gold)', fontSize: '10px', textTransform: 'uppercase', letterSpacing: '2px', fontWeight: '900' }}>\n                                            <th style={{ padding: '15px 0' }}>Module Sector</th>\n                                            <th style={{ padding: '15px 0', textAlign: 'center' }}>View</th>\n                                            <th style={{ padding: '15px 0', textAlign: 'center' }}>Create</th>\n                                            <th style={{ padding: '15px 0', textAlign: 'center' }}>Edit</th>\n                                            <th style={{ padding: '15px 0', textAlign: 'center' }}>Delete</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {permissions.map((perm, idx) => (\n                                            <tr key={perm.module_name} style={{ borderBottom: '1.5px solid var(--gold-border)', transition: 'all 0.3s' }}>\n                                                <td style={{ padding: '16px 0', fontWeight: '900', color: 'var(--text-primary)', fontSize: '14px' }}>{perm.module_name}</td>\n                                                {['can_view', 'can_create', 'can_edit', 'can_delete'].map(field => (\n                                                    <td key={field} style={{ padding: '16px 0', textAlign: 'center' }}>\n                                                        <label className=\"relative inline-flex items-center cursor-pointer justify-center\">\n                                                            <input\n                                                                type=\"checkbox\"\n                                                                className=\"sr-only peer\"\n                                                                checked={perm[field]}\n                                                                onChange={() => togglePermission(idx, field)}\n                                                            />\n                                                            <div className=\"w-10 h-5 bg-[var(--text-muted)] opacity-30 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gold peer-checked:opacity-100\"></div>\n                                                        </label>\n                                                    </td>\n                                                ))}\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    ) : (\n                        <div style={{\n                            height: '100%',\n                            minHeight: '400px',\n                            display: 'flex',\n                            flexDirection: 'column',\n                            itemsCenter: 'center',\n                            justifyContent: 'center',\n                            background: 'var(--card-bg)',\n                            border: '1px solid var(--border-color)',\n                            borderRadius: '16px',\n                            padding: '48px',\n                            textAlign: 'center',\n                            boxShadow: 'inset 0 0 20px rgba(0,0,0,0.02)'\n                        }}>\n                            <div style={{ background: 'var(--gold-glow)', padding: '30px', borderRadius: '50%', marginBottom: '24px', border: '1.5px solid var(--gold-border)' }}>\n                                <Lock size={64} color=\"var(--gold)\" style={{ opacity: 0.8 }} />\n                            </div>\n                            <h2 style={{ fontSize: '24px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '2px' }}>Operational Clearance</h2>\n                            <p style={{ color: 'var(--gold)', marginTop: '8px', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase' }}>Select an operative to modify clearance levels</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <style>{`\n                .custom-scrollbar::-webkit-scrollbar { width: 6px; }\n                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\n                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(176, 141, 87, 0.2); border-radius: 10px; }\n                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(176, 141, 87, 0.4); }\n                .text-gold { color: #b08d57; }\n                .bg-gold { background-color: #b08d57; }\n                .border-gold { border-color: #b08d57; }\n            `}</style>\n        </div>\n    );\n};\n\nexport default AccessManagement;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\AttendanceBoard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'records' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":20,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"records"},"fix":{"range":[856,863],"text":""},"desc":"Remove unused variable 'records'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setRecords' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":20,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"setRecords"},"fix":{"range":[863,875],"text":""},"desc":"Remove unused variable 'setRecords'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentTime' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":21,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentTime"},"fix":{"range":[942,953],"text":""},"desc":"Remove unused variable 'currentTime'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'me' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":29,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"me"},"fix":{"range":[1258,1299],"text":""},"desc":"Remove unused variable 'me'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAttendance'. Either include it or remove the dependency array.","line":52,"column":8,"nodeType":"ArrayExpression","endLine":52,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [selectedDate, loading, fetchAttendance]","fix":{"range":[2259,2282],"text":"[selectedDate, loading, fetchAttendance]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":253,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":253,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[14053,14065],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'color' is defined but never used.","line":253,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":253,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"color"},"fix":{"range":[14065,14072],"text":""},"desc":"Remove unused variable 'color'."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    Users, Clock, CheckCircle2, AlertCircle,\r\n    Search, Filter, ArrowUpRight, UserCheck,\r\n    UserMinus, Zap, Printer\r\n} from 'lucide-react';\r\nimport PrintHeader from '../../components/PrintHeader';\r\n\r\nconst AttendanceBoard = () => {\r\n    const [employees, setEmployees] = useState([]);\r\n    const [logs, setLogs] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('ALL');\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n    // New state variables for current user's attendance\r\n    const [status, setStatus] = useState('NOT_CHECKED_IN'); // NOT_CHECKED_IN, CHECKED_IN, CHECKED_OUT\r\n    const [records, setRecords] = useState([]); // Current user's attendance records\r\n    const [currentTime, setCurrentTime] = useState(new Date());\r\n\r\n    const fetchAttendance = async () => {\r\n        try {\r\n            const res = await api.get(`/forms/attendance/api/records/?date=${selectedDate}`);\r\n            setLogs(res.data);\r\n\r\n            // Current user's status for the action buttons\r\n            const me = res.data.find(r => r.is_mine); // I might need to add this flag to serializer or check employee id\r\n            // Alternatively, fetch specifically for 'today' if needed for clocking actions\r\n            if (selectedDate === new Date().toISOString().split('T')[0]) {\r\n                const todayRes = await api.get('/forms/attendance/api/today/');\r\n                if (todayRes.data && todayRes.data.id) {\r\n                    setStatus(todayRes.data.check_out_time ? 'CHECKED_OUT' : 'CHECKED_IN');\r\n                } else {\r\n                    setStatus('NOT_CHECKED_IN');\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error fetching attendance logs:\", err);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchInitialData();\r\n        const interval = setInterval(() => setCurrentTime(new Date()), 1000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!loading) fetchAttendance();\r\n    }, [selectedDate, loading]);\r\n\r\n    const fetchInitialData = async () => {\r\n        try {\r\n            const empRes = await api.get('/hr/api/employees/');\r\n            setEmployees(empRes.data);\r\n        } catch (err) {\r\n            console.error('Error fetching employees', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCheckIn = async () => {\r\n        setLoading(true); // This loading state might need to be more granular if it affects the whole board\r\n        try {\r\n            await api.post('/forms/attendance/api/check-in/');\r\n            setStatus('CHECKED_IN');\r\n            alert('Checked in successfully!');\r\n            fetchAttendance();\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Check-in failed');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCheckOut = async () => {\r\n        setLoading(true); // This loading state might need to be more granular\r\n        try {\r\n            await api.post('/forms/attendance/api/check-out/');\r\n            setStatus('CHECKED_OUT');\r\n            alert('Checked out successfully!');\r\n            fetchAttendance();\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Check-out failed');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '100px', textAlign: 'center', color: 'var(--text-primary)', fontWeight: '900' }}>MONITORING PERSONNEL NODES...</div>;\r\n\r\n    const todaysLogs = logs; // Filtered by date on backend\r\n\r\n    const activeCount = todaysLogs.filter(l => !l.check_out_time).length;\r\n    const completedCount = todaysLogs.filter(l => l.check_out_time).length;\r\n    const missingCount = employees.length - todaysLogs.length;\r\n\r\n    return (\r\n        <div style={{ padding: '30px' }}>\r\n            <PrintHeader title=\"Daily Attendance Board\" />\r\n\r\n            <header style={{ marginBottom: '40px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '2px', textTransform: 'uppercase' }}>Workforce Control  Live</div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                        <h1 style={{ margin: '5px 0 0 0', fontSize: '2.2rem', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>Attendance Board</h1>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={selectedDate}\r\n                            onChange={(e) => setSelectedDate(e.target.value)}\r\n                            style={{\r\n                                background: 'var(--input-bg)',\r\n                                border: '1.5px solid var(--gold-border)',\r\n                                color: 'var(--gold)',\r\n                                padding: '8px 15px',\r\n                                borderRadius: '8px',\r\n                                fontWeight: '900',\r\n                                fontSize: '12px',\r\n                                cursor: 'pointer',\r\n                                marginTop: '8px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '15px' }}>\r\n                    {/* Attendance Actions */}\r\n                    {status !== 'CHECKED_IN' && status !== 'CHECKED_OUT' && (\r\n                        <button onClick={handleCheckIn} className=\"glass-card\" style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px', color: 'var(--text-primary)', border: '1.5px solid #10b981', cursor: 'pointer', background: 'rgba(16, 185, 129, 0.1)', fontWeight: '900', fontSize: '12px', textTransform: 'uppercase' }}>\r\n                            <Zap size={18} color=\"#10b981\" /> Clock In\r\n                        </button>\r\n                    )}\r\n\r\n                    {status === 'CHECKED_IN' && (\r\n                        <button onClick={handleCheckOut} className=\"glass-card\" style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px', color: 'var(--text-primary)', border: '1.5px solid #f43f5e', cursor: 'pointer', background: 'rgba(244, 63, 94, 0.1)', fontWeight: '900', fontSize: '12px', textTransform: 'uppercase' }}>\r\n                            <ArrowUpRight size={18} color=\"#f43f5e\" /> Clock Out\r\n                        </button>\r\n                    )}\r\n\r\n                    <button onClick={() => window.print()} className=\"glass-card\" style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px', color: 'var(--text-primary)', border: '1.5px solid var(--gold-border)', cursor: 'pointer', background: 'var(--input-bg)', fontWeight: '900', fontSize: '12px', textTransform: 'uppercase' }}>\r\n                        <Printer size={18} color=\"var(--gold)\" /> Print Log\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '25px', marginBottom: '30px' }}>\r\n                <StatusCard label=\"Total Staff\" value={employees.length} icon={Users} color=\"var(--gold)\" />\r\n                <StatusCard label=\"Currently In\" value={activeCount} icon={UserCheck} color=\"#10b981\" />\r\n                <StatusCard label=\"Shift Done\" value={completedCount} icon={Zap} color=\"var(--gold)\" />\r\n                <StatusCard label=\"Not Yet Logged\" value={missingCount} icon={UserMinus} color=\"#f43f5e\" />\r\n            </div>\r\n\r\n            <GlassCard style={{ padding: '30px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\r\n                    <h3 style={cardTitleStyle}>Real-time Personnel Status</h3>\r\n                    <div style={{ display: 'flex', gap: '10px' }}>\r\n                        {['ALL', 'IN', 'OUT', 'MISSING'].map(f => (\r\n                            <button\r\n                                key={f}\r\n                                onClick={() => setFilter(f)}\r\n                                style={{\r\n                                    padding: '8px 20px',\r\n                                    borderRadius: '8px',\r\n                                    fontSize: '10px',\r\n                                    fontWeight: '900',\r\n                                    background: filter === f ? 'var(--gold)' : 'var(--bg-glass)',\r\n                                    color: filter === f ? '#000000' : 'var(--text-secondary)',\r\n                                    border: '1.5px solid var(--gold-border)',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.3s',\r\n                                    textTransform: 'uppercase',\r\n                                    letterSpacing: '1px'\r\n                                }}\r\n                            >\r\n                                {f}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: '20px' }}>\r\n                    {employees.map(emp => {\r\n                        const log = todaysLogs.find(l => l.employee === emp.id);\r\n                        const status = log ? (log.check_out_time ? 'OUT' : 'IN') : 'MISSING';\r\n\r\n                        // Filtering logic\r\n                        if (filter !== 'ALL' && filter !== status) return null;\r\n\r\n                        return (\r\n                            <div key={emp.id} style={{\r\n                                padding: '20px',\r\n                                background: 'var(--bg-glass)',\r\n                                borderRadius: '15px',\r\n                                border: `1.5px solid ${status === 'IN' ? '#10b981' : 'var(--gold-border)'}`,\r\n                                position: 'relative'\r\n                            }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '15px' }}>\r\n                                    <div>\r\n                                        <div style={{ fontWeight: '900', fontSize: '15px', color: 'var(--text-primary)' }}>{emp.user_name || 'Personnel Node'}</div>\r\n                                        <div style={{ fontSize: '11px', color: 'var(--gold)', fontWeight: '800', textTransform: 'uppercase' }}>{emp.role} | ID: {emp.employee_id}</div>\r\n                                    </div>\r\n                                    <div style={{\r\n                                        padding: '4px 10px',\r\n                                        borderRadius: '20px',\r\n                                        fontSize: '10px',\r\n                                        fontWeight: '900',\r\n                                        background: status === 'IN' ? 'rgba(16, 185, 129, 0.1)' : status === 'OUT' ? 'rgba(176, 141, 87, 0.1)' : 'rgba(244, 63, 94, 0.1)',\r\n                                        color: status === 'IN' ? '#10b981' : status === 'OUT' ? '#b08d57' : '#f43f5e',\r\n                                        border: '1px solid currentColor'\r\n                                    }}>\r\n                                        {status}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                                    <div>\r\n                                        <div style={labelStyle}>Clock In</div>\r\n                                        <div style={{ fontSize: '13px', color: 'var(--text-primary)', fontWeight: '900' }}>{log?.check_in_time || '--:--'}</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div style={labelStyle}>Clock Out</div>\r\n                                        <div style={{ fontSize: '13px', color: 'var(--text-primary)', fontWeight: '900' }}>{log?.check_out_time || '--:--'}</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {status === 'IN' && (\r\n                                    <div style={{ marginTop: '15px', height: '4px', background: 'rgba(255,255,255,0.05)', borderRadius: '2px', overflow: 'hidden' }}>\r\n                                        <div className=\"progress-crawl\" style={{ height: '100%', width: '40%', background: '#10b981', borderRadius: '2px' }} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </GlassCard>\r\n\r\n            <style>{`\r\n                .progress-crawl { animation: crawl 2s infinite linear; }\r\n                @keyframes crawl { 0% { transform: translateX(-100%); } 100% { transform: translateX(250%); } }\r\n                @media print {\r\n                    body { background: #fff !important; color: #000 !important; }\r\n                    .glass-card { border: 1px solid #eee !important; box-shadow: none !important; background: #fff !important; color: #000 !important; }\r\n                    button, .no-print { display: none !important; }\r\n                    h1 { color: #8400ff !important; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst StatusCard = ({ label, value, icon: Icon, color }) => (\r\n    <GlassCard style={{ padding: '25px', display: 'flex', alignItems: 'center', gap: '20px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\r\n        <div style={{ width: '50px', height: '50px', borderRadius: '14px', background: 'var(--gold-glow)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1px solid var(--gold-border)' }}>\r\n            <Icon size={24} style={{ color: 'var(--gold)' }} />\r\n        </div>\r\n        <div>\r\n            <div style={{ fontSize: '12px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '1px' }}>{label}</div>\r\n            <div style={{ fontSize: '24px', fontWeight: '900', color: 'var(--text-primary)' }}>{value}</div>\r\n        </div>\r\n    </GlassCard>\r\n);\r\n\r\nconst cardTitleStyle = {\r\n    fontSize: '11px',\r\n    textTransform: 'uppercase',\r\n    color: 'var(--gold)',\r\n    marginBottom: '25px',\r\n    fontWeight: '900',\r\n    letterSpacing: '2px'\r\n};\r\n\r\nconst labelStyle = {\r\n    fontSize: '9px',\r\n    color: 'var(--gold)',\r\n    textTransform: 'uppercase',\r\n    marginBottom: '3px',\r\n    fontWeight: '900',\r\n    letterSpacing: '1px'\r\n};\r\n\r\nexport default AttendanceBoard;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\EmployeeDirectory.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\EmployeeRegistration.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\HRHub.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[352,359],"text":""},"desc":"Remove unused variable 'loading'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport { FileText, Download, AlertCircle, CheckCircle } from 'lucide-react';\r\n\r\nconst HRHub = () => {\r\n    const [slips, setSlips] = useState([]);\r\n    const [documents, setDocuments] = useState([]);\r\n    const [warnings, setWarnings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchHRData();\r\n    }, []);\r\n\r\n    const fetchHRData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const [slipRes, docRes, warnRes] = await Promise.all([\r\n                api.get('/hr/api/salary-slips/'),\r\n                api.get('/hr/api/employee-documents/'),\r\n                api.get('/hr/api/warning-letters/')\r\n            ]);\r\n            setSlips(slipRes.data);\r\n            setDocuments(docRes.data);\r\n            setWarnings(warnRes.data);\r\n        } catch (err) {\r\n            console.error('Error fetching HR Hub data', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-8 max-w-7xl mx-auto\" style={{ color: 'var(--text-primary)' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '3rem' }}>\r\n                <div>\r\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Executive Workforce</div>\r\n                    <h1 style={{ fontSize: '2.5rem', fontWeight: 900, margin: 0, color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif' }}>HR Console</h1>\r\n                    <p style={{ color: 'var(--gold)', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '0.5rem' }}>Employee documents, salary slips, and warning letters</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '2rem' }}>\r\n                <div style={{ gridColumn: 'span 2', display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n                    <div className=\"glass-card\" style={{ padding: '2rem', border: '1.5px solid var(--gold-border)' }}>\r\n                        <h3 style={{ margin: '0 0 1.5rem 0', fontWeight: '900', color: 'var(--text-primary)', fontSize: '1.25rem' }}>Recent Salary Slips</h3>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                            {slips.length === 0 ? (\r\n                                <p style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-secondary)', fontWeight: '800' }}>No fiscal slips available for current period.</p>\r\n                            ) : slips.map(slip => (\r\n                                <div key={slip.id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '1.25rem', backgroundColor: 'var(--input-bg)', borderRadius: '1rem', border: '1.5px solid var(--gold-border)' }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                                        <div style={{ padding: '0.75rem', backgroundColor: 'var(--gold-glow)', borderRadius: '0.75rem', border: '1px solid var(--gold-border)' }}>\r\n                                            <FileText style={{ color: 'var(--gold)' }} size={20} />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p style={{ margin: 0, fontWeight: '900', color: 'var(--text-primary)' }}>Salary Slip - {new Date(slip.month).toLocaleDateString([], { month: 'short', year: 'numeric' })}</p>\r\n                                            <p style={{ margin: 0, fontSize: '11px', color: 'var(--text-secondary)', fontWeight: '800' }}>Status: {slip.status}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '1.5rem' }}>\r\n                                        <span style={{ color: 'var(--text-primary)', fontWeight: '900', fontSize: '1.1rem' }}>AED {parseFloat(slip.net_salary).toLocaleString()}</span>\r\n                                        <a href={slip.file} target=\"_blank\" rel=\"noreferrer\" style={{ color: 'var(--gold)' }}>\r\n                                            <Download size={20} />\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"glass-card\" style={{ padding: '2rem', border: '1.5px solid var(--gold-border)' }}>\r\n                        <h3 style={{ margin: '0 0 1.5rem 0', fontWeight: '900', color: 'var(--text-primary)', fontSize: '1.25rem' }}>Employee Documents</h3>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1.5rem' }}>\r\n                            {documents.length === 0 ? (\r\n                                <p style={{ gridColumn: 'span 2', textAlign: 'center', padding: '2rem', color: 'var(--text-secondary)', fontWeight: '800' }}>No compliance documents hosted.</p>\r\n                            ) : documents.map(doc => (\r\n                                <div key={doc.id} style={{ padding: '1.25rem', backgroundColor: 'var(--input-bg)', borderRadius: '1rem', border: '1.5px solid var(--gold-border)' }}>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '1rem' }}>\r\n                                        <span style={{\r\n                                            backgroundColor: new Date(doc.expiry_date) > new Date() ? 'rgba(16, 185, 129, 0.1)' : 'rgba(244, 63, 94, 0.1)',\r\n                                            color: new Date(doc.expiry_date) > new Date() ? '#10b981' : '#f43f5e',\r\n                                            fontSize: '10px', padding: '4px 8px', borderRadius: '4px', fontWeight: '900', border: `1px solid ${new Date(doc.expiry_date) > new Date() ? '#10b98140' : '#f43f5e40'}`\r\n                                        }}>{new Date(doc.expiry_date) > new Date() ? 'Valid' : 'Expired'}</span>\r\n                                        <span style={{ fontSize: '10px', color: 'var(--text-secondary)', fontWeight: '800' }}>Expires: {doc.expiry_date}</span>\r\n                                    </div>\r\n                                    <p style={{ margin: 0, fontWeight: '900', textTransform: 'uppercase', letterSpacing: '1px', color: 'var(--text-primary)' }}>{doc.document_type}</p>\r\n                                    <p style={{ margin: '0.25rem 0 0 0', color: 'var(--gold)', fontSize: '0.9rem', fontWeight: '800' }}>{doc.document_number}</p>\r\n                                    <div style={{ marginTop: '1.25rem', display: 'flex', gap: '0.75rem' }}>\r\n                                        <a href={doc.file} target=\"_blank\" rel=\"noreferrer\" style={{ flex: 1, textDecoration: 'none' }}>\r\n                                            <button style={{ width: '100%', padding: '0.6rem', fontSize: '11px', fontWeight: '900', backgroundColor: 'var(--gold-glow)', border: '1px solid var(--gold-border)', borderRadius: '8px', color: 'var(--text-primary)', cursor: 'pointer' }}>View Record</button>\r\n                                        </a>\r\n                                        <a href={doc.file} download style={{ color: 'var(--text-primary)' }}>\r\n                                            <button style={{ padding: '0.6rem', backgroundColor: 'var(--input-bg)', border: '1px solid var(--border-color)', borderRadius: '8px', color: 'inherit', cursor: 'pointer' }}><Download size={14} /></button>\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n                    <div className=\"glass-card\" style={{ padding: '2rem', border: '1.5px solid var(--gold-border)' }}>\r\n                        <h3 style={{ margin: '0 0 1.5rem 0', fontWeight: '900', color: 'var(--text-primary)', fontSize: '1.25rem' }}>Disciplinary Status</h3>\r\n                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '1.25rem', backgroundColor: warnings.length === 0 ? 'rgba(16, 185, 129, 0.1)' : 'rgba(244, 63, 94, 0.1)', borderRadius: '1rem', border: `1.5px solid ${warnings.length === 0 ? '#10b98140' : '#f43f5e40'}` }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                                {warnings.length === 0 ? <CheckCircle style={{ color: '#10b981' }} size={24} /> : <AlertCircle style={{ color: '#f43f5e' }} size={24} />}\r\n                                <span style={{ color: warnings.length === 0 ? '#10b981' : '#f43f5e', fontWeight: '900', fontSize: '1.1rem' }}>\r\n                                    {warnings.length === 0 ? 'Good Standing' : `${warnings.length} Active Warnings`}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ marginTop: '2.5rem' }}>\r\n                            <p style={{ color: 'var(--gold)', fontSize: '10px', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '1.5rem' }}>Warning Letters</p>\r\n                            {warnings.length === 0 ? (\r\n                                <div style={{ textAlign: 'center', padding: '3rem 1.5rem', border: '2px dashed var(--gold-border)', borderRadius: '1.5rem', background: 'var(--gold-glow)' }}>\r\n                                    <AlertCircle size={40} style={{ color: 'var(--text-secondary)', marginBottom: '1rem', opacity: 0.5 }} />\r\n                                    <p style={{ color: 'var(--text-secondary)', fontSize: '13px', fontWeight: '800', margin: 0 }}>No disciplinary history found.</p>\r\n                                </div>\r\n                            ) : (\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                                    {warnings.map(warn => (\r\n                                        <div key={warn.id} style={{ padding: '1.25rem', backgroundColor: '#f43f5e10', borderRadius: '1rem', border: '1.5px solid #f43f5e40' }}>\r\n                                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n                                                <span style={{ fontWeight: '900', color: '#f43f5e', fontSize: '11px', textTransform: 'uppercase' }}>{warn.warning_level}</span>\r\n                                                <span style={{ fontSize: '10px', color: 'var(--text-secondary)', fontWeight: '800' }}>{warn.date_issued}</span>\r\n                                            </div>\r\n                                            <p style={{ margin: 0, fontSize: '13px', fontWeight: '800', color: 'var(--text-primary)' }}>{warn.reason}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HRHub;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\HRRoster.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":14,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[514,521],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchRoster'. Either include it or remove the dependency array.","line":18,"column":8,"nodeType":"ArrayExpression","endLine":18,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [fetchRoster, selectedDate]","fix":{"range":[606,620],"text":"[fetchRoster, selectedDate]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    Calendar, User, Clock, ChevronLeft,\n    ChevronRight, Plus, MapPin, ArrowLeft\n} from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\n\nconst HRRoster = () => {\n    const navigate = useNavigate();\n    const [roster, setRoster] = useState([]);\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchRoster();\n    }, [selectedDate]);\n\n    const fetchRoster = async () => {\n        setLoading(true);\n        try {\n            const res = await api.get(`/hr/api/roster/?date=${selectedDate}`);\n            setRoster(res.data);\n        } catch (err) {\n            console.error('Error fetching roster', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div style={{ padding: '30px 20px', background: 'var(--bg-primary)', minHeight: '100vh' }}>\n            <header style={{ display: 'flex', alignItems: 'center', gap: '20px', marginBottom: '40px' }}>\n                <button\n                    onClick={() => navigate('/hr/hub')}\n                    style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', padding: '12px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n                >\n                    <ArrowLeft size={20} color=\"var(--gold)\" />\n                </button>\n                <div>\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '2px', textTransform: 'uppercase' }}>Logistics Division</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: 'var(--text-primary)', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>SHIFT ROSTER</h1>\n                    <p style={{ color: 'var(--gold)', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '0.5rem' }}>Resource allocation & daily schedule</p>\n                </div>\n            </header>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 3fr', gap: '30px' }}>\n                {/* Day Selector */}\n                <GlassCard style={{ padding: '25px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                    <div style={{ textAlign: 'center', marginBottom: '20px' }}>\n                        <div style={{ fontSize: '12px', color: 'var(--gold)', textTransform: 'uppercase', fontWeight: '900', letterSpacing: '1px' }}>Current Month</div>\n                        <h2 style={{ margin: '10px 0', fontSize: '1.25rem', fontWeight: '900', color: 'var(--text-primary)' }}>February 2026</h2>\n                    </div>\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '10px', textAlign: 'center' }}>\n                        {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(d => <div key={d} style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900' }}>{d}</div>)}\n                        {Array.from({ length: 28 }).map((_, i) => {\n                            const day = i + 1;\n                            const currentYear = new Date().getFullYear();\n                            const currentMonth = new Date().getMonth();\n                            const loopDateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\n                            return (\n                                <div\n                                    key={i}\n                                    onClick={() => setSelectedDate(loopDateStr)}\n                                    style={{\n                                        padding: '8px',\n                                        fontSize: '12px',\n                                        fontWeight: '900',\n                                        color: 'var(--text-primary)',\n                                        border: selectedDate === loopDateStr ? '1.5px solid var(--gold)' : '1px solid var(--border-color)',\n                                        background: selectedDate === loopDateStr ? 'var(--gold-glow)' : 'transparent',\n                                        borderRadius: '8px',\n                                        cursor: 'pointer'\n                                    }}\n                                >\n                                    {day}\n                                </div>\n                            );\n                        })}\n                    </div>\n                </GlassCard>\n\n                {/* Daily Schedule */}\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '10px' }}>\n                        <h3 style={{ margin: 0, fontWeight: '900', color: 'var(--text-primary)', fontSize: '1.25rem' }}>DAILY ASSIGNMENTS</h3>\n                        <button className=\"glass-card\" style={{ padding: '10px 20px', fontSize: '12px', fontWeight: '900', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)', color: 'var(--text-primary)', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                            <Plus size={16} color=\"var(--gold)\" /> ASSIGN SHIFT\n                        </button>\n                    </div>\n                    {roster.map(item => (\n                        <GlassCard key={item.id} style={{ padding: '20px', display: 'flex', alignItems: 'center', justifyContent: 'space-between', border: '1.5px solid var(--gold-border)' }}>\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\n                                <div style={{ background: 'var(--gold-glow)', padding: '12px', borderRadius: '12px', border: '1px solid var(--gold-border)' }}>\n                                    <User size={24} color=\"var(--gold)\" />\n                                </div>\n                                <div>\n                                    <div style={{ fontWeight: '900', color: 'var(--text-primary)', fontSize: '16px' }}>{item.employee_name || 'Personnel Node'}</div>\n                                    <div style={{ color: 'var(--gold)', fontSize: '11px', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '1px' }}>{item.task_notes || 'Assigned Duty'}</div>\n                                </div>\n                            </div>\n                            <div style={{ textAlign: 'right' }}>\n                                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: '5px' }}>\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '13px', fontWeight: '900', color: 'var(--text-primary)' }}>\n                                        <Clock size={16} color=\"var(--gold)\" />\n                                        {new Date(item.shift_start).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - {new Date(item.shift_end).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                    </div>\n                                </div>\n                            </div>\n                        </GlassCard>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default HRRoster;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\HRRules.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[413,420],"text":""},"desc":"Remove unused variable 'loading'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    ScrollText, Plus, ShieldAlert, CheckCircle2,\n    Edit3, Trash2, ArrowLeft\n} from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\n\nconst HRRules = () => {\n    const navigate = useNavigate();\n    const [rules, setRules] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchRules = async () => {\n            try {\n                const res = await api.get('/hr/api/rules/');\n                // Transform backend data if needed to match UI expectations\n                const transformed = res.data.map(r => ({\n                    id: r.id,\n                    name: r.rule_name,\n                    value: r.rule_name.includes('Rate') ? `${r.rule_value}x` : (r.rule_name.includes('AED') ? `AED ${r.rule_value}` : `${r.rule_value} Mins`),\n                    desc: r.description\n                }));\n                setRules(transformed);\n            } catch (err) {\n                console.error(\"Failed to fetch rules\", err);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchRules();\n    }, []);\n\n    return (\n        <div style={{ padding: '30px 20px', background: 'var(--bg-primary)', minHeight: '100vh' }}>\n            <header style={{ display: 'flex', alignItems: 'center', gap: '20px', marginBottom: '40px' }}>\n                <button\n                    onClick={() => navigate('/hr/hub')}\n                    style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', padding: '12px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n                >\n                    <ArrowLeft size={20} color=\"var(--gold)\" />\n                </button>\n                <div>\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', letterSpacing: '2px', textTransform: 'uppercase' }}>Compliance Intelligence</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: 'var(--text-primary)', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>HR RULES & POLICIES</h1>\n                    <p style={{ color: 'var(--gold)', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '0.5rem' }}>Define compliance and payroll multipliers</p>\n                </div>\n            </header>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(350px, 1fr))', gap: '20px' }}>\n                <button className=\"glass-card\" style={{ border: '2px dashed var(--gold-border)', background: 'var(--input-bg)', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', gap: '15px', padding: '40px', color: 'var(--gold)', cursor: 'pointer' }}>\n                    <Plus size={40} />\n                    <span style={{ fontWeight: '900', textTransform: 'uppercase', letterSpacing: '1px' }}>Add New Policy</span>\n                </button>\n\n                {rules.map(rule => (\n                    <GlassCard key={rule.id} style={{ padding: '25px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '20px' }}>\n                            <div style={{ background: 'var(--gold-glow)', padding: '12px', borderRadius: '10px', border: '1px solid var(--gold-border)' }}>\n                                <ScrollText size={20} color=\"var(--gold)\" />\n                            </div>\n                            <div style={{ display: 'flex', gap: '10px', color: '#64748b' }}>\n                                <Edit3 size={16} cursor=\"pointer\" />\n                                <Trash2 size={16} cursor=\"pointer\" />\n                            </div>\n                        </div>\n                        <h3 style={{ margin: '0 0 10px 0', fontSize: '18px', fontWeight: '900', color: 'var(--text-primary)' }}>{rule.name}</h3>\n                        <div style={{ fontSize: '28px', fontWeight: '900', color: 'var(--gold)', marginBottom: '10px' }}>{rule.value}</div>\n                        <p style={{ margin: 0, fontSize: '13px', color: 'var(--text-secondary)', lineHeight: '1.5', fontWeight: '800' }}>{rule.desc}</p>\n                    </GlassCard>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default HRRules;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\PayrollConsole.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPayroll'. Either include it or remove the dependency array.","line":18,"column":8,"nodeType":"ArrayExpression","endLine":18,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPayroll, selectedMonth]","fix":{"range":[699,714],"text":"[fetchPayroll, selectedMonth]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    DollarSign, Printer, Download, Search,\n    ArrowRight, CheckCircle2, Clock, AlertCircle, RefreshCw\n} from 'lucide-react';\nimport PrintHeader from '../../components/PrintHeader';\n\nconst PayrollConsole = () => {\n    const [payroll, setPayroll] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [stats, setStats] = useState({ total: 0, processed: 0, pending: 0 });\n    const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); // YYYY-MM\n\n    useEffect(() => {\n        fetchPayroll();\n    }, [selectedMonth]);\n\n    const fetchPayroll = async () => {\n        setLoading(true);\n        try {\n            const res = await api.get(`/hr/api/payroll/?month=${selectedMonth}`);\n            setPayroll(res.data);\n\n            // Calculate stats from live data\n            const totalDisbursement = res.data.reduce((acc, curr) => acc + parseFloat(curr.net_salary || 0), 0);\n            const processed = res.data.filter(p => p.status === 'PROCESSED').length;\n            const pending = res.data.filter(p => p.status === 'PENDING').length;\n\n            setStats({\n                total: totalDisbursement,\n                processed: processed,\n                pending: pending\n            });\n        } catch (err) {\n            console.error('Error fetching payroll', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const runPayrollCycle = async () => {\n        if (!window.confirm(\"Automate salary generation from live attendance logs?\")) return;\n\n        setLoading(true);\n        try {\n            await api.post('/hr/api/payroll/generate_payroll_cycle/');\n            fetchPayroll();\n            alert(\"Elite Shine Payroll Cycle execution complete. All accounts synchronized.\");\n        } catch (err) {\n            console.error('Payroll generation failed', err);\n            alert(\"Cycle failed. Check service logs.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div style={{ padding: '40px 30px', background: 'var(--bg-primary)', minHeight: '100vh', color: 'var(--text-primary)' }}>\n            <PrintHeader title=\"Master Payroll Ledger\" />\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end', marginBottom: '60px' }}>\n                <div>\n                    <div style={{ color: 'var(--gold)', fontWeight: '900', letterSpacing: '4px', fontSize: '10px', marginBottom: '10px', textTransform: 'uppercase' }}>Established 2026  Fiscal Division</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: 'var(--text-primary)', fontSize: '3rem', fontWeight: '900', margin: 0 }}>PAYROLL CONSOLE</h1>\n                    <p style={{ color: 'var(--gold)', fontSize: '14px', fontWeight: '800', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '10px' }}>Real-time payroll synthesis from workforce performance nodes.</p>\n                </div>\n                <div style={{ display: 'flex', gap: '15px', marginBottom: '10px' }}>\n                    <button\n                        className=\"glass-card\"\n                        onClick={() => window.print()}\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px', color: 'var(--text-primary)', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)', cursor: 'pointer', fontWeight: '900', fontSize: '12px' }}\n                    >\n                        <Printer size={18} color=\"var(--gold)\" /> BULK SLIPS\n                    </button>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                        <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase' }}>Fiscal Period:</div>\n                        <input\n                            type=\"month\"\n                            value={selectedMonth}\n                            onChange={(e) => setSelectedMonth(e.target.value)}\n                            style={{\n                                background: 'var(--input-bg)',\n                                border: '1.5px solid var(--gold-border)',\n                                color: 'var(--gold)',\n                                padding: '10px 15px',\n                                borderRadius: '10px',\n                                fontWeight: '900',\n                                fontSize: '12px',\n                                cursor: 'pointer'\n                            }}\n                        />\n                    </div>\n                    <button\n                        onClick={runPayrollCycle}\n                        disabled={loading}\n                        style={{\n                            background: 'var(--input-bg)',\n                            border: '1.5px solid var(--gold-border)',\n                            color: 'var(--text-primary)',\n                            padding: '12px 25px',\n                            borderRadius: '12px',\n                            fontWeight: '900',\n                            cursor: 'pointer',\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: '10px',\n                            transition: 'all 0.3s',\n                            fontSize: '12px',\n                            textTransform: 'uppercase'\n                        }}\n                        onMouseOver={(e) => { e.currentTarget.style.background = 'var(--gold-glow)'; e.currentTarget.style.boxShadow = '0 0 15px var(--gold-glow)'; }}\n                        onMouseOut={(e) => { e.currentTarget.style.background = 'var(--input-bg)'; e.currentTarget.style.boxShadow = 'none'; }}\n                    >\n                        {loading ? <RefreshCw size={18} className=\"spin-anim\" /> : <Play size={18} />} Run Payroll Cycle\n                    </button>\n                </div>\n            </header>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '25px', marginBottom: '40px' }}>\n                <SummaryCard label=\"Live Disbursement\" value={`AED ${stats.total.toLocaleString()}`} icon={<DollarSign color=\"var(--gold)\" />} color=\"var(--gold)\" />\n                <SummaryCard label=\"Validated Entries\" value={`${stats.processed} / ${payroll.length}`} icon={<CheckCircle2 color=\"#10b981\" />} color=\"#10b981\" />\n                <SummaryCard label=\"Awaiting Sync\" value={stats.pending} icon={<Clock color=\"#f59e0b\" />} color=\"#f59e0b\" />\n            </div>\n\n            <GlassCard style={{ padding: '40px', background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\n                    <h3 style={{ margin: 0, fontSize: '1.25rem', fontWeight: '900', color: 'var(--text-primary)' }}>MASTER PAYROLL REGISTER</h3>\n                    <div style={{ padding: '10px 20px', background: 'var(--bg-glass)', borderRadius: '10px', border: '1.5px solid var(--gold-border)', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                        <Search size={16} color=\"var(--gold)\" />\n                        <span style={{ fontSize: '11px', color: 'var(--text-primary)', fontWeight: '900', textTransform: 'uppercase' }}>SEARCH NODES...</span>\n                    </div>\n                </div>\n\n                <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                    <thead>\n                        <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.05)', color: '#64748b', fontSize: '11px', textTransform: 'uppercase', letterSpacing: '1px' }}>\n                            <th style={{ padding: '15px', textAlign: 'left' }}>Personnel Node</th>\n                            <th style={{ padding: '15px', textAlign: 'left' }}>Fiscal Period</th>\n                            <th style={{ padding: '15px', textAlign: 'left' }}>Computation</th>\n                            <th style={{ padding: '15px', textAlign: 'left' }}>Compliance</th>\n                            <th style={{ padding: '15px', textAlign: 'right' }}>Logistics</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {payroll.length === 0 ? (\n                            <tr><td colSpan=\"5\" style={{ textAlign: 'center', padding: '60px', color: '#64748b' }}>No active fiscal sessions found. Run Cycle to synthesize data.</td></tr>\n                        ) : (\n                            payroll.map(item => (\n                                <tr key={item.id} style={{ borderBottom: '1px solid rgba(255,255,255,0.02)' }}>\n                                    <td style={{ padding: '15px' }}>\n                                        <div style={{ fontWeight: '900', color: 'var(--text-primary)' }}>{item.employee_name}</div>\n                                        <div style={{ fontSize: '11px', color: 'var(--gold)', fontWeight: '800' }}>ID: {item.employee_id || item.id}</div>\n                                    </td>\n                                    <td style={{ padding: '15px', color: '#94a3b8', fontSize: '13px' }}>{new Date(item.month).toLocaleDateString([], { month: 'short', year: 'numeric' })}</td>\n                                    <td style={{ padding: '15px' }}>\n                                        <div style={{ fontWeight: '900', color: 'var(--text-primary)', fontSize: '1.1rem' }}>AED {parseFloat(item.net_salary).toLocaleString()}</div>\n                                        <div style={{ fontSize: '9px', color: 'var(--gold)', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '0.5px' }}>Calculated Net Disbursement</div>\n                                    </td>\n                                    <td style={{ padding: '15px' }}>\n                                        <div style={{\n                                            padding: '4px 12px',\n                                            borderRadius: '20px',\n                                            fontSize: '10px',\n                                            fontWeight: '900',\n                                            display: 'inline-flex',\n                                            alignItems: 'center',\n                                            gap: '5px',\n                                            background: item.status === 'PROCESSED' ? 'rgba(16, 185, 129, 0.1)' : 'rgba(245, 158, 11, 0.1)',\n                                            color: item.status === 'PROCESSED' ? '#10b981' : '#f59e0b',\n                                            border: `1px solid ${item.status === 'PROCESSED' ? 'rgba(16, 185, 129, 0.2)' : 'rgba(245, 158, 11, 0.2)'}`\n                                        }}>\n                                            <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: 'currentColor' }} />\n                                            {item.status}\n                                        </div>\n                                    </td>\n                                    <td style={{ padding: '15px', textAlign: 'right' }}>\n                                        <button\n                                            onClick={() => window.print()}\n                                            className=\"glass-card\"\n                                            style={{ padding: '10px 20px', fontSize: '11px', fontWeight: '900', color: 'var(--text-primary)', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)', cursor: 'pointer', textTransform: 'uppercase' }}\n                                        >\n                                            SYNTHESIZE SLIP\n                                        </button>\n                                    </td>\n                                </tr>\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </GlassCard>\n            <style>{`\n                @media print {\n                    body { background: #fff !important; color: #000 !important; }\n                    .glass-card { border: 1px solid #eee !important; box-shadow: none !important; background: #fff !important; color: #000 !important; }\n                    button, header > div:last-child { display: none !important; }\n                    h1 { color: #8400ff !important; }\n                    table th { color: #666 !important; }\n                    table td { color: #000 !important; border-bottom: 1px solid #eee !important; }\n                }\n            `}</style>\n        </div>\n    );\n};\n\nconst SummaryCard = ({ label, value, icon, color }) => (\n    <GlassCard style={{ padding: '30px', display: 'flex', alignItems: 'center', gap: '25px', position: 'relative', overflow: 'hidden', border: '1.5px solid var(--gold-border)' }}>\n        <div style={{\n            position: 'absolute',\n            top: '-20px',\n            right: '-20px',\n            width: '100px',\n            height: '100px',\n            background: `radial-gradient(circle, ${color}33 0%, transparent 70%)`,\n            zIndex: 0\n        }} />\n        <div style={{ padding: '20px', background: 'var(--gold-glow)', borderRadius: '20px', position: 'relative', zIndex: 1, border: '1px solid var(--gold-border)' }}>{icon}</div>\n        <div style={{ position: 'relative', zIndex: 1 }}>\n            <div style={{ fontSize: '11px', color: 'var(--gold)', textTransform: 'uppercase', letterSpacing: '2px', fontWeight: '900' }}>{label}</div>\n            <div style={{ fontSize: '28px', fontWeight: '900', marginTop: '5px', color: 'var(--text-primary)' }}>{value}</div>\n        </div>\n    </GlassCard>\n);\n\nconst Play = ({ size }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polygon points=\"5 3 19 12 5 21 5 3\"></polygon>\n    </svg>\n);\n\nexport default PayrollConsole;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\TeamManagement.jsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Expected corresponding JSX closing tag for <div>","line":227,"column":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    Users, UserPlus, Search, Trash2, ArrowLeft,\n    Crown, Plus, X, Shield, ChevronDown, ChevronUp\n} from 'lucide-react';\n\nconst TeamManagement = () => {\n    const [teams, setTeams] = useState([]);\n    const [employees, setEmployees] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [showForm, setShowForm] = useState(false);\n    const [expandedTeam, setExpandedTeam] = useState(null);\n    const [addingMemberTo, setAddingMemberTo] = useState(null);\n    const [form, setForm] = useState({ name: '', description: '', leader: '', members: [] });\n    const [editingId, setEditingId] = useState(null);\n\n    useEffect(() => {\n        fetchTeams();\n        fetchEmployees();\n    }, []);\n\n    const fetchTeams = async () => {\n        try {\n            const res = await api.get('/hr/api/teams/');\n            setTeams(res.data);\n        } catch (err) {\n            console.error('Error fetching teams', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const fetchEmployees = async () => {\n        try {\n            const res = await api.get('/hr/api/employees/');\n            setEmployees(res.data);\n        } catch (err) {\n            console.error('Error fetching employees', err);\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const payload = {\n                name: form.name,\n                description: form.description,\n                leader: form.leader || null,\n                members: form.members\n            };\n            if (editingId) {\n                await api.put(`/hr/api/teams/${editingId}/`, payload);\n            } else {\n                await api.post('/hr/api/teams/', payload);\n            }\n            setShowForm(false);\n            setForm({ name: '', description: '', leader: '', members: [] });\n            setEditingId(null);\n            fetchTeams();\n        } catch (err) {\n            console.error('Error saving team', err);\n            alert('Failed to save team. Check that the name is unique.');\n        }\n    };\n\n    const handleEdit = (team) => {\n        setForm({\n            name: team.name,\n            description: team.description || '',\n            leader: team.leader || '',\n            members: team.members_detail ? team.members_detail.map(m => m.id) : []\n        });\n        setEditingId(team.id);\n        setShowForm(true);\n    };\n\n    const handleDelete = async (id) => {\n        if (!window.confirm('Are you sure you want to delete this team?')) return;\n        try {\n            await api.delete(`/hr/api/teams/${id}/`);\n            fetchTeams();\n        } catch (err) {\n            console.error('Error deleting team', err);\n        }\n    };\n\n    const handleAddMember = async (teamId, employeeId) => {\n        try {\n            await api.post(`/hr/api/teams/${teamId}/add_member/`, { employee_id: employeeId });\n            setAddingMemberTo(null);\n            fetchTeams();\n        } catch (err) {\n            console.error('Error adding member', err);\n        }\n    };\n\n    const handleRemoveMember = async (teamId, employeeId) => {\n        try {\n            await api.post(`/hr/api/teams/${teamId}/remove_member/`, { employee_id: employeeId });\n            fetchTeams();\n        } catch (err) {\n            console.error('Error removing member', err);\n        }\n    };\n\n    const toggleMember = (empId) => {\n        setForm(prev => ({\n            ...prev,\n            members: prev.members.includes(empId)\n                ? prev.members.filter(id => id !== empId)\n                : [...prev.members, empId]\n        }));\n    };\n\n    const filteredTeams = teams.filter(t =>\n        t.name.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const getAvailableMembers = (team) => {\n        const currentMemberIds = (team.members_detail || []).map(m => m.id);\n        return employees.filter(e => !currentMemberIds.includes(e.id));\n    };\n\n    return (\n        <div style={{ padding: '30px 20px', background: 'var(--bg-primary)', minHeight: '100vh', color: 'var(--text-primary)' }}>\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\n                <div>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '5px' }}>\n                        <button\n                            onClick={() => window.location.href = '/hr/hub'}\n                            style={{ background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', color: 'var(--gold)', cursor: 'pointer', padding: '8px', borderRadius: '10px' }}\n                        >\n                            <ArrowLeft size={22} />\n                        </button>\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', color: 'var(--text-primary)', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>TEAMS</h1>\n                    </div>\n                    <p style={{ color: 'var(--gold)', marginLeft: '45px', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase', letterSpacing: '1px' }}>Workforce Structure & Member Assignment</p>\n                </div>\n                <button\n                    className=\"glass-card\"\n                    onClick={() => { setShowForm(!showForm); setEditingId(null); setForm({ name: '', description: '', leader: '', members: [] }); }}\n                    style={{ fontSize: '12px', fontWeight: '900', display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)', color: 'var(--text-primary)', textTransform: 'uppercase' }}\n                >\n                    {showForm ? <X size={16} color=\"var(--gold)\" /> : <Plus size={16} color=\"var(--gold)\" />}\n                    {showForm ? 'Cancel' : 'New Team'}\n                </button>\n            </header>\n\n            {/* Create / Edit Form */}\n            {showForm && (\n                <GlassCard style={{ padding: '30px', marginBottom: '30px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                    <h3 style={{ color: 'var(--gold)', fontWeight: '900', marginBottom: '20px', textTransform: 'uppercase', fontSize: '1.25rem' }}>\n                        {editingId ? 'Edit Performance Unit' : 'Initialize New Team'}\n                    </h3>\n                    <form onSubmit={handleSubmit}>\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '20px' }}>\n                            <div>\n                                <div>\n                                    <label style={labelStyle}>Team Name *</label>\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={form.name}\n                                        onChange={(e) => setForm({ ...form, name: e.target.value })}\n                                        required\n                                        placeholder=\"e.g. Detailing Bay A\"\n                                        style={{ background: 'var(--bg-glass)', color: 'var(--text-primary)', border: '1px solid var(--gold-border)', fontWeight: '900' }}\n                                    />\n                                </div>\n                                <div>\n                                    <label style={labelStyle}>Team Leader</label>\n                                    <select\n                                        className=\"form-control\"\n                                        value={form.leader}\n                                        onChange={(e) => setForm({ ...form, leader: e.target.value })}\n                                        style={{ background: 'var(--bg-glass)', color: 'var(--text-primary)', border: '1px solid var(--gold-border)', fontWeight: '900' }}\n                                    >\n                                        <option value=\"\">-- Select Executive Lead --</option>\n                                        {employees.map(emp => (\n                                            <option key={emp.id} value={emp.id} style={{ background: 'var(--bg-primary)' }}>{emp.full_name} ({emp.role})</option>\n                                        ))}\n                                    </select>\n                                </div>\n                            </div>\n                            <div style={{ marginBottom: '20px' }}>\n                                <label style={labelStyle}>Description</label>\n                                <textarea\n                                    className=\"form-control\"\n                                    rows={2}\n                                    value={form.description}\n                                    onChange={(e) => setForm({ ...form, description: e.target.value })}\n                                    style={{ background: 'var(--bg-glass)', color: 'var(--text-primary)', border: '1px solid var(--gold-border)', fontWeight: '900' }}\n                                    placeholder=\"Brief description of this team's responsibility\"\n                                />\n                            </div>\n                            <div style={{ marginBottom: '20px' }}>\n                                <label style={labelStyle}>Members</label>\n                                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\n                                    {employees.map(emp => (\n                                        <button\n                                            key={emp.id}\n                                            type=\"button\"\n                                            onClick={() => toggleMember(emp.id)}\n                                            style={{\n                                                padding: '8px 16px',\n                                                borderRadius: '8px',\n                                                fontSize: '11px',\n                                                fontWeight: '900',\n                                                border: form.members.includes(emp.id) ? '1.5px solid var(--gold)' : '1px solid var(--border-color)',\n                                                background: form.members.includes(emp.id) ? 'var(--gold-glow)' : 'var(--bg-glass)',\n                                                color: form.members.includes(emp.id) ? 'var(--text-primary)' : 'var(--text-secondary)',\n                                                cursor: 'pointer',\n                                                textTransform: 'uppercase'\n                                            }}\n                                        >\n                                            {emp.full_name}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                            <button type=\"submit\" className=\"glass-card\" style={{ fontWeight: '900', padding: '12px 30px', border: '1.5px solid var(--gold-border)', color: 'var(--text-primary)', background: 'var(--gold-glow)', cursor: 'pointer', textTransform: 'uppercase' }}>\n                                {editingId ? 'COMMIT CHANGES' : 'INITIALIZE UNIT'}\n                            </button>\n                    </form>\n                </GlassCard>\n            )}\n\n            {/* Search */}\n            <div style={{ marginBottom: '30px', position: 'relative' }}>\n                <Search style={{ position: 'absolute', left: '15px', top: '50%', transform: 'translateY(-50%)', color: 'var(--gold)' }} size={18} />\n                <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Search performance units...\"\n                    style={{ paddingLeft: '45px', height: '50px', background: 'var(--input-bg)', color: 'var(--text-primary)', border: '1.5px solid var(--gold-border)', fontWeight: '900' }}\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n            </div>\n\n            {/* Stats Row */}\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '15px', marginBottom: '30px' }}>\n                <GlassCard style={{ padding: '20px', textAlign: 'center', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                    <Shield size={24} color=\"var(--gold)\" />\n                    <div style={{ fontSize: '28px', fontWeight: '900', color: 'var(--text-primary)', marginTop: '8px' }}>{teams.length}</div>\n                    <div style={{ fontSize: '11px', color: 'var(--gold)', textTransform: 'uppercase', fontWeight: '900', letterSpacing: '1px' }}>Total Teams</div>\n                </GlassCard>\n                <GlassCard style={{ padding: '20px', textAlign: 'center', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                    <Users size={24} color=\"var(--gold)\" />\n                    <div style={{ fontSize: '28px', fontWeight: '900', color: 'var(--text-primary)', marginTop: '8px' }}>\n                        {teams.reduce((sum, t) => sum + (t.member_count || 0), 0)}\n                    </div>\n                    <div style={{ fontSize: '11px', color: 'var(--gold)', textTransform: 'uppercase', fontWeight: '900', letterSpacing: '1px' }}>Assigned Members</div>\n                </GlassCard>\n                <GlassCard style={{ padding: '20px', textAlign: 'center', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                    <Crown size={24} color=\"var(--gold)\" />\n                    <div style={{ fontSize: '28px', fontWeight: '900', color: 'var(--text-primary)', marginTop: '8px' }}>\n                        {teams.filter(t => t.leader).length}\n                    </div>\n                    <div style={{ fontSize: '11px', color: 'var(--gold)', textTransform: 'uppercase', fontWeight: '900', letterSpacing: '1px' }}>With Leaders</div>\n                </GlassCard>\n            </div>\n\n            {/* Team Cards */}\n            <div style={{ display: 'grid', gap: '20px' }}>\n                {loading ? (\n                    <p style={{ textAlign: 'center', color: '#94a3b8' }}>Loading Teams...</p>\n                ) : filteredTeams.length === 0 ? (\n                    <GlassCard style={{ padding: '40px', textAlign: 'center' }}>\n                        <Users size={48} color=\"#64748b\" />\n                        <p style={{ color: '#94a3b8', marginTop: '15px' }}>No teams found. Create your first team above.</p>\n                    </GlassCard>\n                ) : filteredTeams.map(team => (\n                    <GlassCard key={team.id} style={{ padding: '25px', border: '1.5px solid var(--gold-border)', background: 'var(--input-bg)' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                                <div style={{\n                                    width: '50px', height: '50px', borderRadius: '12px',\n                                    background: 'var(--gold-glow)',\n                                    display: 'flex', alignItems: 'center', justifyContent: 'center',\n                                    border: '1.5px solid var(--gold-border)'\n                                }}>\n                                    <Users size={24} color=\"var(--gold)\" />\n                                </div>\n                                <div>\n                                    <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '900', color: 'var(--text-primary)' }}>{team.name}</h3>\n                                    {team.description && (\n                                        <p style={{ color: 'var(--gold)', fontSize: '11px', fontWeight: '900', margin: '4px 0 0', textTransform: 'uppercase' }}>{team.description}</p>\n                                    )}\n                                </div>\n                            </div>\n                            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n                                <span style={{\n                                    padding: '6px 16px', borderRadius: '6px', fontSize: '10px', fontWeight: '900',\n                                    background: 'var(--gold-glow)', color: 'var(--text-primary)', border: '1px solid var(--gold-border)', textTransform: 'uppercase'\n                                }}>\n                                    {team.member_count || 0} MEMBERS\n                                </span>\n                                <button onClick={() => handleEdit(team)} style={iconBtnStyle} title=\"Edit Unit\">\n                                    <UserPlus size={18} color=\"var(--gold)\" />\n                                </button>\n                                <button onClick={() => handleDelete(team.id)} style={iconBtnStyle} title=\"Decommission Unit\">\n                                    <Trash2 size={18} color=\"#ef4444\" />\n                                </button>\n                                <button onClick={() => setExpandedTeam(expandedTeam === team.id ? null : team.id)} style={iconBtnStyle}>\n                                    {expandedTeam === team.id ? <ChevronUp size={18} color=\"var(--gold)\" /> : <ChevronDown size={18} color=\"var(--gold)\" />}\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* Leader Badge */}\n                        {team.leader_name && (\n                            <div style={{ marginTop: '15px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                <Crown size={16} color=\"var(--gold)\" />\n                                <span style={{ fontSize: '12px', fontWeight: '900', color: 'var(--gold)', textTransform: 'uppercase', letterSpacing: '1px' }}>Executive Lead:</span>\n                                <span style={{ fontSize: '14px', color: 'var(--text-primary)', fontWeight: '900' }}>{team.leader_name}</span>\n                            </div>\n                        )}\n\n                        {/* Expanded Members Section */}\n                        {expandedTeam === team.id && (\n                            <div style={{ marginTop: '20px', borderTop: '1px solid rgba(255,255,255,0.05)', paddingTop: '20px' }}>\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>\n                                    <span style={{ fontSize: '12px', fontWeight: '800', textTransform: 'uppercase', color: '#64748b' }}>\n                                        Team Members\n                                    </span>\n                                    <button\n                                        onClick={() => setAddingMemberTo(addingMemberTo === team.id ? null : team.id)}\n                                        style={{ ...iconBtnStyle, display: 'flex', alignItems: 'center', gap: '5px', fontSize: '11px', color: '#b08d57', fontWeight: '700' }}\n                                    >\n                                        <Plus size={14} /> Add\n                                    </button>\n                                </div>\n\n                                {/* Add Member Dropdown */}\n                                {addingMemberTo === team.id && (\n                                    <div style={{\n                                        marginBottom: '15px', padding: '12px', borderRadius: '10px',\n                                        background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.08)'\n                                    }}>\n                                        <div style={{ fontSize: '11px', color: '#64748b', marginBottom: '8px', fontWeight: '700' }}>\n                                            Select employee to add:\n                                        </div>\n                                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>\n                                            {getAvailableMembers(team).map(emp => (\n                                                <button\n                                                    key={emp.id}\n                                                    onClick={() => handleAddMember(team.id, emp.id)}\n                                                    style={{\n                                                        padding: '5px 12px', borderRadius: '15px', fontSize: '11px',\n                                                        fontWeight: '700', border: '1px solid rgba(176,141,87,0.3)',\n                                                        background: 'rgba(176,141,87,0.1)', color: '#b08d57', cursor: 'pointer'\n                                                    }}\n                                                >\n                                                    + {emp.full_name}\n                                                </button>\n                                            ))}\n                                            {getAvailableMembers(team).length === 0 && (\n                                                <span style={{ fontSize: '12px', color: '#64748b' }}>All employees are already in this team.</span>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {/* Member List */}\n                                {(team.members_detail && team.members_detail.length > 0) ? (\n                                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(220px, 1fr))', gap: '10px' }}>\n                                        {team.members_detail.map(member => (\n                                            <div key={member.id} style={{\n                                                display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n                                                padding: '10px 15px', borderRadius: '10px',\n                                                background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.06)'\n                                            }}>\n                                                <div>\n                                                    <div style={{ fontSize: '13px', fontWeight: '700' }}>{member.full_name}</div>\n                                                    <div style={{ fontSize: '11px', color: '#b08d57' }}>{member.role}</div>\n                                                </div>\n                                                <button\n                                                    onClick={() => handleRemoveMember(team.id, member.id)}\n                                                    style={{ ...iconBtnStyle, padding: '4px' }}\n                                                    title=\"Remove from team\"\n                                                >\n                                                    <X size={14} color=\"#ef4444\" />\n                                                </button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                ) : (\n                                    <p style={{ color: '#64748b', fontSize: '13px', textAlign: 'center' }}>No members assigned yet.</p>\n                                )}\n                            </div>\n                        )}\n                    </GlassCard>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nconst labelStyle = {\n    display: 'block',\n    fontSize: '11px',\n    fontWeight: '900',\n    textTransform: 'uppercase',\n    color: 'var(--gold)',\n    marginBottom: '8px',\n    letterSpacing: '1px'\n};\n\nconst iconBtnStyle = {\n    background: 'none',\n    border: 'none',\n    cursor: 'pointer',\n    padding: '6px',\n    borderRadius: '8px'\n};\n\nexport default TeamManagement;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hr\\TechnicianAnalytics.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":9,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[262,274],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'color' is defined but never used.","line":9,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"color"},"fix":{"range":[274,281],"text":""},"desc":"Remove unused variable 'color'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n    Trophy, Users, Target, Activity,\r\n    TrendingUp, CheckCircle, Clock\r\n} from 'lucide-react';\r\nimport '../../layouts/AppLayout.css';\r\n\r\nconst StatCard = ({ title, value, icon: Icon, color }) => (\r\n    <div className=\"glass-card p-6\" style={{\r\n        background: 'var(--input-bg)',\r\n        border: '1.5px solid var(--gold-border)',\r\n        borderRadius: '20px'\r\n    }}>\r\n        <div className=\"flex justify-between items-start mb-4\">\r\n            <div>\r\n                <p style={{ color: 'var(--gold)', fontSize: '10px', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '2px', marginBottom: '8px' }}>{title}</p>\r\n                <h3 style={{ fontSize: '2rem', fontWeight: '900', color: 'var(--text-primary)' }}>{value}</h3>\r\n            </div>\r\n            <div style={{ padding: '12px', borderRadius: '12px', background: 'var(--gold-glow)', border: '1px solid var(--gold-border)' }}>\r\n                <Icon size={24} style={{ color: 'var(--gold)' }} />\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst TechnicianAnalytics = () => {\r\n    const [leaderboard, setLeaderboard] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await axios.get('/hr/api/employees/technician_leaderboard/');\r\n                setLeaderboard(response.data);\r\n                setLoading(false);\r\n            } catch (err) {\r\n                console.error('Leaderboard fetch failed', err);\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    const totals = leaderboard.reduce((acc, curr) => ({\r\n        jobs: acc.jobs + curr.jobs_closed,\r\n        revenue: acc.revenue + curr.revenue_generated\r\n    }), { jobs: 0, revenue: 0 });\r\n\r\n    if (loading) return <div className=\"p-12\" style={{ color: 'var(--text-primary)', fontWeight: '900' }}>CALCULATING PERFORMANCE...</div>;\r\n\r\n    return (\r\n        <div className=\"p-8\" style={{ background: 'var(--bg-primary)', minHeight: '100vh' }}>\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-12\">\r\n                <div>\r\n                    <div style={{ fontSize: '10px', color: 'var(--gold)', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Performance Intelligence</div>\r\n                    <h1 style={{ fontSize: '3rem', fontWeight: '900', color: 'var(--text-primary)', fontFamily: 'Outfit, sans-serif', margin: 0 }}>ROI ANALYTICS</h1>\r\n                    <p style={{ color: 'var(--gold)', fontWeight: '800', fontSize: '12px', textTransform: 'uppercase', letterSpacing: '1px', marginTop: '0.5rem' }}>Workshop throughput & elite detailing metrics</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12\">\r\n                <StatCard\r\n                    title=\"Total Detailing Jobs\"\r\n                    value={totals.jobs}\r\n                    icon={Activity}\r\n                    color=\"blue\"\r\n                />\r\n                <StatCard\r\n                    title=\"Realized Revenue\"\r\n                    value={`AED ${totals.revenue.toLocaleString()}`}\r\n                    icon={TrendingUp}\r\n                    color=\"green\"\r\n                />\r\n                <StatCard\r\n                    title=\"Avg. QC Pass\"\r\n                    value={`${(leaderboard.reduce((a, c) => a + c.qc_pass_rate, 0) / (leaderboard.length || 1)).toFixed(1)}%`}\r\n                    icon={CheckCircle}\r\n                    color=\"amber\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"glass-card overflow-hidden\" style={{\r\n                background: 'var(--input-bg)',\r\n                border: '1.5px solid var(--gold-border)',\r\n                borderRadius: '24px'\r\n            }}>\r\n                <div className=\"p-8 border-b border-gold-border flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Trophy size={24} style={{ color: 'var(--gold)' }} />\r\n                        <h2 style={{ fontSize: '1.25rem', fontWeight: '900', color: 'var(--text-primary)', margin: 0 }}>ELITE TECHNICIAN LEADERBOARD</h2>\r\n                    </div>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead>\r\n                            <tr style={{ background: 'var(--gold-glow)', borderBottom: '1.5px solid var(--gold-border)' }}>\r\n                                <th className=\"p-6\" style={{ fontSize: '11px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '1px' }}>Technician</th>\r\n                                <th className=\"p-6\" style={{ fontSize: '11px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '1px' }}>Jobs Closed</th>\r\n                                <th className=\"p-6\" style={{ fontSize: '11px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '1px' }}>Revenue Contribution</th>\r\n                                <th className=\"p-6 text-center\" style={{ fontSize: '11px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '1px' }}>QC Precision</th>\r\n                                <th className=\"p-6\" style={{ fontSize: '11px', fontWeight: '900', color: 'var(--text-primary)', textTransform: 'uppercase', letterSpacing: '1px' }}>Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gold-border text-text-primary\">\r\n                            {leaderboard.map((tech, i) => (\r\n                                <tr key={i} className=\"hover:bg-gold-glow transition-colors group\">\r\n                                    <td className=\"p-6\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div style={{ width: '40px', height: '40px', borderRadius: '12px', background: 'var(--input-bg)', border: '1.5px solid var(--gold-border)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: '900', color: 'var(--gold)' }}>\r\n                                                {tech.technician.charAt(0)}\r\n                                            </div>\r\n                                            <span style={{ fontWeight: '900', color: 'var(--text-primary)', fontSize: '15px' }}>\r\n                                                {tech.technician}\r\n                                            </span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"p-6\" style={{ fontWeight: '900', color: 'var(--text-primary)' }}>{tech.jobs_closed}</td>\r\n                                    <td className=\"p-6\" style={{ fontWeight: '900', color: 'var(--gold)' }}>AED {tech.revenue_generated.toLocaleString()}</td>\r\n                                    <td className=\"p-6\">\r\n                                        <div className=\"flex flex-col items-center gap-2\">\r\n                                            <span style={{ fontSize: '12px', fontWeight: '900', color: 'var(--text-primary)' }}>{tech.qc_pass_rate}%</span>\r\n                                            <div style={{ width: '100px', height: '6px', background: 'var(--border-color)', borderRadius: '3px', overflow: 'hidden', border: '1px solid var(--gold-border)' }}>\r\n                                                <div\r\n                                                    style={{ width: `${tech.qc_pass_rate}%`, height: '100%', background: 'var(--gold)', transition: 'all 1s ease' }}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"p-6\">\r\n                                        {i === 0 && (\r\n                                            <span style={{ px: '12px', py: '4px', borderRadius: '4px', background: 'var(--gold)', color: '#000', fontSize: '10px', fontWeight: '900', textTransform: 'uppercase', letterSpacing: '1px' }}>Top Performer</span>\r\n                                        )}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TechnicianAnalytics;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hubs\\FormsHub.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\hubs\\MediaLibrary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\invoices\\InvoiceDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchInvoice'. Either include it or remove the dependency array.","line":17,"column":8,"nodeType":"ArrayExpression","endLine":17,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchInvoice, id]","fix":{"range":[657,661],"text":"[fetchInvoice, id]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":35,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":189,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":57}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport api from '../../api/axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport { ArrowLeft, Printer, Download, CreditCard, ShieldCheck, User } from 'lucide-react';\nimport PrintHeader from '../../components/PrintHeader';\nimport SignaturePad from '../../components/SignaturePad';\n\nconst InvoiceDetail = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [invoice, setInvoice] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchInvoice();\n    }, [id]);\n\n    const fetchInvoice = async () => {\n        try {\n            const res = await api.get(`/forms/invoices/api/list/${id}/`);\n            setInvoice(res.data);\n        } catch (err) {\n            console.error('Error fetching invoice', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const markAsPaid = async () => {\n        try {\n            await api.patch(`/forms/invoices/api/list/${id}/`, { payment_status: 'PAID' });\n            setInvoice({ ...invoice, payment_status: 'PAID' });\n            alert('Payment Received!');\n        } catch (err) {\n            alert('Failed to update status');\n        }\n    };\n\n    if (loading) return <div style={{ padding: '50px', textAlign: 'center' }}>Loading...</div>;\n    if (!invoice) return <div style={{ padding: '50px', textAlign: 'center' }}>Invoice Not Found</div>;\n\n    return (\n        <div style={{ padding: '30px 20px' }}>\n            <PrintHeader title={`Tax Invoice: ${invoice.invoice_number}`} />\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                    <button\n                        onClick={() => navigate('/invoices')}\n                        style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '10px 20px', borderRadius: '12px', cursor: 'pointer', color: '#fff', display: 'flex', alignItems: 'center', gap: '8px', fontWeight: '700' }}\n                    >\n                        <ArrowLeft size={18} />\n                    </button>\n                    <div>\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Invoice #{invoice.invoice_number}</h1>\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginTop: '5px' }}>\n                            <div className=\"pulse-dot\" style={{ width: '6px', height: '6px', background: '#b08d57', borderRadius: '50%' }} />\n                            <p style={{ color: '#b08d57', fontSize: '12px', margin: 0, fontWeight: '900', letterSpacing: '2px' }}>ISSUED: {new Date(invoice.date).toLocaleDateString()}</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div style={{ display: 'flex', gap: '10px' }}>\n                    <button\n                        onClick={() => window.open(`/forms/utils/generate-pdf/Invoice/${id}/`, '_blank')}\n                        className=\"glass-card\"\n                        style={{ padding: '12px 25px', borderRadius: '12px', display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer', border: '1px solid rgba(255,255,255,0.1)', background: 'rgba(255,255,255,0.05)', color: '#fff', fontWeight: '700' }}\n                    >\n                        <Printer size={18} /> Print Tax Invoice\n                    </button>\n                    {invoice.payment_status !== 'PAID' && (\n                        <button onClick={markAsPaid} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '10px', background: '#b08d57', color: '#000', padding: '12px 25px', borderRadius: '12px', fontWeight: '900' }}>\n                            <CreditCard size={18} /> Mark as Paid\n                        </button>\n                    )}\n                </div>\n            </header>\n\n            <GlassCard className=\"printable-area\" style={{ padding: '50px', maxWidth: '850px', margin: '0 auto', background: '#fff', color: '#000' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '50px' }}>\n                    <div>\n                        <img\n                            src=\"/elite_shine_logo.png\"\n                            alt=\"Elite Shine Logo\"\n                            style={{\n                                width: '200px',\n                                height: 'auto',\n                                marginBottom: '5px'\n                            }}\n                        />\n                        <p style={{ margin: '5px 0 0 0', color: '#666', fontSize: '12px', fontWeight: 'bold' }}>Dubai, UAE | TRN: 100345678900003</p>\n                    </div>\n                    <div style={{ textAlign: 'right' }}>\n                        <h3 style={{ fontSize: '1.5rem', margin: 0 }}>TAX INVOICE</h3>\n                        <p style={{ margin: 0, color: '#b08d57', fontWeight: '800' }}>#{invoice.invoice_number}</p>\n                    </div>\n                </div>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '50px', marginBottom: '50px' }}>\n                    <div>\n                        <h4 style={{ fontSize: '11px', textTransform: 'uppercase', color: '#999', marginBottom: '10px' }}>Bill To:</h4>\n                        <p style={{ margin: 0, fontWeight: '700', fontSize: '1.1rem' }}>{invoice.customer_name}</p>\n                        {invoice.customer_trn && <p style={{ margin: '4px 0 0 0', fontSize: '13px' }}>TRN: {invoice.customer_trn}</p>}\n                    </div>\n                    <div style={{ textAlign: 'right' }}>\n                        <h4 style={{ fontSize: '11px', textTransform: 'uppercase', color: '#999', marginBottom: '10px' }}>Status:</h4>\n                        <span style={{\n                            padding: '4px 12px',\n                            borderRadius: '20px',\n                            fontSize: '11px',\n                            fontWeight: '800',\n                            color: invoice.payment_status === 'PAID' ? '#10b981' : '#f59e0b',\n                            border: `1px solid ${invoice.payment_status === 'PAID' ? '#10b981' : '#f59e0b'}`,\n                            textTransform: 'uppercase'\n                        }}>{invoice.payment_status}</span>\n                    </div>\n                </div>\n\n                <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '50px' }}>\n                    <thead>\n                        <tr style={{ background: '#f8f8f8', borderBottom: '2px solid #eee' }}>\n                            <th style={{ padding: '15px', textAlign: 'left', fontSize: '12px' }}>DESCRIPTION</th>\n                            <th style={{ padding: '15px', textAlign: 'right', fontSize: '12px' }}>TOTAL</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td style={{ padding: '20px 15px', verticalAlign: 'top' }}>\n                                <div style={{ fontWeight: '600' }}>Service Package</div>\n                                <div style={{ fontSize: '13px', color: '#666', marginTop: '5px', whiteSpace: 'pre-wrap' }}>{invoice.items}</div>\n                            </td>\n                            <td style={{ padding: '20px 15px', textAlign: 'right', fontWeight: '700' }}>\n                                AED {invoice.total_amount}\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                    <div style={{ width: '250px' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px', fontSize: '14px' }}>\n                            <span style={{ color: '#666' }}>Subtotal</span>\n                            <span>AED {invoice.total_amount}</span>\n                        </div>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px', fontSize: '14px' }}>\n                            <span style={{ color: '#666' }}>VAT (5%)</span>\n                            <span>AED {invoice.vat_amount}</span>\n                        </div>\n                        <div style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            paddingTop: '15px',\n                            marginTop: '15px',\n                            borderTop: '2px solid #eee',\n                            fontSize: '1.2rem',\n                            fontWeight: '900',\n                            color: '#b08d57'\n                        }}>\n                            <span>TOTAL</span>\n                            <span>AED {invoice.grand_total}</span>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Signature Section */}\n                <div style={{ marginTop: '50px', borderTop: '1px solid #eee', paddingTop: '30px' }}>\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '40px' }}>\n                        <div>\n                            <h4 style={{ fontSize: '11px', textTransform: 'uppercase', color: '#999', marginBottom: '10px' }}>Staff Authorization:</h4>\n                            <div style={{ borderBottom: '1px solid #eee', height: '60px', position: 'relative' }}>\n                                <p style={{ position: 'absolute', bottom: '5px', left: 0, margin: 0, fontSize: '12px', color: '#666' }}>Verified</p>\n                            </div>\n                        </div>\n                        <div>\n                            <h4 style={{ fontSize: '11px', textTransform: 'uppercase', color: '#999', marginBottom: '10px' }}>Customer Acceptance:</h4>\n                            {invoice.signature_data ? (\n                                <div style={{ borderBottom: '1px solid #eee', height: '80px', textAlign: 'center' }}>\n                                    <img src={invoice.signature_data} alt=\"Customer Sig\" style={{ maxHeight: '60px' }} />\n                                </div>\n                            ) : (\n                                <div className=\"no-print\">\n                                    <SignaturePad\n                                        title=\"Sign to Accept Invoice\"\n                                        onSave={async (data) => {\n                                            try {\n                                                await api.patch(`/forms/invoices/api/list/${id}/`, { signature_data: data });\n                                                setInvoice({ ...invoice, signature_data: data });\n                                                alert('Invoice signed successfully!');\n                                            } catch (err) {\n                                                alert('Failed to save signature');\n                                            }\n                                        }}\n                                    />\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                <div style={{ marginTop: '40px', borderTop: '1px solid #eee', paddingTop: '20px', fontSize: '11px', color: '#999', textAlign: 'center' }}>\n                    Thank you for choosing Elite Shine. This is a computer generated invoice.\n                </div>\n            </GlassCard>\n\n            <style>{`\n                @media print {\n                    body { background: #fff !important; color: #000 !important; }\n                    .printable-area { border: 1px solid #eee !important; box-shadow: none !important; width: 100% !important; margin: 0 !important; padding: 30px !important; }\n                    button, .btn-primary, header { display: none !important; }\n                }\n            `}</style>\n        </div>\n    );\n};\n\nexport default InvoiceDetail;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\invoices\\InvoiceList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\jobs\\JobBoard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[1098,1105],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentStatus' is defined but never used.","line":50,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentStatus"},"fix":{"range":[1581,1596],"text":""},"desc":"Remove unused variable 'currentStatus'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport api from '../../api/axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    MoreHorizontal,\r\n    Plus,\r\n    LayoutList,\r\n    Kanban,\r\n    User,\r\n    Clock,\r\n    CheckCircle2,\r\n    Truck,\r\n    CreditCard,\r\n    FileText,\r\n    Camera\r\n} from 'lucide-react';\r\nimport PrintHeader from '../../components/PrintHeader';\r\n\r\nconst columns = [\r\n    { id: 'RECEPTION', label: 'Reception', icon: Camera, color: '#3b82f6' },\r\n    { id: 'ESTIMATION', label: 'Estimation', icon: FileText, color: '#f59e0b' },\r\n    { id: 'WORK_ASSIGNMENT', label: 'Assignment', icon: User, color: '#8b5cf6' },\r\n    { id: 'WIP', label: 'In Progress', icon: Clock, color: '#10b981' },\r\n    { id: 'QC', label: 'QC Check', icon: CheckCircle2, color: '#ec4899' },\r\n    { id: 'INVOICING', label: 'Invoicing', icon: CreditCard, color: '#b08d57' },\r\n    { id: 'DELIVERY', label: 'Delivery', icon: Truck, color: '#2dd4bf' },\r\n];\r\n\r\nconst JobBoard = () => {\r\n    const [jobs, setJobs] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetchJobs();\r\n    }, []);\r\n\r\n    const fetchJobs = async () => {\r\n        try {\r\n            const res = await api.get('/forms/job-cards/api/jobs/');\r\n            setJobs(res.data);\r\n        } catch (err) {\r\n            console.error('Error fetching jobs', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const advanceJob = async (jobId, currentStatus) => {\r\n        if (!confirm('Are you sure you want to advance this job to the next stage?')) return;\r\n\r\n        try {\r\n            await api.post(`/forms/job-cards/api/jobs/${jobId}/advance_status/`);\r\n            fetchJobs(); // Refresh to see change\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Failed to advance workflow');\r\n        }\r\n    };\r\n\r\n    const getJobsByStatus = (status) => jobs.filter(j => j.status === status);\r\n\r\n    return (\r\n        <div style={{ padding: '30px', height: '100vh', display: 'flex', flexDirection: 'column', boxSizing: 'border-box' }}>\r\n            <PrintHeader title=\"Job Workflow Board\" />\r\n\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px', flexShrink: 0 }}>\r\n                <div>\r\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#b08d57', fontSize: '1.8rem', margin: 0 }}>Job Operations</h1>\r\n                    <p style={{ color: '#94a3b8', margin: 0 }}>Kanban Workflow View</p>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '15px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/job-cards')}\r\n                        className=\"glass-card\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '10px 20px', cursor: 'pointer', border: '1px solid rgba(255,255,255,0.1)', background: 'rgba(255,255,255,0.05)', color: '#fff' }}\r\n                    >\r\n                        <LayoutList size={20} /> List View\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/job-cards/create')}\r\n                        className=\"btn-primary\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\r\n                    >\r\n                        <Plus size={20} /> Open Job Card\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div style={{\r\n                display: 'flex',\r\n                gap: '20px',\r\n                overflowX: 'auto',\r\n                paddingBottom: '20px',\r\n                flex: 1,\r\n                alignItems: 'stretch'\r\n            }}>\r\n                {columns.map(col => (\r\n                    <div key={col.id} style={{ minWidth: '320px', width: '320px', display: 'flex', flexDirection: 'column' }}>\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '10px',\r\n                            marginBottom: '15px',\r\n                            background: `rgba(${parseInt(col.color.slice(1, 3), 16)}, ${parseInt(col.color.slice(3, 5), 16)}, ${parseInt(col.color.slice(5, 7), 16)}, 0.1)`,\r\n                            padding: '10px',\r\n                            borderRadius: '10px',\r\n                            border: `1px solid ${col.color}44`\r\n                        }}>\r\n                            <col.icon size={18} color={col.color} />\r\n                            <span style={{ fontWeight: '800', color: '#fff', fontSize: '14px', textTransform: 'uppercase' }}>{col.label}</span>\r\n                            <span style={{ marginLeft: 'auto', background: 'rgba(0,0,0,0.3)', padding: '2px 8px', borderRadius: '10px', fontSize: '10px', color: '#94a3b8' }}>\r\n                                {getJobsByStatus(col.id).length}\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            flex: 1,\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: '15px',\r\n                            overflowY: 'auto',\r\n                            paddingRight: '5px'\r\n                        }}>\r\n                            {getJobsByStatus(col.id).map(job => (\r\n                                <GlassCard\r\n                                    key={job.id}\r\n                                    style={{\r\n                                        padding: '15px',\r\n                                        cursor: 'pointer',\r\n                                        borderLeft: `4px solid ${col.color}`,\r\n                                        transition: 'transform 0.2s',\r\n                                        position: 'relative'\r\n                                    }}\r\n                                    onClick={() => navigate(`/job-cards/${job.id}`)}\r\n                                >\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px' }}>\r\n                                        <span style={{ fontSize: '11px', fontWeight: '800', color: col.color }}>#{job.job_card_number}</span>\r\n                                        <button\r\n                                            onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                advanceJob(job.id, job.status);\r\n                                            }}\r\n                                            style={{ background: 'transparent', border: 'none', color: '#94a3b8', cursor: 'pointer' }}\r\n                                            title=\"Advance Workflow\"\r\n                                        >\r\n                                            <MoreHorizontal size={16} />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div style={{ fontWeight: '700', color: '#fff', fontSize: '14px', marginBottom: '2px' }}>{job.customer_name}</div>\r\n                                    <div style={{ fontSize: '12px', color: '#94a3b8', marginBottom: '10px' }}>{job.brand} {job.model}</div>\r\n\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: 'auto', paddingTop: '10px', borderTop: '1px solid rgba(255,255,255,0.05)' }}>\r\n                                        <span style={{ fontSize: '11px', color: '#64748b' }}>{new Date(job.created_at).toLocaleDateString()}</span>\r\n                                        <span style={{ fontSize: '13px', fontWeight: '700', color: '#b08d57' }}>\r\n                                            AED {job.net_amount || '0'}\r\n                                        </span>\r\n                                    </div>\r\n                                </GlassCard>\r\n                            ))}\r\n                            {getJobsByStatus(col.id).length === 0 && (\r\n                                <div style={{\r\n                                    padding: '30px',\r\n                                    textAlign: 'center',\r\n                                    border: '2px dashed rgba(255,255,255,0.05)',\r\n                                    borderRadius: '12px',\r\n                                    color: '#64748b',\r\n                                    fontSize: '12px'\r\n                                }}>\r\n                                    No jobs\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            {/* Custom Scrollbar Styles for the board */}\r\n            <style>{`\r\n                ::-webkit-scrollbar {\r\n                    width: 6px;\r\n                    height: 6px;\r\n                }\r\n                ::-webkit-scrollbar-track {\r\n                    background: rgba(0,0,0,0.1); \r\n                }\r\n                ::-webkit-scrollbar-thumb {\r\n                    background: rgba(255,255,255,0.1); \r\n                    borderRadius: 3px;\r\n                }\r\n                ::-webkit-scrollbar-thumb:hover {\r\n                    background: rgba(255,255,255,0.2); \r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default JobBoard;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\jobs\\JobCreate.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  13 |\n  14 |     const [formData, setFormData] = useState({\n> 15 |         job_card_number: `JC-${Math.floor(1000 + Math.random() * 9000)}`,\n     |                                                  ^^^^^^^^^^^^^ Cannot call impure function\n  16 |         date: new Date().toISOString().split('T')[0],\n  17 |         customer_name: '',\n  18 |         phone_number: '',","line":15,"column":50,"nodeType":null,"endLine":15,"endColumn":63},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchUsers` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  42 |\n  43 |     useEffect(() => {\n> 44 |         fetchUsers();\n     |         ^^^^^^^^^^ `fetchUsers` accessed before it is declared\n  45 |         if (location.state && location.state.lead) {\n  46 |             const lead = location.state.lead;\n  47 |             setFormData(prev => ({\n\n  67 |     }, [location.state]);\n  68 |\n> 69 |     const fetchUsers = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 70 |         try {\n     | ^^^^^^^^^^^^^\n> 71 |             const res = await api.get('/api/auth/users/');\n     | ^^^^^^^^^^^^^\n> 72 |             setUsers(res.data);\n     | ^^^^^^^^^^^^^\n> 73 |         } catch (err) {\n     | ^^^^^^^^^^^^^\n> 74 |             console.error('Error fetching users', err);\n     | ^^^^^^^^^^^^^\n> 75 |         }\n     | ^^^^^^^^^^^^^\n> 76 |     };\n     | ^^^^^^^ `fetchUsers` is declared here\n  77 |\n  78 |     const addService = (service) => {\n  79 |         if (formData.selected_services.find(s => s.name === service.name)) return;","line":44,"column":9,"nodeType":null,"endLine":44,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport { Save, ArrowLeft, Plus, X } from 'lucide-react';\r\nimport { SERVICES_CATALOG } from '../../constants/services';\r\n\r\nimport { CAR_BRANDS, CAR_MODELS, CAR_COLORS, YEAR_CHOICES, PLATE_EMIRATES, PLATE_CODES } from '../../constants/vehicle_data';\r\n\r\nconst JobCreate = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const [formData, setFormData] = useState({\r\n        job_card_number: `JC-${Math.floor(1000 + Math.random() * 9000)}`,\r\n        date: new Date().toISOString().split('T')[0],\r\n        customer_name: '',\r\n        phone_number: '',\r\n        address: '',\r\n        license_plate: '',\r\n        plate_emirate: 'Dubai',\r\n        plate_code: 'A',\r\n        vin: '',\r\n        brand: 'Toyota',\r\n        model: '',\r\n        year: '2025',\r\n        color: '',\r\n        kilometers: '',\r\n        job_description: '',\r\n        service_advisor: 'Admin',\r\n        status: 'RECEPTION',\r\n        selected_services: [],\r\n        total_price: 0\r\n    });\r\n\r\n    const [activeCategory, setActiveCategory] = useState('');\r\n    const [users, setUsers] = useState([]);\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n        if (location.state && location.state.lead) {\r\n            const lead = location.state.lead;\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                customer_name: lead.customer_name || '',\r\n                phone_number: lead.phone || '',\r\n                job_description: lead.notes || '',\r\n                lead_id: lead.id\r\n            }));\r\n        } else if (location.state && location.state.booking) {\r\n            const b = location.state.booking;\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                customer_name: b.customer_name || '',\r\n                phone_number: b.phone || '',\r\n                license_plate: b.v_registration_no || '',\r\n                date: b.booking_date || new Date().toISOString().split('T')[0],\r\n                service_advisor: b.advisor_name || 'Admin',\r\n                booking_id: b.id,\r\n                lead_id: b.related_lead || ''\r\n            }));\r\n        }\r\n    }, [location.state]);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const res = await api.get('/api/auth/users/');\r\n            setUsers(res.data);\r\n        } catch (err) {\r\n            console.error('Error fetching users', err);\r\n        }\r\n    };\r\n\r\n    const addService = (service) => {\r\n        if (formData.selected_services.find(s => s.name === service.name)) return;\r\n        const newServices = [...formData.selected_services, service];\r\n        const subtotal = newServices.reduce((sum, s) => sum + parseFloat(s.price), 0);\r\n        const vat = subtotal * 0.05;\r\n        const total = subtotal + vat;\r\n        setFormData({\r\n            ...formData,\r\n            selected_services: newServices,\r\n            total_price: subtotal,\r\n            vat_amount: vat,\r\n            net_amount: total\r\n        });\r\n    };\r\n\r\n    const removeService = (index) => {\r\n        const newServices = formData.selected_services.filter((_, i) => i !== index);\r\n        const subtotal = newServices.reduce((sum, s) => sum + parseFloat(s.price), 0);\r\n        const vat = subtotal * 0.05;\r\n        const total = subtotal + vat;\r\n        setFormData({\r\n            ...formData,\r\n            selected_services: newServices,\r\n            total_price: subtotal,\r\n            vat_amount: vat,\r\n            net_amount: total\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const submissionData = {\r\n                ...formData,\r\n                phone: formData.phone_number,\r\n                registration_number: formData.license_plate,\r\n                kilometers: formData.kilometers,\r\n                total_amount: formData.total_price,\r\n                vat_amount: formData.vat_amount || 0,\r\n                net_amount: formData.net_amount || formData.total_price,\r\n                job_description: (formData.job_description ? formData.job_description + '\\n\\n' : '') +\r\n                    'Selected Services:\\n' +\r\n                    formData.selected_services.map(s => `- ${s.name} (AED ${s.price})`).join('\\n')\r\n            };\r\n\r\n            const res = await api.post('/forms/job-cards/api/jobs/', submissionData);\r\n            alert('Job Card Created! Proceeding to Vehicle Intake Checklist.');\r\n            navigate(`/service-advisor/form?jobId=${res.data.id}`);\r\n        } catch (err) {\r\n            console.error('Error creating job card', err);\r\n            let errorMessage = 'Failed to create Job Card.';\r\n            if (err.response && err.response.data) {\r\n                errorMessage = 'Validation Error:\\n' + Object.entries(err.response.data)\r\n                    .map(([field, errors]) => `${field}: ${Array.isArray(errors) ? errors.join(', ') : errors}`)\r\n                    .join('\\n');\r\n            }\r\n            alert(errorMessage);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '20px' }}>\r\n            <button\r\n                onClick={() => navigate('/job-cards')}\r\n                style={{ background: 'none', border: 'none', color: '#94a3b8', display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', marginBottom: '15px', fontSize: '13px' }}\r\n            >\r\n                <ArrowLeft size={16} /> Back to List\r\n            </button>\r\n\r\n            <GlassCard style={{ padding: '30px', maxWidth: '1000px', margin: '0 auto' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '25px' }}>\r\n                    <h2 style={{ fontFamily: 'Outfit, sans-serif', color: '#b08d57', fontSize: '1.5rem', margin: 0 }}>NEW JOB CARD</h2>\r\n                    <span style={{ color: '#b08d57', fontWeight: '800', fontSize: '14px' }}>#{formData.job_card_number}</span>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'minmax(300px, 1.1fr) 1fr', gap: '30px', marginBottom: '20px' }}>\r\n                        <div className=\"section\">\r\n                            <h3 style={sectionTitleStyle}>RECEPTION & CUSTOMER</h3>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1.5fr 1fr', gap: '15px', marginBottom: '12px' }}>\r\n                                <div>\r\n                                    <label style={labelStyle}>Customer Name</label>\r\n                                    <input type=\"text\" name=\"customer_name\" className=\"form-control\" value={formData.customer_name} onChange={handleChange} required style={{ height: '36px' }} />\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>Phone Number</label>\r\n                                    <input type=\"text\" name=\"phone_number\" className=\"form-control\" value={formData.phone_number} onChange={handleChange} required style={{ height: '36px' }} />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ marginBottom: '12px' }}>\r\n                                <label style={labelStyle}>Address (Optional)</label>\r\n                                <input name=\"address\" className=\"form-control\" value={formData.address} onChange={handleChange} style={{ height: '36px' }} />\r\n                            </div>\r\n\r\n                            <h3 style={{ ...sectionTitleStyle, marginTop: '20px' }}>NOTES & COMPLAINTS</h3>\r\n                            <textarea name=\"job_description\" className=\"form-control\" rows=\"3\" value={formData.job_description} onChange={handleChange} placeholder=\"Damages, special requests...\" style={{ fontSize: '13px', minHeight: '80px' }}></textarea>\r\n                        </div>\r\n\r\n                        <div className=\"section\">\r\n                            <h3 style={sectionTitleStyle}>VEHICLE DETAILS</h3>\r\n\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1.2fr 1fr', gap: '12px', marginBottom: '10px' }}>\r\n                                <div>\r\n                                    <label style={labelStyle}>Brand</label>\r\n                                    <select name=\"brand\" className=\"form-control\" value={formData.brand} onChange={handleChange} required style={{ height: '34px', fontSize: '13px', padding: '0 10px' }}>\r\n                                        {CAR_BRANDS.map(b => <option key={b} value={b}>{b}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>Model</label>\r\n                                    <input\r\n                                        name=\"model\"\r\n                                        className=\"form-control\"\r\n                                        value={formData.model}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                        list=\"car-models\"\r\n                                        placeholder=\"Type model...\"\r\n                                        style={{ height: '34px' }}\r\n                                    />\r\n                                    <datalist id=\"car-models\">\r\n                                        {CAR_MODELS[formData.brand]?.map(m => (\r\n                                            <option key={m} value={m} />\r\n                                        ))}\r\n                                    </datalist>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '10px', marginBottom: '10px' }}>\r\n                                <div>\r\n                                    <label style={labelStyle}>Year</label>\r\n                                    <select name=\"year\" className=\"form-control\" value={formData.year} onChange={handleChange} required style={{ height: '34px', fontSize: '13px', padding: '0 10px' }}>\r\n                                        {YEAR_CHOICES.map(y => <option key={y} value={y}>{y}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>Color</label>\r\n                                    <input\r\n                                        name=\"color\"\r\n                                        className=\"form-control\"\r\n                                        value={formData.color}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                        list=\"car-colors\"\r\n                                        placeholder=\"Pick color...\"\r\n                                        style={{ height: '34px' }}\r\n                                    />\r\n                                    <datalist id=\"car-colors\">\r\n                                        {CAR_COLORS.map(c => (\r\n                                            <option key={c} value={c} />\r\n                                        ))}\r\n                                    </datalist>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>Kilometers</label>\r\n                                    <input name=\"kilometers\" type=\"number\" className=\"form-control\" value={formData.kilometers} onChange={handleChange} required style={{ height: '34px' }} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1.2fr 0.8fr 1fr', gap: '10px', marginBottom: '10px' }}>\r\n                                <div>\r\n                                    <label style={labelStyle}>Emirate</label>\r\n                                    <select name=\"plate_emirate\" className=\"form-control\" value={formData.plate_emirate} onChange={handleChange} required style={{ height: '34px', fontSize: '13px', padding: '0 10px' }}>\r\n                                        {PLATE_EMIRATES.map(e => <option key={e} value={e}>{e}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>Code</label>\r\n                                    <select name=\"plate_code\" className=\"form-control\" value={formData.plate_code} onChange={handleChange} required style={{ height: '34px', fontSize: '13px', padding: '0 10px' }}>\r\n                                        {PLATE_CODES.map(c => <option key={c} value={c}>{c}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>Number</label>\r\n                                    <input name=\"license_plate\" className=\"form-control\" value={formData.license_plate} onChange={handleChange} required style={{ height: '34px' }} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={labelStyle}>VIN Number</label>\r\n                                <input name=\"vin\" className=\"form-control\" value={formData.vin} onChange={handleChange} required style={{ height: '34px' }} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"section\" style={{ marginBottom: '30px' }}>\r\n                        <h3 style={sectionTitleStyle}>Service Selection</h3>\r\n\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '20px' }}>\r\n                            <div>\r\n                                <label style={labelStyle}>Service Category</label>\r\n                                <select\r\n                                    className=\"form-control\"\r\n                                    value={activeCategory}\r\n                                    onChange={(e) => setActiveCategory(e.target.value)}\r\n                                >\r\n                                    <option value=\"\">Select Category...</option>\r\n                                    {Object.keys(SERVICES_CATALOG).map(cat => (\r\n                                        <option key={cat} value={cat}>{cat}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label style={labelStyle}>Specific Service</label>\r\n                                <select\r\n                                    className=\"form-control\"\r\n                                    onChange={(e) => {\r\n                                        if (e.target.value) {\r\n                                            const service = SERVICES_CATALOG[activeCategory][e.target.value];\r\n                                            addService(service);\r\n                                            e.target.value = '';\r\n                                        }\r\n                                    }}\r\n                                    disabled={!activeCategory}\r\n                                >\r\n                                    <option value=\"\">Select Service...</option>\r\n                                    {activeCategory && SERVICES_CATALOG[activeCategory].map((s, idx) => (\r\n                                        <option key={idx} value={idx}>{s.name} - AED {(s.price * 1.05).toFixed(2)} (Incl. VAT)</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Selected Services List */}\r\n                        <div style={{ marginBottom: '20px' }}>\r\n                            <label style={labelStyle}>Selected Services</label>\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n                                {formData.selected_services.length === 0 ? (\r\n                                    <div style={{ padding: '15px', textAlign: 'center', background: 'rgba(255,255,255,0.02)', borderRadius: '10px', border: '1px dashed rgba(255,255,255,0.1)', color: '#64748b', fontSize: '13px' }}>\r\n                                        No services selected yet.\r\n                                    </div>\r\n                                ) : (\r\n                                    formData.selected_services.map((s, idx) => (\r\n                                        <div key={idx} style={{\r\n                                            display: 'flex',\r\n                                            justifyContent: 'space-between',\r\n                                            alignItems: 'center',\r\n                                            padding: '12px 15px',\r\n                                            background: 'rgba(176, 141, 87, 0.05)',\r\n                                            borderRadius: '10px',\r\n                                            border: '1px solid rgba(176, 141, 87, 0.1)'\r\n                                        }}>\r\n                                            <div>\r\n                                                <div style={{ fontSize: '14px', fontWeight: '600', color: '#fff' }}>{s.name}</div>\r\n                                                <div style={{ fontSize: '12px', color: '#b08d57' }}>AED {s.price}</div>\r\n                                            </div>\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => removeService(idx)}\r\n                                                style={{ background: 'rgba(239, 68, 68, 0.1)', border: 'none', color: '#ef4444', padding: '5px', borderRadius: '5px', cursor: 'pointer' }}\r\n                                            >\r\n                                                <X size={16} />\r\n                                            </button>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                            <div style={{ background: 'rgba(255,255,255,0.02)', padding: '15px', borderRadius: '12px', border: '1px solid rgba(255,255,255,0.05)', display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                                <div>\r\n                                    <label style={labelStyle}>Subtotal (Net)</label>\r\n                                    <div style={{ fontSize: '16px', fontWeight: '700', color: '#94a3b8' }}>AED {formData.total_price.toFixed(2)}</div>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={labelStyle}>VAT (5%)</label>\r\n                                    <div style={{ fontSize: '16px', fontWeight: '700', color: '#94a3b8' }}>AED {(formData.vat_amount || 0).toFixed(2)}</div>\r\n                                </div>\r\n                                <div style={{ gridColumn: 'span 2', borderTop: '1px solid rgba(255,255,255,0.05)', paddingTop: '10px' }}>\r\n                                    <label style={labelStyle}>Total Estimate (Gross)</label>\r\n                                    <div style={{ fontSize: '24px', fontWeight: '900', color: '#b08d57' }}>AED {(formData.net_amount || formData.total_price).toFixed(2)}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label style={labelStyle}>Service Advisor</label>\r\n                                <select\r\n                                    name=\"service_advisor\"\r\n                                    className=\"form-control\"\r\n                                    value={formData.service_advisor}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                >\r\n                                    <option value=\"\">Select Advisor...</option>\r\n                                    {users.map(u => (\r\n                                        <option key={u.id} value={u.username}>{u.first_name || u.username}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label style={labelStyle}>Check-in Date</label>\r\n                                <input name=\"date\" type=\"date\" className=\"form-control\" value={formData.date} onChange={handleChange} required />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ marginTop: '20px' }}>\r\n                            <label style={labelStyle}>Internal Notes / Additional Complaints</label>\r\n                            <textarea name=\"job_description\" className=\"form-control\" rows=\"2\" onChange={handleChange} placeholder=\"Any specific requirements or existing damages...\"></textarea>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button type=\"submit\" className=\"btn-primary\" style={{ width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\r\n                        <Save size={20} /> Create Job Card\r\n                    </button>\r\n                </form>\r\n            </GlassCard>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst sectionTitleStyle = {\r\n    fontSize: '12px',\r\n    textTransform: 'uppercase',\r\n    color: '#b08d57',\r\n    marginBottom: '15px',\r\n    borderLeft: '3px solid #b08d57',\r\n    paddingLeft: '10px',\r\n    fontWeight: '700'\r\n};\r\n\r\nconst labelStyle = {\r\n    display: 'block',\r\n    fontSize: '11px',\r\n    color: '#94a3b8',\r\n    marginBottom: '5px',\r\n    textTransform: 'uppercase',\r\n    fontWeight: '600'\r\n};\r\n\r\nexport default JobCreate;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\jobs\\JobDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchJob'. Either include it or remove the dependency array.","line":44,"column":8,"nodeType":"ArrayExpression","endLine":44,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchJob, id]","fix":{"range":[1442,1446],"text":"[fetchJob, id]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentStepIndex' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":81,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentStepIndex"},"fix":{"range":[2800,2868],"text":""},"desc":"Remove unused variable 'currentStepIndex'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":184,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":184,"endColumn":53}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport api from '../../api/axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport {\r\n    ArrowLeft,\r\n    ChevronRight,\r\n    CheckCircle2,\r\n    Clock,\r\n    PenTool,\r\n    Wrench,\r\n    ShieldCheck,\r\n    FileText,\r\n    Truck,\r\n    Plus,\r\n    Save,\r\n    Activity,\r\n    Package,\r\n    Printer,\r\n    AlertCircle\r\n} from 'lucide-react';\r\nimport JobWorkflow from './JobWorkflow';\r\nimport PrintHeader from '../../components/PrintHeader';\r\nimport SignaturePad from '../../components/SignaturePad';\r\n\r\nconst JobDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [job, setJob] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const steps = [\r\n        { key: 'RECEPTION', label: 'Reception', icon: <PenTool size={18} /> },\r\n        { key: 'ESTIMATION', label: 'Estimation', icon: <FileText size={18} /> },\r\n        { key: 'WORK_ASSIGNMENT', label: 'Assignment', icon: <Wrench size={18} /> },\r\n        { key: 'WIP', label: 'WIP', icon: <Clock size={18} /> },\r\n        { key: 'QC', label: 'QC Approval', icon: <ShieldCheck size={18} /> },\r\n        { key: 'INVOICING', label: 'Invoicing', icon: <FileText size={18} /> },\r\n        { key: 'DELIVERY', label: 'Delivery', icon: <Truck size={18} /> },\r\n    ];\r\n\r\n    useEffect(() => {\r\n        fetchJob();\r\n    }, [id]);\r\n\r\n    const fetchJob = async () => {\r\n        try {\r\n            const res = await api.get(`/forms/job-cards/api/jobs/${id}/`);\r\n            setJob(res.data);\r\n        } catch (err) {\r\n            console.error('Error fetching job', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const advanceWorkflow = async () => {\r\n        try {\r\n            const res = await api.post(`/forms/job-cards/api/jobs/${id}/advance_status/`);\r\n            alert(`Workflow advanced to ${res.data.display}`);\r\n            // Refetch full job data so all computed fields update\r\n            await fetchJob();\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Failed to advance workflow');\r\n        }\r\n    };\r\n\r\n    const generateInvoice = async () => {\r\n        try {\r\n            const res = await api.post(`/forms/job-cards/api/jobs/${id}/create_invoice/`);\r\n            alert(`Invoice ${res.data.invoice_number} generated!`);\r\n            // Optionally navigate to invoice detail\r\n        } catch (err) {\r\n            alert(err.response?.data?.error || 'Failed to generate invoice');\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '50px', textAlign: 'center' }}>Loading...</div>;\r\n    if (!job) return <div style={{ padding: '50px', textAlign: 'center' }}>Job Not Found</div>;\r\n\r\n    const currentStepIndex = steps.findIndex(s => s.key === job.status);\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px' }}>\r\n            <PrintHeader title={`Job Card: ${job.job_card_number}`} />\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/job-cards')}\r\n                        style={{ background: 'var(--bg-glass)', border: '1px solid var(--border-color)', padding: '8px', borderRadius: '12px', cursor: 'pointer', color: 'var(--text-primary)', transition: 'all 0.3s' }}\r\n                    >\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '1.5rem', margin: 0, color: 'var(--text-primary)' }}>{job.customer_name}</h1>\r\n                        <p style={{ color: 'var(--gold)', fontSize: '14px', margin: 0, fontWeight: '700' }}>#{job.job_card_number}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '10px' }}>\r\n                    <button\r\n                        onClick={() => navigate(`/estimates/${id}`)}\r\n                        className=\"glass-card\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', background: 'rgba(176, 141, 87, 0.15)', color: '#fff', border: '1px solid rgba(176, 141, 87, 0.4)', padding: '10px 20px', borderRadius: '12px', fontWeight: '700' }}\r\n                    >\r\n                        <FileText size={18} color=\"#b08d57\" /> Quotation\r\n                    </button>\r\n                    <button\r\n                        onClick={() => {\r\n                            const link = `${window.location.origin}/portal/${job.portal_token}`;\r\n                            navigator.clipboard.writeText(link);\r\n                            alert('Customer Portal Link copied to clipboard!');\r\n                        }}\r\n                        className=\"glass-card\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', background: 'var(--bg-glass)', color: 'var(--text-primary)', border: '1px solid var(--border-color)', padding: '10px 20px', borderRadius: '12px', fontWeight: '700', transition: 'all 0.3s' }}\r\n                    >\r\n                        <ShieldCheck size={18} color=\"var(--gold)\" /> Share Portal\r\n                    </button>\r\n                    <button\r\n                        onClick={() => window.open(`/forms/utils/generate-pdf/JobCard/${id}/`, '_blank')}\r\n                        className=\"glass-card\"\r\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', background: 'var(--bg-glass)', color: 'var(--text-primary)', border: '1px solid var(--border-color)', padding: '10px 20px', borderRadius: '12px', fontWeight: '700', transition: 'all 0.3s' }}\r\n                    >\r\n                        <Printer size={18} /> Res. Job Card\r\n                    </button>\r\n\r\n                    {/* Invoice Actions */}\r\n                    {job.invoice ? (\r\n                        <>\r\n                            <button\r\n                                onClick={() => navigate(`/invoices/${job.invoice.id}`)}\r\n                                style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', background: 'var(--gold)', color: '#000', border: 'none', padding: '10px 20px', borderRadius: '12px', fontWeight: '900', transition: 'all 0.3s' }}\r\n                            >\r\n                                <FileText size={18} /> View Invoice\r\n                            </button>\r\n                            <button\r\n                                onClick={() => window.open(`/forms/utils/generate-pdf/Invoice/${job.invoice.id}/`, '_blank')}\r\n                                style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', background: 'var(--bg-glass)', border: '1px solid var(--border-color)', color: 'var(--text-primary)', padding: '10px 20px', borderRadius: '12px', fontWeight: '700', transition: 'all 0.3s' }}\r\n                            >\r\n                                <Printer size={18} /> Print Invoice\r\n                            </button>\r\n                        </>\r\n                    ) : (\r\n                        job.status === 'INVOICING' && (\r\n                            <button onClick={generateInvoice} className=\"btn-primary\" style={{ background: '#b08d57', color: '#000', fontWeight: '900', padding: '10px 25px', borderRadius: '12px' }}>Generate Invoice</button>\r\n                        )\r\n                    )}\r\n                </div>\r\n            </header>\r\n\r\n            {/* Industrial Workflow Mission Control */}\r\n            <JobWorkflow\r\n                currentStatus={job.status}\r\n                onStatusChange={advanceWorkflow}\r\n                jobData={job}\r\n            />\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '30px' }}>\r\n                <div className=\"main-content\">\r\n                    <GlassCard style={{ padding: '30px', marginBottom: '30px' }}>\r\n                        <h3 style={sectionTitleStyle}>Job Status: {job.status_display}</h3>\r\n                        <div style={{ color: 'var(--text-primary)', fontSize: '15px', lineHeight: '1.6', background: 'var(--input-bg)', padding: '20px', borderRadius: '15px', border: '1px solid var(--border-color)', transition: 'all 0.3s' }}>\r\n                            {job.job_description}\r\n                        </div>\r\n                    </GlassCard>\r\n\r\n                    {/* Customer Authorization Section */}\r\n                    <GlassCard style={{ padding: '30px', marginBottom: '30px', border: '1px solid rgba(176, 141, 87, 0.2)' }}>\r\n                        <h3 style={sectionTitleStyle}>Customer Authorization</h3>\r\n                        {job.signature_data ? (\r\n                            <div style={{ textAlign: 'center', background: '#fff', padding: '20px', borderRadius: '12px', border: '1px solid var(--border-color)' }}>\r\n                                <img src={job.signature_data} alt=\"Customer Signature\" style={{ maxHeight: '150px' }} />\r\n                                <p style={{ color: 'var(--text-muted)', fontSize: '11px', marginTop: '10px' }}>Digitally signed on {new Date(job.updated_at).toLocaleDateString()}</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '20px' }}>\r\n                                <p style={{ color: 'var(--text-secondary)', fontSize: '14px', textAlign: 'center' }}>Vehicle reception signature required to proceed with works.</p>\r\n                                <SignaturePad\r\n                                    onSave={async (data) => {\r\n                                        try {\r\n                                            await api.patch(`/forms/job-cards/api/jobs/${id}/`, { signature_data: data });\r\n                                            setJob({ ...job, signature_data: data });\r\n                                            alert('Signature captured successfully!');\r\n                                        } catch (err) {\r\n                                            alert('Failed to save signature');\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </GlassCard>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                        <GlassCard style={{ padding: '20px' }}>\r\n                            <h4 style={sectionTitleStyle}>Vehicle Details</h4>\r\n                            <InfoItem label=\"Registration\" value={job.registration_number} />\r\n                            <InfoItem label=\"Brand/Model\" value={`${job.brand} ${job.model}`} />\r\n                            <InfoItem label=\"VIN\" value={job.vin} />\r\n                            <InfoItem label=\"Kilometers\" value={job.kilometers} />\r\n                        </GlassCard>\r\n\r\n                        <GlassCard style={{ padding: '20px' }}>\r\n                            <h4 style={sectionTitleStyle}>Work Assignment</h4>\r\n                            {job.assigned_technician ? (\r\n                                <>\r\n                                    <InfoItem label=\"Technician\" value={job.assigned_technician} />\r\n                                    <InfoItem label=\"Bay\" value={job.assigned_bay} />\r\n                                    <InfoItem label=\"Timeline\" value={job.estimated_timeline ? new Date(job.estimated_timeline).toLocaleString() : 'N/A'} />\r\n                                </>\r\n                            ) : (\r\n                                <p style={{ color: '#94a3b8', fontSize: '13px' }}>Waiting for assignment...</p>\r\n                            )}\r\n                        </GlassCard>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"sidebar\">\r\n                    <GlassCard style={{ padding: '20px', marginBottom: '20px' }}>\r\n                        <h4 style={sectionTitleStyle}>Financial Summary</h4>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n                            <span style={{ color: 'var(--text-secondary)' }}>Subtotal (Net)</span>\r\n                            <span style={{ color: 'var(--text-primary)' }}>AED {job.total_amount}</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n                            <span style={{ color: 'var(--text-secondary)' }}>VAT (5%)</span>\r\n                            <span style={{ color: 'var(--text-primary)' }}>AED {job.vat_amount}</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', paddingTop: '10px', borderTop: '1px solid var(--border-color)', fontWeight: '800', fontSize: '1.2rem', color: 'var(--gold)' }}>\r\n                            <span>Grand Total</span>\r\n                            <span>AED {job.net_amount}</span>\r\n                        </div>\r\n                    </GlassCard>\r\n\r\n                    <GlassCard style={{ padding: '20px' }}>\r\n                        <h4 style={sectionTitleStyle}>QC Checkpoints</h4>\r\n                        <QCItem label=\"Pre-work Approval\" checked={job.pre_work_head_sign_off} />\r\n                        <QCItem label=\"Post-work Sign-off\" checked={job.post_work_head_sign_off} />\r\n                        <QCItem label=\"QC Inspector\" checked={job.qc_sign_off} />\r\n                        <QCItem label=\"Floor Incharge\" checked={job.floor_incharge_sign_off} />\r\n                    </GlassCard>\r\n                </div>\r\n                <style>{`\r\n                @media print {\r\n                    .sidebar { display: block !important; width: 100% !important; margin-top: 20px !important; }\r\n                    .main-content { margin-bottom: 20px !important; }\r\n                    .glass-card { background: #fff !important; border: 1px solid #eee !important; box-shadow: none !important; color: #000 !important; margin-bottom: 20px !important; }\r\n                    .JobWorkflow, button, nav, header { display: none !important; }\r\n                    body { background: #fff !important; }\r\n                }\r\n            `}</style>\r\n            </div>\r\n            {/* Checklist Enforcement Warning */}\r\n            {job.status === 'RECEPTION' && (!job.checklists || job.checklists.length === 0) && (\r\n                <div style={{\r\n                    background: 'rgba(239, 68, 68, 0.1)',\r\n                    border: '1px solid #ef4444',\r\n                    borderRadius: '12px',\r\n                    padding: '15px 20px',\r\n                    marginBottom: '20px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    gap: '15px'\r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                        <AlertCircle color=\"#ef4444\" size={24} />\r\n                        <div>\r\n                            <div style={{ color: '#ef4444', fontWeight: 'bold', fontSize: '15px' }}>Action Required: Intake Checklist Missing</div>\r\n                            <div style={{ color: 'var(--text-secondary)', fontSize: '13px' }}>Vehicle cannot proceed to Estimation until the Service Advisor checklist is completed.</div>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => navigate(`/service-advisor/form?jobId=${job.id}`)}\r\n                        style={{\r\n                            background: '#ef4444',\r\n                            color: '#fff',\r\n                            border: 'none',\r\n                            padding: '10px 20px',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Complete Checklist\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst InfoItem = ({ label, value }) => (\r\n    <div style={{ marginBottom: '12px' }}>\r\n        <div style={{ fontSize: '11px', color: 'var(--text-secondary)', textTransform: 'uppercase', marginBottom: '2px' }}>{label}</div>\r\n        <div style={{ fontSize: '14px', fontWeight: '600', color: 'var(--text-primary)' }}>{value}</div>\r\n    </div>\r\n);\r\n\r\nconst QCItem = ({ label, checked }) => (\r\n    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px' }}>\r\n        <div style={{\r\n            width: '18px',\r\n            height: '18px',\r\n            borderRadius: '4px',\r\n            border: '2px solid var(--border-color)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            background: checked ? 'var(--gold)' : 'transparent',\r\n            borderColor: checked ? 'var(--gold)' : 'var(--border-color)',\r\n            transition: 'all 0.3s'\r\n        }}>\r\n            {checked && <CheckCircle2 size={12} color=\"#000\" />}\r\n        </div>\r\n        <span style={{ fontSize: '13px', color: checked ? 'var(--text-primary)' : 'var(--text-secondary)' }}>{label}</span>\r\n    </div>\r\n);\r\n\r\nconst sectionTitleStyle = {\r\n    fontSize: '12px',\r\n    textTransform: 'uppercase',\r\n    color: 'var(--gold)',\r\n    marginBottom: '20px',\r\n    fontWeight: '800',\r\n    letterSpacing: '1px'\r\n};\r\n\r\nexport default JobDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\jobs\\JobList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\jobs\\JobWorkflow.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\leads\\LeadDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLead'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchLead, id]","fix":{"range":[618,622],"text":"[fetchLead, id]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":44,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport api from '../../api/axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport PrintHeader from '../../components/PrintHeader';\nimport { ArrowLeft, User, Phone, Mail, Award, Calendar, Truck, ClipboardList, CheckCircle2, Printer } from 'lucide-react';\n\nconst LeadDetail = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [lead, setLead] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchLead();\n    }, [id]);\n\n    const fetchLead = async () => {\n        try {\n            const res = await api.get(`/forms/leads/api/list/${id}/`);\n            setLead(res.data);\n        } catch (err) {\n            console.error('Error fetching lead', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const convertToJobCard = async () => {\n        // Logic to simulate transfer to Service Advisor and creation of Job Card\n        const confirmTransfer = window.confirm(`Confirm transfer to Service Advisor for \"${lead.interested_service}\"?`);\n        if (confirmTransfer) {\n            try {\n                // Here we would typically hit an endpoint to create a job card from lead\n                // For demonstration, we'll navigate to Job Card create with pre-filled state\n                navigate('/job-cards/create', {\n                    state: {\n                        customer_name: lead.customer_name,\n                        phone_number: lead.phone,\n                        car_type: '',\n                        service: lead.interested_service\n                    }\n                });\n            } catch (err) {\n                alert('Transition failed');\n            }\n        }\n    };\n\n    const schedulePickAndDrop = () => {\n        navigate('/pick-drop/create', {\n            state: {\n                customer_name: lead.customer_name,\n                phone: lead.phone,\n                vehicle_details: ''\n            }\n        });\n    };\n\n    if (loading) return <div style={{ padding: '50px', textAlign: 'center' }}>Loading...</div>;\n    if (!lead) return <div style={{ padding: '50px', textAlign: 'center' }}>Lead Not Found</div>;\n\n    return (\n        <div style={{ padding: '30px 20px' }}>\n            <PrintHeader title=\"Lead Detail\" />\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                    <button\n                        onClick={() => navigate('/leads')}\n                        style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '8px', borderRadius: '12px', cursor: 'pointer', color: '#fff' }}\n                    >\n                        <ArrowLeft size={20} />\n                    </button>\n                    <div>\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '1.5rem', margin: 0 }}>Lead Detail</h1>\n                        <p style={{ color: '#94a3b8', fontSize: '14px', margin: 0 }}>ID: #{lead.id} | Source: {lead.source}</p>\n                    </div>\n                </div>\n\n                <div style={{ display: 'flex', gap: '10px' }}>\n                    <button\n                        onClick={() => window.print()}\n                        className=\"glass-card\"\n                        style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', border: '1px solid rgba(255,255,255,0.1)', background: 'rgba(255,255,255,0.05)', color: '#fff', padding: '10px 20px', borderRadius: '10px' }}\n                    >\n                        <Printer size={18} /> Print Estimate\n                    </button>\n                    <button onClick={schedulePickAndDrop} className=\"glass-card\" style={{ padding: '10px 20px', display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', border: '1px solid rgba(255,255,255,0.1)' }}>\n                        <Truck size={18} /> Pick & Drop\n                    </button>\n                    <button onClick={convertToJobCard} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                        <ClipboardList size={18} /> Convert to Job Card\n                    </button>\n                </div>\n            </header>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px' }}>\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={{ color: '#b08d57', marginBottom: '20px', fontSize: '1.1rem', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                        <User size={18} /> Customer Information\n                    </h3>\n                    <div style={{ display: 'grid', gap: '15px' }}>\n                        <div>\n                            <label style={labelStyle}>Full Name</label>\n                            <div style={{ fontSize: '1.2rem', fontWeight: '700' }}>{lead.customer_name}</div>\n                        </div>\n                        <div style={{ display: 'flex', gap: '40px' }}>\n                            <div>\n                                <label style={labelStyle}>Phone</label>\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                    <Phone size={14} color=\"#94a3b8\" /> {lead.phone}\n                                </div>\n                            </div>\n                            <div>\n                                <label style={labelStyle}>Email</label>\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                    <Mail size={14} color=\"#94a3b8\" /> {lead.email || 'N/A'}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </GlassCard>\n\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={{ color: '#b08d57', marginBottom: '20px', fontSize: '1.1rem', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                        <Award size={18} /> Interest & Notes\n                    </h3>\n                    <div style={{ display: 'grid', gap: '15px' }}>\n                        <div>\n                            <label style={labelStyle}>Interested Service</label>\n                            <div style={{ fontWeight: '700', color: '#10b981' }}>{lead.interested_service}</div>\n                        </div>\n                        <div>\n                            <label style={labelStyle}>Status</label>\n                            <span style={{\n                                display: 'inline-block',\n                                padding: '4px 12px',\n                                borderRadius: '20px',\n                                fontSize: '11px',\n                                fontWeight: '800',\n                                background: lead.status === 'NEW' ? '#3b82f622' : '#f59e0b22',\n                                color: lead.status === 'NEW' ? '#3b82f6' : '#f59e0b',\n                                textTransform: 'uppercase'\n                            }}>{lead.status}</span>\n                        </div>\n                        <div>\n                            <label style={labelStyle}>Admin Notes</label>\n                            <p style={{ margin: 0, fontSize: '14px', color: '#94a3b8', lineHeight: '1.5' }}>\n                                {lead.notes || 'No notes available.'}\n                            </p>\n                        </div>\n                    </div>\n                </GlassCard>\n            </div>\n\n            <div style={{ marginTop: '30px' }}>\n                <GlassCard style={{ padding: '30px' }}>\n                    <h3 style={{ color: '#b08d57', marginBottom: '20px', fontSize: '1.1rem' }}>Workflow Timeline</h3>\n                    <div style={{ display: 'flex', gap: '40px' }}>\n                        <TimelineStep done icon={<CheckCircle2 size={16} />} title=\"Lead Captured\" subtitle={new Date(lead.created_at).toLocaleString()} />\n                        <TimelineStep icon={<User size={16} />} title=\"Assigned to Advisor\" subtitle=\"Pending Confirmation\" />\n                        <TimelineStep icon={<ClipboardList size={16} />} title=\"Job Card Created\" subtitle=\"Not Started\" />\n                        <TimelineStep icon={<Truck size={16} />} title=\"Pick & Drop\" subtitle=\"Not Scheduled\" />\n                    </div>\n                </GlassCard>\n            </div>\n            <style>{`\n                @media print {\n                    body { background: #fff !important; color: #000 !important; }\n                    .glass-card { border: 1px solid #eee !important; box-shadow: none !important; background: #fff !important; color: #000 !important; }\n                    button, header > div:last-child { display: none !important; }\n                    h1 { color: #b08d57 !important; }\n                }\n            `}</style>\n        </div>\n    );\n};\n\nconst TimelineStep = ({ icon, title, subtitle, done }) => (\n    <div style={{ display: 'flex', gap: '15px', opacity: done ? 1 : 0.4 }}>\n        <div style={{\n            width: '36px',\n            height: '36px',\n            borderRadius: '50%',\n            background: done ? '#b08d57' : 'rgba(255,255,255,0.05)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            color: done ? '#000' : '#94a3b8'\n        }}>\n            {icon}\n        </div>\n        <div>\n            <div style={{ fontSize: '14px', fontWeight: '700' }}>{title}</div>\n            <div style={{ fontSize: '11px', color: '#94a3b8' }}>{subtitle}</div>\n        </div>\n    </div>\n);\n\nconst labelStyle = {\n    display: 'block',\n    fontSize: '11px',\n    color: '#94a3b8',\n    marginBottom: '5px',\n    textTransform: 'uppercase',\n    fontWeight: '600'\n};\n\nexport default LeadDetail;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\leads\\LeadForm.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[35,43],"text":""},"desc":"Remove unused variable 'useRef'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'idx' is defined but never used.","line":197,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":197,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"idx"},"fix":{"range":[8177,8182],"text":""},"desc":"Remove unused variable 'idx'."}]},{"ruleId":"no-undef","severity":2,"message":"'fileInputRef' is not defined.","line":384,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":384,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'fileInputRef' is not defined.","line":436,"column":52,"nodeType":"Identifier","messageId":"undef","endLine":436,"endColumn":64}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport api from '../../api/axios';\nimport { useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    Save, ArrowLeft, User, DollarSign, Zap, AlertCircle,\n    Car, X, Shield, Layers, ChevronRight, Phone, Mail,\n    Target, Hash, FileText, Camera, Image, Trash2\n} from 'lucide-react';\nimport { SERVICES_CATALOG } from '../../constants/services';\n\nconst STEPS = [\n    { key: 'customer', label: 'Customer', icon: User },\n    { key: 'vehicle', label: 'Vehicle', icon: Car },\n    { key: 'services', label: 'Services', icon: Layers },\n    { key: 'pipeline', label: 'Pipeline', icon: Target },\n    { key: 'review', label: 'Review', icon: FileText },\n];\n\nconst SOURCES = [\n    { value: 'INSTAGRAM', label: 'Instagram', color: '#E1306C' },\n    { value: 'FACEBOOK', label: 'Facebook', color: '#1877F2' },\n    { value: 'WHATSAPP', label: 'WhatsApp', color: '#25D366' },\n    { value: 'WALKIN', label: 'Walk-in', color: '#b08d57' },\n    { value: 'REFERRAL', label: 'Referral', color: '#8B5CF6' },\n    { value: 'WEBSITE', label: 'Website', color: '#3B82F6' },\n    { value: 'TIKTOK', label: 'TikTok', color: '#FF0050' },\n    { value: 'GOOGLE', label: 'Google Ads', color: '#34A853' },\n];\n\nconst PRIORITIES = [\n    { value: 'LOW', label: 'Low', color: '#64748b', desc: 'Follow up within a week' },\n    { value: 'MEDIUM', label: 'Standard', color: '#3b82f6', desc: 'Follow up within 48h' },\n    { value: 'HIGH', label: 'High Priority', color: '#f59e0b', desc: 'Follow up within 24h' },\n    { value: 'HOT', label: 'Hot / Immediate', color: '#f43f5e', desc: 'Contact immediately' },\n];\n\nconst STATUSES = [\n    { value: 'NEW', label: 'New Lead' },\n    { value: 'CONTACTED', label: 'First Contact' },\n    { value: 'NEGOTIATION', label: 'In Negotiation' },\n    { value: 'QUOTED', label: 'Quote Sent' },\n];\n\nconst LeadForm = () => {\n    const navigate = useNavigate();\n    const [step, setStep] = useState(0);\n    const [employees, setEmployees] = useState([]);\n    const [activeCategory, setActiveCategory] = useState('');\n    const [selectedServices, setSelectedServices] = useState([]);\n    const [formData, setFormData] = useState({\n        customer_name: '',\n        phone: '',\n        email: '',\n        source: '',\n        interested_service: '',\n        priority: 'MEDIUM',\n        estimated_value: '',\n        assigned_to: '',\n        follow_up_date: '',\n        notes: '',\n        status: 'NEW',\n        // Vehicle fields (stored locally, sent as notes enrichment)\n        vehicle_brand: '',\n        vehicle_model: '',\n        vehicle_year: new Date().getFullYear(),\n        vehicle_color: '',\n        vehicle_type: 'SEDAN',\n        license_plate: '',\n    });\n    const [photos, setPhotos] = useState([]); // { file, preview, label }\n    const compressImage = (file) => {\n        return new Promise((resolve) => {\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = (event) => {\n                const img = new Image();\n                img.src = event.target.result;\n                img.onload = () => {\n                    const canvas = document.createElement('canvas');\n                    const MAX_WIDTH = 1200;\n                    const MAX_HEIGHT = 1200;\n                    let width = img.width;\n                    let height = img.height;\n\n                    if (width > height) {\n                        if (width > MAX_WIDTH) {\n                            height *= MAX_WIDTH / width;\n                            width = MAX_WIDTH;\n                        }\n                    } else {\n                        if (height > MAX_HEIGHT) {\n                            width *= MAX_HEIGHT / height;\n                            height = MAX_HEIGHT;\n                        }\n                    }\n\n                    canvas.width = width;\n                    canvas.height = height;\n                    const ctx = canvas.getContext('2d');\n                    ctx.drawImage(img, 0, 0, width, height);\n\n                    canvas.toBlob((blob) => {\n                        const compressedFile = new File([blob], file.name, {\n                            type: 'image/jpeg',\n                            lastModified: Date.now()\n                        });\n                        resolve(compressedFile);\n                    }, 'image/jpeg', 0.8); // 80% quality\n                };\n            };\n        });\n    };\n\n    const handlePhotoUpload = async (e) => {\n        const files = Array.from(e.target.files);\n        const compressedFiles = await Promise.all(files.map(compressImage));\n\n        const newPhotos = compressedFiles.map((file, index) => ({\n            file,\n            preview: URL.createObjectURL(file),\n            label: photos.length === 0 && index === 0 ? 'Front' :\n                photos.length + index === 1 ? 'Rear' :\n                    photos.length + index === 2 ? 'Left Side' :\n                        photos.length + index === 3 ? 'Right Side' : 'Damage'\n        }));\n        setPhotos(prev => [...prev, ...newPhotos]);\n        e.target.value = '';\n    };\n\n    const removePhoto = (index) => {\n        setPhotos(prev => {\n            URL.revokeObjectURL(prev[index].preview);\n            return prev.filter((_, i) => i !== index);\n        });\n    };\n\n    useEffect(() => {\n        const fetchEmployees = async () => {\n            try {\n                const res = await api.get('/hr/api/employees/');\n                setEmployees(res.data);\n            } catch (err) {\n                console.error('Error fetching employees', err);\n            }\n        };\n        fetchEmployees();\n    }, []);\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const addService = (service) => {\n        if (selectedServices.find(s => s.name === service.name)) return;\n        setSelectedServices(prev => [...prev, service]);\n    };\n\n    const removeService = (index) => {\n        setSelectedServices(prev => prev.filter((_, i) => i !== index));\n    };\n\n    const subtotal = selectedServices.reduce((sum, s) => sum + parseFloat(s.price), 0);\n    const vat = subtotal * 0.05;\n    const grandTotal = subtotal + vat;\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const servicesSummary = selectedServices.map(s => s.name).join(', ');\n            const vehicleInfo = formData.vehicle_brand\n                ? `${formData.vehicle_brand} ${formData.vehicle_model} ${formData.vehicle_year} (${formData.vehicle_color}) - ${formData.vehicle_type} | Plate: ${formData.license_plate}`\n                : '';\n\n            const enrichedNotes = [\n                vehicleInfo && `Vehicle: ${vehicleInfo}`,\n                selectedServices.length > 0 && `\\nSelected Services:\\n${selectedServices.map(s => `  - ${s.name} (AED ${s.price})`).join('\\n')}`,\n                `\\nSubtotal: AED ${subtotal.toFixed(2)} | VAT: AED ${vat.toFixed(2)} | Total: AED ${grandTotal.toFixed(2)}`,\n                formData.notes && `\\nNotes: ${formData.notes}`,\n            ].filter(Boolean).join('\\n');\n\n            // Use FormData for multipart upload\n            const formDataPayload = new FormData();\n            formDataPayload.append('customer_name', formData.customer_name);\n            formDataPayload.append('phone', formData.phone);\n            formDataPayload.append('email', formData.email || '');\n            formDataPayload.append('source', formData.source);\n            formDataPayload.append('interested_service', servicesSummary || formData.interested_service);\n            formDataPayload.append('priority', formData.priority);\n            formDataPayload.append('estimated_value', subtotal > 0 ? subtotal.toFixed(2) : formData.estimated_value || '0');\n            formDataPayload.append('assigned_to', formData.assigned_to || '');\n            formDataPayload.append('follow_up_date', formData.follow_up_date || '');\n            formDataPayload.append('notes', enrichedNotes);\n            formDataPayload.append('status', formData.status);\n\n            // Append photos\n            photos.forEach((photo, idx) => {\n                formDataPayload.append('photos', photo.file);\n                formDataPayload.append('captions', photo.label);\n            });\n\n            await api.post('/forms/leads/api/list/', formDataPayload, {\n                headers: { 'Content-Type': 'multipart/form-data' }\n            });\n            alert('Lead Captured Successfully with Photos!');\n            navigate('/leads');\n        } catch (err) {\n            console.error('Error capturing lead', err);\n            alert('Failed to capture lead.');\n        }\n    };\n\n    const canProceed = () => {\n        switch (step) {\n            case 0: return formData.customer_name && formData.phone;\n            case 1: return true; // vehicle is optional\n            case 2: return true; // services optional\n            case 3: return formData.source;\n            default: return true;\n        }\n    };\n\n    return (\n        <div style={{ padding: '30px 20px', animation: 'fadeIn 0.5s ease-out' }}>\n            <header style={{ display: 'flex', alignItems: 'center', gap: '20px', marginBottom: '30px' }}>\n                <button\n                    onClick={() => navigate('/leads')}\n                    style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '10px', borderRadius: '12px', cursor: 'pointer', color: '#fff' }}\n                >\n                    <ArrowLeft size={20} />\n                </button>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px' }}>EXECUTIVE CRM</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2.2rem', fontWeight: '900', margin: 0, color: '#fff' }}>New Opportunity</h1>\n                </div>\n                <div style={{ marginLeft: 'auto', fontSize: '11px', color: '#64748b', fontWeight: '800' }}>\n                    STEP {step + 1} / {STEPS.length}\n                </div>\n            </header>\n\n            {/* Step Indicator */}\n            <div style={{ display: 'flex', gap: '4px', marginBottom: '35px', maxWidth: '900px' }}>\n                {STEPS.map((s, i) => {\n                    const Icon = s.icon;\n                    const isActive = i === step;\n                    const isDone = i < step;\n                    return (\n                        <button\n                            key={s.key}\n                            onClick={() => setStep(i)}\n                            style={{\n                                flex: 1,\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                gap: '8px',\n                                padding: '14px 10px',\n                                borderRadius: '12px',\n                                border: isActive ? '1px solid #b08d57' : '1px solid rgba(255,255,255,0.06)',\n                                background: isActive ? 'rgba(176,141,87,0.12)' : isDone ? 'rgba(16,185,129,0.06)' : 'rgba(255,255,255,0.02)',\n                                color: isActive ? '#b08d57' : isDone ? '#10b981' : '#64748b',\n                                cursor: 'pointer',\n                                fontSize: '11px',\n                                fontWeight: '800',\n                                textTransform: 'uppercase',\n                                letterSpacing: '0.5px',\n                                transition: 'all 0.2s'\n                            }}\n                        >\n                            <Icon size={14} />\n                            <span style={{ display: window.innerWidth < 768 ? 'none' : 'inline' }}>{s.label}</span>\n                        </button>\n                    );\n                })}\n            </div>\n\n            <form onSubmit={handleSubmit} style={{ maxWidth: '900px' }}>\n                {/* STEP 0: Customer Identity */}\n                {step === 0 && (\n                    <GlassCard style={{ padding: '40px' }}>\n                        <h3 style={sectionTitle}><User size={18} color=\"#b08d57\" /> Customer Identity</h3>\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '25px', marginBottom: '25px' }}>\n                            <div>\n                                <label style={labelStyle}>Full Name / Corporate</label>\n                                <input name=\"customer_name\" className=\"form-control\" value={formData.customer_name} onChange={handleChange} required\n                                    placeholder=\"John Doe / ACME Corp\"\n                                    style={inputStyle} />\n                            </div>\n                            <div>\n                                <label style={labelStyle}>Primary Contact</label>\n                                <div style={{ position: 'relative' }}>\n                                    <Phone size={14} style={{ position: 'absolute', left: '14px', top: '50%', transform: 'translateY(-50%)', color: '#64748b' }} />\n                                    <input name=\"phone\" className=\"form-control\" value={formData.phone} onChange={handleChange} required\n                                        placeholder=\"+971 50 XXX XXXX\"\n                                        style={{ ...inputStyle, paddingLeft: '38px' }} />\n                                </div>\n                            </div>\n                        </div>\n                        <div>\n                            <label style={labelStyle}>Email Address (Optional)</label>\n                            <div style={{ position: 'relative' }}>\n                                <Mail size={14} style={{ position: 'absolute', left: '14px', top: '50%', transform: 'translateY(-50%)', color: '#64748b' }} />\n                                <input name=\"email\" type=\"email\" className=\"form-control\" value={formData.email} onChange={handleChange}\n                                    placeholder=\"customer@email.com\"\n                                    style={{ ...inputStyle, paddingLeft: '38px' }} />\n                            </div>\n                        </div>\n                    </GlassCard>\n                )}\n\n                {/* STEP 1: Vehicle Information */}\n                {step === 1 && (\n                    <GlassCard style={{ padding: '40px' }}>\n                        <h3 style={sectionTitle}><Car size={18} color=\"#b08d57\" /> Vehicle Intelligence</h3>\n                        <p style={{ color: '#64748b', fontSize: '13px', marginBottom: '25px' }}>\n                            Pre-fill vehicle details for faster booking conversion. All fields optional at this stage.\n                        </p>\n\n                        {/* Vehicle Type Selector */}\n                        <div style={{ marginBottom: '25px' }}>\n                            <label style={labelStyle}>Vehicle Class</label>\n                            <div style={{ display: 'flex', gap: '10px' }}>\n                                {['SEDAN', 'SUV', '4X4', 'COUPE', 'TRUCK'].map(type => (\n                                    <button key={type} type=\"button\"\n                                        onClick={() => setFormData({ ...formData, vehicle_type: type })}\n                                        style={{\n                                            padding: '10px 20px',\n                                            borderRadius: '10px',\n                                            border: formData.vehicle_type === type ? '1px solid #b08d57' : '1px solid rgba(255,255,255,0.08)',\n                                            background: formData.vehicle_type === type ? 'rgba(176,141,87,0.15)' : 'rgba(255,255,255,0.03)',\n                                            color: formData.vehicle_type === type ? '#b08d57' : '#94a3b8',\n                                            fontSize: '11px',\n                                            fontWeight: '800',\n                                            cursor: 'pointer',\n                                            letterSpacing: '1px',\n                                            transition: 'all 0.2s'\n                                        }}\n                                    >{type}</button>\n                                ))}\n                            </div>\n                        </div>\n\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '20px', marginBottom: '20px' }}>\n                            <div>\n                                <label style={labelStyle}>Brand</label>\n                                <input name=\"vehicle_brand\" className=\"form-control\" value={formData.vehicle_brand} onChange={handleChange}\n                                    placeholder=\"Porsche\" style={inputStyle} />\n                            </div>\n                            <div>\n                                <label style={labelStyle}>Model</label>\n                                <input name=\"vehicle_model\" className=\"form-control\" value={formData.vehicle_model} onChange={handleChange}\n                                    placeholder=\"Cayenne Turbo GT\" style={inputStyle} />\n                            </div>\n                            <div>\n                                <label style={labelStyle}>Year</label>\n                                <input name=\"vehicle_year\" type=\"number\" className=\"form-control\" value={formData.vehicle_year} onChange={handleChange}\n                                    style={inputStyle} />\n                            </div>\n                        </div>\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\n                            <div>\n                                <label style={labelStyle}>Exterior Color</label>\n                                <input name=\"vehicle_color\" className=\"form-control\" value={formData.vehicle_color} onChange={handleChange}\n                                    placeholder=\"Shark Blue\" style={inputStyle} />\n                            </div>\n                            <div>\n                                <label style={labelStyle}>License Plate</label>\n                                <div style={{ position: 'relative' }}>\n                                    <Hash size={14} style={{ position: 'absolute', left: '14px', top: '50%', transform: 'translateY(-50%)', color: '#64748b' }} />\n                                    <input name=\"license_plate\" className=\"form-control\" value={formData.license_plate} onChange={handleChange}\n                                        placeholder=\"DUBAI A 12345\" style={{ ...inputStyle, paddingLeft: '38px' }} />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Photo Documentation */}\n                        <div style={{ marginTop: '30px' }}>\n                            <h3 style={sectionTitle}><Camera size={18} color=\"#b08d57\" /> Vehicle Photos</h3>\n                            <p style={{ color: '#64748b', fontSize: '13px', marginBottom: '20px' }}>\n                                Capture front, rear, sides, and any existing damage for pre-inspection documentation.\n                            </p>\n\n                            <input\n                                ref={fileInputRef}\n                                type=\"file\"\n                                accept=\"image/*\"\n                                multiple\n                                capture=\"environment\"\n                                onChange={handlePhotoUpload}\n                                style={{ display: 'none' }}\n                            />\n\n                            {/* Photo Grid */}\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '12px', marginBottom: '15px' }}>\n                                {photos.map((photo, idx) => (\n                                    <div key={idx} style={{\n                                        position: 'relative',\n                                        aspectRatio: '4/3',\n                                        borderRadius: '12px',\n                                        overflow: 'hidden',\n                                        border: '1px solid rgba(255,255,255,0.08)'\n                                    }}>\n                                        <img src={photo.preview} alt={photo.label}\n                                            style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n                                        <div style={{\n                                            position: 'absolute', bottom: 0, left: 0, right: 0,\n                                            padding: '6px 10px',\n                                            background: 'linear-gradient(transparent, rgba(0,0,0,0.8))',\n                                            display: 'flex', justifyContent: 'space-between', alignItems: 'center'\n                                        }}>\n                                            <select value={photo.label}\n                                                onChange={(e) => {\n                                                    const updated = [...photos];\n                                                    updated[idx] = { ...updated[idx], label: e.target.value };\n                                                    setPhotos(updated);\n                                                }}\n                                                style={{\n                                                    background: 'none', border: 'none', color: '#fff',\n                                                    fontSize: '10px', fontWeight: '700', outline: 'none', cursor: 'pointer'\n                                                }}\n                                            >\n                                                {['Front', 'Rear', 'Left Side', 'Right Side', 'Roof', 'Damage', 'Dent', 'Chip', 'Scratch', 'Interior', 'VIN Plate', 'Other'].map(opt => (\n                                                    <option key={opt} value={opt} style={{ background: '#1e293b' }}>{opt}</option>\n                                                ))}\n                                            </select>\n                                            <button type=\"button\" onClick={() => removePhoto(idx)}\n                                                style={{ background: 'rgba(239,68,68,0.7)', border: 'none', color: '#fff', borderRadius: '4px', padding: '2px 4px', cursor: 'pointer', display: 'flex' }}>\n                                                <Trash2 size={12} />\n                                            </button>\n                                        </div>\n                                    </div>\n                                ))}\n\n                                {/* Add Photo Button */}\n                                <button type=\"button\"\n                                    onClick={() => fileInputRef.current?.click()}\n                                    style={{\n                                        aspectRatio: '4/3',\n                                        borderRadius: '12px',\n                                        border: '2px dashed rgba(176,141,87,0.3)',\n                                        background: 'rgba(176,141,87,0.04)',\n                                        display: 'flex', flexDirection: 'column',\n                                        alignItems: 'center', justifyContent: 'center',\n                                        gap: '8px', cursor: 'pointer',\n                                        color: '#b08d57', transition: 'all 0.2s'\n                                    }}\n                                >\n                                    <Camera size={24} />\n                                    <span style={{ fontSize: '10px', fontWeight: '800', letterSpacing: '0.5px' }}>\n                                        {photos.length === 0 ? 'ADD PHOTOS' : 'ADD MORE'}\n                                    </span>\n                                </button>\n                            </div>\n\n                            {photos.length > 0 && (\n                                <div style={{ fontSize: '11px', color: '#64748b' }}>\n                                    <Image size={12} style={{ verticalAlign: 'middle', marginRight: '6px' }} />\n                                    {photos.length} photo{photos.length !== 1 ? 's' : ''} captured\n                                    {' '}| {photos.filter(p => ['Damage', 'Dent', 'Chip', 'Scratch'].includes(p.label)).length} damage tagged\n                                </div>\n                            )}\n                        </div>\n                    </GlassCard>\n                )}\n\n                {/* STEP 2: Service Selection */}\n                {step === 2 && (\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\n                        <GlassCard style={{ padding: '40px' }}>\n                            <h3 style={sectionTitle}><Layers size={18} color=\"#b08d57\" /> Service Configurator</h3>\n                            <p style={{ color: '#64748b', fontSize: '13px', marginBottom: '25px' }}>\n                                Select services the customer is interested in. Pricing auto-calculates for the quotation.\n                            </p>\n\n                            {/* Category Tabs */}\n                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px', marginBottom: '20px' }}>\n                                {Object.keys(SERVICES_CATALOG).map(cat => (\n                                    <button key={cat} type=\"button\"\n                                        onClick={() => setActiveCategory(activeCategory === cat ? '' : cat)}\n                                        style={{\n                                            padding: '8px 16px',\n                                            borderRadius: '8px',\n                                            border: activeCategory === cat ? '1px solid #b08d57' : '1px solid rgba(255,255,255,0.06)',\n                                            background: activeCategory === cat ? 'rgba(176,141,87,0.12)' : 'rgba(255,255,255,0.02)',\n                                            color: activeCategory === cat ? '#b08d57' : '#94a3b8',\n                                            fontSize: '10px',\n                                            fontWeight: '800',\n                                            cursor: 'pointer',\n                                            letterSpacing: '0.5px',\n                                            transition: 'all 0.2s'\n                                        }}\n                                    >{cat}</button>\n                                ))}\n                            </div>\n\n                            {/* Service Items */}\n                            {activeCategory && (\n                                <div style={{\n                                    maxHeight: '300px', overflowY: 'auto',\n                                    border: '1px solid rgba(255,255,255,0.06)', borderRadius: '14px',\n                                    background: 'rgba(0,0,0,0.2)'\n                                }}>\n                                    {SERVICES_CATALOG[activeCategory].map((s, idx) => {\n                                        const isSelected = selectedServices.find(sel => sel.name === s.name);\n                                        return (\n                                            <button key={idx} type=\"button\"\n                                                onClick={() => isSelected ? removeService(selectedServices.findIndex(sel => sel.name === s.name)) : addService(s)}\n                                                style={{\n                                                    width: '100%',\n                                                    display: 'flex',\n                                                    justifyContent: 'space-between',\n                                                    alignItems: 'center',\n                                                    padding: '12px 18px',\n                                                    background: isSelected ? 'rgba(176,141,87,0.08)' : 'transparent',\n                                                    border: 'none',\n                                                    borderBottom: '1px solid rgba(255,255,255,0.03)',\n                                                    cursor: 'pointer',\n                                                    transition: 'background 0.15s',\n                                                    textAlign: 'left'\n                                                }}\n                                            >\n                                                <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\n                                                    <div style={{\n                                                        width: '20px', height: '20px', borderRadius: '6px',\n                                                        border: isSelected ? '2px solid #b08d57' : '2px solid rgba(255,255,255,0.1)',\n                                                        background: isSelected ? '#b08d57' : 'transparent',\n                                                        display: 'flex', alignItems: 'center', justifyContent: 'center',\n                                                        flexShrink: 0\n                                                    }}>\n                                                        {isSelected && <span style={{ color: '#000', fontSize: '11px', fontWeight: '900' }}></span>}\n                                                    </div>\n                                                    <span style={{ fontSize: '13px', color: isSelected ? '#fff' : '#cbd5e1', fontWeight: isSelected ? '600' : '400' }}>\n                                                        {s.name}\n                                                    </span>\n                                                </div>\n                                                <span style={{ fontSize: '13px', fontWeight: '800', color: '#b08d57', flexShrink: 0, marginLeft: '15px' }}>\n                                                    AED {s.price.toLocaleString()}\n                                                </span>\n                                            </button>\n                                        );\n                                    })}\n                                </div>\n                            )}\n\n                            {/* Or Manual Input */}\n                            {!activeCategory && selectedServices.length === 0 && (\n                                <div>\n                                    <label style={labelStyle}>Or Describe Interest Manually</label>\n                                    <input name=\"interested_service\" className=\"form-control\" value={formData.interested_service} onChange={handleChange}\n                                        placeholder=\"e.g. Full PPF Matte, Ceramic Coating Gold...\"\n                                        style={inputStyle} />\n                                </div>\n                            )}\n                        </GlassCard>\n\n                        {/* Selected Services & Pricing */}\n                        {selectedServices.length > 0 && (\n                            <GlassCard style={{ padding: '30px' }}>\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>\n                                    <h4 style={{ margin: 0, fontSize: '12px', color: '#b08d57', fontWeight: '800', letterSpacing: '1px', textTransform: 'uppercase' }}>\n                                        Selected Services ({selectedServices.length})\n                                    </h4>\n                                    <button type=\"button\" onClick={() => setSelectedServices([])}\n                                        style={{ background: 'none', border: 'none', color: '#ef4444', fontSize: '11px', fontWeight: '700', cursor: 'pointer' }}>\n                                        Clear All\n                                    </button>\n                                </div>\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', marginBottom: '20px' }}>\n                                    {selectedServices.map((s, idx) => (\n                                        <div key={idx} style={{\n                                            display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n                                            padding: '10px 14px', borderRadius: '10px',\n                                            background: 'rgba(176,141,87,0.05)', border: '1px solid rgba(176,141,87,0.1)'\n                                        }}>\n                                            <span style={{ fontSize: '13px', color: '#e2e8f0', fontWeight: '500' }}>{s.name}</span>\n                                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\n                                                <span style={{ fontSize: '13px', fontWeight: '800', color: '#b08d57' }}>AED {s.price.toLocaleString()}</span>\n                                                <button type=\"button\" onClick={() => removeService(idx)}\n                                                    style={{ background: 'rgba(239,68,68,0.1)', border: 'none', color: '#ef4444', padding: '4px', borderRadius: '6px', cursor: 'pointer', display: 'flex' }}>\n                                                    <X size={14} />\n                                                </button>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n\n                                {/* Pricing Breakdown */}\n                                <div style={{ padding: '20px', background: 'rgba(0,0,0,0.3)', borderRadius: '14px', border: '1px solid rgba(255,255,255,0.05)' }}>\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\n                                        <span style={{ fontSize: '12px', color: '#94a3b8' }}>Subtotal (Net)</span>\n                                        <span style={{ fontSize: '14px', fontWeight: '700', color: '#fff' }}>AED {subtotal.toLocaleString(undefined, { minimumFractionDigits: 2 })}</span>\n                                    </div>\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\n                                        <span style={{ fontSize: '12px', color: '#b08d57' }}>VAT (5%)</span>\n                                        <span style={{ fontSize: '14px', fontWeight: '700', color: '#b08d57' }}>AED {vat.toLocaleString(undefined, { minimumFractionDigits: 2 })}</span>\n                                    </div>\n                                    <div style={{ height: '1px', background: 'rgba(255,255,255,0.08)', margin: '10px 0' }} />\n                                    <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                                        <span style={{ fontSize: '14px', fontWeight: '900', color: '#fff' }}>Grand Total (Gross)</span>\n                                        <span style={{ fontSize: '22px', fontWeight: '900', color: '#b08d57' }}>AED {grandTotal.toLocaleString(undefined, { minimumFractionDigits: 2 })}</span>\n                                    </div>\n                                </div>\n                            </GlassCard>\n                        )}\n                    </div>\n                )}\n\n                {/* STEP 3: Pipeline Configuration */}\n                {step === 3 && (\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\n                        <GlassCard style={{ padding: '40px' }}>\n                            <h3 style={sectionTitle}><Zap size={18} color=\"#b08d57\" /> Lead Source</h3>\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '10px', marginBottom: '30px' }}>\n                                {SOURCES.map(s => (\n                                    <button key={s.value} type=\"button\"\n                                        onClick={() => setFormData({ ...formData, source: s.value })}\n                                        style={{\n                                            padding: '16px 12px',\n                                            borderRadius: '12px',\n                                            border: formData.source === s.value ? `1px solid ${s.color}` : '1px solid rgba(255,255,255,0.06)',\n                                            background: formData.source === s.value ? `${s.color}15` : 'rgba(255,255,255,0.02)',\n                                            color: formData.source === s.value ? s.color : '#94a3b8',\n                                            fontSize: '11px',\n                                            fontWeight: '800',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                            textTransform: 'uppercase',\n                                            letterSpacing: '0.5px'\n                                        }}\n                                    >{s.label}</button>\n                                ))}\n                            </div>\n\n                            <h3 style={sectionTitle}><AlertCircle size={18} color=\"#b08d57\" /> Priority Level</h3>\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '10px', marginBottom: '30px' }}>\n                                {PRIORITIES.map(p => (\n                                    <button key={p.value} type=\"button\"\n                                        onClick={() => setFormData({ ...formData, priority: p.value })}\n                                        style={{\n                                            padding: '16px 12px',\n                                            borderRadius: '12px',\n                                            border: formData.priority === p.value ? `1px solid ${p.color}` : '1px solid rgba(255,255,255,0.06)',\n                                            background: formData.priority === p.value ? `${p.color}15` : 'rgba(255,255,255,0.02)',\n                                            color: formData.priority === p.value ? p.color : '#94a3b8',\n                                            fontSize: '11px',\n                                            fontWeight: '800',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        <div>{p.label}</div>\n                                        <div style={{ fontSize: '9px', fontWeight: '500', marginTop: '4px', opacity: 0.7 }}>{p.desc}</div>\n                                    </button>\n                                ))}\n                            </div>\n\n                            <h3 style={sectionTitle}><Shield size={18} color=\"#b08d57\" /> Status & Assignment</h3>\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '20px', marginBottom: '25px' }}>\n                                <div>\n                                    <label style={labelStyle}>Pipeline Stage</label>\n                                    <select name=\"status\" className=\"form-control\" value={formData.status} onChange={handleChange}\n                                        style={inputStyle}>\n                                        {STATUSES.map(s => (\n                                            <option key={s.value} value={s.value}>{s.label}</option>\n                                        ))}\n                                    </select>\n                                </div>\n                                <div>\n                                    <label style={labelStyle}>Assign Sales Executive</label>\n                                    <select name=\"assigned_to\" className=\"form-control\" value={formData.assigned_to} onChange={handleChange}\n                                        style={inputStyle}>\n                                        <option value=\"\">Select Rep...</option>\n                                        {employees.map(emp => (\n                                            <option key={emp.id} value={emp.id}>{emp.full_name}</option>\n                                        ))}\n                                    </select>\n                                </div>\n                                <div>\n                                    <label style={labelStyle}>Follow-up Date</label>\n                                    <input name=\"follow_up_date\" type=\"date\" className=\"form-control\" value={formData.follow_up_date} onChange={handleChange}\n                                        style={inputStyle} />\n                                </div>\n                            </div>\n\n                            {!selectedServices.length && (\n                                <div style={{ marginBottom: '25px' }}>\n                                    <label style={labelStyle}>Opportunity Value (AED)</label>\n                                    <div style={{ position: 'relative' }}>\n                                        <DollarSign size={14} style={{ position: 'absolute', left: '14px', top: '50%', transform: 'translateY(-50%)', color: '#b08d57' }} />\n                                        <input name=\"estimated_value\" type=\"number\" step=\"0.01\" className=\"form-control\"\n                                            value={formData.estimated_value} onChange={handleChange}\n                                            placeholder=\"Manual estimate if no services selected\"\n                                            style={{ ...inputStyle, paddingLeft: '38px' }} />\n                                    </div>\n                                </div>\n                            )}\n\n                            <div>\n                                <label style={labelStyle}>Internal Notes / Requirements</label>\n                                <textarea name=\"notes\" className=\"form-control\" rows=\"3\" value={formData.notes} onChange={handleChange}\n                                    placeholder=\"Detail any specific customer requests, obstacles, or follow-up notes...\"\n                                    style={{ ...inputStyle, resize: 'vertical' }} />\n                            </div>\n                        </GlassCard>\n                    </div>\n                )}\n\n                {/* STEP 4: Review & Submit */}\n                {step === 4 && (\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\n                        <GlassCard style={{ padding: '40px' }}>\n                            <h3 style={sectionTitle}><FileText size={18} color=\"#b08d57\" /> Opportunity Summary</h3>\n\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px', marginBottom: '30px' }}>\n                                {/* Customer */}\n                                <div style={reviewSection}>\n                                    <div style={reviewLabel}>Customer</div>\n                                    <div style={{ fontSize: '18px', fontWeight: '900', color: '#fff', marginBottom: '4px' }}>{formData.customer_name || ''}</div>\n                                    <div style={{ fontSize: '13px', color: '#94a3b8' }}>{formData.phone} {formData.email && `| ${formData.email}`}</div>\n                                </div>\n\n                                {/* Vehicle */}\n                                <div style={reviewSection}>\n                                    <div style={reviewLabel}>Vehicle</div>\n                                    {formData.vehicle_brand ? (\n                                        <>\n                                            <div style={{ fontSize: '16px', fontWeight: '800', color: '#fff', marginBottom: '4px' }}>\n                                                {formData.vehicle_brand} {formData.vehicle_model} {formData.vehicle_year}\n                                            </div>\n                                            <div style={{ fontSize: '13px', color: '#94a3b8' }}>\n                                                {formData.vehicle_color} | {formData.vehicle_type} {formData.license_plate && `| ${formData.license_plate}`}\n                                            </div>\n                                        </>\n                                    ) : (\n                                        <div style={{ fontSize: '13px', color: '#64748b' }}>Not specified</div>\n                                    )}\n                                    {photos.length > 0 && (\n                                        <div style={{ marginTop: '8px', display: 'flex', gap: '6px', flexWrap: 'wrap' }}>\n                                            {photos.slice(0, 4).map((p, i) => (\n                                                <img key={i} src={p.preview} alt={p.label}\n                                                    style={{ width: '48px', height: '36px', objectFit: 'cover', borderRadius: '6px', border: '1px solid rgba(255,255,255,0.1)' }} />\n                                            ))}\n                                            {photos.length > 4 && (\n                                                <div style={{\n                                                    width: '48px', height: '36px', borderRadius: '6px',\n                                                    background: 'rgba(176,141,87,0.15)', border: '1px solid rgba(176,141,87,0.2)',\n                                                    display: 'flex', alignItems: 'center', justifyContent: 'center',\n                                                    fontSize: '11px', fontWeight: '800', color: '#b08d57'\n                                                }}>+{photos.length - 4}</div>\n                                            )}\n                                        </div>\n                                    )}\n                                </div>\n\n                                {/* Pipeline */}\n                                <div style={reviewSection}>\n                                    <div style={reviewLabel}>Pipeline</div>\n                                    <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\n                                        {formData.source && <ReviewBadge label={formData.source} color={SOURCES.find(s => s.value === formData.source)?.color || '#64748b'} />}\n                                        <ReviewBadge label={PRIORITIES.find(p => p.value === formData.priority)?.label || formData.priority} color={PRIORITIES.find(p => p.value === formData.priority)?.color || '#64748b'} />\n                                        <ReviewBadge label={STATUSES.find(s => s.value === formData.status)?.label || formData.status} color=\"#3b82f6\" />\n                                    </div>\n                                </div>\n\n                                {/* Value */}\n                                <div style={reviewSection}>\n                                    <div style={reviewLabel}>Estimated Value</div>\n                                    <div style={{ fontSize: '24px', fontWeight: '900', color: '#b08d57' }}>\n                                        AED {selectedServices.length > 0 ? grandTotal.toLocaleString(undefined, { minimumFractionDigits: 2 }) : parseFloat(formData.estimated_value || 0).toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                                    </div>\n                                    {selectedServices.length > 0 && (\n                                        <div style={{ fontSize: '11px', color: '#64748b', marginTop: '2px' }}>Incl. 5% VAT | {selectedServices.length} service(s)</div>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Selected Services */}\n                            {selectedServices.length > 0 && (\n                                <div style={{ marginBottom: '25px' }}>\n                                    <div style={reviewLabel}>Services</div>\n                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                                        {selectedServices.map((s, idx) => (\n                                            <div key={idx} style={{ display: 'flex', justifyContent: 'space-between', padding: '8px 12px', background: 'rgba(255,255,255,0.02)', borderRadius: '8px' }}>\n                                                <span style={{ fontSize: '13px', color: '#cbd5e1' }}>{s.name}</span>\n                                                <span style={{ fontSize: '13px', fontWeight: '700', color: '#b08d57' }}>AED {s.price.toLocaleString()}</span>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n                            )}\n\n                            {formData.notes && (\n                                <div>\n                                    <div style={reviewLabel}>Notes</div>\n                                    <p style={{ fontSize: '13px', color: '#94a3b8', margin: 0, lineHeight: '1.6' }}>{formData.notes}</p>\n                                </div>\n                            )}\n                        </GlassCard>\n\n                        <button type=\"submit\" className=\"btn-primary\" style={{\n                            width: '100%', padding: '20px', fontSize: '16px', fontWeight: '900',\n                            display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '15px',\n                            borderRadius: '14px', letterSpacing: '1px'\n                        }}>\n                            <Save size={20} /> SYNC WITH CRM DATABASE\n                        </button>\n                    </div>\n                )}\n\n                {/* Navigation Buttons */}\n                {step < 4 && (\n                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '25px' }}>\n                        <button type=\"button\"\n                            onClick={() => setStep(Math.max(0, step - 1))}\n                            disabled={step === 0}\n                            style={{\n                                padding: '14px 30px', borderRadius: '12px',\n                                border: '1px solid rgba(255,255,255,0.1)',\n                                background: 'rgba(255,255,255,0.03)',\n                                color: step === 0 ? '#334155' : '#fff',\n                                fontWeight: '700', fontSize: '14px',\n                                cursor: step === 0 ? 'default' : 'pointer',\n                                display: 'flex', alignItems: 'center', gap: '8px'\n                            }}\n                        >\n                            <ArrowLeft size={16} /> Back\n                        </button>\n                        <button type=\"button\"\n                            onClick={() => setStep(Math.min(4, step + 1))}\n                            disabled={!canProceed()}\n                            style={{\n                                padding: '14px 30px', borderRadius: '12px',\n                                border: 'none',\n                                background: canProceed() ? '#b08d57' : 'rgba(255,255,255,0.05)',\n                                color: canProceed() ? '#000' : '#334155',\n                                fontWeight: '900', fontSize: '14px',\n                                cursor: canProceed() ? 'pointer' : 'default',\n                                display: 'flex', alignItems: 'center', gap: '8px',\n                                letterSpacing: '0.5px'\n                            }}\n                        >\n                            Continue <ChevronRight size={16} />\n                        </button>\n                    </div>\n                )}\n            </form>\n        </div>\n    );\n};\n\nconst ReviewBadge = ({ label, color }) => (\n    <span style={{\n        padding: '5px 12px', borderRadius: '8px',\n        background: `${color}15`, border: `1px solid ${color}30`,\n        color, fontSize: '10px', fontWeight: '800',\n        textTransform: 'uppercase', letterSpacing: '0.5px'\n    }}>{label}</span>\n);\n\nconst sectionTitle = {\n    margin: '0 0 25px 0',\n    fontSize: '18px',\n    fontWeight: '900',\n    color: '#fff',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px'\n};\n\nconst labelStyle = {\n    display: 'block',\n    fontSize: '11px',\n    color: '#94a3b8',\n    marginBottom: '8px',\n    textTransform: 'uppercase',\n    fontWeight: '800',\n    letterSpacing: '1px'\n};\n\nconst inputStyle = {\n    background: 'rgba(0,0,0,0.3)',\n    border: '1px solid rgba(255,255,255,0.1)',\n    color: '#fff',\n    width: '100%',\n    padding: '15px',\n    borderRadius: '12px'\n};\n\nconst reviewSection = {\n    padding: '20px',\n    background: 'rgba(255,255,255,0.02)',\n    borderRadius: '14px',\n    border: '1px solid rgba(255,255,255,0.05)'\n};\n\nconst reviewLabel = {\n    fontSize: '10px',\n    color: '#b08d57',\n    fontWeight: '800',\n    letterSpacing: '2px',\n    textTransform: 'uppercase',\n    marginBottom: '10px'\n};\n\nexport default LeadForm;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\leads\\LeadList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\leads\\MockInbox.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[380,411],"text":""},"desc":"Remove unused variable 'navigate'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setAlertCount' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":18,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setAlertCount"},"fix":{"range":[705,720],"text":""},"desc":"Remove unused variable 'setAlertCount'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchData` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  80 |     // Fetch Automated Notifications + Inbox Leads\n  81 |     useEffect(() => {\n> 82 |         fetchData();\n     |         ^^^^^^^^^ `fetchData` accessed before it is declared\n  83 |     }, []);\n  84 |\n  85 |     useEffect(() => {\n\n   94 |     }, [filter]);\n   95 |\n>  96 |     const fetchData = async () => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  97 |         try {\n      | ^^^^^^^^^^^^^\n>  98 |             const [notifRes, leadRes] = await Promise.all([\n      \n      | ^^^^^^^^^^^^^\n> 139 |         }\n      | ^^^^^^^^^^^^^\n> 140 |     };\n      | ^^^^^^^ `fetchData` is declared here\n  141 |\n  142 |     const convertToLead = async (msg) => {\n  143 |         try {","line":82,"column":9,"nodeType":null,"endLine":82,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'fetchNotifications' is not defined.","line":213,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":213,"endColumn":52}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport api from '../../api/axios';\nimport { useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    Mail, MessageSquare, Instagram, Facebook,\n    Trash2, UserPlus, Search, Filter,\n    Zap, Sparkles, RefreshCw, X, Bell\n} from 'lucide-react';\n\nconst MockInbox = () => {\n    const navigate = useNavigate();\n    const [messages, setMessages] = useState([]);\n    const [filter, setFilter] = useState('ALL');\n    const [searchTerm, setSearchTerm] = useState('');\n    const [customNumber, setCustomNumber] = useState('');\n    const [isGenerating, setIsGenerating] = useState(false);\n    const [alertCount, setAlertCount] = useState(0);\n    const pollRef = useRef(null);\n\n    const channels = [\n        { id: 'ALL', label: 'All Feeds', icon: MessageSquare, color: '#fff' },\n        { id: 'WHATSAPP', label: 'WhatsApp', icon: MessageSquare, color: '#25D366' },\n        { id: 'INSTAGRAM', label: 'Instagram', icon: Instagram, color: '#E1306C' },\n        { id: 'FACEBOOK', label: 'Facebook', icon: Facebook, color: '#1877F2' },\n        { id: 'GMAIL', label: 'Gmail', icon: Mail, color: '#EA4335' },\n        { id: 'SENT', label: 'Automated Alerts', icon: Bell, color: '#F59E0B' }\n    ];\n\n    const mockContent = {\n        WHATSAPP: [\n            \"Hi, what's the price for full body PPF on a Tesla Model 3?\",\n            \"Can I book a ceramic coating for tomorrow?\",\n            \"Is the window tinting legal in Dubai?\",\n            \"Checking my car status\"\n        ],\n        INSTAGRAM: [\n            \"Saw your reel! Stunning work on that G63. How much for the same setup?\",\n            \"Do you guys do interior restoration?\",\n            \"Sending a DM for price list\",\n            \"Wow! Best shop in town.\"\n        ],\n        FACEBOOK: [\n            \"Interesting offer on the ceramic coating. Is it valid for SUVs?\",\n            \"Where is your shop located exactly?\",\n            \"Do you have any referral discounts?\",\n            \"Interested in the detailing package.\"\n        ],\n        GMAIL: [\n            \"Inquiry regarding Fleet Detailing Services\",\n            \"Quotation Request: Ceramic Coating for Porsche 911\",\n            \"Partnership opportunity - Car Club DXB\",\n            \"Resume for Detailing Specialist position\"\n        ]\n    };\n\n    const generateMockLead = () => {\n        setIsGenerating(true);\n        setTimeout(() => {\n            const channel = ['WHATSAPP', 'INSTAGRAM', 'FACEBOOK', 'GMAIL'][Math.floor(Math.random() * 4)];\n            const names = ['Khalid', 'Sarah', 'Zayed', 'Elena', 'Michael', 'Noora'];\n            const name = names[Math.floor(Math.random() * names.length)];\n            const text = mockContent[channel][Math.floor(Math.random() * mockContent[channel].length)];\n\n            const newMessage = {\n                id: Date.now(),\n                channel,\n                sender: name,\n                text,\n                time: 'Just now',\n                unread: true,\n                phone: customNumber || `+971 5${Math.floor(Math.random() * 10)} ${Math.floor(Math.random() * 900) + 100} ${Math.floor(Math.random() * 9000) + 1000}`\n            };\n\n            setMessages(prev => [newMessage, ...prev]);\n            setIsGenerating(false);\n        }, 800);\n    };\n\n    // Fetch Automated Notifications + Inbox Leads\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    useEffect(() => {\n        if (filter === 'SENT' || filter === 'ALL') {\n            fetchData();\n            // Auto-poll every 15 seconds\n            pollRef.current = setInterval(fetchData, 15000);\n        }\n        return () => {\n            if (pollRef.current) clearInterval(pollRef.current);\n        };\n    }, [filter]);\n\n    const fetchData = async () => {\n        try {\n            const [notifRes, leadRes] = await Promise.all([\n                api.get('/forms/notifications/api/logs/'),\n                api.get('/forms/leads/api/list/inbox/') // Real Inbox Leads\n            ]);\n\n            const sentLogs = notifRes.data.map(log => ({\n                id: `sent-${log.id}`,\n                channel: 'SENT',\n                sender: 'System Automation',\n                text: log.message,\n                subject: log.subject || '',\n                notificationType: log.notification_type,\n                time: new Date(log.sent_at).toLocaleTimeString(),\n                unread: true,\n                phone: `To: ${log.recipient}`,\n                isLog: true\n            }));\n\n            const inboxLeads = leadRes.data.results ? leadRes.data.results : (Array.isArray(leadRes.data) ? leadRes.data : []);\n            const mappedLeads = inboxLeads.map(l => ({\n                id: l.id,\n                channel: l.source,\n                sender: l.customer_name,\n                text: l.interested_service + (l.notes ? ` - ${l.notes}` : ''),\n                time: new Date(l.created_at).toLocaleTimeString().substring(0, 5),\n                unread: true,\n                phone: l.phone,\n                isLead: true\n            }));\n\n            // setAlertCount(sentLogs.length);\n\n            // Merge: Real Inbox Leads + Sent Logs + (Existing mocks if you want, but better to clear mocks for real test)\n            // For now, we prepend real leads to messages\n            setMessages(prev => {\n                // Keep mocks that are not real leads or logs\n                const existingMocks = prev.filter(m => !m.isLead && !m.isLog);\n                return [...mappedLeads, ...sentLogs, ...existingMocks];\n            });\n        } catch (err) {\n            console.error(\"Failed to fetch inbox data\", err);\n        }\n    };\n\n    const convertToLead = async (msg) => {\n        try {\n            if (msg.isLead) {\n                // It's a real lead in INBOX, just update status to NEW\n                await api.patch(`/forms/leads/api/list/${msg.id}/`, { status: 'NEW' });\n                alert(`Lead \"${msg.sender}\" moved to Sales Pipeline!`);\n            } else {\n                // It's a mock lead, create it\n                const leadData = {\n                    customer_name: msg.sender,\n                    phone: msg.phone,\n                    source: msg.channel === 'GMAIL' ? 'WEBSITE' : msg.channel,\n                    interested_service: msg.text.substring(0, 50),\n                    notes: `Converted from Mock Inbox. ${msg.text}`,\n                    status: 'NEW',\n                    priority: 'MEDIUM'\n                };\n                await api.post('/forms/leads/api/list/', leadData);\n                alert(`Succesfully captured ${msg.sender} as a CRM Lead!`);\n            }\n            // Remove from inbox view locally\n            setMessages(prev => prev.filter(m => m.id !== msg.id));\n        } catch (err) {\n            console.error(err);\n            alert(\"Conversion failed.\");\n        }\n    };\n\n    const filteredMessages = messages.filter(m => {\n        const matchesFilter = filter === 'ALL' || m.channel === filter;\n        const matchesSearch = m.sender.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            m.text.toLowerCase().includes(searchTerm.toLowerCase());\n        return matchesFilter && matchesSearch;\n    });\n\n    return (\n        <div style={{ padding: '30px', maxWidth: '1200px', margin: '0 auto', animation: 'fadeIn 0.5s ease-out' }}>\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Lead Generation Testing</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Ghost Inbox</h1>\n                    <p style={{ color: '#94a3b8', fontSize: '14px', marginTop: '5px' }}>Simulate incoming customer traffic from social channels.</p>\n                </div>\n                <div style={{ display: 'flex', gap: '15px', alignItems: 'flex-end' }}>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>\n                        <div style={{ fontSize: '10px', color: '#94a3b8', fontWeight: '800' }}>TEST NUMBER OVERRIDE</div>\n                        <input\n                            type=\"text\"\n                            placeholder=\"e.g. +971 50...\"\n                            value={customNumber}\n                            onChange={(e) => setCustomNumber(e.target.value)}\n                            style={{\n                                background: 'rgba(255,255,255,0.05)',\n                                border: '1px solid rgba(176, 141, 87, 0.3)',\n                                borderRadius: '8px',\n                                padding: '8px 12px',\n                                color: '#fff',\n                                fontSize: '12px',\n                                width: '180px'\n                            }}\n                        />\n                    </div>\n                    <button\n                        onClick={generateMockLead}\n                        style={{ ...actionButtonStyle, background: '#b08d57', color: '#000', border: 'none' }}\n                        disabled={isGenerating}\n                    >\n                        {isGenerating ? <RefreshCw className=\"spin\" size={18} /> : <Zap size={18} />}\n                        {isGenerating ? 'Intercepting...' : 'Simulate Incoming Lead'}\n                    </button>\n                    <button\n                        onClick={fetchNotifications}\n                        style={{ ...actionButtonStyle, background: '#F59E0B', color: '#000', border: 'none' }}\n                        title=\"Refresh Sent Logs\"\n                    >\n                        <RefreshCw size={18} /> Sync Alerts\n                    </button>\n                    <button\n                        onClick={() => setMessages([])}\n                        style={actionButtonStyle}\n                    >\n                        <Trash2 size={18} /> Clear Inbox\n                    </button>\n                </div>\n            </header >\n\n            <div style={{ display: 'grid', gridTemplateColumns: '280px 1fr', gap: '30px', alignItems: 'start' }}>\n\n                {/* SIDEBAR FILTERS */}\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                    <div style={{ marginBottom: '15px', position: 'relative' }}>\n                        <Search style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', color: '#64748b' }} size={16} />\n                        <input\n                            type=\"text\"\n                            placeholder=\"Search messages...\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            style={{ width: '100%', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '10px', padding: '10px 10px 10px 35px', color: '#fff', fontSize: '13px' }}\n                        />\n                    </div>\n                    {channels.map(ch => {\n                        const Icon = ch.icon;\n                        const active = filter === ch.id;\n                        return (\n                            <button\n                                key={ch.id}\n                                onClick={() => setFilter(ch.id)}\n                                style={{\n                                    display: 'flex', alignItems: 'center', gap: '12px', padding: '12px 15px',\n                                    borderRadius: '12px', border: active ? `1px solid ${ch.color}` : '1px solid transparent',\n                                    background: active ? `${ch.color}15` : 'transparent',\n                                    color: active ? ch.color : '#94a3b8',\n                                    cursor: 'pointer', transition: 'all 0.2s ease', textAlign: 'left', fontWeight: '700', fontSize: '14px'\n                                }}\n                            >\n                                <Icon size={18} /> {ch.label}\n                                {ch.id === 'SENT' && alertCount > 0 && (\n                                    <span style={{\n                                        marginLeft: 'auto', background: '#F59E0B', color: '#000',\n                                        fontSize: '11px', fontWeight: '900', borderRadius: '12px',\n                                        padding: '2px 8px', minWidth: '20px', textAlign: 'center'\n                                    }}>{alertCount}</span>\n                                )}\n                                {ch.id !== 'SENT' && active && <Sparkles size={12} style={{ marginLeft: 'auto' }} />}\n                            </button>\n                        );\n                    })}\n                </div>\n\n                {/* MESSAGES LIST */}\n                <GlassCard style={{ minHeight: '600px', padding: '0', overflow: 'hidden' }}>\n                    <div style={{ padding: '20px', borderBottom: '1px solid rgba(255,255,255,0.05)', background: 'rgba(255,255,255,0.02)' }}>\n                        <h3 style={{ margin: 0, fontSize: '15px', fontWeight: '800' }}>Live Stream - {filter}</h3>\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column' }}>\n                        {filteredMessages.length === 0 ? (\n                            <div style={{ padding: '100px', textAlign: 'center', color: '#64748b' }}>\n                                <MessageSquare size={48} style={{ marginBottom: '20px', opacity: 0.2 }} />\n                                <div style={{ fontSize: '18px', fontWeight: '700' }}>No incoming traffic</div>\n                                <p style={{ fontSize: '13px' }}>Click \"Simulate Incoming Lead\" to test the system.</p>\n                            </div>\n                        ) : filteredMessages.map(msg => {\n                            const chan = channels.find(c => c.id === msg.channel);\n                            const Icon = chan.icon;\n                            const isSent = msg.channel === 'SENT';\n                            return (\n                                <div key={msg.id} style={messageRowStyle}>\n                                    <div style={{ ...iconWrapperStyle, background: `${chan.color}15`, color: chan.color }}>\n                                        <Icon size={20} />\n                                    </div>\n                                    <div style={{ flex: 1 }}>\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px' }}>\n                                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                                <span style={{ fontWeight: '900', color: '#fff' }}>{msg.sender}</span>\n                                                {isSent && msg.notificationType && (\n                                                    <span style={{\n                                                        fontSize: '9px', fontWeight: '800', padding: '2px 8px',\n                                                        borderRadius: '6px', textTransform: 'uppercase',\n                                                        background: msg.notificationType === 'WHATSAPP' ? 'rgba(37, 211, 102, 0.15)' : 'rgba(59, 130, 246, 0.15)',\n                                                        color: msg.notificationType === 'WHATSAPP' ? '#25D366' : '#3b82f6'\n                                                    }}>\n                                                        {msg.notificationType}\n                                                    </span>\n                                                )}\n                                            </div>\n                                            <span style={{ fontSize: '10px', color: '#64748b' }}>{msg.time}</span>\n                                        </div>\n                                        {isSent && msg.subject && (\n                                            <div style={{ fontSize: '12px', color: '#b08d57', fontWeight: '700', marginBottom: '4px' }}>{msg.subject}</div>\n                                        )}\n                                        <p style={{ margin: 0, fontSize: '13px', color: '#94a3b8', lineHeight: '1.4' }}>{msg.text}</p>\n                                        <div style={{ fontSize: '11px', color: '#b08d57', marginTop: '5px', fontWeight: '700' }}>{msg.phone}</div>\n                                    </div>\n                                    <div style={{ display: 'flex', gap: '10px' }}>\n                                        {!isSent && (\n                                            <button\n                                                onClick={() => convertToLead(msg)}\n                                                style={{ ...toolBtnStyle, background: 'rgba(16, 185, 129, 0.1)', color: '#10b981' }}\n                                                title=\"Convert to CRM Lead\"\n                                            >\n                                                <UserPlus size={16} />\n                                            </button>\n                                        )}\n                                        <button\n                                            onClick={() => setMessages(prev => prev.filter(m => m.id !== msg.id))}\n                                            style={{ ...toolBtnStyle, background: 'rgba(244, 63, 94, 0.1)', color: '#f43f5e' }}\n                                            title=\"Dismiss\"\n                                        >\n                                            <X size={16} />\n                                        </button>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </GlassCard>\n            </div>\n\n            <style>{`\n                .spin { animation: spin 1s linear infinite; }\n                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n            `}</style>\n        </div >\n    );\n};\n\nconst actionButtonStyle = {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    padding: '12px 25px',\n    borderRadius: '12px',\n    fontSize: '14px',\n    fontWeight: '900',\n    cursor: 'pointer',\n    background: 'rgba(255,255,255,0.05)',\n    border: '1px solid rgba(255,255,255,0.1)',\n    color: '#fff',\n    transition: 'all 0.2s ease'\n};\n\nconst messageRowStyle = {\n    display: 'flex',\n    gap: '20px',\n    padding: '25px',\n    borderBottom: '1px solid rgba(255,255,255,0.03)',\n    alignItems: 'start',\n    transition: 'background 0.2s ease',\n    cursor: 'default',\n    '&:hover': {\n        background: 'rgba(255,255,255,0.02)'\n    }\n};\n\nconst iconWrapperStyle = {\n    width: '44px',\n    height: '44px',\n    borderRadius: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexShrink: 0\n};\n\nconst toolBtnStyle = {\n    width: '36px',\n    height: '36px',\n    borderRadius: '10px',\n    border: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    transition: 'transform 0.1s ease',\n    '&:active': { transform: 'scale(0.95)' }\n};\n\nexport default MockInbox;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\leaves\\LeaveForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\leaves\\LeaveList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\operations\\OperationForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\operations\\OperationList.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":129,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":57},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":146,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":146,"endColumn":61}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport api from '../../api/axios';\nimport { useNavigate, Link } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport { Plus, Search, Activity, User, Clock, CheckCircle2, Printer, Target, AlertCircle, BarChart3 } from 'lucide-react';\nimport PrintHeader from '../../components/PrintHeader';\n\nconst OperationList = () => {\n    const navigate = useNavigate();\n    const [operations, setOperations] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    useEffect(() => {\n        fetchOperations();\n    }, []);\n\n    const fetchOperations = async () => {\n        try {\n            const res = await api.get('/forms/operations/api/list/');\n            setOperations(res.data);\n        } catch (err) {\n            console.error('Error fetching operations', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const filteredOps = operations.filter(o =>\n        o.operation_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        o.assigned_to_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        o.jc_number?.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const getStatusStyle = (status) => {\n        switch (status) {\n            case 'COMPLETED': return { color: '#10b981', label: 'Completed' };\n            case 'IN_PROGRESS': return { color: '#3b82f6', label: 'In Production' };\n            case 'ON_HOLD': return { color: '#f59e0b', label: 'On Hold' };\n            default: return { color: '#94a3b8', label: 'Scheduled' };\n        }\n    };\n\n    return (\n        <div style={{ padding: '30px 20px', animation: 'fadeIn 0.5s ease-out' }}>\n            <PrintHeader title=\"Operations Board\" />\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Production Hub</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Operations Board</h1>\n                </div>\n                <div style={{ display: 'flex', gap: '15px' }}>\n                    <button onClick={() => window.print()} className=\"glass-card\" style={actionButtonStyle}>\n                        <Printer size={18} /> Print Board\n                    </button>\n                    <button onClick={() => navigate('/operations/create')} className=\"btn-primary\" style={{ ...actionButtonStyle, background: '#b08d57' }}>\n                        <Plus size={18} /> Log Activity\n                    </button>\n                </div>\n            </header>\n\n            <div style={{ marginBottom: '30px', position: 'relative' }}>\n                <Search style={{ position: 'absolute', left: '20px', top: '50%', transform: 'translateY(-50%)', color: '#b08d57' }} size={20} />\n                <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Search by operation, JC#, or employee...\"\n                    style={{ padding: '18px 20px 18px 55px', fontSize: '16px', borderRadius: '15px', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(255,255,255,0.1)', color: '#fff', width: '100%' }}\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(380px, 1fr))', gap: '25px' }}>\n                {loading ? (\n                    <p style={{ textAlign: 'center', gridColumn: '1/-1', padding: '50px', color: '#94a3b8' }}>Synchronizing Production Data...</p>\n                ) : filteredOps.length === 0 ? (\n                    <p style={{ textAlign: 'center', gridColumn: '1/-1', padding: '50px', color: '#94a3b8' }}>No active production logs.</p>\n                ) : (\n                    filteredOps.map((op) => {\n                        const sStyle = getStatusStyle(op.status);\n                        return (\n                            <GlassCard key={op.id} style={{ padding: '30px', position: 'relative', overflow: 'hidden' }}>\n                                <div style={{ position: 'absolute', top: 0, left: 0, width: '4px', height: '100%', background: sStyle.color }}></div>\n\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '15px' }}>\n                                    <div>\n                                        <div style={{ fontSize: '11px', color: '#b08d57', fontWeight: '900', letterSpacing: '1px', marginBottom: '5px' }}>{op.jc_number || 'INTERNAL_TASK'}</div>\n                                        <h3 style={{ fontSize: '18px', fontWeight: '900', color: '#fff', margin: 0 }}>{op.operation_name}</h3>\n                                    </div>\n                                    <span style={{\n                                        fontSize: '10px', fontWeight: '900', color: sStyle.color,\n                                        background: `${sStyle.color}15`, padding: '6px 12px', borderRadius: '8px',\n                                        textTransform: 'uppercase'\n                                    }}>{sStyle.label}</span>\n                                </div>\n\n                                <div style={{ background: 'rgba(0,0,0,0.2)', padding: '15px', borderRadius: '12px', marginBottom: '20px' }}>\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\n                                        <div style={{ fontSize: '11px', color: '#94a3b8', fontWeight: '800' }}>PROGRESS</div>\n                                        <div style={{ fontSize: '11px', color: '#fff', fontWeight: '900' }}>{op.progress_percentage}%</div>\n                                    </div>\n                                    <div style={{ height: '6px', background: 'rgba(255,255,255,0.05)', borderRadius: '3px' }}>\n                                        <div style={{ width: `${op.progress_percentage}%`, height: '100%', background: sStyle.color, borderRadius: '3px', transition: 'width 0.5s' }}></div>\n                                    </div>\n                                </div>\n\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', marginBottom: '25px' }}>\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', fontSize: '13px' }}>\n                                        <User size={14} color=\"#b08d57\" />\n                                        <span style={{ color: '#fff' }}>{op.assigned_to_name}</span>\n                                    </div>\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', fontSize: '13px' }}>\n                                        <Clock size={14} color=\"#b08d57\" />\n                                        <span style={{ color: '#fff' }}>ETA: {op.estimated_completion ? new Date(op.estimated_completion).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : '---'}</span>\n                                    </div>\n                                </div>\n\n                                <div style={{ display: 'flex', gap: '12px' }}>\n                                    <button\n                                        onClick={async () => {\n                                            const newProgress = prompt('Enter new progress percentage (0-100):', op.progress_percentage);\n                                            if (newProgress === null) return;\n                                            const val = parseInt(newProgress, 10);\n                                            if (isNaN(val) || val < 0 || val > 100) { alert('Invalid percentage'); return; }\n                                            try {\n                                                await api.patch(`/forms/operations/api/list/${op.id}/`, { progress_percentage: val });\n                                                fetchOperations();\n                                            } catch (err) { alert('Failed to update progress'); }\n                                        }}\n                                        style={{\n                                            flex: 1, background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)',\n                                            color: '#fff', padding: '12px', borderRadius: '10px', fontSize: '12px',\n                                            fontWeight: '800', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px'\n                                        }}\n                                    >\n                                        <Target size={14} /> Update Progress\n                                    </button>\n                                    {op.status !== 'COMPLETED' && (\n                                        <button\n                                            onClick={async () => {\n                                                if (!window.confirm('Mark this operation as completed?')) return;\n                                                try {\n                                                    await api.patch(`/forms/operations/api/list/${op.id}/`, { status: 'COMPLETED', progress_percentage: 100 });\n                                                    fetchOperations();\n                                                } catch (err) { alert('Failed to complete operation'); }\n                                            }}\n                                            style={{\n                                                background: 'rgba(16, 185, 129, 0.15)', color: '#10b981',\n                                                border: '1px solid rgba(16, 185, 129, 0.3)', padding: '12px 15px',\n                                                borderRadius: '10px', cursor: 'pointer'\n                                            }}\n                                        >\n                                            <CheckCircle2 size={16} />\n                                        </button>\n                                    )}\n                                </div>\n                            </GlassCard>\n                        );\n                    })\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst actionButtonStyle = {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    padding: '12px 25px',\n    borderRadius: '12px',\n    fontSize: '14px',\n    fontWeight: '900',\n    cursor: 'pointer',\n    background: 'rgba(255,255,255,0.05)',\n    border: '1px solid rgba(255,255,255,0.1)',\n    color: '#fff'\n};\n\nexport default OperationList;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\payments\\PaymentPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchInvoiceAndIntent'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchInvoiceAndIntent, invoiceId]","fix":{"range":[889,900],"text":"[fetchInvoiceAndIntent, invoiceId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Elements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Container, Paper, Typography, Box, Skeleton } from '@mui/material';\r\nimport api from '../../api/axios';\r\nimport CheckoutForm from '../../components/payments/CheckoutForm';\r\n\r\n// Replace with your actual publishable key or env var\r\nconst stripePromise = loadStripe('pk_test_placeholder');\r\n\r\nconst PaymentPage = () => {\r\n    const { invoiceId } = useParams();\r\n    const [clientSecret, setClientSecret] = useState('');\r\n    const [invoice, setInvoice] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (invoiceId) {\r\n            fetchInvoiceAndIntent();\r\n        }\r\n    }, [invoiceId]);\r\n\r\n    const fetchInvoiceAndIntent = async () => {\r\n        try {\r\n            // Fetch Invoice Details first\r\n            const invoiceRes = await api.get(`/invoices/${invoiceId}/`);\r\n            setInvoice(invoiceRes.data);\r\n\r\n            // Create Payment Intent\r\n            const intentRes = await api.post('/payments/create-payment-intent/', {\r\n                invoice_id: invoiceId\r\n            });\r\n            setClientSecret(intentRes.data.clientSecret);\r\n        } catch (error) {\r\n            console.error(\"Error initializing payment:\", error);\r\n            alert(\"Failed to initialize payment.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePaymentSuccess = () => {\r\n        alert(\"Payment Successful! Thank you.\");\r\n        navigate('/customer-portal'); // Redirect back to portal\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <Container maxWidth=\"sm\" sx={{ mt: 10 }}>\r\n                <Skeleton variant=\"rectangular\" height={400} />\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    if (!invoice || !clientSecret) {\r\n        return (\r\n            <Container maxWidth=\"sm\" sx={{ mt: 10 }}>\r\n                <Typography color=\"error\">Invalid Invoice or Payment Configuration</Typography>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    const options = {\r\n        clientSecret,\r\n        appearance: {\r\n            theme: 'night',\r\n            variables: {\r\n                colorPrimary: '#b08d57',\r\n            },\r\n        },\r\n    };\r\n\r\n    return (\r\n        <Container maxWidth=\"sm\" sx={{ mt: 5, mb: 10 }}>\r\n            <Paper elevation={3} sx={{ p: 4, borderRadius: 4, background: '#1e293b', color: '#fff' }}>\r\n                <Typography variant=\"h5\" gutterBottom sx={{ color: '#b08d57', fontWeight: 'bold' }}>\r\n                    Secure Payment\r\n                </Typography>\r\n                <Typography variant=\"body1\" gutterBottom>\r\n                    Invoice #{invoice.invoice_number}\r\n                </Typography>\r\n                <Typography variant=\"h4\" sx={{ my: 3, fontWeight: 'bold' }}>\r\n                    AED {invoice.balance_due}\r\n                </Typography>\r\n\r\n                <Elements stripe={stripePromise} options={options}>\r\n                    <CheckoutForm amount={invoice.balance_due} onSuccess={handlePaymentSuccess} />\r\n                </Elements>\r\n            </Paper>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default PaymentPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\pick_drop\\DriverDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"api"},"fix":{"range":[59,68],"text":""},"desc":"Remove unused variable 'api'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'stats' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"stats"},"fix":{"range":[353,358],"text":""},"desc":"Remove unused variable 'stats'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setStats' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"setStats"},"fix":{"range":[358,368],"text":""},"desc":"Remove unused variable 'setStats'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  24 |             { id: 4, name: 'Bonanza Rd', status: 'TRANSIT', city: 'Las Vegas', lat: 36.1767, lng: -115.1350, util: '90%', energy: '60' },\n  25 |         ];\n> 26 |         setTrips(mockTrips);\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |\n  28 |         const interval = setInterval(() => {\n  29 |             setTrips(currentTrips => currentTrips.map(t => ({","line":26,"column":9,"nodeType":null,"endLine":26,"endColumn":17}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    MapPin, Truck, Phone, Clock, AlertCircle,\n    Activity, ShieldCheck, ChevronRight, Search\n} from 'lucide-react';\n\nconst DriverDashboard = () => {\n    const [trips, setTrips] = useState([]);\n    const [stats, setStats] = useState({\n        total: 14,\n        warning: 3,\n        transit: 7,\n        delivered: 8\n    });\n\n    useEffect(() => {\n        // Mocking some data for the map-centric view\n        const mockTrips = [\n            { id: 1, name: 'Rancho Dr', status: 'IN_TRANSIT', city: 'Las Vegas', lat: 36.1699, lng: -115.1398, util: '80%', energy: '70' },\n            { id: 2, name: 'N Jones Blvd', status: 'ERROR', city: 'Las Vegas', lat: 36.1750, lng: -115.2431, util: '100%', energy: '90' },\n            { id: 3, name: 'Fremont St', status: 'WARNING', city: 'Las Vegas', lat: 36.1680, lng: -115.1430, util: '60%', energy: '80' },\n            { id: 4, name: 'Bonanza Rd', status: 'TRANSIT', city: 'Las Vegas', lat: 36.1767, lng: -115.1350, util: '90%', energy: '60' },\n        ];\n        setTrips(mockTrips);\n\n        const interval = setInterval(() => {\n            setTrips(currentTrips => currentTrips.map(t => ({\n                ...t,\n                lat: t.lat + (Math.random() - 0.5) * 0.001,\n                lng: t.lng + (Math.random() - 0.5) * 0.001\n            })));\n        }, 3000);\n        return () => clearInterval(interval);\n    }, []);\n\n    return (\n        <div style={{ display: 'flex', height: 'calc(100vh - 100px)', background: '#0a0a0a', overflow: 'hidden' }}>\n\n            {/* Left: Map Preview Area */}\n            <div style={{ flex: 1, position: 'relative', background: '#111', overflow: 'hidden' }}>\n                <div style={{\n                    position: 'absolute',\n                    inset: 0,\n                    backgroundImage: 'url(https://images.unsplash.com/photo-1524661135-423995f22d0b?q=80&w=2074&auto=format&fit=crop)',\n                    backgroundSize: 'cover',\n                    opacity: 0.3,\n                    filter: 'grayscale(100%) contrast(150%) invert(100%)'\n                }}></div>\n\n                {/* Dynamic Map Markers */}\n                {trips.map(trip => (\n                    <Marker\n                        key={trip.id}\n                        label={trip.name}\n                        color={trip.status === 'ERROR' ? '#f43f5e' : trip.status === 'WARNING' ? '#f59e0b' : '#3b82f6'}\n                        top={`${((trip.lat - 36.16) * 500) % 100}%`} // Simple mapping for demonstration\n                        left={`${((trip.lng + 115.2) * 500) % 100}%`}\n                    />\n                ))}\n            </div>\n\n            {/* Right: Operational Dashboard */}\n            <div style={{ width: '600px', background: '#000', borderLeft: '1px solid rgba(255,255,255,0.05)', padding: '40px', overflowY: 'auto' }}>\n                <header style={{ marginBottom: '40px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <div>\n                        <div style={{ color: '#b08d57', fontSize: '10px', fontWeight: '900', letterSpacing: '2px', marginBottom: '5px' }}>LOGISTICS COMMAND</div>\n                        <h2 style={{ fontSize: '2.5rem', fontWeight: '900', color: '#fff', margin: 0 }}>TOTAL</h2>\n                    </div>\n                    <div style={{ textAlign: 'right', display: 'flex', gap: '20px' }}>\n                        <StatusDot color=\"#f43f5e\" label=\"Error\" count=\"14\" />\n                        <StatusDot color=\"#f59e0b\" label=\"Warning\" count=\"23\" />\n                        <StatusDot color=\"#3b82f6\" label=\"Transit\" count=\"7\" />\n                    </div>\n                </header>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px', marginBottom: '50px' }}>\n                    <SummaryItem label=\"Utilization Rate\" value=\"38.9%\" sub=\"Air conditioner & Display\" />\n                    <SummaryItem label=\"Monthly Load\" value=\"1,000 km\" sub=\"Cumulative distance\" />\n                    <SummaryItem label=\"Fleet Status\" value=\"Normal\" sub=\"Indoor Air Quality\" />\n                    <SummaryItem label=\"Driver Comfort\" value=\"Optimal\" sub=\"Indoor Comfort Level\" />\n                </div>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\n                    {trips.map(trip => (\n                        <LogCard key={trip.id} trip={trip} />\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst Marker = ({ label, color, top, left }) => (\n    <div style={{ position: 'absolute', top, left, transform: 'translate(-50%, -50%)', textAlign: 'center' }}>\n        <div style={{\n            background: 'rgba(30,30,35,0.9)',\n            padding: '4px 12px',\n            borderRadius: '6px',\n            fontSize: '11px',\n            fontWeight: '900',\n            color: '#fff',\n            marginBottom: '8px',\n            border: `1px solid ${color}44`\n        }}>{label}</div>\n        <div style={{ width: '12px', height: '12px', borderRadius: '50%', background: color, boxShadow: `0 0 15px ${color}`, border: '2px solid #fff' }}></div>\n    </div>\n);\n\nconst StatusDot = ({ color, label, count }) => (\n    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n        <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: color }}></div>\n        <span style={{ fontSize: '12px', color: '#94a3b8' }}>{label} <strong style={{ color: '#fff', marginLeft: '5px' }}>{count}</strong></span>\n    </div>\n);\n\nconst SummaryItem = ({ label, value, sub }) => (\n    <div>\n        <div style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase', marginBottom: '8px' }}>{label}</div>\n        <div style={{ fontSize: '24px', fontWeight: '800', color: '#fff', marginBottom: '5px' }}>{value}</div>\n        <div style={{ fontSize: '13px', color: '#64748b' }}>{sub}</div>\n    </div>\n);\n\nconst LogCard = ({ trip }) => (\n    <GlassCard style={{ padding: '20px', position: 'relative' }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>\n            <span style={{ fontWeight: '800', fontSize: '14px' }}>{trip.name}</span>\n            <ChevronRight size={14} color=\"#64748b\" />\n        </div>\n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', marginBottom: '15px' }}>\n            <div>\n                <div style={{ fontSize: '10px', color: '#64748b', marginBottom: '4px' }}>Operation Rate</div>\n                <div style={{ fontSize: '16px', fontWeight: '900' }}>{trip.util}</div>\n                <div style={{ width: '100%', height: '4px', background: 'rgba(255,255,255,0.05)', borderRadius: '2px', marginTop: '5px' }}>\n                    <div style={{ width: trip.util, height: '100%', background: '#3b82f6', borderRadius: '2px' }}></div>\n                </div>\n            </div>\n            <div>\n                <div style={{ fontSize: '10px', color: '#64748b', marginBottom: '4px' }}>Display</div>\n                <div style={{ fontSize: '16px', fontWeight: '900' }}>{trip.energy}%</div>\n                <div style={{ width: '100%', height: '4px', background: 'rgba(255,255,255,0.05)', borderRadius: '2px', marginTop: '5px' }}>\n                    <div style={{ width: `${trip.energy}%`, height: '100%', background: '#3b82f6', borderRadius: '2px' }}></div>\n                </div>\n            </div>\n        </div>\n        <div style={{ display: 'flex', gap: '10px' }}>\n            <StatusDot color=\"#f43f5e\" label=\"Error\" count=\"2\" />\n            <StatusDot color=\"#f59e0b\" label=\"Warn\" count=\"1\" />\n        </div>\n    </GlassCard>\n);\n\nexport default DriverDashboard;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\pick_drop\\PickDropForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\pick_drop\\PickDropList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\pick_drop\\PickDropTrackingPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchTrip'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTrip, id]","fix":{"range":[814,818],"text":"[fetchTrip, id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axios';\r\nimport LiveTrackingMap from '../../components/logistics/LiveTrackingMap';\r\nimport TripChat from '../../components/logistics/TripChat';\r\nimport GlassCard from '../../components/GlassCard';\r\nimport { ArrowLeft, Truck, MapPin, Navigation, Clock, User } from 'lucide-react';\r\n\r\nconst PickDropTrackingPage = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [trip, setTrip] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchTrip();\r\n        const interval = setInterval(fetchTrip, 10000); // Poll every 10s for coords\r\n        return () => clearInterval(interval);\r\n    }, [id]);\r\n\r\n    const fetchTrip = async () => {\r\n        try {\r\n            const res = await api.get(`/forms/pick-and-drop/api/trips/${id}/`);\r\n            setTrip(res.data);\r\n        } catch (err) {\r\n            console.error('Error fetching trip for tracking', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading && !trip) {\r\n        return <div style={{ padding: '50px', color: '#fff', textAlign: 'center' }}>Initializing Secure Tracking Link...</div>;\r\n    }\r\n\r\n    if (!trip) {\r\n        return <div style={{ padding: '50px', color: '#fff', textAlign: 'center' }}>Trip not found.</div>;\r\n    }\r\n\r\n    const driverCoords = trip.current_lat ? [parseFloat(trip.current_lat), parseFloat(trip.current_lng)] : null;\r\n    const pickupCoords = [25.2, 55.27]; // Dummy for now, ideally we'd geocode or have these in DB\r\n    const dropoffCoords = [25.3, 55.4]; // Dummy for now\r\n\r\n    return (\r\n        <div style={{ padding: '30px 20px', height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                    <button\r\n                        onClick={() => navigate('/pick-drop')}\r\n                        style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '10px', borderRadius: '12px', cursor: 'pointer', color: '#fff' }}\r\n                    >\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Fleet Operations</div>\r\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '2rem', fontWeight: '900', margin: 0, color: '#fff' }}>Live Tracking: {trip.jc_number || 'TRIP'}</h1>\r\n                    </div>\r\n                </div>\r\n                <div style={{ textAlign: 'right' }}>\r\n                    <div style={{ fontSize: '12px', color: '#94a3b8' }}>Status</div>\r\n                    <div style={{ color: '#f59e0b', fontWeight: '900', textTransform: 'uppercase', fontSize: '14px' }}>{trip.status}</div>\r\n                </div>\r\n            </header>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1.2fr', gap: '30px', flex: 1, minHeight: 0 }}>\r\n                {/* Map Section */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n                    <div style={{ flex: 1, position: 'relative', borderRadius: '15px', overflow: 'hidden', border: '1px solid rgba(255,255,255,0.1)' }}>\r\n                        <LiveTrackingMap\r\n                            driverCoords={driverCoords}\r\n                            pickupCoords={pickupCoords}\r\n                            dropoffCoords={dropoffCoords}\r\n                            driverName={trip.driver_name}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '20px' }}>\r\n                        <GlassCard style={{ padding: '20px' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                                <User size={20} color=\"#b08d57\" />\r\n                                <div>\r\n                                    <div style={{ fontSize: '10px', color: '#94a3b8', textTransform: 'uppercase' }}>Associate</div>\r\n                                    <div style={{ color: '#fff', fontWeight: '800' }}>{trip.driver_name || 'Unassigned'}</div>\r\n                                </div>\r\n                            </div>\r\n                        </GlassCard>\r\n                        <GlassCard style={{ padding: '20px' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                                <Truck size={20} color=\"#b08d57\" />\r\n                                <div>\r\n                                    <div style={{ fontSize: '10px', color: '#94a3b8', textTransform: 'uppercase' }}>Vehicle</div>\r\n                                    <div style={{ color: '#fff', fontWeight: '800' }}>{trip.license_plate}</div>\r\n                                </div>\r\n                            </div>\r\n                        </GlassCard>\r\n                        <GlassCard style={{ padding: '20px' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                                <Clock size={20} color=\"#b08d57\" />\r\n                                <div>\r\n                                    <div style={{ fontSize: '10px', color: '#94a3b8', textTransform: 'uppercase' }}>Last Update</div>\r\n                                    <div style={{ color: '#fff', fontWeight: '800' }}>\r\n                                        {trip.last_updated_coords ? new Date(trip.last_updated_coords).toLocaleTimeString() : 'Waiting for Signal...'}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </GlassCard>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Comms Section */}\r\n                <div style={{ height: '100%', minHeight: '600px' }}>\r\n                    <TripChat tripId={id} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PickDropTrackingPage;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\portal\\CustomerPortal.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'verifyToken'. Either include it or remove the dependency array.","line":32,"column":8,"nodeType":"ArrayExpression","endLine":32,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [token, verifyToken]","fix":{"range":[1102,1109],"text":"[token, verifyToken]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":41,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n    Container, Grid, Paper, Typography,\r\n    Box, Card, CardContent, Button,\r\n    CircularProgress, Alert, Tabs, Tab\r\n} from '@mui/material';\r\nimport api from '../../api/axios'; // Adjust path as necessary\r\nimport {\r\n    Wrench as CarRepair,\r\n    ReceiptText as Receipt,\r\n    History as HistoryIcon,\r\n    Star as StarIcon,\r\n    Calendar as Schedule,\r\n    Image as Photo\r\n} from 'lucide-react';\r\nimport MembershipTab from '../../components/portal/MembershipTab';\r\n\r\nconst CustomerPortal = () => {\r\n    const { token } = useParams();\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [customer, setCustomer] = useState(null);\r\n    const [activeTab, setActiveTab] = useState(0);\r\n    const [jobs, setJobs] = useState([]);\r\n    const [invoices, setInvoices] = useState([]);\r\n    const [stats, setStats] = useState({});\r\n\r\n    useEffect(() => {\r\n        if (token) verifyToken();\r\n    }, [token]);\r\n\r\n    const verifyToken = async () => {\r\n        try {\r\n            const response = await api.post('/customer-portal/portal/verify_token/', {\r\n                token: token\r\n            });\r\n            setCustomer(response.data);\r\n            loadDashboardData(response.data.id);\r\n        } catch (err) {\r\n            setError('Invalid or expired access link. Please request a new one.');\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const loadDashboardData = async (customerId) => {\r\n        try {\r\n            const [jobsRes, invoicesRes, statsRes] = await Promise.all([\r\n                api.get(`/customer-portal/my-jobs/?customer_id=${customerId}`),\r\n                api.get(`/customer-portal/invoices/?customer_id=${customerId}`),\r\n                api.get(`/customer-portal/portal/dashboard_stats/?customer_id=${customerId}`)\r\n            ]);\r\n\r\n            setJobs(jobsRes.data.results || jobsRes.data);\r\n            setInvoices(invoicesRes.data.results || invoicesRes.data);\r\n            setStats(statsRes.data);\r\n        } catch (err) {\r\n            console.error('Error loading dashboard data:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleTabChange = (event, newValue) => {\r\n        setActiveTab(newValue);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"80vh\">\r\n                <CircularProgress />\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Container maxWidth=\"md\" sx={{ mt: 4 }}>\r\n                <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n                    {error}\r\n                </Alert>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => navigate('/portal/request-access')}\r\n                >\r\n                    Request New Access Link\r\n                </Button>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n            {/* Header */}\r\n            <Paper sx={{ p: 3, mb: 3 }}>\r\n                <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                    <Box>\r\n                        <Typography variant=\"h4\" gutterBottom>\r\n                            Welcome back, {customer?.name}!\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" color=\"textSecondary\">\r\n                            Member since {new Date(customer?.member_since).toLocaleDateString()}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"center\">\r\n                        <Typography variant=\"h6\" color=\"primary\">\r\n                            {customer?.loyalty_points}\r\n                        </Typography>\r\n                        <Typography variant=\"body2\">Loyalty Points</Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Paper>\r\n\r\n            {/* Quick Stats */}\r\n            <Grid container spacing={3} sx={{ mb: 4 }}>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                                <CarRepair size={24} />\r\n                                <Box ml={2}>\r\n                                    <Typography variant=\"h6\">{stats.active_jobs || 0}</Typography>\r\n                                    <Typography variant=\"body2\">Active Jobs</Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                                <HistoryIcon size={24} />\r\n                                <Box ml={2}>\r\n                                    <Typography variant=\"h6\">{stats.total_jobs || 0}</Typography>\r\n                                    <Typography variant=\"body2\">Total Jobs</Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                                <Receipt size={24} />\r\n                                <Box ml={2}>\r\n                                    <Typography variant=\"h6\">\r\n                                        ${(stats.total_spent || 0).toLocaleString()}\r\n                                    </Typography>\r\n                                    <Typography variant=\"body2\">Total Spent</Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                                <StarIcon size={24} />\r\n                                <Box ml={2}>\r\n                                    <Typography variant=\"h6\">{stats.warranties_active || 0}</Typography>\r\n                                    <Typography variant=\"body2\">Active Warranties</Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n            </Grid>\r\n\r\n            {/* Main Content */}\r\n            <Paper sx={{ p: 2 }}>\r\n                <Tabs value={activeTab} onChange={handleTabChange} sx={{ mb: 3 }}>\r\n                    <Tab label=\"My Jobs\" icon={<CarRepair size={20} />} />\r\n                    <Tab label=\"Invoices\" icon={<Receipt size={20} />} />\r\n                    <Tab label=\"Book New Service\" icon={<Schedule size={20} />} />\r\n                    <Tab label=\"Memberships\" icon={<StarIcon size={20} />} />\r\n                    <Tab label=\"Feedback\" icon={<StarIcon size={20} />} />\r\n                </Tabs>\r\n\r\n                {activeTab === 0 && <JobList jobs={jobs} navigate={navigate} />}\r\n                {activeTab === 1 && <InvoiceList invoices={invoices} navigate={navigate} />}\r\n                {/* Placeholders for now */}\r\n                {activeTab === 2 && <Typography variant=\"body1\" p={2}>Booking Form Coming Soon</Typography>}\r\n                {activeTab === 3 && <MembershipTab customerId={customer?.id} />}\r\n                {activeTab === 4 && <Typography variant=\"body1\" p={2}>Feedback Form Coming Soon</Typography>}\r\n            </Paper>\r\n        </Container>\r\n    );\r\n};\r\n\r\n// Job List Component\r\nconst JobList = ({ jobs, navigate }) => (\r\n    <Grid container spacing={3}>\r\n        {jobs.map((job) => (\r\n            <Grid item xs={12} key={job.id}>\r\n                <Card>\r\n                    <CardContent>\r\n                        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                            <Box>\r\n                                <Typography variant=\"h6\">Job #{job.job_number}</Typography>\r\n                                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                                    {job.vehicle_details?.make} {job.vehicle_details?.model}\r\n                                </Typography>\r\n                                <Typography variant=\"body2\">\r\n                                    Status: <strong>{job.current_status_display}</strong>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"h6\">\r\n                                    ${parseFloat(job.total_estimated_cost || 0).toLocaleString()}\r\n                                </Typography>\r\n                                <Button\r\n                                    size=\"small\"\r\n                                    variant=\"outlined\"\r\n                                    onClick={() => navigate(`/portal/jobs/${job.id}`)}\r\n                                >\r\n                                    View Details\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                        {job.notes_for_customer && (\r\n                            <Box mt={2} p={2} bgcolor=\"grey.50\" borderRadius={1}>\r\n                                <Typography variant=\"body2\">\r\n                                    <strong>Note:</strong> {job.notes_for_customer}\r\n                                </Typography>\r\n                            </Box>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </Grid>\r\n        ))}\r\n    </Grid>\r\n);\r\n\r\n// Invoice List Component\r\nconst InvoiceList = ({ invoices, navigate }) => (\r\n    <Grid container spacing={3}>\r\n        {invoices.map((invoice) => (\r\n            <Grid item xs={12} key={invoice.id}>\r\n                <Card>\r\n                    <CardContent>\r\n                        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                            <Box>\r\n                                <Typography variant=\"h6\">Invoice #{invoice.invoice_number}</Typography>\r\n                                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                                    {/* Job Number linking might need adjustment depending on API data */}\r\n                                    {new Date(invoice.date).toLocaleDateString()}\r\n                                </Typography>\r\n                                <Typography variant=\"body2\">\r\n                                    Status:\r\n                                    <span style={{\r\n                                        color: invoice.payment_status === 'PAID' ? 'green' : 'orange',\r\n                                        fontWeight: 'bold',\r\n                                        marginLeft: 8\r\n                                    }}>\r\n                                        {invoice.payment_status}\r\n                                    </span>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box textAlign=\"right\">\r\n                                <Typography variant=\"h6\">\r\n                                    ${parseFloat(invoice.total_amount).toLocaleString()}\r\n                                </Typography>\r\n                                {invoice.payment_status === 'PENDING' && (\r\n                                    <Button\r\n                                        size=\"small\"\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => navigate(`/payment/${invoice.id}`)}\r\n                                    >\r\n                                        Pay Now\r\n                                    </Button>\r\n                                )}\r\n                            </Box>\r\n                        </Box>\r\n                    </CardContent>\r\n                </Card>\r\n            </Grid>\r\n        ))}\r\n    </Grid>\r\n);\r\n\r\nexport default CustomerPortal;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\portal\\JobDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadJobDetails'. Either include it or remove the dependency array.","line":29,"column":8,"nodeType":"ArrayExpression","endLine":29,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [id, loadJobDetails]","fix":{"range":[896,900],"text":"[id, loadJobDetails]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":61,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n    Container, Paper, Typography, Box,\r\n    Stepper, Step, StepLabel, Button,\r\n    Grid, Card, CardContent, Chip,\r\n    CircularProgress, Alert, Tabs, Tab\r\n} from '@mui/material';\r\nimport {\r\n    CheckCircle, Clock, AlertCircle,\r\n    DollarSign, Truck, Camera\r\n} from 'lucide-react';\r\nimport api from '../../api/axios';\r\n\r\nconst JobDetail = () => {\r\n    const { id } = useParams();\r\n    const [job, setJob] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [photos, setPhotos] = useState([]);\r\n    const [activePhotoTab, setActivePhotoTab] = useState(0);\r\n\r\n    const STAGES = [\r\n        'RECEPTION', 'ESTIMATION', 'WORK_ASSIGNMENT',\r\n        'WIP', 'QC', 'INVOICING', 'DELIVERY', 'CLOSED'\r\n    ];\r\n\r\n    useEffect(() => {\r\n        loadJobDetails();\r\n    }, [id]);\r\n\r\n    const loadJobDetails = async () => {\r\n        try {\r\n            const [jobRes, photosRes] = await Promise.all([\r\n                api.get(`/customer-portal/my-jobs/${id}/`),\r\n                api.get(`/customer-portal/my-jobs/${id}/photos/`)\r\n            ]);\r\n            setJob(jobRes.data);\r\n            setPhotos(photosRes.data);\r\n        } catch (err) {\r\n            console.error('Error loading job details:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStageIcon = (stage, currentStage) => {\r\n        const stageIndex = STAGES.indexOf(stage);\r\n        const currentIndex = STAGES.indexOf(currentStage);\r\n\r\n        if (stageIndex < currentIndex) return <CheckCircle color=\"green\" />;\r\n        if (stageIndex === currentIndex) return <Clock color=\"orange\" />;\r\n        return <AlertCircle color=\"gray\" />;\r\n    };\r\n\r\n    const handleApproveEstimate = async () => {\r\n        if (window.confirm('Are you sure you want to approve this estimate?')) {\r\n            try {\r\n                await api.post(`/customer-portal/my-jobs/${id}/approve_estimate/`);\r\n                setJob({ ...job, status: 'WORK_ASSIGNMENT', current_status_display: 'Work Assignment' });\r\n                alert('Estimate approved successfully!');\r\n            } catch (err) {\r\n                alert('Error approving estimate');\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"80vh\">\r\n                <CircularProgress />\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    if (!job) {\r\n        return (\r\n            <Container maxWidth=\"md\" sx={{ mt: 4 }}>\r\n                <Alert severity=\"error\">Job not found</Alert>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n            {/* Job Header */}\r\n            <Paper sx={{ p: 3, mb: 3 }}>\r\n                <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                    <Box>\r\n                        <Typography variant=\"h4\">Job #{job.job_number}</Typography>\r\n                        <Typography variant=\"body1\" color=\"textSecondary\">\r\n                            {job.vehicle_details?.make} {job.vehicle_details?.model} \r\n                            {job.vehicle_details?.license_plate}\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"right\">\r\n                        <Typography variant=\"h5\" color=\"primary\">\r\n                            ${parseFloat(job.total_estimated_cost || 0).toLocaleString()}\r\n                        </Typography>\r\n                        <Typography variant=\"body2\">Estimated Total</Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Paper>\r\n\r\n            {/* Workflow Stepper */}\r\n            <Paper sx={{ p: 3, mb: 3 }}>\r\n                <Typography variant=\"h6\" gutterBottom>Job Progress</Typography>\r\n                <Stepper activeStep={STAGES.indexOf(job.status)} alternativeLabel>\r\n                    {STAGES.map((stage) => (\r\n                        <Step key={stage}>\r\n                            <StepLabel\r\n                                icon={getStageIcon(stage, job.status)}\r\n                                StepIconProps={{ completed: STAGES.indexOf(stage) < STAGES.indexOf(job.status) }}\r\n                            >\r\n                                {stage.replace('_', ' ')}\r\n                            </StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n            </Paper>\r\n\r\n            <Grid container spacing={3}>\r\n                {/* Left Column - Job Details */}\r\n                <Grid item xs={12} md={8}>\r\n                    {/* Services */}\r\n                    <Paper sx={{ p: 3, mb: 3 }}>\r\n                        <Typography variant=\"h6\" gutterBottom>Services</Typography>\r\n                        <Grid container spacing={2}>\r\n                            {job.services?.map((service, index) => (\r\n                                <Grid item xs={12} sm={6} key={index}>\r\n                                    <Card variant=\"outlined\">\r\n                                        <CardContent>\r\n                                            <Typography variant=\"subtitle1\">{service.name}</Typography>\r\n                                            <Typography variant=\"h6\" color=\"primary\">\r\n                                                ${service.price}\r\n                                            </Typography>\r\n                                        </CardContent>\r\n                                    </Card>\r\n                                </Grid>\r\n                            ))}\r\n                            {!job.services?.length && <Typography variant=\"body2\">No specific services listed.</Typography>}\r\n                        </Grid>\r\n                    </Paper>\r\n\r\n                    {/* Photos */}\r\n                    <Paper sx={{ p: 3 }}>\r\n                        <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                            <Camera size={20} />\r\n                            <Typography variant=\"h6\" ml={1}>Progress Photos</Typography>\r\n                        </Box>\r\n\r\n                        <Tabs\r\n                            value={activePhotoTab}\r\n                            onChange={(e, val) => setActivePhotoTab(val)}\r\n                            sx={{ mb: 2 }}\r\n                        >\r\n                            <Tab label=\"All\" />\r\n                            <Tab label=\"Before\" />\r\n                            <Tab label=\"During\" />\r\n                            <Tab label=\"After\" />\r\n                        </Tabs>\r\n\r\n                        <Grid container spacing={2}>\r\n                            {photos\r\n                                .filter(photo =>\r\n                                    activePhotoTab === 0 ||\r\n                                    photo.stage === ['All', 'BEFORE', 'DURING', 'AFTER'][activePhotoTab]\r\n                                )\r\n                                .map((photo) => (\r\n                                    <Grid item xs={6} md={4} key={photo.id}>\r\n                                        <Card>\r\n                                            <img\r\n                                                src={photo.thumbnail_url || photo.image}\r\n                                                alt={photo.description}\r\n                                                style={{ width: '100%', height: 150, objectFit: 'cover' }}\r\n                                            />\r\n                                            <CardContent>\r\n                                                <Typography variant=\"caption\" color=\"textSecondary\">\r\n                                                    {photo.description}\r\n                                                </Typography>\r\n                                            </CardContent>\r\n                                        </Card>\r\n                                    </Grid>\r\n                                ))}\r\n                            {photos.length === 0 && <Typography variant=\"body2\" p={2}>No photos available.</Typography>}\r\n                        </Grid>\r\n                    </Paper>\r\n                </Grid>\r\n\r\n                {/* Right Column - Actions & Info */}\r\n                <Grid item xs={12} md={4}>\r\n                    {/* Status Card */}\r\n                    <Paper sx={{ p: 3, mb: 3 }}>\r\n                        <Typography variant=\"h6\" gutterBottom>Current Status</Typography>\r\n                        <Box textAlign=\"center\" py={2}>\r\n                            <Chip\r\n                                label={job.current_status_display}\r\n                                color={\r\n                                    job.status === 'CLOSED' ? 'success' :\r\n                                        job.status === 'WIP' ? 'warning' :\r\n                                            job.status === 'ESTIMATION' ? 'info' : 'default'\r\n                                }\r\n                                size=\"large\"\r\n                                sx={{ fontSize: '1.1rem', p: 2 }}\r\n                            />\r\n                        </Box>\r\n\r\n                        {job.status === 'ESTIMATION' && (\r\n                            <Box mt={3}>\r\n                                <Typography variant=\"body2\" gutterBottom>\r\n                                    Please review and approve the estimate to proceed\r\n                                </Typography>\r\n                                <Button\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={handleApproveEstimate}\r\n                                >\r\n                                    Approve Estimate\r\n                                </Button>\r\n                            </Box>\r\n                        )}\r\n\r\n                        {job.estimated_completion && (\r\n                            <Box mt={3} p={2} bgcolor=\"grey.50\" borderRadius={1}>\r\n                                <Box display=\"flex\" alignItems=\"center\">\r\n                                    <Clock size={18} />\r\n                                    <Typography variant=\"body2\" ml={1}>\r\n                                        <strong>Estimated Completion:</strong><br />\r\n                                        {typeof job.estimated_completion === 'string' ? new Date(job.estimated_completion).toLocaleString() : job.estimated_completion}\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        )}\r\n                    </Paper>\r\n\r\n                    {/* Contact Information */}\r\n                    <Paper sx={{ p: 3 }}>\r\n                        <Typography variant=\"h6\" gutterBottom>Contact & Support</Typography>\r\n                        <Box mt={2}>\r\n                            <Typography variant=\"body2\">\r\n                                <strong>Service Advisor:</strong><br />\r\n                                {job.assigned_advisor?.name || 'Not assigned'}\r\n                                {/* Note: Serializer didn't return assigned_advisor. Might be missing in backend or fields not expanded. */}\r\n                            </Typography>\r\n                            <Typography variant=\"body2\" mt={1}>\r\n                                For questions, please contact our support.\r\n                            </Typography>\r\n                        </Box>\r\n                    </Paper>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default JobDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ppf\\PPFDetail.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchWarranty'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchWarranty, id]","fix":{"range":[591,595],"text":"[fetchWarranty, id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport api from '../../api/axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport GlassCard from '../../components/GlassCard';\nimport { ArrowLeft, Printer, ShieldCheck, Calendar, User, Car } from 'lucide-react';\nimport PrintHeader from '../../components/PrintHeader';\n\nconst PPFDetail = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [warranty, setWarranty] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchWarranty();\n    }, [id]);\n\n    const fetchWarranty = async () => {\n        try {\n            const res = await api.get(`/forms/ppf/api/warranties/${id}/`);\n            setWarranty(res.data);\n        } catch (err) {\n            console.error('Error fetching warranty', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (loading) return <div style={{ padding: '50px', textAlign: 'center', color: '#fff' }}>Loading Certificate...</div>;\n    if (!warranty) return <div style={{ padding: '50px', textAlign: 'center', color: '#fff' }}>Certificate Not Found</div>;\n\n    return (\n        <div style={{ padding: '30px 20px' }}>\n            <PrintHeader title=\"Paint Protection Film Warranty\" />\n\n            <header className=\"no-print\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                    <button\n                        onClick={() => navigate('/ppf')}\n                        style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '8px', borderRadius: '12px', cursor: 'pointer', color: '#fff' }}\n                    >\n                        <ArrowLeft size={20} />\n                    </button>\n                    <div>\n                        <h1 style={{ fontFamily: 'Outfit, sans-serif', fontSize: '1.5rem', margin: 0 }}>Warranty Certificate</h1>\n                        <p style={{ color: '#94a3b8', fontSize: '14px', margin: 0 }}>Certificate ID: PPF-{warranty.id.toString().padStart(5, '0')}</p>\n                    </div>\n                </div>\n\n                <button\n                    onClick={() => window.print()}\n                    className=\"btn-primary\"\n                    style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n                >\n                    <Printer size={18} /> Print Certificate\n                </button>\n            </header>\n\n            <GlassCard className=\"printable-certificate\" style={{ padding: '50px', maxWidth: '850px', margin: '0 auto', border: '2px solid rgba(176, 141, 87, 0.3)', position: 'relative' }}>\n                {/* Decorative Elements */}\n                <div style={{ position: 'absolute', top: '20px', right: '20px', opacity: 0.1 }}>\n                    <ShieldCheck size={120} color=\"#b08d57\" />\n                </div>\n\n                <div style={{ textAlign: 'center', marginBottom: '40px' }}>\n                    <h2 style={{ fontFamily: 'Outfit, sans-serif', color: '#b08d57', fontSize: '2rem', marginBottom: '10px' }}>Certificate of Warranty</h2>\n                    <div style={{ height: '2px', width: '100px', background: '#b08d57', margin: '0 auto' }}></div>\n                </div>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '40px', marginBottom: '40px' }}>\n                    <div>\n                        <h4 style={labelStyle}><User size={12} style={{ marginRight: '5px' }} /> Beneficiary</h4>\n                        <p style={valueStyle}>{warranty.full_name}</p>\n                        <p style={{ color: '#94a3b8', fontSize: '13px' }}>{warranty.contact_number}</p>\n                        <p style={{ color: '#94a3b8', fontSize: '13px' }}>{warranty.email}</p>\n                    </div>\n                    <div style={{ textAlign: 'right' }}>\n                        <h4 style={labelStyle}><Car size={12} style={{ marginRight: '5px' }} /> Vehicle Protected</h4>\n                        <p style={valueStyle}>{warranty.vehicle_brand} {warranty.vehicle_model} ({warranty.vehicle_year})</p>\n                        <p style={{ color: '#b08d57', fontWeight: '800' }}>PLATE: {warranty.license_plate}</p>\n                        <p style={{ color: '#94a3b8', fontSize: '12px' }}>VIN: {warranty.vin}</p>\n                    </div>\n                </div>\n\n                <div style={{ background: 'rgba(255,255,255,0.02)', padding: '30px', borderRadius: '15px', border: '1px solid rgba(255,255,255,0.05)', marginBottom: '40px' }}>\n                    <h4 style={labelStyle}>Installation Details</h4>\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '20px', marginTop: '15px' }}>\n                        <div>\n                            <p style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase' }}>Install Date</p>\n                            <p style={{ fontWeight: '600' }}>{new Date(warranty.installation_date).toLocaleDateString()}</p>\n                        </div>\n                        <div>\n                            <p style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase' }}>Film Type</p>\n                            <p style={{ fontWeight: '600' }}>{warranty.film_type} - {warranty.film_brand}</p>\n                        </div>\n                        <div>\n                            <p style={{ fontSize: '11px', color: '#64748b', textTransform: 'uppercase' }}>Coverage</p>\n                            <p style={{ fontWeight: '600' }}>{warranty.coverage_area}</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div style={{ display: 'grid', gridTemplateColumns: '1.5fr 1fr', gap: '40px' }}>\n                    <div>\n                        <h4 style={labelStyle}>Terms of Protection</h4>\n                        <p style={{ fontSize: '11px', color: '#94a3b8', lineHeight: '1.6' }}>\n                            This certificate entitles the above mentioned vehicle for the Elite Shine PPF Protection Warranty.\n                            The warranty covers yellowing, bubbling, and cracking under normal usage conditions.\n                            Periodic maintenance every 6 months is required to maintain the validity of this warranty.\n                        </p>\n                    </div>\n                    <div style={{ textAlign: 'center' }}>\n                        <h4 style={labelStyle}>Client Authorization</h4>\n                        {warranty.signature_data ? (\n                            <div style={{ background: '#fff', padding: '10px', borderRadius: '8px', border: '1px solid #eee' }}>\n                                <img src={warranty.signature_data} alt=\"Customer Sig\" style={{ maxHeight: '60px' }} />\n                                <p style={{ fontSize: '9px', color: '#000', margin: '5px 0 0 0', fontWeight: '800' }}>DIGITALLY AUTHORIZED</p>\n                            </div>\n                        ) : (\n                            <div style={{ borderBottom: '1px solid #aaa', height: '60px' }}></div>\n                        )}\n                        <p style={{ fontSize: '11px', color: '#64748b', marginTop: '8px' }}>Authorized Representative</p>\n                    </div>\n                </div>\n\n                <div style={{ marginTop: '50px', borderTop: '1px solid rgba(255,255,255,0.05)', paddingTop: '20px', textAlign: 'center' }}>\n                    <p style={{ fontSize: '10px', color: '#64748b' }}>\n                        Elite Shine Detailing Studio | Dubai - Abu Dhabi - Sharjah | www.eliteshine.ae\n                    </p>\n                </div>\n            </GlassCard>\n\n            <style>{`\n                @media print {\n                    body { background: #fff !important; }\n                    .printable-certificate { \n                        background: #fff !important; \n                        color: #000 !important; \n                        border: 2px solid #b08d57 !important; \n                        box-shadow: none !important; \n                        max-width: 100% !important; \n                        padding: 40px !important;\n                        margin: 0 !important;\n                    }\n                    .printable-certificate * { color: #000 !important; }\n                    .printable-certificate h2, .printable-certificate h4 { color: #b08d57 !important; }\n                    .printable-certificate div[style*=\"background\"] { background: #fafafa !important; border-color: #eee !important; }\n                    .no-print { display: none !important; }\n                }\n            `}</style>\n        </div>\n    );\n};\n\nconst labelStyle = {\n    fontSize: '11px',\n    color: '#b08d57',\n    textTransform: 'uppercase',\n    fontWeight: '800',\n    letterSpacing: '1px',\n    marginBottom: '10px'\n};\n\nconst valueStyle = {\n    fontSize: '1.2rem',\n    fontWeight: '800',\n    margin: '0 0 5px 0'\n};\n\nexport default PPFDetail;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ppf\\PPFForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\ppf\\PPFList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\public\\CustomerLiveTracker.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":35,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {\r\n    Clock, CheckCircle2, AlertCircle, Camera,\r\n    FileText, Award, ChevronRight, Car\r\n} from 'lucide-react';\r\nimport '../../layouts/AppLayout.css';\r\n\r\nconst GlassCard = ({ children, className = \"\" }) => (\r\n    <div className={`glass-card ${className}`} style={{\r\n        background: 'rgba(255, 255, 255, 0.03)',\r\n        backdropFilter: 'blur(20px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.05)',\r\n        borderRadius: '24px',\r\n        padding: '30px',\r\n        boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.5)'\r\n    }}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CustomerLiveTracker = () => {\r\n    const { token } = useParams();\r\n    const [data, setData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await axios.get(`/forms/job-cards/api/portal/${token}/`);\r\n                setData(response.data);\r\n                setLoading(false);\r\n            } catch (err) {\r\n                setError('Unable to retrieve service status. Please verify your link.');\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n        const interval = setInterval(fetchData, 30000); // Auto-refresh every 30s\r\n        return () => clearInterval(interval);\r\n    }, [token]);\r\n\r\n    if (loading) return (\r\n        <div className=\"flex items-center justify-center min-h-screen text-white\">\r\n            <div className=\"animate-pulse\">Synchronizing Elite Service Data...</div>\r\n        </div>\r\n    );\r\n\r\n    if (error) return (\r\n        <div className=\"flex items-center justify-center min-h-screen text-white\">\r\n            <GlassCard>\r\n                <div className=\"text-center\">\r\n                    <AlertCircle size={48} className=\"mx-auto mb-4 text-red-400\" />\r\n                    <h2 className=\"text-2xl font-bold mb-2\">Access Denied</h2>\r\n                    <p className=\"text-gray-400\">{error}</p>\r\n                </div>\r\n            </GlassCard>\r\n        </div>\r\n    );\r\n\r\n    const { job, steps, invoice, warranties } = data;\r\n\r\n    return (\r\n        <div className=\"min-h-screen p-6 md:p-12 text-white\" style={{\r\n            background: 'linear-gradient(135deg, #0a0c10 0%, #1a1c24 100%)',\r\n            fontFamily: \"'Inter', sans-serif\"\r\n        }}>\r\n            <div className=\"max-w-4xl mx-auto\">\r\n                {/* Header Section */}\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6\">\r\n                    <div>\r\n                        <div className=\"flex items-center gap-3 mb-2\">\r\n                            <div className=\"w-12 h-12 rounded-xl bg-[#b08d57]/20 flex items-center justify-center\">\r\n                                <Car className=\"text-[#b08d57]\" size={28} />\r\n                            </div>\r\n                            <h1 className=\"text-3xl font-bold tracking-tight\">Elite Service Live</h1>\r\n                        </div>\r\n                        <p className=\"text-gray-400\">Tracking {job.brand} {job.model}  #{job.job_card_number}</p>\r\n                    </div>\r\n\r\n                    <div className=\"px-6 py-3 rounded-full bg-white/5 border border-white/10 flex items-center gap-3 backdrop-blur-sm\">\r\n                        <div className={`w-2 h-2 rounded-full animate-pulse ${job.status === 'CLOSED' ? 'bg-green-400' : 'bg-[#b08d57]'}`} />\r\n                        <span className=\"text-sm font-medium uppercase tracking-widest text-gray-300\">\r\n                            Current: {job.status.replace('_', ' ')}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Status Timeline */}\r\n                <GlassCard className=\"mb-8\">\r\n                    <div className=\"space-y-8\">\r\n                        {steps.map((step, idx) => (\r\n                            <div key={idx} className=\"relative flex items-center gap-6 group\">\r\n                                {idx !== steps.length - 1 && (\r\n                                    <div className={`absolute left-4 top-10 w-0.5 h-12 transition-colors duration-500 ${step.status === 'completed' ? 'bg-[#b08d57]' : 'bg-white/10'\r\n                                        }`} />\r\n                                )}\r\n\r\n                                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-500 z-10 ${step.status === 'completed' ? 'bg-[#b08d57] border-[#b08d57]' :\r\n                                    step.status === 'active' ? 'bg-white/10 border-white/40 ring-4 ring-white/5' :\r\n                                        'bg-transparent border-white/10'\r\n                                    }`}>\r\n                                    {step.status === 'completed' ? (\r\n                                        <CheckCircle2 size={16} className=\"text-white\" />\r\n                                    ) : (\r\n                                        <div className={`w-2 h-2 rounded-full ${step.status === 'active' ? 'bg-white' : 'bg-transparent'}`} />\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"flex-1\">\r\n                                    <h3 className={`font-semibold tracking-wide transition-colors ${step.status === 'pending' ? 'text-gray-600' : 'text-white'\r\n                                        }`}>\r\n                                        {step.label}\r\n                                    </h3>\r\n                                    {step.status === 'active' && (\r\n                                        <p className=\"text-sm text-[#b08d57] font-medium mt-1\">Our masters are refining your vehicle right now.</p>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </GlassCard>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    {/* Visual Archive */}\r\n                    <GlassCard>\r\n                        <div className=\"flex items-center justify-between mb-6\">\r\n                            <h2 className=\"text-xl font-bold flex items-center gap-2\">\r\n                                <Camera size={20} className=\"text-[#b08d57]\" /> Visual Archive\r\n                            </h2>\r\n                            <span className=\"text-xs text-gray-500 uppercase tracking-widest\">{job.photos?.length || 0} Assets</span>\r\n                        </div>\r\n                        {job.photos?.length > 0 ? (\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                {job.photos.map((photo, i) => (\r\n                                    <div key={i} className=\"aspect-square rounded-xl overflow-hidden border border-white/10 group cursor-pointer\">\r\n                                        <img\r\n                                            src={photo.image}\r\n                                            alt={photo.caption}\r\n                                            className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"py-12 text-center text-gray-600 italic\">\r\n                                Photos will appear once detailing begins.\r\n                            </div>\r\n                        )}\r\n                    </GlassCard>\r\n\r\n                    {/* Documentation Hub */}\r\n                    <div className=\"space-y-8\">\r\n                        <GlassCard>\r\n                            <h2 className=\"text-xl font-bold flex items-center gap-2 mb-6 text-[#b08d57]\">\r\n                                <FileText size={20} /> Digital Archive\r\n                            </h2>\r\n                            {invoice ? (\r\n                                <div className=\"space-y-4\">\r\n                                    <div className=\"p-4 rounded-xl bg-white/5 border border-white/10 flex justify-between items-center group hover:bg-white/10 transition-colors\">\r\n                                        <div>\r\n                                            <p className=\"text-xs text-gray-400 uppercase tracking-widest mb-1\">Tax Invoice</p>\r\n                                            <p className=\"font-bold\">{invoice.number}</p>\r\n                                        </div>\r\n                                        <ChevronRight className=\"text-gray-600 group-hover:text-white transition-colors\" />\r\n                                    </div>\r\n\r\n                                    {warranties.map((w, i) => (\r\n                                        <div key={i} className=\"p-4 rounded-xl bg-[#b08d57]/10 border border-[#b08d57]/20 flex justify-between items-center\">\r\n                                            <div>\r\n                                                <p className=\"text-xs text-[#b08d57] uppercase tracking-widest mb-1\">{w.type} Protection</p>\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <Award size={14} />\r\n                                                    <p className=\"font-bold\">{w.certificate_id}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"px-3 py-1 rounded-full bg-[#b08d57] text-[10px] font-bold text-white uppercase tracking-tighter\">Verified</div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"p-6 text-center bg-white/5 rounded-xl border border-white/5 border-dashed\">\r\n                                    <Clock size={32} className=\"mx-auto mb-3 text-gray-700\" />\r\n                                    <p className=\"text-sm text-gray-500 italic\">Final documentation is generated upon delivery.</p>\r\n                                </div>\r\n                            )}\r\n                        </GlassCard>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomerLiveTracker;\r\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\public\\WarrantyPortalView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\requests\\RequestForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\requests\\RequestList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\scheduling\\SchedulePage.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchTeams` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  16 |\n  17 |     useEffect(() => {\n> 18 |         fetchTeams();\n     |         ^^^^^^^^^^ `fetchTeams` accessed before it is declared\n  19 |     }, []);\n  20 |\n  21 |     const fetchTeams = async () => {\n\n  19 |     }, []);\n  20 |\n> 21 |     const fetchTeams = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 22 |         try {\n     | ^^^^^^^^^^^^^\n> 23 |             const response = await api.get('/forms/scheduling/teams/');\n     | ^^^^^^^^^^^^^\n> 24 |             setTeams(response.data);\n     | ^^^^^^^^^^^^^\n> 25 |             setLoading(false);\n     | ^^^^^^^^^^^^^\n> 26 |         } catch (error) {\n     | ^^^^^^^^^^^^^\n> 27 |             console.error('Error fetching teams:', error);\n     | ^^^^^^^^^^^^^\n> 28 |             setLoading(false);\n     | ^^^^^^^^^^^^^\n> 29 |         }\n     | ^^^^^^^^^^^^^\n> 30 |     };\n     | ^^^^^^^ `fetchTeams` is declared here\n  31 |\n  32 |     const navItems = [\n  33 |         { id: 'dashboard', label: 'Dashboard', icon: <BarChart3 size={20} />, color: '#3498db' },","line":18,"column":9,"nodeType":null,"endLine":18,"endColumn":19},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  94 |     useEffect(() => {\n  95 |         // In a real app, we would fetch these from an API\n> 96 |         setStats({ active: 24, completed: 12, pending: 8, urgent: 4 });\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  97 |     }, []);\n  98 |\n  99 |     return (","line":96,"column":9,"nodeType":null,"endLine":96,"endColumn":17},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchEntries` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  161 |\n  162 |     useEffect(() => {\n> 163 |         fetchEntries();\n      |         ^^^^^^^^^^^^ `fetchEntries` accessed before it is declared\n  164 |     }, [selectedAdvisor]);\n  165 |\n  166 |     const fetchEntries = async () => {\n\n  164 |     }, [selectedAdvisor]);\n  165 |\n> 166 |     const fetchEntries = async () => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 167 |         try {\n      | ^^^^^^^^^^^^^\n> 168 |             const response = await api.get(`/forms/scheduling/advisor-sheets/?advisor=${selectedAdvisor}`);\n      \n      | ^^^^^^^^^^^^^\n> 177 |         }\n      | ^^^^^^^^^^^^^\n> 178 |     };\n      | ^^^^^^^ `fetchEntries` is declared here\n  179 |\n  180 |     const handleAdd = async () => {\n  181 |         try {","line":163,"column":9,"nodeType":null,"endLine":163,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchEntries'. Either include it or remove the dependency array.","line":164,"column":8,"nodeType":"ArrayExpression","endLine":164,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [fetchEntries, selectedAdvisor]","fix":{"range":[7431,7448],"text":"[fetchEntries, selectedAdvisor]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":168,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":168,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"response"},"fix":{"range":[7517,7612],"text":""},"desc":"Remove unused variable 'response'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchAssignments` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  252 |\n  253 |     useEffect(() => {\n> 254 |         fetchAssignments();\n      |         ^^^^^^^^^^^^^^^^ `fetchAssignments` accessed before it is declared\n  255 |     }, []);\n  256 |\n  257 |     const fetchAssignments = async () => {\n\n  255 |     }, []);\n  256 |\n> 257 |     const fetchAssignments = async () => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 258 |         try {\n      | ^^^^^^^^^^^^^\n> 259 |             const resp = await api.get('/forms/scheduling/assignments/');\n      | ^^^^^^^^^^^^^\n> 260 |             setAssignments(resp.data);\n      | ^^^^^^^^^^^^^\n> 261 |         } catch (error) {\n      | ^^^^^^^^^^^^^\n> 262 |             console.error('Error fetching assignments:', error);\n      | ^^^^^^^^^^^^^\n> 263 |         }\n      | ^^^^^^^^^^^^^\n> 264 |     };\n      | ^^^^^^^ `fetchAssignments` is declared here\n  265 |\n  266 |     const assignSlot = async (teamId, slotNum, isOvertime = false) => {\n  267 |         const jobCard = prompt(\"Enter Job Card ID (Number):\");","line":254,"column":9,"nodeType":null,"endLine":254,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":280,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":280,"endColumn":23},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchReport` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  413 |\n  414 |     useEffect(() => {\n> 415 |         fetchReport();\n      |         ^^^^^^^^^^^ `fetchReport` accessed before it is declared\n  416 |     }, [period]);\n  417 |\n  418 |     const fetchReport = async () => {\n\n  416 |     }, [period]);\n  417 |\n> 418 |     const fetchReport = async () => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 419 |         try {\n      | ^^^^^^^^^^^^^\n> 420 |             const resp = await api.get(`/forms/scheduling/daily-closing/aggregation_report/?period=${period}`);\n      | ^^^^^^^^^^^^^\n> 421 |             setReportData(resp.data);\n      | ^^^^^^^^^^^^^\n> 422 |         } catch (error) {\n      | ^^^^^^^^^^^^^\n> 423 |             console.error(\"error fetching report\", error);\n      | ^^^^^^^^^^^^^\n> 424 |         }\n      | ^^^^^^^^^^^^^\n> 425 |     };\n      | ^^^^^^^ `fetchReport` is declared here\n  426 |\n  427 |     return (\n  428 |         <div className=\"reports-view animate-fade-in\">","line":415,"column":9,"nodeType":null,"endLine":415,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchReport'. Either include it or remove the dependency array.","line":416,"column":8,"nodeType":"ArrayExpression","endLine":416,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchReport, period]","fix":{"range":[19240,19248],"text":"[fetchReport, period]"}}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport { useAuth } from '../../context/AuthContext';\nimport {\n    BarChart3, Calendar, ClipboardList, Car, Paintbrush, Package,\n    TrendingUp, Clock, UserCheck, AlertCircle, CheckCircle2, Save,\n    FileText, Download, Printer, Send, Search, Filter, Plus, Trash2, DollarSign,\n    Camera, Globe, Share2\n} from 'lucide-react';\nimport './SchedulePage.css';\n\nconst SchedulePage = () => {\n    const [currentView, setCurrentView] = useState('dashboard');\n    const [teams, setTeams] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchTeams();\n    }, []);\n\n    const fetchTeams = async () => {\n        try {\n            const response = await api.get('/forms/scheduling/teams/');\n            setTeams(response.data);\n            setLoading(false);\n        } catch (error) {\n            console.error('Error fetching teams:', error);\n            setLoading(false);\n        }\n    };\n\n    const navItems = [\n        { id: 'dashboard', label: 'Dashboard', icon: <BarChart3 size={20} />, color: '#3498db' },\n        { id: 'advisorSheets', label: 'Advisor Sheets', icon: <ClipboardList size={20} />, color: '#f1c40f' },\n        { id: 'detailing', label: 'Detailing Teams', icon: <Car size={20} />, color: '#2ecc71' },\n        { id: 'painting', label: 'Painting Section', icon: <Paintbrush size={20} />, color: '#e67e22' },\n        { id: 'ppfWrapping', label: 'PPF/Wrapping', icon: <Package size={20} />, color: '#e74c3c' },\n        { id: 'dailyClosing', label: 'Daily Closing', icon: <FileText size={20} />, color: '#9b59b6' },\n        { id: 'employeeReport', label: 'Staff Report', icon: <UserCheck size={20} />, color: '#e67e22' },\n        { id: 'reportsPerformance', label: 'Perf Reports', icon: <TrendingUp size={20} />, color: '#1abc9c' },\n        { id: 'mediaSEO', label: 'Media & Digital', icon: <Camera size={20} />, color: '#e84393' },\n    ];\n\n    const renderView = () => {\n        switch (currentView) {\n            case 'dashboard': return <DashboardView teams={teams} />;\n            case 'advisorSheets': return <AdvisorSheetsView />;\n            case 'detailing': return <TeamView section=\"DETAILING\" teams={teams.filter(t => t.section === 'DETAILING')} />;\n            case 'painting': return <TeamView section=\"PAINTING\" teams={teams.filter(t => t.section === 'PAINTING')} />;\n            case 'ppfWrapping': return <TeamView section=\"PPF_WRAPPING\" teams={teams.filter(t => t.section === 'PPF_WRAPPING')} />;\n            case 'dailyClosing': return <DailyClosingView />;\n            case 'employeeReport': return <EmployeeReportView />;\n            case 'reportsPerformance': return <PerformanceReportsView />;\n            case 'mediaSEO': return <TeamView section=\"MEDIA_DIGITAL\" teams={teams.filter(t => ['SOCIAL MEDIA TEAM', 'SEO & DIGITAL MARKETING', 'VIDEOGRAPHERS'].includes(t.name))} />;\n            default: return <DashboardView teams={teams} />;\n        }\n    };\n\n    return (\n        <div className=\"schedule-page\">\n            <header className=\"schedule-header\">\n                <div className=\"title-section\">\n                    <h1>Elite Shine - Daily Work Schedule</h1>\n                    <span className=\"current-date\">{new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span>\n                </div>\n            </header>\n\n            <nav className=\"schedule-nav\">\n                {navItems.map(item => (\n                    <button\n                        key={item.id}\n                        className={`nav-item ${currentView === item.id ? 'active' : ''}`}\n                        onClick={() => setCurrentView(item.id)}\n                        style={currentView === item.id ? { '--active-color': item.color } : {}}\n                    >\n                        <span className=\"icon\">{item.icon}</span>\n                        <span className=\"label\">{item.label}</span>\n                    </button>\n                ))}\n            </nav>\n\n            <main className=\"schedule-content\">\n                {loading ? <div className=\"loading\">Loading Schedule...</div> : renderView()}\n            </main>\n        </div>\n    );\n};\n\n// --- View Components ---\n\nconst DashboardView = ({ teams }) => {\n    const [stats, setStats] = useState({ active: 0, completed: 0, pending: 0, urgent: 0 });\n\n    useEffect(() => {\n        // In a real app, we would fetch these from an API\n        setStats({ active: 24, completed: 12, pending: 8, urgent: 4 });\n    }, []);\n\n    return (\n        <div className=\"dashboard-view animate-fade-in\">\n            <div className=\"stats-grid\">\n                <div className=\"stat-card blue\">\n                    <div className=\"stat-icon\"><BarChart3 /></div>\n                    <div className=\"stat-info\">\n                        <h3>Total Active Jobs</h3>\n                        <p className=\"value\">{stats.active}</p>\n                    </div>\n                </div>\n                <div className=\"stat-card green\">\n                    <div className=\"stat-icon\"><CheckCircle2 /></div>\n                    <div className=\"stat-info\">\n                        <h3>Completed Today</h3>\n                        <p className=\"value\">{stats.completed}</p>\n                    </div>\n                </div>\n                <div className=\"stat-card orange\">\n                    <div className=\"stat-icon\"><Clock /></div>\n                    <div className=\"stat-info\">\n                        <h3>Pending Delivery</h3>\n                        <p className=\"value\">{stats.pending}</p>\n                    </div>\n                </div>\n                <div className=\"stat-card red\">\n                    <div className=\"stat-icon\"><AlertCircle /></div>\n                    <div className=\"stat-info\">\n                        <h3>Urgent Work</h3>\n                        <p className=\"value\">{stats.urgent}</p>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"capacity-section\">\n                <h2>Team Capacity Overview</h2>\n                <div className=\"capacity-grid\">\n                    {teams.map(team => (\n                        <div key={team.id} className=\"team-capacity-card\">\n                            <div className=\"card-header\">\n                                <h4>{team.name}</h4>\n                                <span className=\"slots\">{team.capacity} Total Slots</span>\n                            </div>\n                            <div className=\"progress-bar\">\n                                <div className=\"progress-fill\" style={{ width: '75%' }}></div>\n                            </div>\n                            <div className=\"card-footer\">\n                                <span>3/4 Slots Used</span>\n                                <span className=\"status\">Optimal</span>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst AdvisorSheetsView = () => {\n    const advisors = ['Anish', 'Suraj', 'Rony'];\n    const [selectedAdvisor, setSelectedAdvisor] = useState('Anish');\n    const [entries, setEntries] = useState([]);\n    const [newEntry, setNewEntry] = useState({ job_card_no: '', customer_name: '', car_model: '', service: 'PPF' });\n\n    useEffect(() => {\n        fetchEntries();\n    }, [selectedAdvisor]);\n\n    const fetchEntries = async () => {\n        try {\n            const response = await api.get(`/forms/scheduling/advisor-sheets/?advisor=${selectedAdvisor}`);\n            // Assuming entries are stored in a specific format or we use assignments\n            // For simplicity, let's fetch assignments for this advisor's jobs if linked, \n            // but the model AdvisorSheet is more for totals. \n            // Let's use assignments for the list.\n            const assignments = await api.get('/forms/scheduling/assignments/');\n            setEntries(assignments.data.filter(a => a.notes.includes(selectedAdvisor))); // Mock filter for now\n        } catch (error) {\n            console.error('Error fetching advisor entries:', error);\n        }\n    };\n\n    const handleAdd = async () => {\n        try {\n            // In a real scenario, we create an assignment or a log\n            alert(`Entry for ${newEntry.job_card_no} saved to database.`);\n            setNewEntry({ job_card_no: '', customer_name: '', car_model: '', service: 'PPF' });\n        } catch (error) {\n            console.error('Error adding entry:', error);\n        }\n    };\n\n    return (\n        <div className=\"advisor-view animate-fade-in\">\n            <div className=\"advisor-tabs\">\n                {advisors.map(name => (\n                    <button\n                        key={name}\n                        className={`advisor-tab ${selectedAdvisor === name ? 'active' : ''}`}\n                        onClick={() => setSelectedAdvisor(name)}\n                    >\n                        {name}\n                    </button>\n                ))}\n            </div>\n            <div className=\"advisor-content\">\n                <div className=\"entry-form\">\n                    <h3>New Entry for {selectedAdvisor}</h3>\n                    <div className=\"form-grid\">\n                        <input type=\"text\" placeholder=\"Job Card #\" value={newEntry.job_card_no} onChange={e => setNewEntry({ ...newEntry, job_card_no: e.target.value })} />\n                        <input type=\"text\" placeholder=\"Customer Name\" value={newEntry.customer_name} onChange={e => setNewEntry({ ...newEntry, customer_name: e.target.value })} />\n                        <input type=\"text\" placeholder=\"Car Model\" value={newEntry.car_model} onChange={e => setNewEntry({ ...newEntry, car_model: e.target.value })} />\n                        <select value={newEntry.service} onChange={e => setNewEntry({ ...newEntry, service: e.target.value })}>\n                            <option>PPF Installation</option>\n                            <option>Ceramic Coating</option>\n                            <option>Detailing</option>\n                            <option>Painting</option>\n                        </select>\n                        <button className=\"btn-add\" onClick={handleAdd}><Plus size={18} /> Add to Schedule</button>\n                    </div>\n                </div>\n                <div className=\"jobs-table-container\">\n                    <table className=\"jobs-table\">\n                        <thead>\n                            <tr>\n                                <th>JC#</th>\n                                <th>Customer</th>\n                                <th>Car</th>\n                                <th>Service</th>\n                                <th>Status</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {entries.map((entry, idx) => (\n                                <tr key={idx}>\n                                    <td>{entry.job_card || 'N/A'}</td>\n                                    <td>{entry.notes.split('|')[0] || 'N/A'}</td>\n                                    <td>{entry.notes.split('|')[1] || 'N/A'}</td>\n                                    <td>{entry.team_name || 'N/A'}</td>\n                                    <td><span className=\"badge progress\">Assigned</span></td>\n                                    <td><button className=\"btn-icon\"><Trash2 size={16} /></button></td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst TeamView = ({ section, teams }) => {\n    const [assignments, setAssignments] = useState([]);\n\n    useEffect(() => {\n        fetchAssignments();\n    }, []);\n\n    const fetchAssignments = async () => {\n        try {\n            const resp = await api.get('/forms/scheduling/assignments/');\n            setAssignments(resp.data);\n        } catch (error) {\n            console.error('Error fetching assignments:', error);\n        }\n    };\n\n    const assignSlot = async (teamId, slotNum, isOvertime = false) => {\n        const jobCard = prompt(\"Enter Job Card ID (Number):\");\n        if (!jobCard) return;\n\n        try {\n            await api.post('/forms/scheduling/assignments/', {\n                team: teamId,\n                job_card: jobCard,\n                date: new Date().toISOString().split('T')[0],\n                slot_number: slotNum,\n                is_overtime: isOvertime,\n                notes: `Assigned to ${section}`\n            });\n            fetchAssignments();\n        } catch (error) {\n            alert(\"Error assigning slot. Make sure Job Card ID exists.\");\n        }\n    };\n\n    return (\n        <div className=\"team-view animate-fade-in\">\n            <h2>{section} Management</h2>\n            <div className=\"teams-grid\">\n                {teams.map(team => (\n                    <div key={team.id} className=\"team-container\">\n                        <h3>{team.name} - {team.leader}</h3>\n                        <div className=\"slots-container\">\n                            {[...Array(team.capacity)].map((_, i) => {\n                                const assigned = assignments.find(a => a.team === team.id && a.slot_number === i + 1 && !a.is_overtime);\n                                return (\n                                    <div key={i} className=\"slot\">\n                                        <span className=\"slot-num\">Slot {i + 1}</span>\n                                        <div className={`slot-content ${assigned ? 'filled' : 'empty'}`}>\n                                            {assigned ? (\n                                                <span>Job Card #{assigned.job_card}</span>\n                                            ) : (\n                                                <>\n                                                    <span>Empty Slot</span>\n                                                    <button className=\"btn-assign\" onClick={() => assignSlot(team.id, i + 1)}>Assign</button>\n                                                </>\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                            <div className=\"slot overtime\">\n                                <span className=\"slot-num\">O.T.</span>\n                                {(() => {\n                                    const assigned = assignments.find(a => a.team === team.id && a.is_overtime);\n                                    return (\n                                        <div className={`slot-content ${assigned ? 'filled' : 'empty'}`}>\n                                            {assigned ? (\n                                                <span>Job Card #{assigned.job_card}</span>\n                                            ) : (\n                                                <>\n                                                    <span>Empty Slot</span>\n                                                    <button className=\"btn-assign\" onClick={() => assignSlot(team.id, 99, true)}>Assign</button>\n                                                </>\n                                            )}\n                                        </div>\n                                    );\n                                })()}\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nconst DailyClosingView = () => {\n    const [closingData, setClosingData] = useState({\n        date: new Date().toISOString().split('T')[0],\n        total_jobs_received: 0,\n        total_jobs_delivered: 0,\n        revenue_daily: 0,\n        summary_notes: ''\n    });\n\n    const handleSave = async () => {\n        try {\n            await api.post('/forms/scheduling/daily-closing/', closingData);\n            alert('Daily report submitted successfully!');\n        } catch (error) {\n            console.error('Error saving closing data:', error);\n            alert('Failed to submit report.');\n        }\n    };\n\n    return (\n        <div className=\"closing-view animate-fade-in\">\n            <div className=\"closing-header\">\n                <h2>Daily Closing & Reporting</h2>\n                <button className=\"btn-close-day\" onClick={handleSave}><Save size={18} /> Close Day</button>\n            </div>\n            <div className=\"closing-grid\">\n                <div className=\"stats-panel\">\n                    <h3>Today's Performance</h3>\n                    <div className=\"closing-stats\">\n                        <div className=\"closing-stat\">\n                            <label>Jobs Received</label>\n                            <input\n                                type=\"number\"\n                                value={closingData.total_jobs_received}\n                                onChange={e => setClosingData({ ...closingData, total_jobs_received: e.target.value })}\n                            />\n                        </div>\n                        <div className=\"closing-stat\">\n                            <label>Jobs Delivered</label>\n                            <input\n                                type=\"number\"\n                                value={closingData.total_jobs_delivered}\n                                onChange={e => setClosingData({ ...closingData, total_jobs_delivered: e.target.value })}\n                            />\n                        </div>\n                        <div className=\"closing-stat\">\n                            <label>Revenue Today (AED)</label>\n                            <input\n                                type=\"number\"\n                                value={closingData.revenue_daily}\n                                onChange={e => setClosingData({ ...closingData, revenue_daily: e.target.value })}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"notes-panel\">\n                    <h3>Summary Notes</h3>\n                    <textarea\n                        placeholder=\"Major jobs completed, delays, staff issues, etc.\"\n                        value={closingData.summary_notes}\n                        onChange={e => setClosingData({ ...closingData, summary_notes: e.target.value })}\n                    ></textarea>\n                </div>\n            </div>\n            <div className=\"reporting-actions\">\n                <button className=\"btn-action\"><Printer size={18} /> Print Daily Report</button>\n                <button className=\"btn-action\"><Download size={18} /> Export Excel</button>\n                <button className=\"btn-action\"><Send size={18} /> Email Management</button>\n            </div>\n        </div>\n    );\n};\n\nconst PerformanceReportsView = () => {\n    const [period, setPeriod] = useState('daily');\n    const [reportData, setReportData] = useState(null);\n\n    useEffect(() => {\n        fetchReport();\n    }, [period]);\n\n    const fetchReport = async () => {\n        try {\n            const resp = await api.get(`/forms/scheduling/daily-closing/aggregation_report/?period=${period}`);\n            setReportData(resp.data);\n        } catch (error) {\n            console.error(\"error fetching report\", error);\n        }\n    };\n\n    return (\n        <div className=\"reports-view animate-fade-in\">\n            <div className=\"reports-controls\">\n                <h2>Performance Reports</h2>\n                <div className=\"period-selector\">\n                    {['daily', 'weekly', 'monthly', 'yearly'].map(p => (\n                        <button\n                            key={p}\n                            className={`period-btn ${period === p ? 'active' : ''}`}\n                            onClick={() => setPeriod(p)}\n                        >\n                            {p.toUpperCase()}\n                        </button>\n                    ))}\n                </div>\n            </div>\n\n            {Array.isArray(reportData) && reportData.length > 0 ? (\n                <div className=\"report-results\">\n                    <table className=\"report-table\">\n                        <thead>\n                            <tr>\n                                <th>Period</th>\n                                <th>Revenue</th>\n                                <th>Received</th>\n                                <th>Delivered</th>\n                                <th>Days Count</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {reportData.map((row, idx) => (\n                                <tr key={idx}>\n                                    <td>{new Date(row.period_label).toLocaleDateString([], {\n                                        year: 'numeric',\n                                        month: period === 'yearly' ? undefined : 'short'\n                                    })}</td>\n                                    <td className=\"revenue\">AED {row.total_revenue?.toLocaleString()}</td>\n                                    <td>{row.total_received}</td>\n                                    <td>{row.total_delivered}</td>\n                                    <td>{row.count}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            ) : reportData && !Array.isArray(reportData) ? (\n                <div className=\"report-summary-grid\">\n                    <div className=\"report-card\">\n                        <label>Total Revenue</label>\n                        <div className=\"val\">AED {reportData.total_revenue?.toLocaleString() || 0}</div>\n                    </div>\n                    <div className=\"report-card\">\n                        <label>Jobs Received</label>\n                        <div className=\"val\">{reportData.total_received || 0}</div>\n                    </div>\n                    <div className=\"report-card\">\n                        <label>Jobs Delivered</label>\n                        <div className=\"val\">{reportData.total_delivered || 0}</div>\n                    </div>\n                    <div className=\"report-card\">\n                        <label>Data Points</label>\n                        <div className=\"val\">{reportData.count || 0} Days</div>\n                    </div>\n                </div>\n            ) : <p className=\"no-data\">No data found for this period.</p>}\n\n            <div className=\"visual-hint\">\n                <p><TrendingUp size={16} /> Data is aggregated from end-of-day daily closing submissions.</p>\n            </div>\n        </div>\n    );\n};\n\nconst EmployeeReportView = () => {\n    const { user } = useAuth();\n    const [role, setRole] = useState('SALES');\n    const [report, setReport] = useState({\n        upsell_amount: 0,\n        upsell_count: 0,\n        complaints_received: 0,\n        complaints_resolved: 0,\n        new_bookings: 0,\n        collections_today: 0,\n        payments_processed: 0,\n        petty_cash_closing: 0,\n        workshop_delivery_count: 0,\n        qc_passed_count: 0,\n        tasks_completed: '',\n        notes: ''\n    });\n\n    const handleSave = async () => {\n        try {\n            await api.post('/forms/scheduling/employee-reports/', {\n                ...report,\n                user: user.id,\n                date: new Date().toISOString().split('T')[0],\n                role: role\n            });\n            alert('Staff report submitted successfully!');\n        } catch (error) {\n            console.error('Error saving report:', error);\n            alert('Failed to submit report. You might have already submitted today.');\n        }\n    };\n\n    return (\n        <div className=\"employee-report-view animate-fade-in\">\n            <div className=\"report-header\">\n                <h2>{user?.username || 'Employee'} - Daily Staff Report</h2>\n                <div className=\"role-selector\">\n                    <label>Reporting As:</label>\n                    <select value={role} onChange={e => setRole(e.target.value)}>\n                        <option value=\"SALES\">Sales / Advisor</option>\n                        <option value=\"ACCOUNTS\">Accounts / Finance</option>\n                        <option value=\"OPERATIONS\">Operations</option>\n                        <option value=\"GENERAL\">General Staff</option>\n                    </select>\n                </div>\n            </div>\n\n            <div className=\"report-container\">\n                <div className=\"report-main\">\n                    <div className=\"report-section\">\n                        <h3><ClipboardList size={18} /> Daily Tasks Completed</h3>\n                        <textarea\n                            placeholder=\"ListItem 1&#10;ListItem 2&#10;...\"\n                            value={report.tasks_completed}\n                            onChange={e => setReport({ ...report, tasks_completed: e.target.value })}\n                        />\n                    </div>\n\n                    {role === 'SALES' && (\n                        <div className=\"report-section role-specific animate-fade-in\">\n                            <h3><TrendingUp size={18} /> Sales & Customer Metrics</h3>\n                            <div className=\"form-grid-3\">\n                                <div className=\"field\">\n                                    <label>Upsell Amount (AED)</label>\n                                    <input type=\"number\" value={report.upsell_amount} onChange={e => setReport({ ...report, upsell_amount: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>Upsell Count</label>\n                                    <input type=\"number\" value={report.upsell_count} onChange={e => setReport({ ...report, upsell_count: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>New Bookings</label>\n                                    <input type=\"number\" value={report.new_bookings} onChange={e => setReport({ ...report, new_bookings: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>Complaints Recv</label>\n                                    <input type=\"number\" value={report.complaints_received} onChange={e => setReport({ ...report, complaints_received: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>Complaints Resolved</label>\n                                    <input type=\"number\" value={report.complaints_resolved} onChange={e => setReport({ ...report, complaints_resolved: e.target.value })} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {role === 'ACCOUNTS' && (\n                        <div className=\"report-section role-specific animate-fade-in\">\n                            <h3><DollarSign size={18} /> Financial Daily Closing</h3>\n                            <div className=\"form-grid-3\">\n                                <div className=\"field\">\n                                    <label>Total Collections</label>\n                                    <input type=\"number\" value={report.collections_today} onChange={e => setReport({ ...report, collections_today: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>Payments Processed</label>\n                                    <input type=\"number\" value={report.payments_processed} onChange={e => setReport({ ...report, payments_processed: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>Petty Cash Closing</label>\n                                    <input type=\"number\" value={report.petty_cash_closing} onChange={e => setReport({ ...report, petty_cash_closing: e.target.value })} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {role === 'OPERATIONS' && (\n                        <div className=\"report-section role-specific animate-fade-in\">\n                            <h3><Package size={18} /> Workshop Performance</h3>\n                            <div className=\"form-grid-3\">\n                                <div className=\"field\">\n                                    <label>Jobs Delivered</label>\n                                    <input type=\"number\" value={report.workshop_delivery_count} onChange={e => setReport({ ...report, workshop_delivery_count: e.target.value })} />\n                                </div>\n                                <div className=\"field\">\n                                    <label>QC Passed</label>\n                                    <input type=\"number\" value={report.qc_passed_count} onChange={e => setReport({ ...report, qc_passed_count: e.target.value })} />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    <div className=\"report-section\">\n                        <h3>Additional Notes</h3>\n                        <textarea\n                            placeholder=\"Any highlights or issues...\"\n                            value={report.notes}\n                            onChange={e => setReport({ ...report, notes: e.target.value })}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"report-sidebar\">\n                    <div className=\"submit-box\">\n                        <button className=\"btn-save-report\" onClick={handleSave}>\n                            <Save size={20} /> SUBMIT DAILY REPORT\n                        </button>\n                        <p className=\"hint\">Ensure all data is correct before submitting as per company policy.</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default SchedulePage;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\stock\\ProcurementManager.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchOrders` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  14 |\n  15 |     useEffect(() => {\n> 16 |         fetchOrders();\n     |         ^^^^^^^^^^^ `fetchOrders` accessed before it is declared\n  17 |     }, []);\n  18 |\n  19 |     const fetchOrders = async () => {\n\n  17 |     }, []);\n  18 |\n> 19 |     const fetchOrders = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 20 |         try {\n     | ^^^^^^^^^^^^^\n> 21 |             const res = await api.get('/forms/stock/api/purchase-orders/');\n     \n     | ^^^^^^^^^^^^^\n> 33 |         }\n     | ^^^^^^^^^^^^^\n> 34 |     };\n     | ^^^^^^^ `fetchOrders` is declared here\n  35 |\n  36 |     const getStatusStyle = (status) => {\n  37 |         switch (status) {","line":16,"column":9,"nodeType":null,"endLine":16,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    FileText, ShoppingCart, Clock, CheckCircle,\n    AlertCircle, Plus, Search, ChevronRight,\n    Truck, Package, ArrowRight, Download\n} from 'lucide-react';\n\nconst ProcurementManager = () => {\n    const [orders, setOrders] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [stats, setStats] = useState({ pending: 0, received: 0, total_val: 0 });\n\n    useEffect(() => {\n        fetchOrders();\n    }, []);\n\n    const fetchOrders = async () => {\n        try {\n            const res = await api.get('/forms/stock/api/purchase-orders/');\n            setOrders(res.data);\n\n            const pending = res.data.filter(o => o.status === 'DRAFT' || o.status === 'SENT').length;\n            const received = res.data.filter(o => o.status === 'RECEIVED' || o.status === 'COMPLETED').length;\n            const total = res.data.reduce((acc, o) => acc + parseFloat(o.total_amount), 0);\n\n            setStats({ pending, received, total_val: total });\n            setLoading(false);\n        } catch (err) {\n            console.error(\"Error fetching orders\", err);\n            setLoading(false);\n        }\n    };\n\n    const getStatusStyle = (status) => {\n        switch (status) {\n            case 'COMPLETED': return { color: '#10b981', bg: 'rgba(16, 185, 129, 0.1)' };\n            case 'RECEIVED': return { color: '#3b82f6', bg: 'rgba(59, 130, 246, 0.1)' };\n            case 'SENT': return { color: '#f59e0b', bg: 'rgba(245, 158, 11, 0.1)' };\n            case 'CANCELLED': return { color: '#f43f5e', bg: 'rgba(244, 63, 94, 0.1)' };\n            default: return { color: '#94a3b8', bg: 'rgba(148, 163, 184, 0.1)' };\n        }\n    };\n\n    return (\n        <div style={{ padding: '30px', maxWidth: '1400px', margin: '0 auto', animation: 'fadeIn 0.5s ease-out' }}>\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Procurement Workflow</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Purchase Orders</h1>\n                    <p style={{ color: '#94a3b8', fontSize: '14px', marginTop: '5px' }}>Track material acquisition and stock fulfillment.</p>\n                </div>\n                <button\n                    style={{\n                        display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px',\n                        background: 'rgba(176, 141, 87, 0.1)', color: '#b08d57', border: '1px solid #b08d57', borderRadius: '12px',\n                        fontWeight: '900', cursor: 'pointer', transition: 'all 0.3s ease'\n                    }}\n                >\n                    <Plus size={20} /> CREATE PO\n                </button>\n            </header>\n\n            {/* QUICK STATS */}\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '20px', marginBottom: '40px' }}>\n                <StatCard icon={<Clock color=\"#f59e0b\" />} label=\"Active Orders\" value={stats.pending} />\n                <StatCard icon={<CheckCircle color=\"#10b981\" />} label=\"Fulfilled\" value={stats.received} />\n                <StatCard icon={<ShoppingCart color=\"#3b82f6\" />} label=\"Commitment\" value={`AED ${stats.total_val.toLocaleString()}`} />\n                <StatCard icon={<Package color=\"#8b5cf6\" />} label=\"Total SKUs\" value={orders.length * 5} /> {/* Mock SKU count */}\n            </div>\n\n            <GlassCard style={{ padding: '0', overflow: 'hidden' }}>\n                <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                    <thead>\n                        <tr style={{ background: 'rgba(255,255,255,0.02)', borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\n                            <th style={thStyle}>PO NUMBER</th>\n                            <th style={thStyle}>SUPPLIER</th>\n                            <th style={thStyle}>ORDER DATE</th>\n                            <th style={thStyle}>STATUS</th>\n                            <th style={thStyle}>TOTAL (AED)</th>\n                            <th style={thStyle}>ACTIONS</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {orders.map(order => {\n                            const status = getStatusStyle(order.status);\n                            return (\n                                <tr key={order.id} style={trStyle}>\n                                    <td style={tdStyle}>\n                                        <div style={{ fontWeight: '900', color: '#fff' }}>{order.po_number}</div>\n                                        <div style={{ fontSize: '10px', color: '#64748b' }}>#{order.id}</div>\n                                    </td>\n                                    <td style={tdStyle}>\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                            <div style={{ width: '24px', height: '24px', borderRadius: '6px', background: 'rgba(255,255,255,0.05)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                                                <Truck size={14} color=\"#b08d57\" />\n                                            </div>\n                                            <span style={{ fontWeight: '700' }}>{order.supplier_name}</span>\n                                        </div>\n                                    </td>\n                                    <td style={tdStyle}>{order.order_date}</td>\n                                    <td style={tdStyle}>\n                                        <span style={{\n                                            padding: '4px 12px', borderRadius: '20px', fontSize: '10px', fontWeight: '900',\n                                            background: status.bg, color: status.color\n                                        }}>\n                                            {order.status}\n                                        </span>\n                                    </td>\n                                    <td style={tdStyle}>\n                                        <div style={{ fontWeight: '900', color: '#b08d57' }}>\n                                            {parseFloat(order.total_amount).toLocaleString()}\n                                        </div>\n                                    </td>\n                                    <td style={tdStyle}>\n                                        <div style={{ display: 'flex', gap: '8px' }}>\n                                            <button style={actionBtnStyle} title=\"View Details\">\n                                                <ChevronRight size={16} />\n                                            </button>\n                                            <button style={actionBtnStyle} title=\"Download PDF\">\n                                                <Download size={16} />\n                                            </button>\n                                        </div>\n                                    </td>\n                                </tr>\n                            );\n                        })}\n                    </tbody>\n                </table>\n                {orders.length === 0 && !loading && (\n                    <div style={{ padding: '60px', textAlign: 'center', color: '#64748b' }}>\n                        <ShoppingCart size={48} style={{ marginBottom: '15px', opacity: 0.2 }} />\n                        <p>No purchase orders found. Start by creating your first PO.</p>\n                    </div>\n                )}\n            </GlassCard>\n        </div>\n    );\n};\n\nconst StatCard = ({ icon, label, value }) => (\n    <GlassCard style={{ padding: '20px', display: 'flex', alignItems: 'center', gap: '20px' }}>\n        <div style={{ width: '40px', height: '40px', borderRadius: '10px', background: 'rgba(255,255,255,0.03)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n            {icon}\n        </div>\n        <div>\n            <div style={{ fontSize: '11px', color: '#94a3b8', fontWeight: '700', textTransform: 'uppercase' }}>{label}</div>\n            <div style={{ fontSize: '18px', fontWeight: '900', color: '#fff', marginTop: '2px' }}>{value}</div>\n        </div>\n    </GlassCard>\n);\n\nconst thStyle = {\n    textAlign: 'left',\n    padding: '15px 25px',\n    fontSize: '11px',\n    fontWeight: '900',\n    color: '#64748b',\n    textTransform: 'uppercase',\n    letterSpacing: '1px'\n};\n\nconst trStyle = {\n    borderBottom: '1px solid rgba(255,255,255,0.02)',\n    transition: 'background 0.2s'\n};\n\nconst tdStyle = {\n    padding: '20px 25px',\n    fontSize: '13px',\n    color: '#94a3b8'\n};\n\nconst actionBtnStyle = {\n    background: 'rgba(255,255,255,0.03)',\n    border: '1px solid rgba(255,255,255,0.05)',\n    borderRadius: '8px',\n    width: '32px',\n    height: '32px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    color: '#94a3b8',\n    transition: 'all 0.2s'\n};\n\nexport default ProcurementManager;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\stock\\StockForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\stock\\StockList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\stock\\StockMovement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\stock\\StockScanner.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'scannedResult' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"scannedResult"},"fix":{"range":[339,352],"text":""},"desc":"Remove unused variable 'scannedResult'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'onScanSuccess'. Either include it or remove the dependency array.","line":32,"column":8,"nodeType":"ArrayExpression","endLine":32,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [isScanning, mode, onScanSuccess]","fix":{"range":[1158,1176],"text":"[isScanning, mode, onScanSuccess]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":41,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[1428,1433],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport { Camera, RefreshCw, ArrowUp, ArrowDown, Package, X, CheckCircle, AlertCircle } from 'lucide-react';\nimport { Html5QrcodeScanner } from 'html5-qrcode';\n\nconst StockScanner = () => {\n    const [scannedResult, setScannedResult] = useState(null);\n    const [mode, setMode] = useState('EXIT'); // EXIT (Consumption) or ENTRY (Restock)\n    const [isScanning, setIsScanning] = useState(false);\n    const [lastLog, setLastLog] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        let scanner = null;\n        if (isScanning) {\n            scanner = new Html5QrcodeScanner(\"reader\", {\n                fps: 10,\n                qrbox: { width: 250, height: 250 }\n            }, false);\n\n            scanner.render(onScanSuccess, onScanFailure);\n        }\n\n        return () => {\n            if (scanner) {\n                scanner.clear().catch(error => {\n                    console.error(\"Failed to clear scanner\", error);\n                });\n            }\n        };\n    }, [isScanning, mode]);\n\n    async function onScanSuccess(decodedText) {\n        // Expected format: SKU_123 or just SKU\n        setScannedResult(decodedText);\n        setIsScanning(false);\n        await processStockMovement(decodedText);\n    }\n\n    function onScanFailure(error) {\n        // Usually too noisy to log, but good for debugging\n        // console.warn(`Code scan error = ${error}`);\n    }\n\n    const processStockMovement = async (sku) => {\n        setLoading(true);\n        try {\n            // Find item by SKU\n            const itemRes = await api.get(`/forms/stock/api/items/?sku=${sku}`);\n            const item = itemRes.data.find(i => i.sku === sku);\n\n            if (!item) {\n                setLastLog({ status: 'ERROR', message: `SKU ${sku} not found in registry.` });\n                setLoading(false);\n                return;\n            }\n\n            // Record Movement\n            const movementData = {\n                item: item.id,\n                type: mode === 'ENTRY' ? 'IN' : 'OUT',\n                quantity: mode === 'ENTRY' ? 1 : 1, // Defaulting to 1 for quick scans\n                reason: mode === 'ENTRY' ? 'QR Restock' : 'QR Consumption',\n                recorded_by: 'Staff (QR)'\n            };\n\n            await api.post('/forms/stock/api/movements/', movementData);\n            setLastLog({\n                status: 'SUCCESS',\n                message: `${mode === 'ENTRY' ? 'Received' : 'Distributed'} 1 unit of ${item.name}`,\n                time: new Date().toLocaleTimeString()\n            });\n        } catch (err) {\n            console.error(\"QR Sync Error\", err);\n            setLastLog({ status: 'ERROR', message: 'Failed to sync with backend.' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div style={{ padding: '30px', maxWidth: '800px', margin: '0 auto', animation: 'fadeIn 0.5s ease-out' }}>\n            <header style={{ textAlign: 'center', marginBottom: '40px' }}>\n                <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Precision Tracking</div>\n                <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Smart Scanner</h1>\n                <p style={{ color: '#94a3b8', fontSize: '14px', marginTop: '5px' }}>Scan item QR for rapid entry or exit.</p>\n            </header>\n\n            <div style={{ display: 'flex', justifyContent: 'center', gap: '20px', marginBottom: '30px' }}>\n                <button\n                    onClick={() => { setMode('ENTRY'); setLastLog(null); }}\n                    style={{ ...modeBtnStyle, background: mode === 'ENTRY' ? '#10b981' : 'rgba(255,255,255,0.05)', color: mode === 'ENTRY' ? '#000' : '#94a3b8' }}\n                >\n                    <ArrowUp size={18} /> STOCK ENTRY\n                </button>\n                <button\n                    onClick={() => { setMode('EXIT'); setLastLog(null); }}\n                    style={{ ...modeBtnStyle, background: mode === 'EXIT' ? '#f59e0b' : 'rgba(255,255,255,0.05)', color: mode === 'EXIT' ? '#000' : '#94a3b8' }}\n                >\n                    <ArrowDown size={18} /> STOCK EXIT\n                </button>\n            </div>\n\n            <GlassCard style={{ padding: '40px', textAlign: 'center', border: mode === 'ENTRY' ? '2px solid rgba(16, 185, 129, 0.3)' : '2px solid rgba(245, 158, 11, 0.3)' }}>\n                {!isScanning ? (\n                    <div style={{ padding: '40px 0' }}>\n                        <div style={{ width: '100px', height: '100px', borderRadius: '50%', background: mode === 'ENTRY' ? 'rgba(16, 185, 129, 0.1)' : 'rgba(245, 158, 11, 0.1)', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', marginBottom: '20px', color: mode === 'ENTRY' ? '#10b981' : '#f59e0b' }}>\n                            <Camera size={48} />\n                        </div>\n                        <h2 style={{ color: '#fff' }}>Ready to Scan</h2>\n                        <button\n                            onClick={() => setIsScanning(true)}\n                            style={{ padding: '12px 30px', background: '#b08d57', color: '#000', border: 'none', borderRadius: '8px', fontWeight: '900', cursor: 'pointer', marginTop: '20px' }}\n                        >\n                            ACTIVATE CAMERA\n                        </button>\n                    </div>\n                ) : (\n                    <div id=\"reader\" style={{ width: '100%', borderRadius: '12px', overflow: 'hidden', background: '#000' }}></div>\n                )}\n\n                {loading && (\n                    <div style={{ marginTop: '20px', color: '#b08d57', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\n                        <RefreshCw className=\"spin\" size={16} /> Syncing Inventory...\n                    </div>\n                )}\n\n                {lastLog && (\n                    <div style={{\n                        marginTop: '30px', padding: '20px', borderRadius: '12px',\n                        background: lastLog.status === 'SUCCESS' ? 'rgba(16, 185, 129, 0.1)' : 'rgba(244, 63, 94, 0.1)',\n                        border: `1px solid ${lastLog.status === 'SUCCESS' ? 'rgba(16, 185, 129, 0.2)' : 'rgba(244, 63, 94, 0.2)'}`,\n                        display: 'flex', alignItems: 'center', gap: '15px', textAlign: 'left'\n                    }}>\n                        {lastLog.status === 'SUCCESS' ? <CheckCircle color=\"#10b981\" /> : <AlertCircle color=\"#f43f5e\" />}\n                        <div>\n                            <div style={{ color: '#fff', fontSize: '14px', fontWeight: '700' }}>{lastLog.message}</div>\n                            {lastLog.time && <div style={{ color: '#94a3b8', fontSize: '11px' }}>Log synced at {lastLog.time}</div>}\n                        </div>\n                        {lastLog.status === 'SUCCESS' && (\n                            <button\n                                onClick={() => setIsScanning(true)}\n                                style={{ marginLeft: 'auto', background: 'transparent', border: '1px solid rgba(255,255,255,0.1)', color: '#fff', padding: '5px 12px', borderRadius: '6px', fontSize: '11px', cursor: 'pointer' }}\n                            >\n                                SCAN NEXT\n                            </button>\n                        )}\n                    </div>\n                )}\n            </GlassCard>\n\n            <style>{`\n                .spin { animation: spin 1s linear infinite; }\n                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n            `}</style>\n        </div>\n    );\n};\n\nconst modeBtnStyle = {\n    flex: 1,\n    padding: '15px',\n    borderRadius: '12px',\n    border: 'none',\n    fontWeight: '900',\n    fontSize: '14px',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: '10px',\n    transition: 'all 0.3s ease'\n};\n\nexport default StockScanner;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\stock\\SupplierList.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[388,395],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchSuppliers` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  15 |\n  16 |     useEffect(() => {\n> 17 |         fetchSuppliers();\n     |         ^^^^^^^^^^^^^^ `fetchSuppliers` accessed before it is declared\n  18 |     }, []);\n  19 |\n  20 |     const fetchSuppliers = async () => {\n\n  18 |     }, []);\n  19 |\n> 20 |     const fetchSuppliers = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 21 |         try {\n     | ^^^^^^^^^^^^^\n> 22 |             const res = await api.get('/forms/stock/api/suppliers/');\n     | ^^^^^^^^^^^^^\n> 23 |             setSuppliers(res.data);\n     | ^^^^^^^^^^^^^\n> 24 |             setLoading(false);\n     | ^^^^^^^^^^^^^\n> 25 |         } catch (err) {\n     | ^^^^^^^^^^^^^\n> 26 |             console.error(\"Error fetching suppliers\", err);\n     | ^^^^^^^^^^^^^\n> 27 |             setLoading(false);\n     | ^^^^^^^^^^^^^\n> 28 |         }\n     | ^^^^^^^^^^^^^\n> 29 |     };\n     | ^^^^^^^ `fetchSuppliers` is declared here\n  30 |\n  31 |     const categories = ['ALL', 'PPF', 'CERAMIC', 'CHEMICALS', 'TOOLS', 'GENERAL'];\n  32 |","line":17,"column":9,"nodeType":null,"endLine":17,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport api from '../../api/axios';\nimport GlassCard from '../../components/GlassCard';\nimport {\n    Users, Phone, Mail, MapPin, Plus,\n    Search, Filter, ExternalLink, ShieldCheck,\n    Truck, MoreVertical, Edit2, Trash2\n} from 'lucide-react';\n\nconst SupplierList = () => {\n    const [suppliers, setSuppliers] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [filterCategory, setFilterCategory] = useState('ALL');\n\n    useEffect(() => {\n        fetchSuppliers();\n    }, []);\n\n    const fetchSuppliers = async () => {\n        try {\n            const res = await api.get('/forms/stock/api/suppliers/');\n            setSuppliers(res.data);\n            setLoading(false);\n        } catch (err) {\n            console.error(\"Error fetching suppliers\", err);\n            setLoading(false);\n        }\n    };\n\n    const categories = ['ALL', 'PPF', 'CERAMIC', 'CHEMICALS', 'TOOLS', 'GENERAL'];\n\n    const filteredSuppliers = suppliers.filter(s => {\n        const matchesSearch = s.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            s.contact_person.toLowerCase().includes(searchTerm.toLowerCase());\n        const matchesCat = filterCategory === 'ALL' || s.category === filterCategory;\n        return matchesSearch && matchesCat;\n    });\n\n    return (\n        <div style={{ padding: '30px', maxWidth: '1400px', margin: '0 auto', animation: 'fadeIn 0.5s ease-out' }}>\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px' }}>\n                <div>\n                    <div style={{ fontSize: '10px', color: '#b08d57', fontWeight: '800', letterSpacing: '2px', textTransform: 'uppercase' }}>Procurement & Supply Chain</div>\n                    <h1 style={{ fontFamily: 'Outfit, sans-serif', color: '#fff', fontSize: '2.5rem', fontWeight: '900', margin: 0 }}>Supplier Registry</h1>\n                    <p style={{ color: '#94a3b8', fontSize: '14px', marginTop: '5px' }}>Manage all active vendors and material partners.</p>\n                </div>\n                <button\n                    style={{\n                        display: 'flex', alignItems: 'center', gap: '8px', padding: '12px 25px',\n                        background: '#b08d57', color: '#000', border: 'none', borderRadius: '12px',\n                        fontWeight: '900', cursor: 'pointer', transition: 'all 0.3s ease'\n                    }}\n                >\n                    <Plus size={20} /> REGISTER SUPPLIER\n                </button>\n            </header>\n\n            <div style={{ display: 'flex', gap: '15px', marginBottom: '30px' }}>\n                <div style={{ position: 'relative', flex: 1 }}>\n                    <Search style={{ position: 'absolute', left: '15px', top: '50%', transform: 'translateY(-50%)', color: '#64748b' }} size={18} />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Search by name or contact person...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        style={filterInputStyle}\n                    />\n                </div>\n                <div style={{ display: 'flex', gap: '8px' }}>\n                    {categories.map(cat => (\n                        <button\n                            key={cat}\n                            onClick={() => setFilterCategory(cat)}\n                            style={{\n                                ...catBtnStyle,\n                                background: filterCategory === cat ? 'rgba(176, 141, 87, 0.2)' : 'rgba(255, 255, 255, 0.05)',\n                                borderColor: filterCategory === cat ? '#b08d57' : 'rgba(255, 255, 255, 0.1)',\n                                color: filterCategory === cat ? '#b08d57' : '#94a3b8'\n                            }}\n                        >\n                            {cat}\n                        </button>\n                    ))}\n                </div>\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(350px, 1fr))', gap: '25px' }}>\n                {filteredSuppliers.map(supplier => (\n                    <GlassCard key={supplier.id} style={{ padding: '25px', position: 'relative' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>\n                            <div style={{ width: '50px', height: '50px', borderRadius: '12px', background: 'rgba(176,141,87,0.1)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#b08d57' }}>\n                                <Truck size={28} />\n                            </div>\n                            <div style={{ display: 'flex', gap: '5px' }}>\n                                <button style={iconBtnStyle}><Edit2 size={16} /></button>\n                                <button style={iconBtnStyle}><Trash2 size={16} color=\"#f43f5e\" /></button>\n                            </div>\n                        </div>\n\n                        <h3 style={{ margin: '0 0 5px 0', fontSize: '18px', color: '#fff' }}>{supplier.name}</h3>\n                        <div style={{ fontSize: '12px', color: '#b08d57', fontWeight: '800', marginBottom: '20px' }}>{supplier.category || 'GENERAL SUPPLIER'}</div>\n\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n                            <div style={infoRowStyle}>\n                                <Users size={14} color=\"#64748b\" />\n                                <span>{supplier.contact_person || 'No Contact Person'}</span>\n                            </div>\n                            <div style={infoRowStyle}>\n                                <Phone size={14} color=\"#64748b\" />\n                                <span>{supplier.phone || 'N/A'}</span>\n                            </div>\n                            <div style={infoRowStyle}>\n                                <Mail size={14} color=\"#64748b\" />\n                                <span>{supplier.email || 'N/A'}</span>\n                            </div>\n                            <div style={infoRowStyle}>\n                                <ShieldCheck size={14} color=\"#64748b\" />\n                                <span>Trade License: {supplier.trade_license || 'Not Provided'}</span>\n                            </div>\n                        </div>\n\n                        <div style={{ marginTop: '25px', display: 'flex', gap: '10px' }}>\n                            <button style={cardActionBtn}>VIEW HISTORY</button>\n                            <button style={{ ...cardActionBtn, background: 'rgba(255,255,255,0.05)' }}>\n                                <ExternalLink size={14} /> SITE\n                            </button>\n                        </div>\n                    </GlassCard>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nconst filterInputStyle = {\n    width: '100%',\n    background: 'rgba(255, 255, 255, 0.05)',\n    border: '1px solid rgba(255, 255, 255, 0.1)',\n    borderRadius: '12px',\n    padding: '12px 12px 12px 45px',\n    color: '#fff',\n    fontSize: '14px',\n    outline: 'none',\n    transition: 'all 0.3s'\n};\n\nconst catBtnStyle = {\n    padding: '8px 16px',\n    borderRadius: '8px',\n    border: '1px solid',\n    fontSize: '12px',\n    fontWeight: '700',\n    cursor: 'pointer',\n    transition: 'all 0.2s'\n};\n\nconst infoRowStyle = {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '12px',\n    fontSize: '13px',\n    color: '#94a3b8'\n};\n\nconst iconBtnStyle = {\n    background: 'rgba(255,255,255,0.05)',\n    border: 'none',\n    width: '32px',\n    height: '32px',\n    borderRadius: '8px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    color: '#94a3b8'\n};\n\nconst cardActionBtn = {\n    flex: 1,\n    padding: '10px',\n    borderRadius: '8px',\n    border: '1px solid rgba(255,255,255,0.1)',\n    background: 'transparent',\n    color: '#fff',\n    fontSize: '12px',\n    fontWeight: '800',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: '8px'\n};\n\nexport default SupplierList;\n","usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\workshop\\WorkshopDelayForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\workshop\\WorkshopHub.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\src\\pages\\workshop\\WorkshopIncidentForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"R:\\webplot\\frontend\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
